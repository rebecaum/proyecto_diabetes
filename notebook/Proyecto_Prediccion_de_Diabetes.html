<!DOCTYPE html>

<html lang="en">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Proyecto_Prediccion_de_Diabetes</title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script><script>
(function() {
  function addWidgetsRenderer() {
    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var scriptElement = document.createElement('script');
    
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        
        var widgetRendererSrc = 'https://unpkg.com/@jupyter-js-widgets@*/dist/embed.js';
        
      }
    } catch(e) {}

    scriptElement.src = widgetRendererSrc;
    document.body.appendChild(scriptElement);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>
<style type="text/css">
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
  </style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
 * Mozilla scrollbar styling
 */

/* use standard opaque scrollbars for most nodes */
[data-jp-theme-scrollbars='true'] {
  scrollbar-color: rgb(var(--jp-scrollbar-thumb-color))
    var(--jp-scrollbar-background-color);
}

/* for code nodes, use a transparent style of scrollbar. These selectors
 * will match lower in the tree, and so will override the above */
[data-jp-theme-scrollbars='true'] .CodeMirror-hscrollbar,
[data-jp-theme-scrollbars='true'] .CodeMirror-vscrollbar {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
}

/* tiny scrollbar */

.jp-scrollbar-tiny {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
  scrollbar-width: thin;
}

/* tiny scrollbar */

.jp-scrollbar-tiny::-webkit-scrollbar,
.jp-scrollbar-tiny::-webkit-scrollbar-corner {
  background-color: transparent;
  height: 4px;
  width: 4px;
}

.jp-scrollbar-tiny::-webkit-scrollbar-thumb {
  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:horizontal {
  border-left: 0 solid transparent;
  border-right: 0 solid transparent;
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:vertical {
  border-top: 0 solid transparent;
  border-bottom: 0 solid transparent;
}

/*
 * Lumino
 */

.lm-ScrollBar[data-orientation='horizontal'] {
  min-height: 16px;
  max-height: 16px;
  min-width: 45px;
  border-top: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] {
  min-width: 16px;
  max-width: 16px;
  min-height: 45px;
  border-left: 1px solid #a0a0a0;
}

.lm-ScrollBar-button {
  background-color: #f0f0f0;
  background-position: center center;
  min-height: 15px;
  max-height: 15px;
  min-width: 15px;
  max-width: 15px;
}

.lm-ScrollBar-button:hover {
  background-color: #dadada;
}

.lm-ScrollBar-button.lm-mod-active {
  background-color: #cdcdcd;
}

.lm-ScrollBar-track {
  background: #f0f0f0;
}

.lm-ScrollBar-thumb {
  background: #cdcdcd;
}

.lm-ScrollBar-thumb:hover {
  background: #bababa;
}

.lm-ScrollBar-thumb.lm-mod-active {
  background: #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal'] .lm-ScrollBar-thumb {
  height: 100%;
  min-width: 15px;
  border-left: 1px solid #a0a0a0;
  border-right: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] .lm-ScrollBar-thumb {
  width: 100%;
  min-height: 15px;
  border-top: 1px solid #a0a0a0;
  border-bottom: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-left);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-right);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-up);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-down);
  background-size: 17px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Widget {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
}

.lm-Widget.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.lm-AccordionPanel[data-orientation='horizontal'] > .lm-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  display: flex;
  flex-direction: column;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-CommandPalette-search {
  flex: 0 0 auto;
}

.lm-CommandPalette-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  min-height: 0;
  overflow: auto;
  list-style-type: none;
}

.lm-CommandPalette-header {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-CommandPalette-item {
  display: flex;
  flex-direction: row;
}

.lm-CommandPalette-itemIcon {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemContent {
  flex: 1 1 auto;
  overflow: hidden;
}

.lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemLabel {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-close-icon {
  border: 1px solid transparent;
  background-color: transparent;
  position: absolute;
  z-index: 1;
  right: 3%;
  top: 0;
  bottom: 0;
  margin: auto;
  padding: 7px 0;
  display: none;
  vertical-align: middle;
  outline: 0;
  cursor: pointer;
}
.lm-close-icon:after {
  content: 'X';
  display: block;
  width: 15px;
  height: 15px;
  text-align: center;
  color: #000;
  font-weight: normal;
  font-size: 12px;
  cursor: pointer;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-DockPanel {
  z-index: 0;
}

.lm-DockPanel-widget {
  z-index: 0;
}

.lm-DockPanel-tabBar {
  z-index: 1;
}

.lm-DockPanel-handle {
  z-index: 2;
}

.lm-DockPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-DockPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-DockPanel-handle[data-orientation='horizontal'] {
  cursor: ew-resize;
}

.lm-DockPanel-handle[data-orientation='vertical'] {
  cursor: ns-resize;
}

.lm-DockPanel-handle[data-orientation='horizontal']:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-DockPanel-handle[data-orientation='vertical']:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

.lm-DockPanel-overlay {
  z-index: 3;
  box-sizing: border-box;
  pointer-events: none;
}

.lm-DockPanel-overlay.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Menu {
  z-index: 10000;
  position: absolute;
  white-space: nowrap;
  overflow-x: hidden;
  overflow-y: auto;
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-Menu-content {
  margin: 0;
  padding: 0;
  display: table;
  list-style-type: none;
}

.lm-Menu-item {
  display: table-row;
}

.lm-Menu-item.lm-mod-hidden,
.lm-Menu-item.lm-mod-collapsed {
  display: none !important;
}

.lm-Menu-itemIcon,
.lm-Menu-itemSubmenuIcon {
  display: table-cell;
  text-align: center;
}

.lm-Menu-itemLabel {
  display: table-cell;
  text-align: left;
}

.lm-Menu-itemShortcut {
  display: table-cell;
  text-align: right;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-MenuBar {
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-MenuBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: row;
  list-style-type: none;
}

.lm-MenuBar-item {
  box-sizing: border-box;
}

.lm-MenuBar-itemIcon,
.lm-MenuBar-itemLabel {
  display: inline-block;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-ScrollBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-ScrollBar[data-orientation='horizontal'] {
  flex-direction: row;
}

.lm-ScrollBar[data-orientation='vertical'] {
  flex-direction: column;
}

.lm-ScrollBar-button {
  box-sizing: border-box;
  flex: 0 0 auto;
}

.lm-ScrollBar-track {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  flex: 1 1 auto;
}

.lm-ScrollBar-thumb {
  box-sizing: border-box;
  position: absolute;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-SplitPanel-child {
  z-index: 0;
}

.lm-SplitPanel-handle {
  z-index: 1;
}

.lm-SplitPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-SplitPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {
  cursor: ew-resize;
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {
  cursor: ns-resize;
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-TabBar[data-orientation='horizontal'] {
  flex-direction: row;
  align-items: flex-end;
}

.lm-TabBar[data-orientation='vertical'] {
  flex-direction: column;
  align-items: flex-end;
}

.lm-TabBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex: 1 1 auto;
  list-style-type: none;
}

.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {
  flex-direction: row;
}

.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {
  flex-direction: column;
}

.lm-TabBar-tab {
  display: flex;
  flex-direction: row;
  box-sizing: border-box;
  overflow: hidden;
  touch-action: none; /* Disable native Drag/Drop */
}

.lm-TabBar-tabIcon,
.lm-TabBar-tabCloseIcon {
  flex: 0 0 auto;
}

.lm-TabBar-tabLabel {
  flex: 1 1 auto;
  overflow: hidden;
  white-space: nowrap;
}

.lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
}

.lm-TabBar-tab.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar-addButton.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {
  position: relative;
}

.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {
  left: 0;
  transition: left 150ms ease;
}

.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {
  top: 0;
  transition: top 150ms ease;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {
  transition: none;
}

.lm-TabBar-tabLabel .lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
  background: inherit;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabPanel-tabBar {
  z-index: 1;
}

.lm-TabPanel-stackedPanel {
  z-index: 0;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapse {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.jp-Collapse-header {
  padding: 1px 12px;
  background-color: var(--jp-layout-color1);
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  align-items: center;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  text-transform: uppercase;
  user-select: none;
}

.jp-Collapser-icon {
  height: 16px;
}

.jp-Collapse-header-collapsed .jp-Collapser-icon {
  transform: rotate(-90deg);
  margin: auto 0;
}

.jp-Collapser-title {
  line-height: 25px;
}

.jp-Collapse-contents {
  padding: 0 12px;
  background-color: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* This file was auto-generated by ensureUiComponents() in @jupyterlab/buildutils */

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

/* Icons urls */

:root {
  --jp-icon-add-above: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5MikiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik00Ljc1IDQuOTMwNjZINi42MjVWNi44MDU2NkM2LjYyNSA3LjAxMTkxIDYuNzkzNzUgNy4xODA2NiA3IDcuMTgwNjZDNy4yMDYyNSA3LjE4MDY2IDcuMzc1IDcuMDExOTEgNy4zNzUgNi44MDU2NlY0LjkzMDY2SDkuMjVDOS40NTYyNSA0LjkzMDY2IDkuNjI1IDQuNzYxOTEgOS42MjUgNC41NTU2NkM5LjYyNSA0LjM0OTQxIDkuNDU2MjUgNC4xODA2NiA5LjI1IDQuMTgwNjZINy4zNzVWMi4zMDU2NkM3LjM3NSAyLjA5OTQxIDcuMjA2MjUgMS45MzA2NiA3IDEuOTMwNjZDNi43OTM3NSAxLjkzMDY2IDYuNjI1IDIuMDk5NDEgNi42MjUgMi4zMDU2NlY0LjE4MDY2SDQuNzVDNC41NDM3NSA0LjE4MDY2IDQuMzc1IDQuMzQ5NDEgNC4zNzUgNC41NTU2NkM0LjM3NSA0Ljc2MTkxIDQuNTQzNzUgNC45MzA2NiA0Ljc1IDQuOTMwNjZaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC43Ii8+CjwvZz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjUgOS41VjExLjVMMi41IDExLjVWOS41TDExLjUgOS41Wk0xMiA4QzEyLjU1MjMgOCAxMyA4LjQ0NzcyIDEzIDlWMTJDMTMgMTIuNTUyMyAxMi41NTIzIDEzIDEyIDEzTDIgMTNDMS40NDc3MiAxMyAxIDEyLjU1MjMgMSAxMlY5QzEgOC40NDc3MiAxLjQ0NzcxIDggMiA4TDEyIDhaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5MiI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KC0xIDAgMCAxIDEwIDEuNTU1NjYpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==);
  --jp-icon-add-below: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5OCkiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik05LjI1IDEwLjA2OTNMNy4zNzUgMTAuMDY5M0w3LjM3NSA4LjE5NDM0QzcuMzc1IDcuOTg4MDkgNy4yMDYyNSA3LjgxOTM0IDcgNy44MTkzNEM2Ljc5Mzc1IDcuODE5MzQgNi42MjUgNy45ODgwOSA2LjYyNSA4LjE5NDM0TDYuNjI1IDEwLjA2OTNMNC43NSAxMC4wNjkzQzQuNTQzNzUgMTAuMDY5MyA0LjM3NSAxMC4yMzgxIDQuMzc1IDEwLjQ0NDNDNC4zNzUgMTAuNjUwNiA0LjU0Mzc1IDEwLjgxOTMgNC43NSAxMC44MTkzTDYuNjI1IDEwLjgxOTNMNi42MjUgMTIuNjk0M0M2LjYyNSAxMi45MDA2IDYuNzkzNzUgMTMuMDY5MyA3IDEzLjA2OTNDNy4yMDYyNSAxMy4wNjkzIDcuMzc1IDEyLjkwMDYgNy4zNzUgMTIuNjk0M0w3LjM3NSAxMC44MTkzTDkuMjUgMTAuODE5M0M5LjQ1NjI1IDEwLjgxOTMgOS42MjUgMTAuNjUwNiA5LjYyNSAxMC40NDQzQzkuNjI1IDEwLjIzODEgOS40NTYyNSAxMC4wNjkzIDkuMjUgMTAuMDY5M1oiIGZpbGw9IiM2MTYxNjEiIHN0cm9rZT0iIzYxNjE2MSIgc3Ryb2tlLXdpZHRoPSIwLjciLz4KPC9nPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMi41IDUuNUwyLjUgMy41TDExLjUgMy41TDExLjUgNS41TDIuNSA1LjVaTTIgN0MxLjQ0NzcyIDcgMSA2LjU1MjI4IDEgNkwxIDNDMSAyLjQ0NzcyIDEuNDQ3NzIgMiAyIDJMMTIgMkMxMi41NTIzIDIgMTMgMi40NDc3MiAxMyAzTDEzIDZDMTMgNi41NTIyOSAxMi41NTIzIDcgMTIgN0wyIDdaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5OCI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KDEgMS43NDg0NmUtMDcgMS43NDg0NmUtMDcgLTEgNCAxMy40NDQzKSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=);
  --jp-icon-add: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bell: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiPgogICA8cGF0aCBjbGFzcz0ianAtaWNvbjIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzMzMzMzIgogICAgICBkPSJtOCAwLjI5Yy0xLjQgMC0yLjcgMC43My0zLjYgMS44LTEuMiAxLjUtMS40IDMuNC0xLjUgNS4yLTAuMTggMi4yLTAuNDQgNC0yLjMgNS4zbDAuMjggMS4zaDVjMC4wMjYgMC42NiAwLjMyIDEuMSAwLjcxIDEuNSAwLjg0IDAuNjEgMiAwLjYxIDIuOCAwIDAuNTItMC40IDAuNi0xIDAuNzEtMS41aDVsMC4yOC0xLjNjLTEuOS0wLjk3LTIuMi0zLjMtMi4zLTUuMy0wLjEzLTEuOC0wLjI2LTMuNy0xLjUtNS4yLTAuODUtMS0yLjItMS44LTMuNi0xLjh6bTAgMS40YzAuODggMCAxLjkgMC41NSAyLjUgMS4zIDAuODggMS4xIDEuMSAyLjcgMS4yIDQuNCAwLjEzIDEuNyAwLjIzIDMuNiAxLjMgNS4yaC0xMGMxLjEtMS42IDEuMi0zLjQgMS4zLTUuMiAwLjEzLTEuNyAwLjMtMy4zIDEuMi00LjQgMC41OS0wLjcyIDEuNi0xLjMgMi41LTEuM3ptLTAuNzQgMTJoMS41Yy0wLjAwMTUgMC4yOCAwLjAxNSAwLjc5LTAuNzQgMC43OS0wLjczIDAuMDAxNi0wLjcyLTAuNTMtMC43NC0wLjc5eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-bug-dot: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiPgogICAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTcuMTkgOEgyMFYxMEgxNy45MUMxNy45NiAxMC4zMyAxOCAxMC42NiAxOCAxMVYxMkgyMFYxNEgxOC41SDE4VjE0LjAyNzVDMTUuNzUgMTQuMjc2MiAxNCAxNi4xODM3IDE0IDE4LjVDMTQgMTkuMjA4IDE0LjE2MzUgMTkuODc3OSAxNC40NTQ5IDIwLjQ3MzlDMTMuNzA2MyAyMC44MTE3IDEyLjg3NTcgMjEgMTIgMjFDOS43OCAyMSA3Ljg1IDE5Ljc5IDYuODEgMThINFYxNkg2LjA5QzYuMDQgMTUuNjcgNiAxNS4zNCA2IDE1VjE0SDRWMTJINlYxMUM2IDEwLjY2IDYuMDQgMTAuMzMgNi4wOSAxMEg0VjhINi44MUM3LjI2IDcuMjIgNy44OCA2LjU1IDguNjIgNi4wNEw3IDQuNDFMOC40MSAzTDEwLjU5IDUuMTdDMTEuMDQgNS4wNiAxMS41MSA1IDEyIDVDMTIuNDkgNSAxMi45NiA1LjA2IDEzLjQyIDUuMTdMMTUuNTkgM0wxNyA0LjQxTDE1LjM3IDYuMDRDMTYuMTIgNi41NSAxNi43NCA3LjIyIDE3LjE5IDhaTTEwIDE2SDE0VjE0SDEwVjE2Wk0xMCAxMkgxNFYxMEgxMFYxMloiIGZpbGw9IiM2MTYxNjEiLz4KICAgICAgICA8cGF0aCBkPSJNMjIgMTguNUMyMiAyMC40MzMgMjAuNDMzIDIyIDE4LjUgMjJDMTYuNTY3IDIyIDE1IDIwLjQzMyAxNSAxOC41QzE1IDE2LjU2NyAxNi41NjcgMTUgMTguNSAxNUMyMC40MzMgMTUgMjIgMTYuNTY3IDIyIDE4LjVaIiBmaWxsPSIjNjE2MTYxIi8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bug: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yMCA4aC0yLjgxYy0uNDUtLjc4LTEuMDctMS40NS0xLjgyLTEuOTZMMTcgNC40MSAxNS41OSAzbC0yLjE3IDIuMTdDMTIuOTYgNS4wNiAxMi40OSA1IDEyIDVjLS40OSAwLS45Ni4wNi0xLjQxLjE3TDguNDEgMyA3IDQuNDFsMS42MiAxLjYzQzcuODggNi41NSA3LjI2IDcuMjIgNi44MSA4SDR2MmgyLjA5Yy0uMDUuMzMtLjA5LjY2LS4wOSAxdjFINHYyaDJ2MWMwIC4zNC4wNC42Ny4wOSAxSDR2MmgyLjgxYzEuMDQgMS43OSAyLjk3IDMgNS4xOSAzczQuMTUtMS4yMSA1LjE5LTNIMjB2LTJoLTIuMDljLjA1LS4zMy4wOS0uNjYuMDktMXYtMWgydi0yaC0ydi0xYzAtLjM0LS4wNC0uNjctLjA5LTFIMjBWOHptLTYgOGgtNHYtMmg0djJ6bTAtNGgtNHYtMmg0djJ6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-build: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE0LjkgMTcuNDVDMTYuMjUgMTcuNDUgMTcuMzUgMTYuMzUgMTcuMzUgMTVDMTcuMzUgMTMuNjUgMTYuMjUgMTIuNTUgMTQuOSAxMi41NUMxMy41NCAxMi41NSAxMi40NSAxMy42NSAxMi40NSAxNUMxMi40NSAxNi4zNSAxMy41NCAxNy40NSAxNC45IDE3LjQ1Wk0yMC4xIDE1LjY4TDIxLjU4IDE2Ljg0QzIxLjcxIDE2Ljk1IDIxLjc1IDE3LjEzIDIxLjY2IDE3LjI5TDIwLjI2IDE5LjcxQzIwLjE3IDE5Ljg2IDIwIDE5LjkyIDE5LjgzIDE5Ljg2TDE4LjA5IDE5LjE2QzE3LjczIDE5LjQ0IDE3LjMzIDE5LjY3IDE2LjkxIDE5Ljg1TDE2LjY0IDIxLjdDMTYuNjIgMjEuODcgMTYuNDcgMjIgMTYuMyAyMkgxMy41QzEzLjMyIDIyIDEzLjE4IDIxLjg3IDEzLjE1IDIxLjdMMTIuODkgMTkuODVDMTIuNDYgMTkuNjcgMTIuMDcgMTkuNDQgMTEuNzEgMTkuMTZMOS45NjAwMiAxOS44NkM5LjgxMDAyIDE5LjkyIDkuNjIwMDIgMTkuODYgOS41NDAwMiAxOS43MUw4LjE0MDAyIDE3LjI5QzguMDUwMDIgMTcuMTMgOC4wOTAwMiAxNi45NSA4LjIyMDAyIDE2Ljg0TDkuNzAwMDIgMTUuNjhMOS42NTAwMSAxNUw5LjcwMDAyIDE0LjMxTDguMjIwMDIgMTMuMTZDOC4wOTAwMiAxMy4wNSA4LjA1MDAyIDEyLjg2IDguMTQwMDIgMTIuNzFMOS41NDAwMiAxMC4yOUM5LjYyMDAyIDEwLjEzIDkuODEwMDIgMTAuMDcgOS45NjAwMiAxMC4xM0wxMS43MSAxMC44NEMxMi4wNyAxMC41NiAxMi40NiAxMC4zMiAxMi44OSAxMC4xNUwxMy4xNSA4LjI4OTk4QzEzLjE4IDguMTI5OTggMTMuMzIgNy45OTk5OCAxMy41IDcuOTk5OThIMTYuM0MxNi40NyA3Ljk5OTk4IDE2LjYyIDguMTI5OTggMTYuNjQgOC4yODk5OEwxNi45MSAxMC4xNUMxNy4zMyAxMC4zMiAxNy43MyAxMC41NiAxOC4wOSAxMC44NEwxOS44MyAxMC4xM0MyMCAxMC4wNyAyMC4xNyAxMC4xMyAyMC4yNiAxMC4yOUwyMS42NiAxMi43MUMyMS43NSAxMi44NiAyMS43MSAxMy4wNSAyMS41OCAxMy4xNkwyMC4xIDE0LjMxTDIwLjE1IDE1TDIwLjEgMTUuNjhaIi8+CiAgICA8cGF0aCBkPSJNNy4zMjk2NiA3LjQ0NDU0QzguMDgzMSA3LjAwOTU0IDguMzM5MzIgNi4wNTMzMiA3LjkwNDMyIDUuMjk5ODhDNy40NjkzMiA0LjU0NjQzIDYuNTA4MSA0LjI4MTU2IDUuNzU0NjYgNC43MTY1NkM1LjM5MTc2IDQuOTI2MDggNS4xMjY5NSA1LjI3MTE4IDUuMDE4NDkgNS42NzU5NEM0LjkxMDA0IDYuMDgwNzEgNC45NjY4MiA2LjUxMTk4IDUuMTc2MzQgNi44NzQ4OEM1LjYxMTM0IDcuNjI4MzIgNi41NzYyMiA3Ljg3OTU0IDcuMzI5NjYgNy40NDQ1NFpNOS42NTcxOCA0Ljc5NTkzTDEwLjg2NzIgNC45NTE3OUMxMC45NjI4IDQuOTc3NDEgMTEuMDQwMiA1LjA3MTMzIDExLjAzODIgNS4xODc5M0wxMS4wMzg4IDYuOTg4OTNDMTEuMDQ1NSA3LjEwMDU0IDEwLjk2MTYgNy4xOTUxOCAxMC44NTUgNy4yMTA1NEw5LjY2MDAxIDcuMzgwODNMOS4yMzkxNSA4LjEzMTg4TDkuNjY5NjEgOS4yNTc0NUM5LjcwNzI5IDkuMzYyNzEgOS42NjkzNCA5LjQ3Njk5IDkuNTc0MDggOS41MzE5OUw4LjAxNTIzIDEwLjQzMkM3LjkxMTMxIDEwLjQ5MiA3Ljc5MzM3IDEwLjQ2NzcgNy43MjEwNSAxMC4zODI0TDYuOTg3NDggOS40MzE4OEw2LjEwOTMxIDkuNDMwODNMNS4zNDcwNCAxMC4zOTA1QzUuMjg5MDkgMTAuNDcwMiA1LjE3MzgzIDEwLjQ5MDUgNS4wNzE4NyAxMC40MzM5TDMuNTEyNDUgOS41MzI5M0MzLjQxMDQ5IDkuNDc2MzMgMy4zNzY0NyA5LjM1NzQxIDMuNDEwNzUgOS4yNTY3OUwzLjg2MzQ3IDguMTQwOTNMMy42MTc0OSA3Ljc3NDg4TDMuNDIzNDcgNy4zNzg4M0wyLjIzMDc1IDcuMjEyOTdDMi4xMjY0NyA3LjE5MjM1IDIuMDQwNDkgNy4xMDM0MiAyLjA0MjQ1IDYuOTg2ODJMMi4wNDE4NyA1LjE4NTgyQzIuMDQzODMgNS4wNjkyMiAyLjExOTA5IDQuOTc5NTggMi4yMTcwNCA0Ljk2OTIyTDMuNDIwNjUgNC43OTM5M0wzLjg2NzQ5IDQuMDI3ODhMMy40MTEwNSAyLjkxNzMxQzMuMzczMzcgMi44MTIwNCAzLjQxMTMxIDIuNjk3NzYgMy41MTUyMyAyLjYzNzc2TDUuMDc0MDggMS43Mzc3NkM1LjE2OTM0IDEuNjgyNzYgNS4yODcyOSAxLjcwNzA0IDUuMzU5NjEgMS43OTIzMUw2LjExOTE1IDIuNzI3ODhMNi45ODAwMSAyLjczODkzTDcuNzI0OTYgMS43ODkyMkM3Ljc5MTU2IDEuNzA0NTggNy45MTU0OCAxLjY3OTIyIDguMDA4NzkgMS43NDA4Mkw5LjU2ODIxIDIuNjQxODJDOS42NzAxNyAyLjY5ODQyIDkuNzEyODUgMi44MTIzNCA5LjY4NzIzIDIuOTA3OTdMOS4yMTcxOCA0LjAzMzgzTDkuNDYzMTYgNC4zOTk4OEw5LjY1NzE4IDQuNzk1OTNaIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iOS45LDEzLjYgMy42LDcuNCA0LjQsNi42IDkuOSwxMi4yIDE1LjQsNi43IDE2LjEsNy40ICIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNS45TDksOS43bDMuOC0zLjhsMS4yLDEuMmwtNC45LDVsLTQuOS01TDUuMiw1Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNy41TDksMTEuMmwzLjgtMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-left: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik0xMC44LDEyLjhMNy4xLDlsMy44LTMuOGwwLDcuNkgxMC44eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-right: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik03LjIsNS4yTDEwLjksOWwtMy44LDMuOFY1LjJINy4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-up-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMTUuNCwxMy4zIDkuOSw3LjcgNC40LDEzLjIgMy42LDEyLjUgOS45LDYuMyAxNi4xLDEyLjYgIi8+Cgk8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-up: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik01LjIsMTAuNUw5LDYuOGwzLjgsMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-case-sensitive: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWFjY2VudDIiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTcuNiw4aDAuOWwzLjUsOGgtMS4xTDEwLDE0SDZsLTAuOSwySDRMNy42LDh6IE04LDkuMUw2LjQsMTNoMy4yTDgsOS4xeiIvPgogICAgPHBhdGggZD0iTTE2LjYsOS44Yy0wLjIsMC4xLTAuNCwwLjEtMC43LDAuMWMtMC4yLDAtMC40LTAuMS0wLjYtMC4yYy0wLjEtMC4xLTAuMi0wLjQtMC4yLTAuNyBjLTAuMywwLjMtMC42LDAuNS0wLjksMC43Yy0wLjMsMC4xLTAuNywwLjItMS4xLDAuMmMtMC4zLDAtMC41LDAtMC43LTAuMWMtMC4yLTAuMS0wLjQtMC4yLTAuNi0wLjNjLTAuMi0wLjEtMC4zLTAuMy0wLjQtMC41IGMtMC4xLTAuMi0wLjEtMC40LTAuMS0wLjdjMC0wLjMsMC4xLTAuNiwwLjItMC44YzAuMS0wLjIsMC4zLTAuNCwwLjQtMC41QzEyLDcsMTIuMiw2LjksMTIuNSw2LjhjMC4yLTAuMSwwLjUtMC4xLDAuNy0wLjIgYzAuMy0wLjEsMC41LTAuMSwwLjctMC4xYzAuMiwwLDAuNC0wLjEsMC42LTAuMWMwLjIsMCwwLjMtMC4xLDAuNC0wLjJjMC4xLTAuMSwwLjItMC4yLDAuMi0wLjRjMC0xLTEuMS0xLTEuMy0xIGMtMC40LDAtMS40LDAtMS40LDEuMmgtMC45YzAtMC40LDAuMS0wLjcsMC4yLTFjMC4xLTAuMiwwLjMtMC40LDAuNS0wLjZjMC4yLTAuMiwwLjUtMC4zLDAuOC0wLjNDMTMuMyw0LDEzLjYsNCwxMy45LDQgYzAuMywwLDAuNSwwLDAuOCwwLjFjMC4zLDAsMC41LDAuMSwwLjcsMC4yYzAuMiwwLjEsMC40LDAuMywwLjUsMC41QzE2LDUsMTYsNS4yLDE2LDUuNnYyLjljMCwwLjIsMCwwLjQsMCwwLjUgYzAsMC4xLDAuMSwwLjIsMC4zLDAuMmMwLjEsMCwwLjIsMCwwLjMsMFY5Ljh6IE0xNS4yLDYuOWMtMS4yLDAuNi0zLjEsMC4yLTMuMSwxLjRjMCwxLjQsMy4xLDEsMy4xLTAuNVY2Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-circle-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDJDNi40NyAyIDIgNi40NyAyIDEyczQuNDcgMTAgMTAgMTAgMTAtNC40NyAxMC0xMFMxNy41MyAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-circle: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-clear: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8bWFzayBpZD0iZG9udXRIb2xlIj4KICAgIDxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiIC8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSJibGFjayIvPgogIDwvbWFzaz4KCiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxyZWN0IGhlaWdodD0iMTgiIHdpZHRoPSIyIiB4PSIxMSIgeT0iMyIgdHJhbnNmb3JtPSJyb3RhdGUoMzE1LCAxMiwgMTIpIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgbWFzaz0idXJsKCNkb251dEhvbGUpIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-close: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1ub25lIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIGpwLWljb24zLWhvdmVyIiBmaWxsPSJub25lIj4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjExIi8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIGpwLWljb24tYWNjZW50Mi1ob3ZlciIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogIDwvZz4KCiAgPGcgY2xhc3M9ImpwLWljb24tbm9uZSBqcC1pY29uLWJ1c3kiIGZpbGw9Im5vbmUiPgogICAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICA8cGF0aCBkPSJNNi41OSwzLjQxTDIsOEw2LjU5LDEyLjZMOCwxMS4xOEw0LjgyLDhMOCw0LjgyTDYuNTksMy40MU0xMi40MSwzLjQxTDExLDQuODJMMTQuMTgsOEwxMSwxMS4xOEwxMi40MSwxMi42TDE3LDhMMTIuNDEsMy40MU0yMS41OSwxMS41OUwxMy41LDE5LjY4TDkuODMsMTZMOC40MiwxNy40MUwxMy41LDIyLjVMMjMsMTNMMjEuNTksMTEuNTlaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTExLjQgMTguNkw2LjggMTRMMTEuNCA5LjRMMTAgOEw0IDE0TDEwIDIwTDExLjQgMTguNlpNMTYuNiAxOC42TDIxLjIgMTRMMTYuNiA5LjRMMTggOEwyNCAxNEwxOCAyMEwxNi42IDE4LjZWMTguNloiLz4KCTwvZz4KPC9zdmc+Cg==);
  --jp-icon-collapse-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNNiAxM3YyaDh2LTJ6IiAvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-console: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwMCAyMDAiPgogIDxnIGNsYXNzPSJqcC1jb25zb2xlLWljb24tYmFja2dyb3VuZC1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMjg4RDEiPgogICAgPHBhdGggZD0iTTIwIDE5LjhoMTYwdjE1OS45SDIweiIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtY29uc29sZS1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIj4KICAgIDxwYXRoIGQ9Ik0xMDUgMTI3LjNoNDB2MTIuOGgtNDB6TTUxLjEgNzdMNzQgOTkuOWwtMjMuMyAyMy4zIDEwLjUgMTAuNSAyMy4zLTIzLjNMOTUgOTkuOSA4NC41IDg5LjQgNjEuNiA2Ni41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copy: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTExLjksMUgzLjJDMi40LDEsMS43LDEuNywxLjcsMi41djEwLjJoMS41VjIuNWg4LjdWMXogTTE0LjEsMy45aC04Yy0wLjgsMC0xLjUsMC43LTEuNSwxLjV2MTAuMmMwLDAuOCwwLjcsMS41LDEuNSwxLjVoOCBjMC44LDAsMS41LTAuNywxLjUtMS41VjUuNEMxNS41LDQuNiwxNC45LDMuOSwxNC4xLDMuOXogTTE0LjEsMTUuNWgtOFY1LjRoOFYxNS41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copyright: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+CiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0xMS44OCw5LjE0YzEuMjgsMC4wNiwxLjYxLDEuMTUsMS42MywxLjY2aDEuNzljLTAuMDgtMS45OC0xLjQ5LTMuMTktMy40NS0zLjE5QzkuNjQsNy42MSw4LDksOCwxMi4xNCBjMCwxLjk0LDAuOTMsNC4yNCwzLjg0LDQuMjRjMi4yMiwwLDMuNDEtMS42NSwzLjQ0LTIuOTVoLTEuNzljLTAuMDMsMC41OS0wLjQ1LDEuMzgtMS42MywxLjQ0QzEwLjU1LDE0LjgzLDEwLDEzLjgxLDEwLDEyLjE0IEMxMCw5LjI1LDExLjI4LDkuMTYsMTEuODgsOS4xNHogTTEyLDJDNi40OCwyLDIsNi40OCwyLDEyczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMFMxNy41MiwyLDEyLDJ6IE0xMiwyMGMtNC40MSwwLTgtMy41OS04LTggczMuNTktOCw4LThzOCwzLjU5LDgsOFMxNi40MSwyMCwxMiwyMHoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-cut: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkuNjQgNy42NGMuMjMtLjUuMzYtMS4wNS4zNi0xLjY0IDAtMi4yMS0xLjc5LTQtNC00UzIgMy43OSAyIDZzMS43OSA0IDQgNGMuNTkgMCAxLjE0LS4xMyAxLjY0LS4zNkwxMCAxMmwtMi4zNiAyLjM2QzcuMTQgMTQuMTMgNi41OSAxNCA2IDE0Yy0yLjIxIDAtNCAxLjc5LTQgNHMxLjc5IDQgNCA0IDQtMS43OSA0LTRjMC0uNTktLjEzLTEuMTQtLjM2LTEuNjRMMTIgMTRsNyA3aDN2LTFMOS42NCA3LjY0ek02IDhjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTAgMTJjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTYtNy41Yy0uMjggMC0uNS0uMjItLjUtLjVzLjIyLS41LjUtLjUuNS4yMi41LjUtLjIyLjUtLjUuNXpNMTkgM2wtNiA2IDIgMiA3LTdWM3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-delete: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiAvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjI2MjYyIiBkPSJNNiAxOWMwIDEuMS45IDIgMiAyaDhjMS4xIDAgMi0uOSAyLTJWN0g2djEyek0xOSA0aC0zLjVsLTEtMWgtNWwtMSAxSDV2MmgxNFY0eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-download: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDloLTRWM0g5djZINWw3IDcgNy03ek01IDE4djJoMTR2LTJINXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-duplicate: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIuNzk5OTggMC44NzVIOC44OTU4MkM5LjIwMDYxIDAuODc1IDkuNDQ5OTggMS4xMzkxNCA5LjQ0OTk4IDEuNDYxOThDOS40NDk5OCAxLjc4NDgyIDkuMjAwNjEgMi4wNDg5NiA4Ljg5NTgyIDIuMDQ4OTZIMy4zNTQxNUMzLjA0OTM2IDIuMDQ4OTYgMi43OTk5OCAyLjMxMzEgMi43OTk5OCAyLjYzNTk0VjkuNjc5NjlDMi43OTk5OCAxMC4wMDI1IDIuNTUwNjEgMTAuMjY2NyAyLjI0NTgyIDEwLjI2NjdDMS45NDEwMyAxMC4yNjY3IDEuNjkxNjUgMTAuMDAyNSAxLjY5MTY1IDkuNjc5NjlWMi4wNDg5NkMxLjY5MTY1IDEuNDAzMjggMi4xOTA0IDAuODc1IDIuNzk5OTggMC44NzVaTTUuMzY2NjUgMTEuOVY0LjU1SDExLjA4MzNWMTEuOUg1LjM2NjY1Wk00LjE0MTY1IDQuMTQxNjdDNC4xNDE2NSAzLjY5MDYzIDQuNTA3MjggMy4zMjUgNC45NTgzMiAzLjMyNUgxMS40OTE3QzExLjk0MjcgMy4zMjUgMTIuMzA4MyAzLjY5MDYzIDEyLjMwODMgNC4xNDE2N1YxMi4zMDgzQzEyLjMwODMgMTIuNzU5NCAxMS45NDI3IDEzLjEyNSAxMS40OTE3IDEzLjEyNUg0Ljk1ODMyQzQuNTA3MjggMTMuMTI1IDQuMTQxNjUgMTIuNzU5NCA0LjE0MTY1IDEyLjMwODNWNC4xNDE2N1oiIGZpbGw9IiM2MTYxNjEiLz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNOS40MzU3NCA4LjI2NTA3SDguMzY0MzFWOS4zMzY1QzguMzY0MzEgOS40NTQzNSA4LjI2Nzg4IDkuNTUwNzggOC4xNTAwMiA5LjU1MDc4QzguMDMyMTcgOS41NTA3OCA3LjkzNTc0IDkuNDU0MzUgNy45MzU3NCA5LjMzNjVWOC4yNjUwN0g2Ljg2NDMxQzYuNzQ2NDUgOC4yNjUwNyA2LjY1MDAyIDguMTY4NjQgNi42NTAwMiA4LjA1MDc4QzYuNjUwMDIgNy45MzI5MiA2Ljc0NjQ1IDcuODM2NSA2Ljg2NDMxIDcuODM2NUg3LjkzNTc0VjYuNzY1MDdDNy45MzU3NCA2LjY0NzIxIDguMDMyMTcgNi41NTA3OCA4LjE1MDAyIDYuNTUwNzhDOC4yNjc4OCA2LjU1MDc4IDguMzY0MzEgNi42NDcyMSA4LjM2NDMxIDYuNzY1MDdWNy44MzY1SDkuNDM1NzRDOS41NTM2IDcuODM2NSA5LjY1MDAyIDcuOTMyOTIgOS42NTAwMiA4LjA1MDc4QzkuNjUwMDIgOC4xNjg2NCA5LjU1MzYgOC4yNjUwNyA5LjQzNTc0IDguMjY1MDdaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=);
  --jp-icon-edit: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMgMTcuMjVWMjFoMy43NUwxNy44MSA5Ljk0bC0zLjc1LTMuNzVMMyAxNy4yNXpNMjAuNzEgNy4wNGMuMzktLjM5LjM5LTEuMDIgMC0xLjQxbC0yLjM0LTIuMzRjLS4zOS0uMzktMS4wMi0uMzktMS40MSAwbC0xLjgzIDEuODMgMy43NSAzLjc1IDEuODMtMS44M3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-ellipses: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iNSIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjEyIiByPSIyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-error: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjE5IiByPSIyIi8+PHBhdGggZD0iTTEwIDNoNHYxMmgtNHoiLz48L2c+CjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiLz4KPC9zdmc+Cg==);
  --jp-icon-expand-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNMTEgMTBIOXYzSDZ2MmgzdjNoMnYtM2gzdi0yaC0zeiIgLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-extension: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwLjUgMTFIMTlWN2MwLTEuMS0uOS0yLTItMmgtNFYzLjVDMTMgMi4xMiAxMS44OCAxIDEwLjUgMVM4IDIuMTIgOCAzLjVWNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAydjMuOEgzLjVjMS40OSAwIDIuNyAxLjIxIDIuNyAyLjdzLTEuMjEgMi43LTIuNyAyLjdIMlYyMGMwIDEuMS45IDIgMiAyaDMuOHYtMS41YzAtMS40OSAxLjIxLTIuNyAyLjctMi43IDEuNDkgMCAyLjcgMS4yMSAyLjcgMi43VjIySDE3YzEuMSAwIDItLjkgMi0ydi00aDEuNWMxLjM4IDAgMi41LTEuMTIgMi41LTIuNVMyMS44OCAxMSAyMC41IDExeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-fast-forward: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTQgMThsOC41LTZMNCA2djEyem05LTEydjEybDguNS02TDEzIDZ6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-file-upload: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkgMTZoNnYtNmg0bC03LTctNyA3aDR6bS00IDJoMTR2Mkg1eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-file: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuMyA4LjJsLTUuNS01LjVjLS4zLS4zLS43LS41LTEuMi0uNUgzLjljLS44LjEtMS42LjktMS42IDEuOHYxNC4xYzAgLjkuNyAxLjYgMS42IDEuNmgxNC4yYy45IDAgMS42LS43IDEuNi0xLjZWOS40Yy4xLS41LS4xLS45LS40LTEuMnptLTUuOC0zLjNsMy40IDMuNmgtMy40VjQuOXptMy45IDEyLjdINC43Yy0uMSAwLS4yIDAtLjItLjJWNC43YzAtLjIuMS0uMy4yLS4zaDcuMnY0LjRzMCAuOC4zIDEuMWMuMy4zIDEuMS4zIDEuMS4zaDQuM3Y3LjJzLS4xLjItLjIuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-filter-dot: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWRvdCIgZmlsbD0iI0ZGRiI+CiAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE3IiByPSIzIj48L2NpcmNsZT4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-filter-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEwIDE4aDR2LTJoLTR2MnpNMyA2djJoMThWNkgzem0zIDdoMTJ2LTJINnYyeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-filter: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-folder-favorite: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggY2xhc3M9ImpwLWljb24zIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxNjE2MSIgZD0iTTIwIDZoLThsLTItMkg0Yy0xLjEgMC0yIC45LTIgMnYxMmMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJ6bS0yLjA2IDExTDE1IDE1LjI4IDEyLjA2IDE3bC43OC0zLjMzLTIuNTktMi4yNCAzLjQxLS4yOUwxNSA4bDEuMzQgMy4xNCAzLjQxLjI5LTIuNTkgMi4yNC43OCAzLjMzeiIvPgo8L3N2Zz4K);
  --jp-icon-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yaC04bC0yLTJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-home: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xMCAyMHYtNmg0djZoNXYtOGgzTDEyIDMgMiAxMmgzdjh6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-html5: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMDAiIGQ9Ik0xMDguNCAwaDIzdjIyLjhoMjEuMlYwaDIzdjY5aC0yM1Y0NmgtMjF2MjNoLTIzLjJNMjA2IDIzaC0yMC4zVjBoNjMuN3YyM0gyMjl2NDZoLTIzbTUzLjUtNjloMjQuMWwxNC44IDI0LjNMMzEzLjIgMGgyNC4xdjY5aC0yM1YzNC44bC0xNi4xIDI0LjgtMTYuMS0yNC44VjY5aC0yMi42bTg5LjItNjloMjN2NDYuMmgzMi42VjY5aC01NS42Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2U0NGQyNiIgZD0iTTEwNy42IDQ3MWwtMzMtMzcwLjRoMzYyLjhsLTMzIDM3MC4yTDI1NS43IDUxMiIvPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNmMTY1MjkiIGQ9Ik0yNTYgNDgwLjVWMTMxaDE0OC4zTDM3NiA0NDciLz4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNlYmViZWIiIGQ9Ik0xNDIgMTc2LjNoMTE0djQ1LjRoLTY0LjJsNC4yIDQ2LjVoNjB2NDUuM0gxNTQuNG0yIDIyLjhIMjAybDMuMiAzNi4zIDUwLjggMTMuNnY0Ny40bC05My4yLTI2Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIiBkPSJNMzY5LjYgMTc2LjNIMjU1Ljh2NDUuNGgxMDkuNm0tNC4xIDQ2LjVIMjU1Ljh2NDUuNGg1NmwtNS4zIDU5LTUwLjcgMTMuNnY0Ny4ybDkzLTI1LjgiLz4KPC9zdmc+Cg==);
  --jp-icon-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1icmFuZDQganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNGRkYiIGQ9Ik0yLjIgMi4yaDE3LjV2MTcuNUgyLjJ6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzNGNTFCNSIgZD0iTTIuMiAyLjJ2MTcuNWgxNy41bC4xLTE3LjVIMi4yem0xMi4xIDIuMmMxLjIgMCAyLjIgMSAyLjIgMi4ycy0xIDIuMi0yLjIgMi4yLTIuMi0xLTIuMi0yLjIgMS0yLjIgMi4yLTIuMnpNNC40IDE3LjZsMy4zLTguOCAzLjMgNi42IDIuMi0zLjIgNC40IDUuNEg0LjR6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-info: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUwLjk3OCA1MC45NzgiPgoJPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KCQk8cGF0aCBkPSJNNDMuNTIsNy40NThDMzguNzExLDIuNjQ4LDMyLjMwNywwLDI1LjQ4OSwwQzE4LjY3LDAsMTIuMjY2LDIuNjQ4LDcuNDU4LDcuNDU4CgkJCWMtOS45NDMsOS45NDEtOS45NDMsMjYuMTE5LDAsMzYuMDYyYzQuODA5LDQuODA5LDExLjIxMiw3LjQ1NiwxOC4wMzEsNy40NThjMCwwLDAuMDAxLDAsMC4wMDIsMAoJCQljNi44MTYsMCwxMy4yMjEtMi42NDgsMTguMDI5LTcuNDU4YzQuODA5LTQuODA5LDcuNDU3LTExLjIxMiw3LjQ1Ny0xOC4wM0M1MC45NzcsMTguNjcsNDguMzI4LDEyLjI2Niw0My41Miw3LjQ1OHoKCQkJIE00Mi4xMDYsNDIuMTA1Yy00LjQzMiw0LjQzMS0xMC4zMzIsNi44NzItMTYuNjE1LDYuODcyaC0wLjAwMmMtNi4yODUtMC4wMDEtMTIuMTg3LTIuNDQxLTE2LjYxNy02Ljg3MgoJCQljLTkuMTYyLTkuMTYzLTkuMTYyLTI0LjA3MSwwLTMzLjIzM0MxMy4zMDMsNC40NCwxOS4yMDQsMiwyNS40ODksMmM2LjI4NCwwLDEyLjE4NiwyLjQ0LDE2LjYxNyw2Ljg3MgoJCQljNC40MzEsNC40MzEsNi44NzEsMTAuMzMyLDYuODcxLDE2LjYxN0M0OC45NzcsMzEuNzcyLDQ2LjUzNiwzNy42NzUsNDIuMTA2LDQyLjEwNXoiLz4KCQk8cGF0aCBkPSJNMjMuNTc4LDMyLjIxOGMtMC4wMjMtMS43MzQsMC4xNDMtMy4wNTksMC40OTYtMy45NzJjMC4zNTMtMC45MTMsMS4xMS0xLjk5NywyLjI3Mi0zLjI1MwoJCQljMC40NjgtMC41MzYsMC45MjMtMS4wNjIsMS4zNjctMS41NzVjMC42MjYtMC43NTMsMS4xMDQtMS40NzgsMS40MzYtMi4xNzVjMC4zMzEtMC43MDcsMC40OTUtMS41NDEsMC40OTUtMi41CgkJCWMwLTEuMDk2LTAuMjYtMi4wODgtMC43NzktMi45NzljLTAuNTY1LTAuODc5LTEuNTAxLTEuMzM2LTIuODA2LTEuMzY5Yy0xLjgwMiwwLjA1Ny0yLjk4NSwwLjY2Ny0zLjU1LDEuODMyCgkJCWMtMC4zMDEsMC41MzUtMC41MDMsMS4xNDEtMC42MDcsMS44MTRjLTAuMTM5LDAuNzA3LTAuMjA3LDEuNDMyLTAuMjA3LDIuMTc0aC0yLjkzN2MtMC4wOTEtMi4yMDgsMC40MDctNC4xMTQsMS40OTMtNS43MTkKCQkJYzEuMDYyLTEuNjQsMi44NTUtMi40ODEsNS4zNzgtMi41MjdjMi4xNiwwLjAyMywzLjg3NCwwLjYwOCw1LjE0MSwxLjc1OGMxLjI3OCwxLjE2LDEuOTI5LDIuNzY0LDEuOTUsNC44MTEKCQkJYzAsMS4xNDItMC4xMzcsMi4xMTEtMC40MSwyLjkxMWMtMC4zMDksMC44NDUtMC43MzEsMS41OTMtMS4yNjgsMi4yNDNjLTAuNDkyLDAuNjUtMS4wNjgsMS4zMTgtMS43MywyLjAwMgoJCQljLTAuNjUsMC42OTctMS4zMTMsMS40NzktMS45ODcsMi4zNDZjLTAuMjM5LDAuMzc3LTAuNDI5LDAuNzc3LTAuNTY1LDEuMTk5Yy0wLjE2LDAuOTU5LTAuMjE3LDEuOTUxLTAuMTcxLDIuOTc5CgkJCUMyNi41ODksMzIuMjE4LDIzLjU3OCwzMi4yMTgsMjMuNTc4LDMyLjIxOHogTTIzLjU3OCwzOC4yMnYtMy40ODRoMy4wNzZ2My40ODRIMjMuNTc4eiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-inspector: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaW5zcGVjdG9yLWljb24tY29sb3IganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxNEg0di00aDExdjR6bTAtNUg0VjloMTF2NHptNSA1aC00VjloNHY5eiIvPgo8L3N2Zz4K);
  --jp-icon-json: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtanNvbi1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0Y5QTgyNSI+CiAgICA8cGF0aCBkPSJNMjAuMiAxMS44Yy0xLjYgMC0xLjcuNS0xLjcgMSAwIC40LjEuOS4xIDEuMy4xLjUuMS45LjEgMS4zIDAgMS43LTEuNCAyLjMtMy41IDIuM2gtLjl2LTEuOWguNWMxLjEgMCAxLjQgMCAxLjQtLjggMC0uMyAwLS42LS4xLTEgMC0uNC0uMS0uOC0uMS0xLjIgMC0xLjMgMC0xLjggMS4zLTItMS4zLS4yLTEuMy0uNy0xLjMtMiAwLS40LjEtLjguMS0xLjIuMS0uNC4xLS43LjEtMSAwLS44LS40LS43LTEuNC0uOGgtLjVWNC4xaC45YzIuMiAwIDMuNS43IDMuNSAyLjMgMCAuNC0uMS45LS4xIDEuMy0uMS41LS4xLjktLjEgMS4zIDAgLjUuMiAxIDEuNyAxdjEuOHpNMS44IDEwLjFjMS42IDAgMS43LS41IDEuNy0xIDAtLjQtLjEtLjktLjEtMS4zLS4xLS41LS4xLS45LS4xLTEuMyAwLTEuNiAxLjQtMi4zIDMuNS0yLjNoLjl2MS45aC0uNWMtMSAwLTEuNCAwLTEuNC44IDAgLjMgMCAuNi4xIDEgMCAuMi4xLjYuMSAxIDAgMS4zIDAgMS44LTEuMyAyQzYgMTEuMiA2IDExLjcgNiAxM2MwIC40LS4xLjgtLjEgMS4yLS4xLjMtLjEuNy0uMSAxIDAgLjguMy44IDEuNC44aC41djEuOWgtLjljLTIuMSAwLTMuNS0uNi0zLjUtMi4zIDAtLjQuMS0uOS4xLTEuMy4xLS41LjEtLjkuMS0xLjMgMC0uNS0uMi0xLTEuNy0xdi0xLjl6Ii8+CiAgICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjEzLjgiIHI9IjIuMSIvPgogICAgPGNpcmNsZSBjeD0iMTEiIGN5PSI4LjIiIHI9IjIuMSIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-julia: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDMyNSAzMDAiPgogIDxnIGNsYXNzPSJqcC1icmFuZDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjY2IzYzMzIj4KICAgIDxwYXRoIGQ9Ik0gMTUwLjg5ODQzOCAyMjUgQyAxNTAuODk4NDM4IDI2Ni40MjE4NzUgMTE3LjMyMDMxMiAzMDAgNzUuODk4NDM4IDMwMCBDIDM0LjQ3NjU2MiAzMDAgMC44OTg0MzggMjY2LjQyMTg3NSAwLjg5ODQzOCAyMjUgQyAwLjg5ODQzOCAxODMuNTc4MTI1IDM0LjQ3NjU2MiAxNTAgNzUuODk4NDM4IDE1MCBDIDExNy4zMjAzMTIgMTUwIDE1MC44OTg0MzggMTgzLjU3ODEyNSAxNTAuODk4NDM4IDIyNSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzM4OTgyNiI+CiAgICA8cGF0aCBkPSJNIDIzNy41IDc1IEMgMjM3LjUgMTE2LjQyMTg3NSAyMDMuOTIxODc1IDE1MCAxNjIuNSAxNTAgQyAxMjEuMDc4MTI1IDE1MCA4Ny41IDExNi40MjE4NzUgODcuNSA3NSBDIDg3LjUgMzMuNTc4MTI1IDEyMS4wNzgxMjUgMCAxNjIuNSAwIEMgMjAzLjkyMTg3NSAwIDIzNy41IDMzLjU3ODEyNSAyMzcuNSA3NSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzk1NThiMiI+CiAgICA8cGF0aCBkPSJNIDMyNC4xMDE1NjIgMjI1IEMgMzI0LjEwMTU2MiAyNjYuNDIxODc1IDI5MC41MjM0MzggMzAwIDI0OS4xMDE1NjIgMzAwIEMgMjA3LjY3OTY4OCAzMDAgMTc0LjEwMTU2MiAyNjYuNDIxODc1IDE3NC4xMDE1NjIgMjI1IEMgMTc0LjEwMTU2MiAxODMuNTc4MTI1IDIwNy42Nzk2ODggMTUwIDI0OS4xMDE1NjIgMTUwIEMgMjkwLjUyMzQzOCAxNTAgMzI0LjEwMTU2MiAxODMuNTc4MTI1IDMyNC4xMDE1NjIgMjI1Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-jupyter-favicon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUyIiBoZWlnaHQ9IjE2NSIgdmlld0JveD0iMCAwIDE1MiAxNjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgPGcgY2xhc3M9ImpwLWp1cHl0ZXItaWNvbi1jb2xvciIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA3ODk0NywgMTEwLjU4MjkyNykiIGQ9Ik03NS45NDIyODQyLDI5LjU4MDQ1NjEgQzQzLjMwMjM5NDcsMjkuNTgwNDU2MSAxNC43OTY3ODMyLDE3LjY1MzQ2MzQgMCwwIEM1LjUxMDgzMjExLDE1Ljg0MDY4MjkgMTUuNzgxNTM4OSwyOS41NjY3NzMyIDI5LjM5MDQ5NDcsMzkuMjc4NDE3MSBDNDIuOTk5Nyw0OC45ODk4NTM3IDU5LjI3MzcsNTQuMjA2NzgwNSA3NS45NjA1Nzg5LDU0LjIwNjc4MDUgQzkyLjY0NzQ1NzksNTQuMjA2NzgwNSAxMDguOTIxNDU4LDQ4Ljk4OTg1MzcgMTIyLjUzMDY2MywzOS4yNzg0MTcxIEMxMzYuMTM5NDUzLDI5LjU2Njc3MzIgMTQ2LjQxMDI4NCwxNS44NDA2ODI5IDE1MS45MjExNTgsMCBDMTM3LjA4Nzg2OCwxNy42NTM0NjM0IDEwOC41ODI1ODksMjkuNTgwNDU2MSA3NS45NDIyODQyLDI5LjU4MDQ1NjEgTDc1Ljk0MjI4NDIsMjkuNTgwNDU2MSBaIiAvPgogICAgPHBhdGggdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMzczNjgsIDAuNzA0ODc4KSIgZD0iTTc1Ljk3ODQ1NzksMjQuNjI2NDA3MyBDMTA4LjYxODc2MywyNC42MjY0MDczIDEzNy4xMjQ0NTgsMzYuNTUzNDQxNSAxNTEuOTIxMTU4LDU0LjIwNjc4MDUgQzE0Ni40MTAyODQsMzguMzY2MjIyIDEzNi4xMzk0NTMsMjQuNjQwMTMxNyAxMjIuNTMwNjYzLDE0LjkyODQ4NzggQzEwOC45MjE0NTgsNS4yMTY4NDM5IDkyLjY0NzQ1NzksMCA3NS45NjA1Nzg5LDAgQzU5LjI3MzcsMCA0Mi45OTk3LDUuMjE2ODQzOSAyOS4zOTA0OTQ3LDE0LjkyODQ4NzggQzE1Ljc4MTUzODksMjQuNjQwMTMxNyA1LjUxMDgzMjExLDM4LjM2NjIyMiAwLDU0LjIwNjc4MDUgQzE0LjgzMzA4MTYsMzYuNTg5OTI5MyA0My4zMzg1Njg0LDI0LjYyNjQwNzMgNzUuOTc4NDU3OSwyNC42MjY0MDczIEw3NS45Nzg0NTc5LDI0LjYyNjQwNzMgWiIgLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-jupyter: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzkiIGhlaWdodD0iNTEiIHZpZXdCb3g9IjAgMCAzOSA1MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTYzOCAtMjI4MSkiPgogICAgIDxnIGNsYXNzPSJqcC1qdXB5dGVyLWljb24tY29sb3IiIGZpbGw9IiNGMzc3MjYiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5Ljc0IDIzMTEuOTgpIiBkPSJNIDE4LjI2NDYgNy4xMzQxMUMgMTAuNDE0NSA3LjEzNDExIDMuNTU4NzIgNC4yNTc2IDAgMEMgMS4zMjUzOSAzLjgyMDQgMy43OTU1NiA3LjEzMDgxIDcuMDY4NiA5LjQ3MzAzQyAxMC4zNDE3IDExLjgxNTIgMTQuMjU1NyAxMy4wNzM0IDE4LjI2OSAxMy4wNzM0QyAyMi4yODIzIDEzLjA3MzQgMjYuMTk2MyAxMS44MTUyIDI5LjQ2OTQgOS40NzMwM0MgMzIuNzQyNCA3LjEzMDgxIDM1LjIxMjYgMy44MjA0IDM2LjUzOCAwQyAzMi45NzA1IDQuMjU3NiAyNi4xMTQ4IDcuMTM0MTEgMTguMjY0NiA3LjEzNDExWiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5LjczIDIyODUuNDgpIiBkPSJNIDE4LjI3MzMgNS45MzkzMUMgMjYuMTIzNSA1LjkzOTMxIDMyLjk3OTMgOC44MTU4MyAzNi41MzggMTMuMDczNEMgMzUuMjEyNiA5LjI1MzAzIDMyLjc0MjQgNS45NDI2MiAyOS40Njk0IDMuNjAwNEMgMjYuMTk2MyAxLjI1ODE4IDIyLjI4MjMgMCAxOC4yNjkgMEMgMTQuMjU1NyAwIDEwLjM0MTcgMS4yNTgxOCA3LjA2ODYgMy42MDA0QyAzLjc5NTU2IDUuOTQyNjIgMS4zMjUzOSA5LjI1MzAzIDAgMTMuMDczNEMgMy41Njc0NSA4LjgyNDYzIDEwLjQyMzIgNS45MzkzMSAxOC4yNzMzIDUuOTM5MzFaIi8+CiAgICA8L2c+CiAgICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjY5LjMgMjI4MS4zMSkiIGQ9Ik0gNS44OTM1MyAyLjg0NEMgNS45MTg4OSAzLjQzMTY1IDUuNzcwODUgNC4wMTM2NyA1LjQ2ODE1IDQuNTE2NDVDIDUuMTY1NDUgNS4wMTkyMiA0LjcyMTY4IDUuNDIwMTUgNC4xOTI5OSA1LjY2ODUxQyAzLjY2NDMgNS45MTY4OCAzLjA3NDQ0IDYuMDAxNTEgMi40OTgwNSA1LjkxMTcxQyAxLjkyMTY2IDUuODIxOSAxLjM4NDYzIDUuNTYxNyAwLjk1NDg5OCA1LjE2NDAxQyAwLjUyNTE3IDQuNzY2MzMgMC4yMjIwNTYgNC4yNDkwMyAwLjA4MzkwMzcgMy42Nzc1N0MgLTAuMDU0MjQ4MyAzLjEwNjExIC0wLjAyMTIzIDIuNTA2MTcgMC4xNzg3ODEgMS45NTM2NEMgMC4zNzg3OTMgMS40MDExIDAuNzM2ODA5IDAuOTIwODE3IDEuMjA3NTQgMC41NzM1MzhDIDEuNjc4MjYgMC4yMjYyNTkgMi4yNDA1NSAwLjAyNzU5MTkgMi44MjMyNiAwLjAwMjY3MjI5QyAzLjYwMzg5IC0wLjAzMDcxMTUgNC4zNjU3MyAwLjI0OTc4OSA0Ljk0MTQyIDAuNzgyNTUxQyA1LjUxNzExIDEuMzE1MzEgNS44NTk1NiAyLjA1Njc2IDUuODkzNTMgMi44NDRaIi8+CiAgICAgIDxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MzkuOCAyMzIzLjgxKSIgZD0iTSA3LjQyNzg5IDMuNTgzMzhDIDcuNDYwMDggNC4zMjQzIDcuMjczNTUgNS4wNTgxOSA2Ljg5MTkzIDUuNjkyMTNDIDYuNTEwMzEgNi4zMjYwNyA1Ljk1MDc1IDYuODMxNTYgNS4yODQxMSA3LjE0NDZDIDQuNjE3NDcgNy40NTc2MyAzLjg3MzcxIDcuNTY0MTQgMy4xNDcwMiA3LjQ1MDYzQyAyLjQyMDMyIDcuMzM3MTIgMS43NDMzNiA3LjAwODcgMS4yMDE4NCA2LjUwNjk1QyAwLjY2MDMyOCA2LjAwNTIgMC4yNzg2MSA1LjM1MjY4IDAuMTA1MDE3IDQuNjMyMDJDIC0wLjA2ODU3NTcgMy45MTEzNSAtMC4wMjYyMzYxIDMuMTU0OTQgMC4yMjY2NzUgMi40NTg1NkMgMC40Nzk1ODcgMS43NjIxNyAwLjkzMTY5NyAxLjE1NzEzIDEuNTI1NzYgMC43MjAwMzNDIDIuMTE5ODMgMC4yODI5MzUgMi44MjkxNCAwLjAzMzQzOTUgMy41NjM4OSAwLjAwMzEzMzQ0QyA0LjU0NjY3IC0wLjAzNzQwMzMgNS41MDUyOSAwLjMxNjcwNiA2LjIyOTYxIDAuOTg3ODM1QyA2Ljk1MzkzIDEuNjU4OTYgNy4zODQ4NCAyLjU5MjM1IDcuNDI3ODkgMy41ODMzOEwgNy40Mjc4OSAzLjU4MzM4WiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM4LjM2IDIyODYuMDYpIiBkPSJNIDIuMjc0NzEgNC4zOTYyOUMgMS44NDM2MyA0LjQxNTA4IDEuNDE2NzEgNC4zMDQ0NSAxLjA0Nzk5IDQuMDc4NDNDIDAuNjc5MjY4IDMuODUyNCAwLjM4NTMyOCAzLjUyMTE0IDAuMjAzMzcxIDMuMTI2NTZDIDAuMDIxNDEzNiAyLjczMTk4IC0wLjA0MDM3OTggMi4yOTE4MyAwLjAyNTgxMTYgMS44NjE4MUMgMC4wOTIwMDMxIDEuNDMxOCAwLjI4MzIwNCAxLjAzMTI2IDAuNTc1MjEzIDAuNzEwODgzQyAwLjg2NzIyMiAwLjM5MDUxIDEuMjQ2OTEgMC4xNjQ3MDggMS42NjYyMiAwLjA2MjA1OTJDIDIuMDg1NTMgLTAuMDQwNTg5NyAyLjUyNTYxIC0wLjAxNTQ3MTQgMi45MzA3NiAwLjEzNDIzNUMgMy4zMzU5MSAwLjI4Mzk0MSAzLjY4NzkyIDAuNTUxNTA1IDMuOTQyMjIgMC45MDMwNkMgNC4xOTY1MiAxLjI1NDYyIDQuMzQxNjkgMS42NzQzNiA0LjM1OTM1IDIuMTA5MTZDIDQuMzgyOTkgMi42OTEwNyA0LjE3Njc4IDMuMjU4NjkgMy43ODU5NyAzLjY4NzQ2QyAzLjM5NTE2IDQuMTE2MjQgMi44NTE2NiA0LjM3MTE2IDIuMjc0NzEgNC4zOTYyOUwgMi4yNzQ3MSA0LjM5NjI5WiIvPgogICAgPC9nPgogIDwvZz4+Cjwvc3ZnPgo=);
  --jp-icon-jupyterlab-wordmark: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIHZpZXdCb3g9IjAgMCAxODYwLjggNDc1Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0RTRFNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4MC4xMzY0MDEsIDY0LjI3MTQ5MykiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDU4Ljg3NTU2NikiPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA4NzYwMywgMC4xNDAyOTQpIj4KICAgICAgICA8cGF0aCBkPSJNLTQyNi45LDE2OS44YzAsNDguNy0zLjcsNjQuNy0xMy42LDc2LjRjLTEwLjgsMTAtMjUsMTUuNS0zOS43LDE1LjVsMy43LDI5IGMyMi44LDAuMyw0NC44LTcuOSw2MS45LTIzLjFjMTcuOC0xOC41LDI0LTQ0LjEsMjQtODMuM1YwSC00Mjd2MTcwLjFMLTQyNi45LDE2OS44TC00MjYuOSwxNjkuOHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU1LjA0NTI5NiwgNTYuODM3MTA0KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNTYyNDUzLCAxLjc5OTg0MikiPgogICAgICAgIDxwYXRoIGQ9Ik0tMzEyLDE0OGMwLDIxLDAsMzkuNSwxLjcsNTUuNGgtMzEuOGwtMi4xLTMzLjNoLTAuOGMtNi43LDExLjYtMTYuNCwyMS4zLTI4LDI3LjkgYy0xMS42LDYuNi0yNC44LDEwLTM4LjIsOS44Yy0zMS40LDAtNjktMTcuNy02OS04OVYwaDM2LjR2MTEyLjdjMCwzOC43LDExLjYsNjQuNyw0NC42LDY0LjdjMTAuMy0wLjIsMjAuNC0zLjUsMjguOS05LjQgYzguNS01LjksMTUuMS0xNC4zLDE4LjktMjMuOWMyLjItNi4xLDMuMy0xMi41LDMuMy0xOC45VjAuMmgzNi40VjE0OEgtMzEyTC0zMTIsMTQ4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTAuMDEzMzIyLCA1My40Nzk2MzgpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS43MDY0NTgsIDAuMjMxNDI1KSI+CiAgICAgICAgPHBhdGggZD0iTS00NzguNiw3MS40YzAtMjYtMC44LTQ3LTEuNy02Ni43aDMyLjdsMS43LDM0LjhoMC44YzcuMS0xMi41LDE3LjUtMjIuOCwzMC4xLTI5LjcgYzEyLjUtNywyNi43LTEwLjMsNDEtOS44YzQ4LjMsMCw4NC43LDQxLjcsODQuNywxMDMuM2MwLDczLjEtNDMuNywxMDkuMi05MSwxMDkuMmMtMTIuMSwwLjUtMjQuMi0yLjItMzUtNy44IGMtMTAuOC01LjYtMTkuOS0xMy45LTI2LjYtMjQuMmgtMC44VjI5MWgtMzZ2LTIyMEwtNDc4LjYsNzEuNEwtNDc4LjYsNzEuNHogTS00NDIuNiwxMjUuNmMwLjEsNS4xLDAuNiwxMC4xLDEuNywxNS4xIGMzLDEyLjMsOS45LDIzLjMsMTkuOCwzMS4xYzkuOSw3LjgsMjIuMSwxMi4xLDM0LjcsMTIuMWMzOC41LDAsNjAuNy0zMS45LDYwLjctNzguNWMwLTQwLjctMjEuMS03NS42LTU5LjUtNzUuNiBjLTEyLjksMC40LTI1LjMsNS4xLTM1LjMsMTMuNGMtOS45LDguMy0xNi45LDE5LjctMTkuNiwzMi40Yy0xLjUsNC45LTIuMywxMC0yLjUsMTUuMVYxMjUuNkwtNDQyLjYsMTI1LjZMLTQ0Mi42LDEyNS42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDYuNzQwNzI2LCA1Ni44MzcxMDQpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43NTEyMjYsIDEuOTg5Mjk5KSI+CiAgICAgICAgPHBhdGggZD0iTS00NDAuOCwwbDQzLjcsMTIwLjFjNC41LDEzLjQsOS41LDI5LjQsMTIuOCw0MS43aDAuOGMzLjctMTIuMiw3LjktMjcuNywxMi44LTQyLjQgbDM5LjctMTE5LjJoMzguNUwtMzQ2LjksMTQ1Yy0yNiw2OS43LTQzLjcsMTA1LjQtNjguNiwxMjcuMmMtMTIuNSwxMS43LTI3LjksMjAtNDQuNiwyMy45bC05LjEtMzEuMSBjMTEuNy0zLjksMjIuNS0xMC4xLDMxLjgtMTguMWMxMy4yLTExLjEsMjMuNy0yNS4yLDMwLjYtNDEuMmMxLjUtMi44LDIuNS01LjcsMi45LTguOGMtMC4zLTMuMy0xLjItNi42LTIuNS05LjdMLTQ4MC4yLDAuMSBoMzkuN0wtNDQwLjgsMEwtNDQwLjgsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODIyLjc0ODEwNCwgMC4wMDAwMDApIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS40NjQwNTAsIDAuMzc4OTE0KSI+CiAgICAgICAgPHBhdGggZD0iTS00MTMuNywwdjU4LjNoNTJ2MjguMmgtNTJWMTk2YzAsMjUsNywzOS41LDI3LjMsMzkuNWM3LjEsMC4xLDE0LjItMC43LDIxLjEtMi41IGwxLjcsMjcuN2MtMTAuMywzLjctMjEuMyw1LjQtMzIuMiw1Yy03LjMsMC40LTE0LjYtMC43LTIxLjMtMy40Yy02LjgtMi43LTEyLjktNi44LTE3LjktMTIuMWMtMTAuMy0xMC45LTE0LjEtMjktMTQuMS01Mi45IFY4Ni41aC0zMVY1OC4zaDMxVjkuNkwtNDEzLjcsMEwtNDEzLjcsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTc0LjQzMzI4NiwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuOTkwMDM0LCAwLjYxMDMzOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDQ1LjgsMTEzYzAuOCw1MCwzMi4yLDcwLjYsNjguNiw3MC42YzE5LDAuNiwzNy45LTMsNTUuMy0xMC41bDYuMiwyNi40IGMtMjAuOSw4LjktNDMuNSwxMy4xLTY2LjIsMTIuNmMtNjEuNSwwLTk4LjMtNDEuMi05OC4zLTEwMi41Qy00ODAuMiw0OC4yLTQ0NC43LDAtMzg2LjUsMGM2NS4yLDAsODIuNyw1OC4zLDgyLjcsOTUuNyBjLTAuMSw1LjgtMC41LDExLjUtMS4yLDE3LjJoLTE0MC42SC00NDUuOEwtNDQ1LjgsMTEzeiBNLTMzOS4yLDg2LjZjMC40LTIzLjUtOS41LTYwLjEtNTAuNC02MC4xIGMtMzYuOCwwLTUyLjgsMzQuNC01NS43LDYwLjFILTMzOS4yTC0zMzkuMiw4Ni42TC0zMzkuMiw4Ni42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAxLjk2MTA1OCwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMTc5NjQwLCAwLjcwNTA2OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDc4LjYsNjhjMC0yMy45LTAuNC00NC41LTEuNy02My40aDMxLjhsMS4yLDM5LjloMS43YzkuMS0yNy4zLDMxLTQ0LjUsNTUuMy00NC41IGMzLjUtMC4xLDcsMC40LDEwLjMsMS4ydjM0LjhjLTQuMS0wLjktOC4yLTEuMy0xMi40LTEuMmMtMjUuNiwwLTQzLjcsMTkuNy00OC43LDQ3LjRjLTEsNS43LTEuNiwxMS41LTEuNywxNy4ydjEwOC4zaC0zNlY2OCBMLTQ3OC42LDY4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCBkPSJNMTM1Mi4zLDMyNi4yaDM3VjI4aC0zN1YzMjYuMnogTTE2MDQuOCwzMjYuMmMtMi41LTEzLjktMy40LTMxLjEtMy40LTQ4Ljd2LTc2IGMwLTQwLjctMTUuMS04My4xLTc3LjMtODMuMWMtMjUuNiwwLTUwLDcuMS02Ni44LDE4LjFsOC40LDI0LjRjMTQuMy05LjIsMzQtMTUuMSw1My0xNS4xYzQxLjYsMCw0Ni4yLDMwLjIsNDYuMiw0N3Y0LjIgYy03OC42LTAuNC0xMjIuMywyNi41LTEyMi4zLDc1LjZjMCwyOS40LDIxLDU4LjQsNjIuMiw1OC40YzI5LDAsNTAuOS0xNC4zLDYyLjItMzAuMmgxLjNsMi45LDI1LjZIMTYwNC44eiBNMTU2NS43LDI1Ny43IGMwLDMuOC0wLjgsOC0yLjEsMTEuOGMtNS45LDE3LjItMjIuNywzNC00OS4yLDM0Yy0xOC45LDAtMzQuOS0xMS4zLTM0LjktMzUuM2MwLTM5LjUsNDUuOC00Ni42LDg2LjItNDUuOFYyNTcuN3ogTTE2OTguNSwzMjYuMiBsMS43LTMzLjZoMS4zYzE1LjEsMjYuOSwzOC43LDM4LjIsNjguMSwzOC4yYzQ1LjQsMCw5MS4yLTM2LjEsOTEuMi0xMDguOGMwLjQtNjEuNy0zNS4zLTEwMy43LTg1LjctMTAzLjcgYy0zMi44LDAtNTYuMywxNC43LTY5LjMsMzcuNGgtMC44VjI4aC0zNi42djI0NS43YzAsMTguMS0wLjgsMzguNi0xLjcsNTIuNUgxNjk4LjV6IE0xNzA0LjgsMjA4LjJjMC01LjksMS4zLTEwLjksMi4xLTE1LjEgYzcuNi0yOC4xLDMxLjEtNDUuNCw1Ni4zLTQ1LjRjMzkuNSwwLDYwLjUsMzQuOSw2MC41LDc1LjZjMCw0Ni42LTIzLjEsNzguMS02MS44LDc4LjFjLTI2LjksMC00OC4zLTE3LjYtNTUuNS00My4zIGMtMC44LTQuMi0xLjctOC44LTEuNy0xMy40VjIwOC4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzYxNjE2MSIgZD0iTTE1IDlIOXY2aDZWOXptLTIgNGgtMnYtMmgydjJ6bTgtMlY5aC0yVjdjMC0xLjEtLjktMi0yLTJoLTJWM2gtMnYyaC0yVjNIOXYySDdjLTEuMSAwLTIgLjktMiAydjJIM3YyaDJ2MkgzdjJoMnYyYzAgMS4xLjkgMiAyIDJoMnYyaDJ2LTJoMnYyaDJ2LTJoMmMxLjEgMCAyLS45IDItMnYtMmgydi0yaC0ydi0yaDJ6bS00IDZIN1Y3aDEwdjEweiIvPgo8L3N2Zz4K);
  --jp-icon-keyboard: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMTdjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY3YzAtMS4xLS45LTItMi0yem0tOSAzaDJ2MmgtMlY4em0wIDNoMnYyaC0ydi0yek04IDhoMnYySDhWOHptMCAzaDJ2Mkg4di0yem0tMSAySDV2LTJoMnYyem0wLTNINVY4aDJ2MnptOSA3SDh2LTJoOHYyem0wLTRoLTJ2LTJoMnYyem0wLTNoLTJWOGgydjJ6bTMgM2gtMnYtMmgydjJ6bTAtM2gtMlY4aDJ2MnoiLz4KPC9zdmc+Cg==);
  --jp-icon-launch: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHdpZHRoPSIzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yNiwyOEg2YTIuMDAyNywyLjAwMjcsMCwwLDEtMi0yVjZBMi4wMDI3LDIuMDAyNywwLDAsMSw2LDRIMTZWNkg2VjI2SDI2VjE2aDJWMjZBMi4wMDI3LDIuMDAyNywwLDAsMSwyNiwyOFoiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iMjAgMiAyMCA0IDI2LjU4NiA0IDE4IDEyLjU4NiAxOS40MTQgMTQgMjggNS40MTQgMjggMTIgMzAgMTIgMzAgMiAyMCAyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-launcher: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkgMTlINVY1aDdWM0g1YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnY3ek0xNCAzdjJoMy41OWwtOS44MyA5LjgzIDEuNDEgMS40MUwxOSA2LjQxVjEwaDJWM2gtN3oiLz4KPC9zdmc+Cg==);
  --jp-icon-line-form: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IndoaXRlIiBkPSJNNS44OCA0LjEyTDEzLjc2IDEybC03Ljg4IDcuODhMOCAyMmwxMC0xMEw4IDJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-link: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMuOSAxMmMwLTEuNzEgMS4zOS0zLjEgMy4xLTMuMWg0VjdIN2MtMi43NiAwLTUgMi4yNC01IDVzMi4yNCA1IDUgNWg0di0xLjlIN2MtMS43MSAwLTMuMS0xLjM5LTMuMS0zLjF6TTggMTNoOHYtMkg4djJ6bTktNmgtNHYxLjloNGMxLjcxIDAgMy4xIDEuMzkgMy4xIDMuMXMtMS4zOSAzLjEtMy4xIDMuMWgtNFYxN2g0YzIuNzYgMCA1LTIuMjQgNS01cy0yLjI0LTUtNS01eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xOSA1djE0SDVWNWgxNG0xLjEtMkgzLjljLS41IDAtLjkuNC0uOS45djE2LjJjMCAuNC40LjkuOS45aDE2LjJjLjQgMCAuOS0uNS45LS45VjMuOWMwLS41LS41LS45LS45LS45ek0xMSA3aDZ2MmgtNlY3em0wIDRoNnYyaC02di0yem0wIDRoNnYyaC02ek03IDdoMnYySDd6bTAgNGgydjJIN3ptMCA0aDJ2Mkg3eiIvPgo8L3N2Zz4K);
  --jp-icon-markdown: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjN0IxRkEyIiBkPSJNNSAxNC45aDEybC02LjEgNnptOS40LTYuOGMwLTEuMy0uMS0yLjktLjEtNC41LS40IDEuNC0uOSAyLjktMS4zIDQuM2wtMS4zIDQuM2gtMkw4LjUgNy45Yy0uNC0xLjMtLjctMi45LTEtNC4zLS4xIDEuNi0uMSAzLjItLjIgNC42TDcgMTIuNEg0LjhsLjctMTFoMy4zTDEwIDVjLjQgMS4yLjcgMi43IDEgMy45LjMtMS4yLjctMi42IDEtMy45bDEuMi0zLjdoMy4zbC42IDExaC0yLjRsLS4zLTQuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-move-down: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMTIuNDcxIDcuNTI4OTlDMTIuNzYzMiA3LjIzNjg0IDEyLjc2MzIgNi43NjMxNiAxMi40NzEgNi40NzEwMVY2LjQ3MTAxQzEyLjE3OSA2LjE3OTA1IDExLjcwNTcgNi4xNzg4NCAxMS40MTM1IDYuNDcwNTRMNy43NSAxMC4xMjc1VjEuNzVDNy43NSAxLjMzNTc5IDcuNDE0MjEgMSA3IDFWMUM2LjU4NTc5IDEgNi4yNSAxLjMzNTc5IDYuMjUgMS43NVYxMC4xMjc1TDIuNTk3MjYgNi40NjgyMkMyLjMwMzM4IDYuMTczODEgMS44MjY0MSA2LjE3MzU5IDEuNTMyMjYgNi40Njc3NFY2LjQ2Nzc0QzEuMjM4MyA2Ljc2MTcgMS4yMzgzIDcuMjM4MyAxLjUzMjI2IDcuNTMyMjZMNi4yOTI4OSAxMi4yOTI5QzYuNjgzNDIgMTIuNjgzNCA3LjMxNjU4IDEyLjY4MzQgNy43MDcxMSAxMi4yOTI5TDEyLjQ3MSA3LjUyODk5WiIgZmlsbD0iIzYxNjE2MSIvPgo8L3N2Zz4K);
  --jp-icon-move-up: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMS41Mjg5OSA2LjQ3MTAxQzEuMjM2ODQgNi43NjMxNiAxLjIzNjg0IDcuMjM2ODQgMS41Mjg5OSA3LjUyODk5VjcuNTI4OTlDMS44MjA5NSA3LjgyMDk1IDIuMjk0MjYgNy44MjExNiAyLjU4NjQ5IDcuNTI5NDZMNi4yNSAzLjg3MjVWMTIuMjVDNi4yNSAxMi42NjQyIDYuNTg1NzkgMTMgNyAxM1YxM0M3LjQxNDIxIDEzIDcuNzUgMTIuNjY0MiA3Ljc1IDEyLjI1VjMuODcyNUwxMS40MDI3IDcuNTMxNzhDMTEuNjk2NiA3LjgyNjE5IDEyLjE3MzYgNy44MjY0MSAxMi40Njc3IDcuNTMyMjZWNy41MzIyNkMxMi43NjE3IDcuMjM4MyAxMi43NjE3IDYuNzYxNyAxMi40Njc3IDYuNDY3NzRMNy43MDcxMSAxLjcwNzExQzcuMzE2NTggMS4zMTY1OCA2LjY4MzQyIDEuMzE2NTggNi4yOTI4OSAxLjcwNzExTDEuNTI4OTkgNi40NzEwMVoiIGZpbGw9IiM2MTYxNjEiLz4KPC9zdmc+Cg==);
  --jp-icon-new-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwIDZoLThsLTItMkg0Yy0xLjExIDAtMS45OS44OS0xLjk5IDJMMiAxOGMwIDEuMTEuODkgMiAyIDJoMTZjMS4xMSAwIDItLjg5IDItMlY4YzAtMS4xMS0uODktMi0yLTJ6bS0xIDhoLTN2M2gtMnYtM2gtM3YtMmgzVjloMnYzaDN2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-not-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI1IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMTkgMTcuMTg0NCAyLjk2OTY4IDE0LjMwMzIgMS44NjA5NCAxMS40NDA5WiIvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24yIiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4zMTU5MiA5LjMyMDMxKSIgZD0iTTcuMzY4NDIgMEwwIDcuMzY0NzkiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMzE1OTIgMTYuNjgzNikgc2NhbGUoMSAtMSkiIGQ9Ik03LjM2ODQyIDBMMCA3LjM2NDc5Ii8+Cjwvc3ZnPgo=);
  --jp-icon-notebook: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtbm90ZWJvb2staWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNFRjZDMDAiPgogICAgPHBhdGggZD0iTTE4LjcgMy4zdjE1LjRIMy4zVjMuM2gxNS40bTEuNS0xLjVIMS44djE4LjNoMTguM2wuMS0xOC4zeiIvPgogICAgPHBhdGggZD0iTTE2LjUgMTYuNWwtNS40LTQuMy01LjYgNC4zdi0xMWgxMXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-numbering: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTQgMTlINlYxOS41SDVWMjAuNUg2VjIxSDRWMjJIN1YxOEg0VjE5Wk01IDEwSDZWNkg0VjdINVYxMFpNNCAxM0g1LjhMNCAxNS4xVjE2SDdWMTVINS4yTDcgMTIuOVYxMkg0VjEzWk05IDdWOUgyM1Y3SDlaTTkgMjFIMjNWMTlIOVYyMVpNOSAxNUgyM1YxM0g5VjE1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-offline-bolt: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDIuMDJjLTUuNTEgMC05Ljk4IDQuNDctOS45OCA5Ljk4czQuNDcgOS45OCA5Ljk4IDkuOTggOS45OC00LjQ3IDkuOTgtOS45OFMxNy41MSAyLjAyIDEyIDIuMDJ6TTExLjQ4IDIwdi02LjI2SDhMMTMgNHY2LjI2aDMuMzVMMTEuNDggMjB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-palette: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE4IDEzVjIwSDRWNkg5LjAyQzkuMDcgNS4yOSA5LjI0IDQuNjIgOS41IDRINEMyLjkgNCAyIDQuOSAyIDZWMjBDMiAyMS4xIDIuOSAyMiA0IDIySDE4QzE5LjEgMjIgMjAgMjEuMSAyMCAyMFYxNUwxOCAxM1pNMTkuMyA4Ljg5QzE5Ljc0IDguMTkgMjAgNy4zOCAyMCA2LjVDMjAgNC4wMSAxNy45OSAyIDE1LjUgMkMxMy4wMSAyIDExIDQuMDEgMTEgNi41QzExIDguOTkgMTMuMDEgMTEgMTUuNDkgMTFDMTYuMzcgMTEgMTcuMTkgMTAuNzQgMTcuODggMTAuM0wyMSAxMy40MkwyMi40MiAxMkwxOS4zIDguODlaTTE1LjUgOUMxNC4xMiA5IDEzIDcuODggMTMgNi41QzEzIDUuMTIgMTQuMTIgNCAxNS41IDRDMTYuODggNCAxOCA1LjEyIDE4IDYuNUMxOCA3Ljg4IDE2Ljg4IDkgMTUuNSA5WiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDZIOS4wMTg5NEM5LjAwNjM5IDYuMTY1MDIgOSA2LjMzMTc2IDkgNi41QzkgOC44MTU3NyAxMC4yMTEgMTAuODQ4NyAxMi4wMzQzIDEySDlWMTRIMTZWMTIuOTgxMUMxNi41NzAzIDEyLjkzNzcgMTcuMTIgMTIuODIwNyAxNy42Mzk2IDEyLjYzOTZMMTggMTNWMjBINFY2Wk04IDhINlYxMEg4VjhaTTYgMTJIOFYxNEg2VjEyWk04IDE2SDZWMThIOFYxNlpNOSAxNkgxNlYxOEg5VjE2WiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-paste: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE5IDJoLTQuMThDMTQuNC44NCAxMy4zIDAgMTIgMGMtMS4zIDAtMi40Ljg0LTIuODIgMkg1Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS03IDBjLjU1IDAgMSAuNDUgMSAxcy0uNDUgMS0xIDEtMS0uNDUtMS0xIC40NS0xIDEtMXptNyAxOEg1VjRoMnYzaDEwVjRoMnYxNnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-pdf: url(data:image/svg+xml;base64,PHN2ZwogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyMiIgd2lkdGg9IjE2Ij4KICAgIDxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDQ1KSIgY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0ZGMkEyQSIKICAgICAgIGQ9Im0gMjIuMzQ0MzY5LC0zLjAxNjM2NDIgaCA1LjYzODYwNCB2IDEuNTc5MjQzMyBoIC0zLjU0OTIyNyB2IDEuNTA4NjkyOTkgaCAzLjMzNzU3NiBWIDEuNjUwODE1NCBoIC0zLjMzNzU3NiB2IDMuNDM1MjYxMyBoIC0yLjA4OTM3NyB6IG0gLTcuMTM2NDQ0LDEuNTc5MjQzMyB2IDQuOTQzOTU0MyBoIDAuNzQ4OTIgcSAxLjI4MDc2MSwwIDEuOTUzNzAzLC0wLjYzNDk1MzUgMC42NzgzNjksLTAuNjM0OTUzNSAwLjY3ODM2OSwtMS44NDUxNjQxIDAsLTEuMjA0NzgzNTUgLTAuNjcyOTQyLC0xLjgzNDMxMDExIC0wLjY3Mjk0MiwtMC42Mjk1MjY1OSAtMS45NTkxMywtMC42Mjk1MjY1OSB6IG0gLTIuMDg5Mzc3LC0xLjU3OTI0MzMgaCAyLjIwMzM0MyBxIDEuODQ1MTY0LDAgMi43NDYwMzksMC4yNjU5MjA3IDAuOTA2MzAxLDAuMjYwNDkzNyAxLjU1MjEwOCwwLjg5MDAyMDMgMC41Njk4MywwLjU0ODEyMjMgMC44NDY2MDUsMS4yNjQ0ODAwNiAwLjI3Njc3NCwwLjcxNjM1NzgxIDAuMjc2Nzc0LDEuNjIyNjU4OTQgMCwwLjkxNzE1NTEgLTAuMjc2Nzc0LDEuNjM4OTM5OSAtMC4yNzY3NzUsMC43MTYzNTc4IC0wLjg0NjYwNSwxLjI2NDQ4IC0wLjY1MTIzNCwwLjYyOTUyNjYgLTEuNTYyOTYyLDAuODk1NDQ3MyAtMC45MTE3MjgsMC4yNjA0OTM3IC0yLjczNTE4NSwwLjI2MDQ5MzcgaCAtMi4yMDMzNDMgeiBtIC04LjE0NTg1NjUsMCBoIDMuNDY3ODIzIHEgMS41NDY2ODE2LDAgMi4zNzE1Nzg1LDAuNjg5MjIzIDAuODMwMzI0LDAuNjgzNzk2MSAwLjgzMDMyNCwxLjk1MzcwMzE0IDAsMS4yNzUzMzM5NyAtMC44MzAzMjQsMS45NjQ1NTcwNiBRIDkuOTg3MTk2MSwyLjI3NDkxNSA4LjQ0MDUxNDUsMi4yNzQ5MTUgSCA3LjA2MjA2ODQgViA1LjA4NjA3NjcgSCA0Ljk3MjY5MTUgWiBtIDIuMDg5Mzc2OSwxLjUxNDExOTkgdiAyLjI2MzAzOTQzIGggMS4xNTU5NDEgcSAwLjYwNzgxODgsMCAwLjkzODg2MjksLTAuMjkzMDU1NDcgMC4zMzEwNDQxLC0wLjI5ODQ4MjQxIDAuMzMxMDQ0MSwtMC44NDExNzc3MiAwLC0wLjU0MjY5NTMxIC0wLjMzMTA0NDEsLTAuODM1NzUwNzQgLTAuMzMxMDQ0MSwtMC4yOTMwNTU1IC0wLjkzODg2MjksLTAuMjkzMDU1NSB6IgovPgo8L3N2Zz4K);
  --jp-icon-python: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iLTEwIC0xMCAxMzEuMTYxMzYxNjk0MzM1OTQgMTMyLjM4ODk5OTkzODk2NDg0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzA2OTk4IiBkPSJNIDU0LjkxODc4NSw5LjE5Mjc0MjFlLTQgQyA1MC4zMzUxMzIsMC4wMjIyMTcyNyA0NS45NTc4NDYsMC40MTMxMzY5NyA0Mi4xMDYyODUsMS4wOTQ2NjkzIDMwLjc2MDA2OSwzLjA5OTE3MzEgMjguNzAwMDM2LDcuMjk0NzcxNCAyOC43MDAwMzUsMTUuMDMyMTY5IHYgMTAuMjE4NzUgaCAyNi44MTI1IHYgMy40MDYyNSBoIC0yNi44MTI1IC0xMC4wNjI1IGMgLTcuNzkyNDU5LDAgLTE0LjYxNTc1ODgsNC42ODM3MTcgLTE2Ljc0OTk5OTgsMTMuNTkzNzUgLTIuNDYxODE5OTgsMTAuMjEyOTY2IC0yLjU3MTAxNTA4LDE2LjU4NjAyMyAwLDI3LjI1IDEuOTA1OTI4Myw3LjkzNzg1MiA2LjQ1NzU0MzIsMTMuNTkzNzQ4IDE0LjI0OTk5OTgsMTMuNTkzNzUgaCA5LjIxODc1IHYgLTEyLjI1IGMgMCwtOC44NDk5MDIgNy42NTcxNDQsLTE2LjY1NjI0OCAxNi43NSwtMTYuNjU2MjUgaCAyNi43ODEyNSBjIDcuNDU0OTUxLDAgMTMuNDA2MjUzLC02LjEzODE2NCAxMy40MDYyNSwtMTMuNjI1IHYgLTI1LjUzMTI1IGMgMCwtNy4yNjYzMzg2IC02LjEyOTk4LC0xMi43MjQ3NzcxIC0xMy40MDYyNSwtMTMuOTM3NDk5NyBDIDY0LjI4MTU0OCwwLjMyNzk0Mzk3IDU5LjUwMjQzOCwtMC4wMjAzNzkwMyA1NC45MTg3ODUsOS4xOTI3NDIxZS00IFogbSAtMTQuNSw4LjIxODc1MDEyNTc5IGMgMi43Njk1NDcsMCA1LjAzMTI1LDIuMjk4NjQ1NiA1LjAzMTI1LDUuMTI0OTk5NiAtMmUtNiwyLjgxNjMzNiAtMi4yNjE3MDMsNS4wOTM3NSAtNS4wMzEyNSw1LjA5Mzc1IC0yLjc3OTQ3NiwtMWUtNiAtNS4wMzEyNSwtMi4yNzc0MTUgLTUuMDMxMjUsLTUuMDkzNzUgLTEwZS03LC0yLjgyNjM1MyAyLjI1MTc3NCwtNS4xMjQ5OTk2IDUuMDMxMjUsLTUuMTI0OTk5NiB6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2ZmZDQzYiIgZD0ibSA4NS42Mzc1MzUsMjguNjU3MTY5IHYgMTEuOTA2MjUgYyAwLDkuMjMwNzU1IC03LjgyNTg5NSwxNi45OTk5OTkgLTE2Ljc1LDE3IGggLTI2Ljc4MTI1IGMgLTcuMzM1ODMzLDAgLTEzLjQwNjI0OSw2LjI3ODQ4MyAtMTMuNDA2MjUsMTMuNjI1IHYgMjUuNTMxMjQ3IGMgMCw3LjI2NjM0NCA2LjMxODU4OCwxMS41NDAzMjQgMTMuNDA2MjUsMTMuNjI1MDA0IDguNDg3MzMxLDIuNDk1NjEgMTYuNjI2MjM3LDIuOTQ2NjMgMjYuNzgxMjUsMCA2Ljc1MDE1NSwtMS45NTQzOSAxMy40MDYyNTMsLTUuODg3NjEgMTMuNDA2MjUsLTEzLjYyNTAwNCBWIDg2LjUwMDkxOSBoIC0yNi43ODEyNSB2IC0zLjQwNjI1IGggMjYuNzgxMjUgMTMuNDA2MjU0IGMgNy43OTI0NjEsMCAxMC42OTYyNTEsLTUuNDM1NDA4IDEzLjQwNjI0MSwtMTMuNTkzNzUgMi43OTkzMywtOC4zOTg4ODYgMi42ODAyMiwtMTYuNDc1Nzc2IDAsLTI3LjI1IC0xLjkyNTc4LC03Ljc1NzQ0MSAtNS42MDM4NywtMTMuNTkzNzUgLTEzLjQwNjI0MSwtMTMuNTkzNzUgeiBtIC0xNS4wNjI1LDY0LjY1NjI1IGMgMi43Nzk0NzgsM2UtNiA1LjAzMTI1LDIuMjc3NDE3IDUuMDMxMjUsNS4wOTM3NDcgLTJlLTYsMi44MjYzNTQgLTIuMjUxNzc1LDUuMTI1MDA0IC01LjAzMTI1LDUuMTI1MDA0IC0yLjc2OTU1LDAgLTUuMDMxMjUsLTIuMjk4NjUgLTUuMDMxMjUsLTUuMTI1MDA0IDJlLTYsLTIuODE2MzMgMi4yNjE2OTcsLTUuMDkzNzQ3IDUuMDMxMjUsLTUuMDkzNzQ3IHoiLz4KPC9zdmc+Cg==);
  --jp-icon-r-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjE5NkYzIiBkPSJNNC40IDIuNWMxLjItLjEgMi45LS4zIDQuOS0uMyAyLjUgMCA0LjEuNCA1LjIgMS4zIDEgLjcgMS41IDEuOSAxLjUgMy41IDAgMi0xLjQgMy41LTIuOSA0LjEgMS4yLjQgMS43IDEuNiAyLjIgMyAuNiAxLjkgMSAzLjkgMS4zIDQuNmgtMy44Yy0uMy0uNC0uOC0xLjctMS4yLTMuN3MtMS4yLTIuNi0yLjYtMi42aC0uOXY2LjRINC40VjIuNXptMy43IDYuOWgxLjRjMS45IDAgMi45LS45IDIuOS0yLjNzLTEtMi4zLTIuOC0yLjNjLS43IDAtMS4zIDAtMS42LjJ2NC41aC4xdi0uMXoiLz4KPC9zdmc+Cg==);
  --jp-icon-react: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMTUwIDE1MCA1NDEuOSAyOTUuMyI+CiAgPGcgY2xhc3M9ImpwLWljb24tYnJhbmQyIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxREFGQiI+CiAgICA8cGF0aCBkPSJNNjY2LjMgMjk2LjVjMC0zMi41LTQwLjctNjMuMy0xMDMuMS04Mi40IDE0LjQtNjMuNiA4LTExNC4yLTIwLjItMTMwLjQtNi41LTMuOC0xNC4xLTUuNi0yMi40LTUuNnYyMi4zYzQuNiAwIDguMy45IDExLjQgMi42IDEzLjYgNy44IDE5LjUgMzcuNSAxNC45IDc1LjctMS4xIDkuNC0yLjkgMTkuMy01LjEgMjkuNC0xOS42LTQuOC00MS04LjUtNjMuNS0xMC45LTEzLjUtMTguNS0yNy41LTM1LjMtNDEuNi01MCAzMi42LTMwLjMgNjMuMi00Ni45IDg0LTQ2LjlWNzhjLTI3LjUgMC02My41IDE5LjYtOTkuOSA1My42LTM2LjQtMzMuOC03Mi40LTUzLjItOTkuOS01My4ydjIyLjNjMjAuNyAwIDUxLjQgMTYuNSA4NCA0Ni42LTE0IDE0LjctMjggMzEuNC00MS4zIDQ5LjktMjIuNiAyLjQtNDQgNi4xLTYzLjYgMTEtMi4zLTEwLTQtMTkuNy01LjItMjktNC43LTM4LjIgMS4xLTY3LjkgMTQuNi03NS44IDMtMS44IDYuOS0yLjYgMTEuNS0yLjZWNzguNWMtOC40IDAtMTYgMS44LTIyLjYgNS42LTI4LjEgMTYuMi0zNC40IDY2LjctMTkuOSAxMzAuMS02Mi4yIDE5LjItMTAyLjcgNDkuOS0xMDIuNyA4Mi4zIDAgMzIuNSA0MC43IDYzLjMgMTAzLjEgODIuNC0xNC40IDYzLjYtOCAxMTQuMiAyMC4yIDEzMC40IDYuNSAzLjggMTQuMSA1LjYgMjIuNSA1LjYgMjcuNSAwIDYzLjUtMTkuNiA5OS45LTUzLjYgMzYuNCAzMy44IDcyLjQgNTMuMiA5OS45IDUzLjIgOC40IDAgMTYtMS44IDIyLjYtNS42IDI4LjEtMTYuMiAzNC40LTY2LjcgMTkuOS0xMzAuMSA2Mi0xOS4xIDEwMi41LTQ5LjkgMTAyLjUtODIuM3ptLTEzMC4yLTY2LjdjLTMuNyAxMi45LTguMyAyNi4yLTEzLjUgMzkuNS00LjEtOC04LjQtMTYtMTMuMS0yNC00LjYtOC05LjUtMTUuOC0xNC40LTIzLjQgMTQuMiAyLjEgMjcuOSA0LjcgNDEgNy45em0tNDUuOCAxMDYuNWMtNy44IDEzLjUtMTUuOCAyNi4zLTI0LjEgMzguMi0xNC45IDEuMy0zMCAyLTQ1LjIgMi0xNS4xIDAtMzAuMi0uNy00NS0xLjktOC4zLTExLjktMTYuNC0yNC42LTI0LjItMzgtNy42LTEzLjEtMTQuNS0yNi40LTIwLjgtMzkuOCA2LjItMTMuNCAxMy4yLTI2LjggMjAuNy0zOS45IDcuOC0xMy41IDE1LjgtMjYuMyAyNC4xLTM4LjIgMTQuOS0xLjMgMzAtMiA0NS4yLTIgMTUuMSAwIDMwLjIuNyA0NSAxLjkgOC4zIDExLjkgMTYuNCAyNC42IDI0LjIgMzggNy42IDEzLjEgMTQuNSAyNi40IDIwLjggMzkuOC02LjMgMTMuNC0xMy4yIDI2LjgtMjAuNyAzOS45em0zMi4zLTEzYzUuNCAxMy40IDEwIDI2LjggMTMuOCAzOS44LTEzLjEgMy4yLTI2LjkgNS45LTQxLjIgOCA0LjktNy43IDkuOC0xNS42IDE0LjQtMjMuNyA0LjYtOCA4LjktMTYuMSAxMy0yNC4xek00MjEuMiA0MzBjLTkuMy05LjYtMTguNi0yMC4zLTI3LjgtMzIgOSAuNCAxOC4yLjcgMjcuNS43IDkuNCAwIDE4LjctLjIgMjcuOC0uNy05IDExLjctMTguMyAyMi40LTI3LjUgMzJ6bS03NC40LTU4LjljLTE0LjItMi4xLTI3LjktNC43LTQxLTcuOSAzLjctMTIuOSA4LjMtMjYuMiAxMy41LTM5LjUgNC4xIDggOC40IDE2IDEzLjEgMjQgNC43IDggOS41IDE1LjggMTQuNCAyMy40ek00MjAuNyAxNjNjOS4zIDkuNiAxOC42IDIwLjMgMjcuOCAzMi05LS40LTE4LjItLjctMjcuNS0uNy05LjQgMC0xOC43LjItMjcuOC43IDktMTEuNyAxOC4zLTIyLjQgMjcuNS0zMnptLTc0IDU4LjljLTQuOSA3LjctOS44IDE1LjYtMTQuNCAyMy43LTQuNiA4LTguOSAxNi0xMyAyNC01LjQtMTMuNC0xMC0yNi44LTEzLjgtMzkuOCAxMy4xLTMuMSAyNi45LTUuOCA0MS4yLTcuOXptLTkwLjUgMTI1LjJjLTM1LjQtMTUuMS01OC4zLTM0LjktNTguMy01MC42IDAtMTUuNyAyMi45LTM1LjYgNTguMy01MC42IDguNi0zLjcgMTgtNyAyNy43LTEwLjEgNS43IDE5LjYgMTMuMiA0MCAyMi41IDYwLjktOS4yIDIwLjgtMTYuNiA0MS4xLTIyLjIgNjAuNi05LjktMy4xLTE5LjMtNi41LTI4LTEwLjJ6TTMxMCA0OTBjLTEzLjYtNy44LTE5LjUtMzcuNS0xNC45LTc1LjcgMS4xLTkuNCAyLjktMTkuMyA1LjEtMjkuNCAxOS42IDQuOCA0MSA4LjUgNjMuNSAxMC45IDEzLjUgMTguNSAyNy41IDM1LjMgNDEuNiA1MC0zMi42IDMwLjMtNjMuMiA0Ni45LTg0IDQ2LjktNC41LS4xLTguMy0xLTExLjMtMi43em0yMzcuMi03Ni4yYzQuNyAzOC4yLTEuMSA2Ny45LTE0LjYgNzUuOC0zIDEuOC02LjkgMi42LTExLjUgMi42LTIwLjcgMC01MS40LTE2LjUtODQtNDYuNiAxNC0xNC43IDI4LTMxLjQgNDEuMy00OS45IDIyLjYtMi40IDQ0LTYuMSA2My42LTExIDIuMyAxMC4xIDQuMSAxOS44IDUuMiAyOS4xem0zOC41LTY2LjdjLTguNiAzLjctMTggNy0yNy43IDEwLjEtNS43LTE5LjYtMTMuMi00MC0yMi41LTYwLjkgOS4yLTIwLjggMTYuNi00MS4xIDIyLjItNjAuNiA5LjkgMy4xIDE5LjMgNi41IDI4LjEgMTAuMiAzNS40IDE1LjEgNTguMyAzNC45IDU4LjMgNTAuNi0uMSAxNS43LTIzIDM1LjYtNTguNCA1MC42ek0zMjAuOCA3OC40eiIvPgogICAgPGNpcmNsZSBjeD0iNDIwLjkiIGN5PSIyOTYuNSIgcj0iNDUuNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-redo: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4LjQgMTAuNkMxNi41NSA4Ljk5IDE0LjE1IDggMTEuNSA4Yy00LjY1IDAtOC41OCAzLjAzLTkuOTYgNy4yMkwzLjkgMTZjMS4wNS0zLjE5IDQuMDUtNS41IDcuNi01LjUgMS45NSAwIDMuNzMuNzIgNS4xMiAxLjg4TDEzIDE2aDlWN2wtMy42IDMuNnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-refresh: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTkgMTMuNWMtMi40OSAwLTQuNS0yLjAxLTQuNS00LjVTNi41MSA0LjUgOSA0LjVjMS4yNCAwIDIuMzYuNTIgMy4xNyAxLjMzTDEwIDhoNVYzbC0xLjc2IDEuNzZDMTIuMTUgMy42OCAxMC42NiAzIDkgMyA1LjY5IDMgMy4wMSA1LjY5IDMuMDEgOVM1LjY5IDE1IDkgMTVjMi45NyAwIDUuNDMtMi4xNiA1LjktNWgtMS41MmMtLjQ2IDItMi4yNCAzLjUtNC4zOCAzLjV6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-regex: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiBmaWxsPSIjRkZGIj4KICAgIDxjaXJjbGUgY2xhc3M9InN0MiIgY3g9IjUuNSIgY3k9IjE0LjUiIHI9IjEuNSIvPgogICAgPHJlY3QgeD0iMTIiIHk9IjQiIGNsYXNzPSJzdDIiIHdpZHRoPSIxIiBoZWlnaHQ9IjgiLz4KICAgIDxyZWN0IHg9IjguNSIgeT0iNy41IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiAtMC41IDAuNSAwLjg2NiAtMi4zMjU1IDcuMzIxOSkiIGNsYXNzPSJzdDIiIHdpZHRoPSI4IiBoZWlnaHQ9IjEiLz4KICAgIDxyZWN0IHg9IjEyIiB5PSI0IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjUgLTAuODY2IDAuODY2IDAuNSAtMC42Nzc5IDE0LjgyNTIpIiBjbGFzcz0ic3QyIiB3aWR0aD0iMSIgaGVpZ2h0PSI4Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-run: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-running: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptOTYgMzI4YzAgOC44LTcuMiAxNi0xNiAxNkgxNzZjLTguOCAwLTE2LTcuMi0xNi0xNlYxNzZjMC04LjggNy4yLTE2IDE2LTE2aDE2MGM4LjggMCAxNiA3LjIgMTYgMTZ2MTYweiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-save: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE3IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjdsLTQtNHptLTUgMTZjLTEuNjYgMC0zLTEuMzQtMy0zczEuMzQtMyAzLTMgMyAxLjM0IDMgMy0xLjM0IDMtMyAzem0zLTEwSDVWNWgxMHY0eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-search: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjEsMTAuOWgtMC43bC0wLjItMC4yYzAuOC0wLjksMS4zLTIuMiwxLjMtMy41YzAtMy0yLjQtNS40LTUuNC01LjRTMS44LDQuMiwxLjgsNy4xczIuNCw1LjQsNS40LDUuNCBjMS4zLDAsMi41LTAuNSwzLjUtMS4zbDAuMiwwLjJ2MC43bDQuMSw0LjFsMS4yLTEuMkwxMi4xLDEwLjl6IE03LjEsMTAuOWMtMi4xLDAtMy43LTEuNy0zLjctMy43czEuNy0zLjcsMy43LTMuN3MzLjcsMS43LDMuNywzLjcgUzkuMiwxMC45LDcuMSwxMC45eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-settings: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVBLjQ4OC40ODggMCAwMDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==);
  --jp-icon-share: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTSAxOCAyIEMgMTYuMzU0OTkgMiAxNSAzLjM1NDk5MDQgMTUgNSBDIDE1IDUuMTkwOTUyOSAxNS4wMjE3OTEgNS4zNzcxMjI0IDE1LjA1NjY0MSA1LjU1ODU5MzggTCA3LjkyMTg3NSA5LjcyMDcwMzEgQyA3LjM5ODUzOTkgOS4yNzc4NTM5IDYuNzMyMDc3MSA5IDYgOSBDIDQuMzU0OTkwNCA5IDMgMTAuMzU0OTkgMyAxMiBDIDMgMTMuNjQ1MDEgNC4zNTQ5OTA0IDE1IDYgMTUgQyA2LjczMjA3NzEgMTUgNy4zOTg1Mzk5IDE0LjcyMjE0NiA3LjkyMTg3NSAxNC4yNzkyOTcgTCAxNS4wNTY2NDEgMTguNDM5NDUzIEMgMTUuMDIxNTU1IDE4LjYyMTUxNCAxNSAxOC44MDgzODYgMTUgMTkgQyAxNSAyMC42NDUwMSAxNi4zNTQ5OSAyMiAxOCAyMiBDIDE5LjY0NTAxIDIyIDIxIDIwLjY0NTAxIDIxIDE5IEMgMjEgMTcuMzU0OTkgMTkuNjQ1MDEgMTYgMTggMTYgQyAxNy4yNjc0OCAxNiAxNi42MDE1OTMgMTYuMjc5MzI4IDE2LjA3ODEyNSAxNi43MjI2NTYgTCA4Ljk0MzM1OTQgMTIuNTU4NTk0IEMgOC45NzgyMDk1IDEyLjM3NzEyMiA5IDEyLjE5MDk1MyA5IDEyIEMgOSAxMS44MDkwNDcgOC45NzgyMDk1IDExLjYyMjg3OCA4Ljk0MzM1OTQgMTEuNDQxNDA2IEwgMTYuMDc4MTI1IDcuMjc5Mjk2OSBDIDE2LjYwMTQ2IDcuNzIyMTQ2MSAxNy4yNjc5MjMgOCAxOCA4IEMgMTkuNjQ1MDEgOCAyMSA2LjY0NTAwOTYgMjEgNSBDIDIxIDMuMzU0OTkwNCAxOS42NDUwMSAyIDE4IDIgeiBNIDE4IDQgQyAxOC41NjQxMjkgNCAxOSA0LjQzNTg3MDYgMTkgNSBDIDE5IDUuNTY0MTI5NCAxOC41NjQxMjkgNiAxOCA2IEMgMTcuNDM1ODcxIDYgMTcgNS41NjQxMjk0IDE3IDUgQyAxNyA0LjQzNTg3MDYgMTcuNDM1ODcxIDQgMTggNCB6IE0gNiAxMSBDIDYuNTY0MTI5NCAxMSA3IDExLjQzNTg3MSA3IDEyIEMgNyAxMi41NjQxMjkgNi41NjQxMjk0IDEzIDYgMTMgQyA1LjQzNTg3MDYgMTMgNSAxMi41NjQxMjkgNSAxMiBDIDUgMTEuNDM1ODcxIDUuNDM1ODcwNiAxMSA2IDExIHogTSAxOCAxOCBDIDE4LjU2NDEyOSAxOCAxOSAxOC40MzU4NzEgMTkgMTkgQyAxOSAxOS41NjQxMjkgMTguNTY0MTI5IDIwIDE4IDIwIEMgMTcuNDM1ODcxIDIwIDE3IDE5LjU2NDEyOSAxNyAxOSBDIDE3IDE4LjQzNTg3MSAxNy40MzU4NzEgMTggMTggMTggeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-spreadsheet: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNENBRjUwIiBkPSJNMi4yIDIuMnYxNy42aDE3LjZWMi4ySDIuMnptMTUuNCA3LjdoLTUuNVY0LjRoNS41djUuNXpNOS45IDQuNHY1LjVINC40VjQuNGg1LjV6bS01LjUgNy43aDUuNXY1LjVINC40di01LjV6bTcuNyA1LjV2LTUuNWg1LjV2NS41aC01LjV6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-stop: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik02IDZoMTJ2MTJINnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tab: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIxIDNIM2MtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxOGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE2SDNWNWgxMHY0aDh2MTB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-table-rows: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMSw4SDNWNGgxOFY4eiBNMjEsMTBIM3Y0aDE4VjEweiBNMjEsMTZIM3Y0aDE4VjE2eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-tag: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCA0MyAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTI4LjgzMzIgMTIuMzM0TDMyLjk5OTggMTYuNTAwN0wzNy4xNjY1IDEyLjMzNEgyOC44MzMyWiIvPgoJCTxwYXRoIGQ9Ik0xNi4yMDk1IDIxLjYxMDRDMTUuNjg3MyAyMi4xMjk5IDE0Ljg0NDMgMjIuMTI5OSAxNC4zMjQ4IDIxLjYxMDRMNi45ODI5IDE0LjcyNDVDNi41NzI0IDE0LjMzOTQgNi4wODMxMyAxMy42MDk4IDYuMDQ3ODYgMTMuMDQ4MkM1Ljk1MzQ3IDExLjUyODggNi4wMjAwMiA4LjYxOTQ0IDYuMDY2MjEgNy4wNzY5NUM2LjA4MjgxIDYuNTE0NzcgNi41NTU0OCA2LjA0MzQ3IDcuMTE4MDQgNi4wMzA1NUM5LjA4ODYzIDUuOTg0NzMgMTMuMjYzOCA1LjkzNTc5IDEzLjY1MTggNi4zMjQyNUwyMS43MzY5IDEzLjYzOUMyMi4yNTYgMTQuMTU4NSAyMS43ODUxIDE1LjQ3MjQgMjEuMjYyIDE1Ljk5NDZMMTYuMjA5NSAyMS42MTA0Wk05Ljc3NTg1IDguMjY1QzkuMzM1NTEgNy44MjU2NiA4LjYyMzUxIDcuODI1NjYgOC4xODI4IDguMjY1QzcuNzQzNDYgOC43MDU3MSA3Ljc0MzQ2IDkuNDE3MzMgOC4xODI4IDkuODU2NjdDOC42MjM4MiAxMC4yOTY0IDkuMzM1ODIgMTAuMjk2NCA5Ljc3NTg1IDkuODU2NjdDMTAuMjE1NiA5LjQxNzMzIDEwLjIxNTYgOC43MDUzMyA5Ljc3NTg1IDguMjY1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-terminal: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiA+CiAgICA8cmVjdCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1iYWNrZ3JvdW5kLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyIDIpIiBmaWxsPSIjMzMzMzMzIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUtaW52ZXJzZSIgZD0iTTUuMDU2NjQgOC43NjE3MkM1LjA1NjY0IDguNTk3NjYgNS4wMzEyNSA4LjQ1MzEyIDQuOTgwNDcgOC4zMjgxMkM0LjkzMzU5IDguMTk5MjIgNC44NTU0NyA4LjA4MjAzIDQuNzQ2MDkgNy45NzY1NkM0LjY0MDYyIDcuODcxMDkgNC41IDcuNzc1MzkgNC4zMjQyMiA3LjY4OTQ1QzQuMTUyMzQgNy41OTk2MSAzLjk0MzM2IDcuNTExNzIgMy42OTcyNyA3LjQyNTc4QzMuMzAyNzMgNy4yODUxNiAyLjk0MzM2IDcuMTM2NzIgMi42MTkxNCA2Ljk4MDQ3QzIuMjk0OTIgNi44MjQyMiAyLjAxNzU4IDYuNjQyNTggMS43ODcxMSA2LjQzNTU1QzEuNTYwNTUgNi4yMjg1MiAxLjM4NDc3IDUuOTg4MjggMS4yNTk3NyA1LjcxNDg0QzEuMTM0NzcgNS40Mzc1IDEuMDcyMjcgNS4xMDkzOCAxLjA3MjI3IDQuNzMwNDdDMS4wNzIyNyA0LjM5ODQ0IDEuMTI4OTEgNC4wOTU3IDEuMjQyMTkgMy44MjIyN0MxLjM1NTQ3IDMuNTQ0OTIgMS41MTU2MiAzLjMwNDY5IDEuNzIyNjYgMy4xMDE1NkMxLjkyOTY5IDIuODk4NDQgMi4xNzk2OSAyLjczNDM3IDIuNDcyNjYgMi42MDkzOEMyLjc2NTYyIDIuNDg0MzggMy4wOTE4IDIuNDA0MyAzLjQ1MTE3IDIuMzY5MTRWMS4xMDkzOEg0LjM4ODY3VjIuMzgwODZDNC43NDAyMyAyLjQyNzczIDUuMDU2NjQgMi41MjM0NCA1LjMzNzg5IDIuNjY3OTdDNS42MTkxNCAyLjgxMjUgNS44NTc0MiAzLjAwMTk1IDYuMDUyNzMgMy4yMzYzM0M2LjI1MTk1IDMuNDY2OCA2LjQwNDMgMy43NDAyMyA2LjUwOTc3IDQuMDU2NjRDNi42MTkxNCA0LjM2OTE0IDYuNjczODMgNC43MjA3IDYuNjczODMgNS4xMTEzM0g1LjA0NDkyQzUuMDQ0OTIgNC42Mzg2NyA0LjkzNzUgNC4yODEyNSA0LjcyMjY2IDQuMDM5MDZDNC41MDc4MSAzLjc5Mjk3IDQuMjE2OCAzLjY2OTkyIDMuODQ5NjEgMy42Njk5MkMzLjY1MDM5IDMuNjY5OTIgMy40NzY1NiAzLjY5NzI3IDMuMzI4MTIgMy43NTE5NUMzLjE4MzU5IDMuODAyNzMgMy4wNjQ0NSAzLjg3Njk1IDIuOTcwNyAzLjk3NDYxQzIuODc2OTUgNC4wNjgzNiAyLjgwNjY0IDQuMTc5NjkgMi43NTk3NyA0LjMwODU5QzIuNzE2OCA0LjQzNzUgMi42OTUzMSA0LjU3ODEyIDIuNjk1MzEgNC43MzA0N0MyLjY5NTMxIDQuODgyODEgMi43MTY4IDUuMDE5NTMgMi43NTk3NyA1LjE0MDYyQzIuODA2NjQgNS4yNTc4MSAyLjg4MjgxIDUuMzY3MTkgMi45ODgyOCA1LjQ2ODc1QzMuMDk3NjYgNS41NzAzMSAzLjI0MDIzIDUuNjY3OTcgMy40MTYwMiA1Ljc2MTcyQzMuNTkxOCA1Ljg1MTU2IDMuODEwNTUgNS45NDMzNiA0LjA3MjI3IDYuMDM3MTFDNC40NjY4IDYuMTg1NTUgNC44MjQyMiA2LjMzOTg0IDUuMTQ0NTMgNi41QzUuNDY0ODQgNi42NTYyNSA1LjczODI4IDYuODM5ODQgNS45NjQ4NCA3LjA1MDc4QzYuMTk1MzEgNy4yNTc4MSA2LjM3MTA5IDcuNSA2LjQ5MjE5IDcuNzc3MzRDNi42MTcxOSA4LjA1MDc4IDYuNjc5NjkgOC4zNzUgNi42Nzk2OSA4Ljc1QzYuNjc5NjkgOS4wOTM3NSA2LjYyMzA1IDkuNDA0MyA2LjUwOTc3IDkuNjgxNjRDNi4zOTY0OCA5Ljk1NTA4IDYuMjM0MzggMTAuMTkxNCA2LjAyMzQ0IDEwLjM5MDZDNS44MTI1IDEwLjU4OTggNS41NTg1OSAxMC43NSA1LjI2MTcyIDEwLjg3MTFDNC45NjQ4NCAxMC45ODgzIDQuNjMyODEgMTEuMDY0NSA0LjI2NTYyIDExLjA5OTZWMTIuMjQ4SDMuMzMzOThWMTEuMDk5NkMzLjAwMTk1IDExLjA2ODQgMi42Nzk2OSAxMC45OTYxIDIuMzY3MTkgMTAuODgyOEMyLjA1NDY5IDEwLjc2NTYgMS43NzczNCAxMC41OTc3IDEuNTM1MTYgMTAuMzc4OUMxLjI5Njg4IDEwLjE2MDIgMS4xMDU0NyA5Ljg4NDc3IDAuOTYwOTM4IDkuNTUyNzNDMC44MTY0MDYgOS4yMTY4IDAuNzQ0MTQxIDguODE0NDUgMC43NDQxNDEgOC4zNDU3SDIuMzc4OTFDMi4zNzg5MSA4LjYyNjk1IDIuNDE5OTIgOC44NjMyOCAyLjUwMTk1IDkuMDU0NjlDMi41ODM5OCA5LjI0MjE5IDIuNjg5NDUgOS4zOTI1OCAyLjgxODM2IDkuNTA1ODZDMi45NTExNyA5LjYxNTIzIDMuMTAxNTYgOS42OTMzNiAzLjI2OTUzIDkuNzQwMjNDMy40Mzc1IDkuNzg3MTEgMy42MDkzOCA5LjgxMDU1IDMuNzg1MTYgOS44MTA1NUM0LjIwMzEyIDkuODEwNTUgNC41MTk1MyA5LjcxMjg5IDQuNzM0MzggOS41MTc1OEM0Ljk0OTIyIDkuMzIyMjcgNS4wNTY2NCA5LjA3MDMxIDUuMDU2NjQgOC43NjE3MlpNMTMuNDE4IDEyLjI3MTVIOC4wNzQyMlYxMUgxMy40MThWMTIuMjcxNVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMuOTUyNjQgNikiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=);
  --jp-icon-text-editor: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtdGV4dC1lZGl0b3ItaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xNSAxNUgzdjJoMTJ2LTJ6bTAtOEgzdjJoMTJWN3pNMyAxM2gxOHYtMkgzdjJ6bTAgOGgxOHYtMkgzdjJ6TTMgM3YyaDE4VjNIM3oiLz4KPC9zdmc+Cg==);
  --jp-icon-toc: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik03LDVIMjFWN0g3VjVNNywxM1YxMUgyMVYxM0g3TTQsNC41QTEuNSwxLjUgMCAwLDEgNS41LDZBMS41LDEuNSAwIDAsMSA0LDcuNUExLjUsMS41IDAgMCwxIDIuNSw2QTEuNSwxLjUgMCAwLDEgNCw0LjVNNCwxMC41QTEuNSwxLjUgMCAwLDEgNS41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMy41QTEuNSwxLjUgMCAwLDEgMi41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMC41TTcsMTlWMTdIMjFWMTlIN000LDE2LjVBMS41LDEuNSAwIDAsMSA1LjUsMThBMS41LDEuNSAwIDAsMSA0LDE5LjVBMS41LDEuNSAwIDAsMSAyLjUsMThBMS41LDEuNSAwIDAsMSA0LDE2LjVaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tree-view: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMiAxMVYzaC03djNIOVYzSDJ2OGg3VjhoMnYxMGg0djNoN3YtOGgtN3YzaC0yVjhoMnYzeiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMiAxNy4xODQ0IDIuOTY5NjggMTQuMzAzMiAxLjg2MDk0IDExLjQ0MDlaIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiMzMzMzMzMiIHN0cm9rZT0iIzMzMzMzMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCA5Ljg2NzE5KSIgZD0iTTIuODYwMTUgNC44NjUzNUwwLjcyNjU0OSAyLjk5OTU5TDAgMy42MzA0NUwyLjg2MDE1IDYuMTMxNTdMOCAwLjYzMDg3Mkw3LjI3ODU3IDBMMi44NjAxNSA0Ljg2NTM1WiIvPgo8L3N2Zz4K);
  --jp-icon-undo: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjUgOGMtMi42NSAwLTUuMDUuOTktNi45IDIuNkwyIDd2OWg5bC0zLjYyLTMuNjJjMS4zOS0xLjE2IDMuMTYtMS44OCA1LjEyLTEuODggMy41NCAwIDYuNTUgMi4zMSA3LjYgNS41bDIuMzctLjc4QzIxLjA4IDExLjAzIDE3LjE1IDggMTIuNSA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-user: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE2IDdhNCA0IDAgMTEtOCAwIDQgNCAwIDAxOCAwek0xMiAxNGE3IDcgMCAwMC03IDdoMTRhNyA3IDAgMDAtNy03eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-users: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM2IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGcgY2xhc3M9ImpwLWljb24zIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjczMjcgMCAwIDEuNzMyNyAtMy42MjgyIC4wOTk1NzcpIiBmaWxsPSIjNjE2MTYxIj4KICA8cGF0aCB0cmFuc2Zvcm09Im1hdHJpeCgxLjUsMCwwLDEuNSwwLC02KSIgZD0ibTEyLjE4NiA3LjUwOThjLTEuMDUzNSAwLTEuOTc1NyAwLjU2NjUtMi40Nzg1IDEuNDEwMiAwLjc1MDYxIDAuMzEyNzcgMS4zOTc0IDAuODI2NDggMS44NzMgMS40NzI3aDMuNDg2M2MwLTEuNTkyLTEuMjg4OS0yLjg4MjgtMi44ODA5LTIuODgyOHoiLz4KICA8cGF0aCBkPSJtMjAuNDY1IDIuMzg5NWEyLjE4ODUgMi4xODg1IDAgMCAxLTIuMTg4NCAyLjE4ODUgMi4xODg1IDIuMTg4NSAwIDAgMS0yLjE4ODUtMi4xODg1IDIuMTg4NSAyLjE4ODUgMCAwIDEgMi4xODg1LTIuMTg4NSAyLjE4ODUgMi4xODg1IDAgMCAxIDIuMTg4NCAyLjE4ODV6Ii8+CiAgPHBhdGggdHJhbnNmb3JtPSJtYXRyaXgoMS41LDAsMCwxLjUsMCwtNikiIGQ9Im0zLjU4OTggOC40MjE5Yy0xLjExMjYgMC0yLjAxMzcgMC45MDExMS0yLjAxMzcgMi4wMTM3aDIuODE0NWMwLjI2Nzk3LTAuMzczMDkgMC41OTA3LTAuNzA0MzUgMC45NTg5OC0wLjk3ODUyLTAuMzQ0MzMtMC42MTY4OC0xLjAwMzEtMS4wMzUyLTEuNzU5OC0xLjAzNTJ6Ii8+CiAgPHBhdGggZD0ibTYuOTE1NCA0LjYyM2ExLjUyOTQgMS41Mjk0IDAgMCAxLTEuNTI5NCAxLjUyOTQgMS41Mjk0IDEuNTI5NCAwIDAgMS0xLjUyOTQtMS41Mjk0IDEuNTI5NCAxLjUyOTQgMCAwIDEgMS41Mjk0LTEuNTI5NCAxLjUyOTQgMS41Mjk0IDAgMCAxIDEuNTI5NCAxLjUyOTR6Ii8+CiAgPHBhdGggZD0ibTYuMTM1IDEzLjUzNWMwLTMuMjM5MiAyLjYyNTktNS44NjUgNS44NjUtNS44NjUgMy4yMzkyIDAgNS44NjUgMi42MjU5IDUuODY1IDUuODY1eiIvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMy43Njg1IiByPSIyLjk2ODUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-vega: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbjEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjEyMTIxIj4KICAgIDxwYXRoIGQ9Ik0xMC42IDUuNGwyLjItMy4ySDIuMnY3LjNsNC02LjZ6Ii8+CiAgICA8cGF0aCBkPSJNMTUuOCAyLjJsLTQuNCA2LjZMNyA2LjNsLTQuOCA4djUuNWgxNy42VjIuMmgtNHptLTcgMTUuNEg1LjV2LTQuNGgzLjN2NC40em00LjQgMEg5LjhWOS44aDMuNHY3Ljh6bTQuNCAwaC0zLjRWNi41aDMuNHYxMS4xeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-word: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KIDxnIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzQxNDE0MSI+CiAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiA8L2c+CiA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSguNDMgLjA0MDEpIiBmaWxsPSIjZmZmIj4KICA8cGF0aCBkPSJtNC4xNCA4Ljc2cTAuMDY4Mi0xLjg5IDIuNDItMS44OSAxLjE2IDAgMS42OCAwLjQyIDAuNTY3IDAuNDEgMC41NjcgMS4xNnYzLjQ3cTAgMC40NjIgMC41MTQgMC40NjIgMC4xMDMgMCAwLjItMC4wMjMxdjAuNzE0cS0wLjM5OSAwLjEwMy0wLjY1MSAwLjEwMy0wLjQ1MiAwLTAuNjkzLTAuMjItMC4yMzEtMC4yLTAuMjg0LTAuNjYyLTAuOTU2IDAuODcyLTIgMC44NzItMC45MDMgMC0xLjQ3LTAuNDcyLTAuNTI1LTAuNDcyLTAuNTI1LTEuMjYgMC0wLjI2MiAwLjA0NTItMC40NzIgMC4wNTY3LTAuMjIgMC4xMTYtMC4zNzggMC4wNjgyLTAuMTY4IDAuMjMxLTAuMzA0IDAuMTU4LTAuMTQ3IDAuMjYyLTAuMjQyIDAuMTE2LTAuMDkxNCAwLjM2OC0wLjE2OCAwLjI2Mi0wLjA5MTQgMC4zOTktMC4xMjYgMC4xMzYtMC4wNDUyIDAuNDcyLTAuMTAzIDAuMzM2LTAuMDU3OCAwLjUwNC0wLjA3OTggMC4xNTgtMC4wMjMxIDAuNTY3LTAuMDc5OCAwLjU1Ni0wLjA2ODIgMC43NzctMC4yMjEgMC4yMi0wLjE1MiAwLjIyLTAuNDQxdi0wLjI1MnEwLTAuNDMtMC4zNTctMC42NjItMC4zMzYtMC4yMzEtMC45NzYtMC4yMzEtMC42NjIgMC0wLjk5OCAwLjI2Mi0wLjMzNiAwLjI1Mi0wLjM5OSAwLjc5OHptMS44OSAzLjY4cTAuNzg4IDAgMS4yNi0wLjQxIDAuNTA0LTAuNDIgMC41MDQtMC45MDN2LTEuMDVxLTAuMjg0IDAuMTM2LTAuODYxIDAuMjMxLTAuNTY3IDAuMDkxNC0wLjk4NyAwLjE1OC0wLjQyIDAuMDY4Mi0wLjc2NiAwLjMyNi0wLjMzNiAwLjI1Mi0wLjMzNiAwLjcwNHQwLjMwNCAwLjcwNCAwLjg2MSAwLjI1MnoiIHN0cm9rZS13aWR0aD0iMS4wNSIvPgogIDxwYXRoIGQ9Im0xMCA0LjU2aDAuOTQ1djMuMTVxMC42NTEtMC45NzYgMS44OS0wLjk3NiAxLjE2IDAgMS44OSAwLjg0IDAuNjgyIDAuODQgMC42ODIgMi4zMSAwIDEuNDctMC43MDQgMi40Mi0wLjcwNCAwLjg4Mi0xLjg5IDAuODgyLTEuMjYgMC0xLjg5LTEuMDJ2MC43NjZoLTAuODV6bTIuNjIgMy4wNHEtMC43NDYgMC0xLjE2IDAuNjQtMC40NTIgMC42My0wLjQ1MiAxLjY4IDAgMS4wNSAwLjQ1MiAxLjY4dDEuMTYgMC42M3EwLjc3NyAwIDEuMjYtMC42MyAwLjQ5NC0wLjY0IDAuNDk0LTEuNjggMC0xLjA1LTAuNDcyLTEuNjgtMC40NjItMC42NC0xLjI2LTAuNjR6IiBzdHJva2Utd2lkdGg9IjEuMDUiLz4KICA8cGF0aCBkPSJtMi43MyAxNS44IDEzLjYgMC4wMDgxYzAuMDA2OSAwIDAtMi42IDAtMi42IDAtMC4wMDc4LTEuMTUgMC0xLjE1IDAtMC4wMDY5IDAtMC4wMDgzIDEuNS0wLjAwODMgMS41LTJlLTMgLTAuMDAxNC0xMS4zLTAuMDAxNC0xMS4zLTAuMDAxNGwtMC4wMDU5Mi0xLjVjMC0wLjAwNzgtMS4xNyAwLjAwMTMtMS4xNyAwLjAwMTN6IiBzdHJva2Utd2lkdGg9Ii45NzUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-yaml: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1jb250cmFzdDIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjRDgxQjYwIj4KICAgIDxwYXRoIGQ9Ik03LjIgMTguNnYtNS40TDMgNS42aDMuM2wxLjQgMy4xYy4zLjkuNiAxLjYgMSAyLjUuMy0uOC42LTEuNiAxLTIuNWwxLjQtMy4xaDMuNGwtNC40IDcuNnY1LjVsLTIuOS0uMXoiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxNi41IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxMSIgcj0iMi4xIi8+CiAgPC9nPgo8L3N2Zz4K);
}

/* Icon CSS class declarations */

.jp-AddAboveIcon {
  background-image: var(--jp-icon-add-above);
}

.jp-AddBelowIcon {
  background-image: var(--jp-icon-add-below);
}

.jp-AddIcon {
  background-image: var(--jp-icon-add);
}

.jp-BellIcon {
  background-image: var(--jp-icon-bell);
}

.jp-BugDotIcon {
  background-image: var(--jp-icon-bug-dot);
}

.jp-BugIcon {
  background-image: var(--jp-icon-bug);
}

.jp-BuildIcon {
  background-image: var(--jp-icon-build);
}

.jp-CaretDownEmptyIcon {
  background-image: var(--jp-icon-caret-down-empty);
}

.jp-CaretDownEmptyThinIcon {
  background-image: var(--jp-icon-caret-down-empty-thin);
}

.jp-CaretDownIcon {
  background-image: var(--jp-icon-caret-down);
}

.jp-CaretLeftIcon {
  background-image: var(--jp-icon-caret-left);
}

.jp-CaretRightIcon {
  background-image: var(--jp-icon-caret-right);
}

.jp-CaretUpEmptyThinIcon {
  background-image: var(--jp-icon-caret-up-empty-thin);
}

.jp-CaretUpIcon {
  background-image: var(--jp-icon-caret-up);
}

.jp-CaseSensitiveIcon {
  background-image: var(--jp-icon-case-sensitive);
}

.jp-CheckIcon {
  background-image: var(--jp-icon-check);
}

.jp-CircleEmptyIcon {
  background-image: var(--jp-icon-circle-empty);
}

.jp-CircleIcon {
  background-image: var(--jp-icon-circle);
}

.jp-ClearIcon {
  background-image: var(--jp-icon-clear);
}

.jp-CloseIcon {
  background-image: var(--jp-icon-close);
}

.jp-CodeCheckIcon {
  background-image: var(--jp-icon-code-check);
}

.jp-CodeIcon {
  background-image: var(--jp-icon-code);
}

.jp-CollapseAllIcon {
  background-image: var(--jp-icon-collapse-all);
}

.jp-ConsoleIcon {
  background-image: var(--jp-icon-console);
}

.jp-CopyIcon {
  background-image: var(--jp-icon-copy);
}

.jp-CopyrightIcon {
  background-image: var(--jp-icon-copyright);
}

.jp-CutIcon {
  background-image: var(--jp-icon-cut);
}

.jp-DeleteIcon {
  background-image: var(--jp-icon-delete);
}

.jp-DownloadIcon {
  background-image: var(--jp-icon-download);
}

.jp-DuplicateIcon {
  background-image: var(--jp-icon-duplicate);
}

.jp-EditIcon {
  background-image: var(--jp-icon-edit);
}

.jp-EllipsesIcon {
  background-image: var(--jp-icon-ellipses);
}

.jp-ErrorIcon {
  background-image: var(--jp-icon-error);
}

.jp-ExpandAllIcon {
  background-image: var(--jp-icon-expand-all);
}

.jp-ExtensionIcon {
  background-image: var(--jp-icon-extension);
}

.jp-FastForwardIcon {
  background-image: var(--jp-icon-fast-forward);
}

.jp-FileIcon {
  background-image: var(--jp-icon-file);
}

.jp-FileUploadIcon {
  background-image: var(--jp-icon-file-upload);
}

.jp-FilterDotIcon {
  background-image: var(--jp-icon-filter-dot);
}

.jp-FilterIcon {
  background-image: var(--jp-icon-filter);
}

.jp-FilterListIcon {
  background-image: var(--jp-icon-filter-list);
}

.jp-FolderFavoriteIcon {
  background-image: var(--jp-icon-folder-favorite);
}

.jp-FolderIcon {
  background-image: var(--jp-icon-folder);
}

.jp-HomeIcon {
  background-image: var(--jp-icon-home);
}

.jp-Html5Icon {
  background-image: var(--jp-icon-html5);
}

.jp-ImageIcon {
  background-image: var(--jp-icon-image);
}

.jp-InfoIcon {
  background-image: var(--jp-icon-info);
}

.jp-InspectorIcon {
  background-image: var(--jp-icon-inspector);
}

.jp-JsonIcon {
  background-image: var(--jp-icon-json);
}

.jp-JuliaIcon {
  background-image: var(--jp-icon-julia);
}

.jp-JupyterFaviconIcon {
  background-image: var(--jp-icon-jupyter-favicon);
}

.jp-JupyterIcon {
  background-image: var(--jp-icon-jupyter);
}

.jp-JupyterlabWordmarkIcon {
  background-image: var(--jp-icon-jupyterlab-wordmark);
}

.jp-KernelIcon {
  background-image: var(--jp-icon-kernel);
}

.jp-KeyboardIcon {
  background-image: var(--jp-icon-keyboard);
}

.jp-LaunchIcon {
  background-image: var(--jp-icon-launch);
}

.jp-LauncherIcon {
  background-image: var(--jp-icon-launcher);
}

.jp-LineFormIcon {
  background-image: var(--jp-icon-line-form);
}

.jp-LinkIcon {
  background-image: var(--jp-icon-link);
}

.jp-ListIcon {
  background-image: var(--jp-icon-list);
}

.jp-MarkdownIcon {
  background-image: var(--jp-icon-markdown);
}

.jp-MoveDownIcon {
  background-image: var(--jp-icon-move-down);
}

.jp-MoveUpIcon {
  background-image: var(--jp-icon-move-up);
}

.jp-NewFolderIcon {
  background-image: var(--jp-icon-new-folder);
}

.jp-NotTrustedIcon {
  background-image: var(--jp-icon-not-trusted);
}

.jp-NotebookIcon {
  background-image: var(--jp-icon-notebook);
}

.jp-NumberingIcon {
  background-image: var(--jp-icon-numbering);
}

.jp-OfflineBoltIcon {
  background-image: var(--jp-icon-offline-bolt);
}

.jp-PaletteIcon {
  background-image: var(--jp-icon-palette);
}

.jp-PasteIcon {
  background-image: var(--jp-icon-paste);
}

.jp-PdfIcon {
  background-image: var(--jp-icon-pdf);
}

.jp-PythonIcon {
  background-image: var(--jp-icon-python);
}

.jp-RKernelIcon {
  background-image: var(--jp-icon-r-kernel);
}

.jp-ReactIcon {
  background-image: var(--jp-icon-react);
}

.jp-RedoIcon {
  background-image: var(--jp-icon-redo);
}

.jp-RefreshIcon {
  background-image: var(--jp-icon-refresh);
}

.jp-RegexIcon {
  background-image: var(--jp-icon-regex);
}

.jp-RunIcon {
  background-image: var(--jp-icon-run);
}

.jp-RunningIcon {
  background-image: var(--jp-icon-running);
}

.jp-SaveIcon {
  background-image: var(--jp-icon-save);
}

.jp-SearchIcon {
  background-image: var(--jp-icon-search);
}

.jp-SettingsIcon {
  background-image: var(--jp-icon-settings);
}

.jp-ShareIcon {
  background-image: var(--jp-icon-share);
}

.jp-SpreadsheetIcon {
  background-image: var(--jp-icon-spreadsheet);
}

.jp-StopIcon {
  background-image: var(--jp-icon-stop);
}

.jp-TabIcon {
  background-image: var(--jp-icon-tab);
}

.jp-TableRowsIcon {
  background-image: var(--jp-icon-table-rows);
}

.jp-TagIcon {
  background-image: var(--jp-icon-tag);
}

.jp-TerminalIcon {
  background-image: var(--jp-icon-terminal);
}

.jp-TextEditorIcon {
  background-image: var(--jp-icon-text-editor);
}

.jp-TocIcon {
  background-image: var(--jp-icon-toc);
}

.jp-TreeViewIcon {
  background-image: var(--jp-icon-tree-view);
}

.jp-TrustedIcon {
  background-image: var(--jp-icon-trusted);
}

.jp-UndoIcon {
  background-image: var(--jp-icon-undo);
}

.jp-UserIcon {
  background-image: var(--jp-icon-user);
}

.jp-UsersIcon {
  background-image: var(--jp-icon-users);
}

.jp-VegaIcon {
  background-image: var(--jp-icon-vega);
}

.jp-WordIcon {
  background-image: var(--jp-icon-word);
}

.jp-YamlIcon {
  background-image: var(--jp-icon-yaml);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

.jp-Icon,
.jp-MaterialIcon {
  background-position: center;
  background-repeat: no-repeat;
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-cover {
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

/**
 * (DEPRECATED) Support for specific CSS icon sizes
 */

.jp-Icon-16 {
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-18 {
  background-size: 18px;
  min-width: 18px;
  min-height: 18px;
}

.jp-Icon-20 {
  background-size: 20px;
  min-width: 20px;
  min-height: 20px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.lm-TabBar .lm-TabBar-addButton {
  align-items: center;
  display: flex;
  padding: 4px;
  padding-bottom: 5px;
  margin-right: 1px;
  background-color: var(--jp-layout-color2);
}

.lm-TabBar .lm-TabBar-addButton:hover {
  background-color: var(--jp-layout-color1);
}

.lm-DockPanel-tabBar .lm-TabBar-tab {
  width: var(--jp-private-horizontal-tab-width);
}

.lm-DockPanel-tabBar .lm-TabBar-content {
  flex: unset;
}

.lm-DockPanel-tabBar[data-orientation='horizontal'] {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for icons as inline SVG HTMLElements
 */

/* recolor the primary elements of an icon */
.jp-icon0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-accent0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-accent1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-accent2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-accent3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-accent4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-accent0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-accent1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-accent2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-accent3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-accent4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-none[fill] {
  fill: none;
}

.jp-icon-none[stroke] {
  stroke: none;
}

/* brand icon colors. Same for light and dark */
.jp-icon-brand0[fill] {
  fill: var(--jp-brand-color0);
}

.jp-icon-brand1[fill] {
  fill: var(--jp-brand-color1);
}

.jp-icon-brand2[fill] {
  fill: var(--jp-brand-color2);
}

.jp-icon-brand3[fill] {
  fill: var(--jp-brand-color3);
}

.jp-icon-brand4[fill] {
  fill: var(--jp-brand-color4);
}

.jp-icon-brand0[stroke] {
  stroke: var(--jp-brand-color0);
}

.jp-icon-brand1[stroke] {
  stroke: var(--jp-brand-color1);
}

.jp-icon-brand2[stroke] {
  stroke: var(--jp-brand-color2);
}

.jp-icon-brand3[stroke] {
  stroke: var(--jp-brand-color3);
}

.jp-icon-brand4[stroke] {
  stroke: var(--jp-brand-color4);
}

/* warn icon colors. Same for light and dark */
.jp-icon-warn0[fill] {
  fill: var(--jp-warn-color0);
}

.jp-icon-warn1[fill] {
  fill: var(--jp-warn-color1);
}

.jp-icon-warn2[fill] {
  fill: var(--jp-warn-color2);
}

.jp-icon-warn3[fill] {
  fill: var(--jp-warn-color3);
}

.jp-icon-warn0[stroke] {
  stroke: var(--jp-warn-color0);
}

.jp-icon-warn1[stroke] {
  stroke: var(--jp-warn-color1);
}

.jp-icon-warn2[stroke] {
  stroke: var(--jp-warn-color2);
}

.jp-icon-warn3[stroke] {
  stroke: var(--jp-warn-color3);
}

/* icon colors that contrast well with each other and most backgrounds */
.jp-icon-contrast0[fill] {
  fill: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[fill] {
  fill: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[fill] {
  fill: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[fill] {
  fill: var(--jp-icon-contrast-color3);
}

.jp-icon-contrast0[stroke] {
  stroke: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[stroke] {
  stroke: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[stroke] {
  stroke: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[stroke] {
  stroke: var(--jp-icon-contrast-color3);
}

.jp-icon-dot[fill] {
  fill: var(--jp-warn-color0);
}

.jp-jupyter-icon-color[fill] {
  fill: var(--jp-jupyter-icon-color, var(--jp-warn-color0));
}

.jp-notebook-icon-color[fill] {
  fill: var(--jp-notebook-icon-color, var(--jp-warn-color0));
}

.jp-json-icon-color[fill] {
  fill: var(--jp-json-icon-color, var(--jp-warn-color1));
}

.jp-console-icon-color[fill] {
  fill: var(--jp-console-icon-color, white);
}

.jp-console-icon-background-color[fill] {
  fill: var(--jp-console-icon-background-color, var(--jp-brand-color1));
}

.jp-terminal-icon-color[fill] {
  fill: var(--jp-terminal-icon-color, var(--jp-layout-color2));
}

.jp-terminal-icon-background-color[fill] {
  fill: var(
    --jp-terminal-icon-background-color,
    var(--jp-inverse-layout-color2)
  );
}

.jp-text-editor-icon-color[fill] {
  fill: var(--jp-text-editor-icon-color, var(--jp-inverse-layout-color3));
}

.jp-inspector-icon-color[fill] {
  fill: var(--jp-inspector-icon-color, var(--jp-inverse-layout-color3));
}

/* CSS for icons in selected filebrowser listing items */
.jp-DirListing-item.jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

.jp-DirListing-item.jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* stylelint-disable selector-max-class, selector-max-compound-selectors */

/**
* TODO: come up with non css-hack solution for showing the busy icon on top
*  of the close icon
* CSS for complex behavior of close icon of tabs in the main area tabbar
*/
.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon3[fill] {
  fill: none;
}

.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon-busy[fill] {
  fill: var(--jp-inverse-layout-color3);
}

/* stylelint-enable selector-max-class, selector-max-compound-selectors */

/* CSS for icons in status bar */
#jp-main-statusbar .jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

#jp-main-statusbar .jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* special handling for splash icon CSS. While the theme CSS reloads during
   splash, the splash icon can loose theming. To prevent that, we set a
   default for its color variable */
:root {
  --jp-warn-color0: var(--md-orange-700);
}

/* not sure what to do with this one, used in filebrowser listing */
.jp-DragIcon {
  margin-right: 4px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for alt colors for icons as inline SVG HTMLElements
 */

/* alt recolor the primary elements of an icon */
.jp-icon-alt .jp-icon0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-alt .jp-icon0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* alt recolor the accent elements of an icon */
.jp-icon-alt .jp-icon-accent0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-alt .jp-icon-accent0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-icon-hoverShow:not(:hover) .jp-icon-hoverShow-content {
  display: none !important;
}

/**
 * Support for hover colors for icons as inline SVG HTMLElements
 */

/**
 * regular colors
 */

/* recolor the primary elements of an icon */
.jp-icon-hover :hover .jp-icon0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-hover :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-hover :hover .jp-icon-none-hover[fill] {
  fill: none;
}

.jp-icon-hover :hover .jp-icon-none-hover[stroke] {
  stroke: none;
}

/**
 * inverse colors
 */

/* inverse recolor the primary elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* inverse recolor the accent elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-IFrame {
  width: 100%;
  height: 100%;
}

.jp-IFrame > iframe {
  border: none;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-IFrame {
  position: relative;
}

body.lm-mod-override-cursor .jp-IFrame::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-HoverBox {
  position: fixed;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FormGroup-content fieldset {
  border: none;
  padding: 0;
  min-width: 0;
  width: 100%;
}

/* stylelint-disable selector-max-type */

.jp-FormGroup-content fieldset .jp-inputFieldWrapper input,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper select,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper textarea {
  font-size: var(--jp-content-font-size2);
  border-color: var(--jp-input-border-color);
  border-style: solid;
  border-radius: var(--jp-border-radius);
  border-width: 1px;
  padding: 6px 8px;
  background: none;
  color: var(--jp-ui-font-color0);
  height: inherit;
}

.jp-FormGroup-content fieldset input[type='checkbox'] {
  position: relative;
  top: 2px;
  margin-left: 0;
}

.jp-FormGroup-content button.jp-mod-styled {
  cursor: pointer;
}

.jp-FormGroup-content .checkbox label {
  cursor: pointer;
  font-size: var(--jp-content-font-size1);
}

.jp-FormGroup-content .jp-root > fieldset > legend {
  display: none;
}

.jp-FormGroup-content .jp-root > fieldset > p {
  display: none;
}

/** copy of `input.jp-mod-styled:focus` style */
.jp-FormGroup-content fieldset input:focus,
.jp-FormGroup-content fieldset select:focus {
  -moz-outline-radius: unset;
  outline: var(--jp-border-width) solid var(--md-blue-500);
  outline-offset: -1px;
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-FormGroup-content fieldset input:hover:not(:focus),
.jp-FormGroup-content fieldset select:hover:not(:focus) {
  background-color: var(--jp-border-color2);
}

/* stylelint-enable selector-max-type */

.jp-FormGroup-content .checkbox .field-description {
  /* Disable default description field for checkbox:
   because other widgets do not have description fields,
   we add descriptions to each widget on the field level.
  */
  display: none;
}

.jp-FormGroup-content #root__description {
  display: none;
}

.jp-FormGroup-content .jp-modifiedIndicator {
  width: 5px;
  background-color: var(--jp-brand-color2);
  margin-top: 0;
  margin-left: calc(var(--jp-private-settingeditor-modifier-indent) * -1);
  flex-shrink: 0;
}

.jp-FormGroup-content .jp-modifiedIndicator.jp-errorIndicator {
  background-color: var(--jp-error-color0);
  margin-right: 0.5em;
}

/* RJSF ARRAY style */

.jp-arrayFieldWrapper legend {
  font-size: var(--jp-content-font-size2);
  color: var(--jp-ui-font-color0);
  flex-basis: 100%;
  padding: 4px 0;
  font-weight: var(--jp-content-heading-font-weight);
  border-bottom: 1px solid var(--jp-border-color2);
}

.jp-arrayFieldWrapper .field-description {
  padding: 4px 0;
  white-space: pre-wrap;
}

.jp-arrayFieldWrapper .array-item {
  width: 100%;
  border: 1px solid var(--jp-border-color2);
  border-radius: 4px;
  margin: 4px;
}

.jp-ArrayOperations {
  display: flex;
  margin-left: 8px;
}

.jp-ArrayOperationsButton {
  margin: 2px;
}

.jp-ArrayOperationsButton .jp-icon3[fill] {
  fill: var(--jp-ui-font-color0);
}

button.jp-ArrayOperationsButton.jp-mod-styled:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* RJSF form validation error */

.jp-FormGroup-content .validationErrors {
  color: var(--jp-error-color0);
}

/* Hide panel level error as duplicated the field level error */
.jp-FormGroup-content .panel.errors {
  display: none;
}

/* RJSF normal content (settings-editor) */

.jp-FormGroup-contentNormal {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-FormGroup-contentItem {
  margin-left: 7px;
  color: var(--jp-ui-font-color0);
}

.jp-FormGroup-contentNormal .jp-FormGroup-description {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-default {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-fieldLabel {
  font-size: var(--jp-content-font-size1);
  font-weight: normal;
  min-width: 120px;
}

.jp-FormGroup-contentNormal fieldset:not(:first-child) {
  margin-left: 7px;
}

.jp-FormGroup-contentNormal .field-array-of-string .array-item {
  /* Display `jp-ArrayOperations` buttons side-by-side with content except
    for small screens where flex-wrap will place them one below the other.
  */
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-objectFieldWrapper .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

/* RJSF compact content (metadata-form) */

.jp-FormGroup-content.jp-FormGroup-contentCompact {
  width: 100%;
}

.jp-FormGroup-contentCompact .form-group {
  display: flex;
  padding: 0.5em 0.2em 0.5em 0;
}

.jp-FormGroup-contentCompact
  .jp-FormGroup-compactTitle
  .jp-FormGroup-description {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color2);
}

.jp-FormGroup-contentCompact .jp-FormGroup-fieldLabel {
  padding-bottom: 0.3em;
}

.jp-FormGroup-contentCompact .jp-inputFieldWrapper .form-control {
  width: 100%;
  box-sizing: border-box;
}

.jp-FormGroup-contentCompact .jp-arrayFieldWrapper .jp-FormGroup-compactTitle {
  padding-bottom: 7px;
}

.jp-FormGroup-contentCompact
  .jp-objectFieldWrapper
  .jp-objectFieldWrapper
  .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

.jp-FormGroup-contentCompact ul.error-detail {
  margin-block-start: 0.5em;
  margin-block-end: 0.5em;
  padding-inline-start: 1em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-SidePanel {
  display: flex;
  flex-direction: column;
  min-width: var(--jp-sidebar-min-width);
  overflow-y: auto;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);
  font-size: var(--jp-ui-font-size1);
}

.jp-SidePanel-header {
  flex: 0 0 auto;
  display: flex;
  border-bottom: var(--jp-border-width) solid var(--jp-border-color2);
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin: 0;
  padding: 2px;
  text-transform: uppercase;
}

.jp-SidePanel-toolbar {
  flex: 0 0 auto;
}

.jp-SidePanel-content {
  flex: 1 1 auto;
}

.jp-SidePanel-toolbar,
.jp-AccordionPanel-toolbar {
  height: var(--jp-private-toolbar-height);
}

.jp-SidePanel-toolbar.jp-Toolbar-micro {
  display: none;
}

.lm-AccordionPanel .jp-AccordionPanel-title {
  box-sizing: border-box;
  line-height: 25px;
  margin: 0;
  display: flex;
  align-items: center;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  font-size: var(--jp-ui-font-size0);
}

.jp-AccordionPanel-title {
  cursor: pointer;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  text-transform: uppercase;
}

.lm-AccordionPanel[data-orientation='horizontal'] > .jp-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleLabel {
  user-select: none;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleCollapser {
  transform: rotate(-90deg);
  margin: auto 0;
  height: 16px;
}

.jp-AccordionPanel-title.lm-mod-expanded .lm-AccordionPanel-titleCollapser {
  transform: rotate(0deg);
}

.lm-AccordionPanel .jp-AccordionPanel-toolbar {
  background: none;
  box-shadow: none;
  border: none;
  margin-left: auto;
}

.lm-AccordionPanel .lm-SplitPanel-handle:hover {
  background: var(--jp-layout-color3);
}

.jp-text-truncated {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Spinner {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-layout-color0);
  outline: none;
}

.jp-SpinnerContent {
  font-size: 10px;
  margin: 50px auto;
  text-indent: -9999em;
  width: 3em;
  height: 3em;
  border-radius: 50%;
  background: var(--jp-brand-color3);
  background: linear-gradient(
    to right,
    #f37626 10%,
    rgba(255, 255, 255, 0) 42%
  );
  position: relative;
  animation: load3 1s infinite linear, fadeIn 1s;
}

.jp-SpinnerContent::before {
  width: 50%;
  height: 50%;
  background: #f37626;
  border-radius: 100% 0 0;
  position: absolute;
  top: 0;
  left: 0;
  content: '';
}

.jp-SpinnerContent::after {
  background: var(--jp-layout-color0);
  width: 75%;
  height: 75%;
  border-radius: 50%;
  content: '';
  margin: auto;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@keyframes load3 {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

button.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: none;
  box-sizing: border-box;
  text-align: center;
  line-height: 32px;
  height: 32px;
  padding: 0 12px;
  letter-spacing: 0.8px;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input.jp-mod-styled {
  background: var(--jp-input-background);
  height: 28px;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color1);
  padding-left: 7px;
  padding-right: 7px;
  font-size: var(--jp-ui-font-size2);
  color: var(--jp-ui-font-color0);
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input[type='checkbox'].jp-mod-styled {
  appearance: checkbox;
  -webkit-appearance: checkbox;
  -moz-appearance: checkbox;
  height: auto;
}

input.jp-mod-styled:focus {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-select-wrapper {
  display: flex;
  position: relative;
  flex-direction: column;
  padding: 1px;
  background-color: var(--jp-layout-color1);
  box-sizing: border-box;
  margin-bottom: 12px;
}

.jp-select-wrapper:not(.multiple) {
  height: 28px;
}

.jp-select-wrapper.jp-mod-focused select.jp-mod-styled {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-input-active-background);
}

select.jp-mod-styled:hover {
  cursor: pointer;
  color: var(--jp-ui-font-color0);
  background-color: var(--jp-input-hover-background);
  box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.5);
}

select.jp-mod-styled {
  flex: 1 1 auto;
  width: 100%;
  font-size: var(--jp-ui-font-size2);
  background: var(--jp-input-background);
  color: var(--jp-ui-font-color0);
  padding: 0 25px 0 8px;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

select.jp-mod-styled:not([multiple]) {
  height: 32px;
}

select.jp-mod-styled[multiple] {
  max-height: 200px;
  overflow-y: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-switch {
  display: flex;
  align-items: center;
  padding-left: 4px;
  padding-right: 4px;
  font-size: var(--jp-ui-font-size1);
  background-color: transparent;
  color: var(--jp-ui-font-color1);
  border: none;
  height: 20px;
}

.jp-switch:hover {
  background-color: var(--jp-layout-color2);
}

.jp-switch-label {
  margin-right: 5px;
  font-family: var(--jp-ui-font-family);
}

.jp-switch-track {
  cursor: pointer;
  background-color: var(--jp-switch-color, var(--jp-border-color1));
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 34px;
  height: 16px;
  width: 35px;
  position: relative;
}

.jp-switch-track::before {
  content: '';
  position: absolute;
  height: 10px;
  width: 10px;
  margin: 3px;
  left: 0;
  background-color: var(--jp-ui-inverse-font-color1);
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 50%;
}

.jp-switch[aria-checked='true'] .jp-switch-track {
  background-color: var(--jp-switch-true-position-color, var(--jp-warn-color0));
}

.jp-switch[aria-checked='true'] .jp-switch-track::before {
  /* track width (35) - margins (3 + 3) - thumb width (10) */
  left: 19px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toolbar-height: calc(
    28px + var(--jp-border-width)
  ); /* leave 28px for content */
}

.jp-Toolbar {
  color: var(--jp-ui-font-color1);
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: 2px;
  z-index: 8;
  overflow-x: hidden;
}

/* Toolbar items */

.jp-Toolbar > .jp-Toolbar-item.jp-Toolbar-spacer {
  flex-grow: 1;
  flex-shrink: 1;
}

.jp-Toolbar-item.jp-Toolbar-kernelStatus {
  display: inline-block;
  width: 32px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 16px;
}

.jp-Toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  display: flex;
  padding-left: 1px;
  padding-right: 1px;
  font-size: var(--jp-ui-font-size1);
  line-height: var(--jp-private-toolbar-height);
  height: 100%;
}

/* Toolbar buttons */

/* This is the div we use to wrap the react component into a Widget */
div.jp-ToolbarButton {
  color: transparent;
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0;
  margin: 0;
}

button.jp-ToolbarButtonComponent {
  background: var(--jp-layout-color1);
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0 6px;
  margin: 0;
  height: 24px;
  border-radius: var(--jp-border-radius);
  display: flex;
  align-items: center;
  text-align: center;
  font-size: 14px;
  min-width: unset;
  min-height: unset;
}

button.jp-ToolbarButtonComponent:disabled {
  opacity: 0.4;
}

button.jp-ToolbarButtonComponent > span {
  padding: 0;
  flex: 0 0 auto;
}

button.jp-ToolbarButtonComponent .jp-ToolbarButtonComponent-label {
  font-size: var(--jp-ui-font-size1);
  line-height: 100%;
  padding-left: 2px;
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar.jp-Toolbar-micro {
  padding: 0;
  min-height: 0;
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar {
  border: none;
  box-shadow: none;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-WindowedPanel-outer {
  position: relative;
  overflow-y: auto;
}

.jp-WindowedPanel-inner {
  position: relative;
}

.jp-WindowedPanel-window {
  position: absolute;
  left: 0;
  right: 0;
  overflow: visible;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* Sibling imports */

body {
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
}

/* Disable native link decoration styles everywhere outside of dialog boxes */
a {
  text-decoration: unset;
  color: unset;
}

a:hover {
  text-decoration: unset;
  color: unset;
}

/* Accessibility for links inside dialog box text */
.jp-Dialog-content a {
  text-decoration: revert;
  color: var(--jp-content-link-color);
}

.jp-Dialog-content a:hover {
  text-decoration: revert;
}

/* Styles for ui-components */
.jp-Button {
  color: var(--jp-ui-font-color2);
  border-radius: var(--jp-border-radius);
  padding: 0 12px;
  font-size: var(--jp-ui-font-size1);

  /* Copy from blueprint 3 */
  display: inline-flex;
  flex-direction: row;
  border: none;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  text-align: left;
  vertical-align: middle;
  min-height: 30px;
  min-width: 30px;
}

.jp-Button:disabled {
  cursor: not-allowed;
}

.jp-Button:empty {
  padding: 0 !important;
}

.jp-Button.jp-mod-small {
  min-height: 24px;
  min-width: 24px;
  font-size: 12px;
  padding: 0 7px;
}

/* Use our own theme for hover styles */
.jp-Button.jp-mod-minimal:hover {
  background-color: var(--jp-layout-color2);
}

.jp-Button.jp-mod-minimal {
  background: none;
}

.jp-InputGroup {
  display: block;
  position: relative;
}

.jp-InputGroup input {
  box-sizing: border-box;
  border: none;
  border-radius: 0;
  background-color: transparent;
  color: var(--jp-ui-font-color0);
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
  padding-bottom: 0;
  padding-top: 0;
  padding-left: 10px;
  padding-right: 28px;
  position: relative;
  width: 100%;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  font-size: 14px;
  font-weight: 400;
  height: 30px;
  line-height: 30px;
  outline: none;
  vertical-align: middle;
}

.jp-InputGroup input:focus {
  box-shadow: inset 0 0 0 var(--jp-border-width)
      var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-InputGroup input:disabled {
  cursor: not-allowed;
  resize: block;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input:disabled ~ span {
  cursor: not-allowed;
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input::placeholder,
input::placeholder {
  color: var(--jp-ui-font-color2);
}

.jp-InputGroupAction {
  position: absolute;
  bottom: 1px;
  right: 0;
  padding: 6px;
}

.jp-HTMLSelect.jp-DefaultStyle select {
  background-color: initial;
  border: none;
  border-radius: 0;
  box-shadow: none;
  color: var(--jp-ui-font-color0);
  display: block;
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  height: 24px;
  line-height: 14px;
  padding: 0 25px 0 10px;
  text-align: left;
  -moz-appearance: none;
  -webkit-appearance: none;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
  cursor: not-allowed;
  resize: block;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled ~ span {
  cursor: not-allowed;
}

/* Use our own theme for hover and option styles */
/* stylelint-disable-next-line selector-max-type */
.jp-HTMLSelect.jp-DefaultStyle select:hover,
.jp-HTMLSelect.jp-DefaultStyle select > option {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color0);
}

select {
  box-sizing: border-box;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-StatusBar-Widget {
  display: flex;
  align-items: center;
  background: var(--jp-layout-color2);
  min-height: var(--jp-statusbar-height);
  justify-content: space-between;
  padding: 0 10px;
}

.jp-StatusBar-Left {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-StatusBar-Middle {
  display: flex;
  align-items: center;
}

.jp-StatusBar-Right {
  display: flex;
  align-items: center;
  flex-direction: row-reverse;
}

.jp-StatusBar-Item {
  max-height: var(--jp-statusbar-height);
  margin: 0 2px;
  height: var(--jp-statusbar-height);
  white-space: nowrap;
  text-overflow: ellipsis;
  color: var(--jp-ui-font-color1);
  padding: 0 6px;
}

.jp-mod-highlighted:hover {
  background-color: var(--jp-layout-color3);
}

.jp-mod-clicked {
  background-color: var(--jp-brand-color1);
}

.jp-mod-clicked:hover {
  background-color: var(--jp-brand-color0);
}

.jp-mod-clicked .jp-StatusBar-TextItem {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-StatusBar-HoverItem {
  box-shadow: '0px 4px 4px rgba(0, 0, 0, 0.25)';
}

.jp-StatusBar-TextItem {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  line-height: 24px;
  color: var(--jp-ui-font-color1);
}

.jp-StatusBar-GroupItem {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-Statusbar-ProgressCircle svg {
  display: block;
  margin: 0 auto;
  width: 16px;
  height: 24px;
  align-self: normal;
}

.jp-Statusbar-ProgressCircle path {
  fill: var(--jp-inverse-layout-color3);
}

.jp-Statusbar-ProgressBar-progress-bar {
  height: 10px;
  width: 100px;
  border: solid 0.25px var(--jp-brand-color2);
  border-radius: 3px;
  overflow: hidden;
  align-self: center;
}

.jp-Statusbar-ProgressBar-progress-bar > div {
  background-color: var(--jp-brand-color2);
  background-image: linear-gradient(
    -45deg,
    rgba(255, 255, 255, 0.2) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.2) 75%,
    transparent 75%,
    transparent
  );
  background-size: 40px 40px;
  float: left;
  width: 0%;
  height: 100%;
  font-size: 12px;
  line-height: 14px;
  color: #fff;
  text-align: center;
  animation: jp-Statusbar-ExecutionTime-progress-bar 2s linear infinite;
}

.jp-Statusbar-ProgressBar-progress-bar p {
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  line-height: 10px;
  width: 100px;
}

@keyframes jp-Statusbar-ExecutionTime-progress-bar {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 40px 40px;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-commandpalette-search-height: 28px;
}

/*-----------------------------------------------------------------------------
| Overall styles
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  padding-bottom: 0;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Modal variant
|----------------------------------------------------------------------------*/

.jp-ModalCommandPalette {
  position: absolute;
  z-index: 10000;
  top: 38px;
  left: 30%;
  margin: 0;
  padding: 4px;
  width: 40%;
  box-shadow: var(--jp-elevation-z4);
  border-radius: 4px;
  background: var(--jp-layout-color0);
}

.jp-ModalCommandPalette .lm-CommandPalette {
  max-height: 40vh;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-close-icon::after {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-header {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-item {
  margin-left: 4px;
  margin-right: 4px;
}

.jp-ModalCommandPalette
  .lm-CommandPalette
  .lm-CommandPalette-item.lm-mod-disabled {
  display: none;
}

/*-----------------------------------------------------------------------------
| Search
|----------------------------------------------------------------------------*/

.lm-CommandPalette-search {
  padding: 4px;
  background-color: var(--jp-layout-color1);
  z-index: 2;
}

.lm-CommandPalette-wrapper {
  overflow: overlay;
  padding: 0 9px;
  background-color: var(--jp-input-active-background);
  height: 30px;
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
}

.lm-CommandPalette.lm-mod-focused .lm-CommandPalette-wrapper {
  box-shadow: inset 0 0 0 1px var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-SearchIconGroup {
  color: white;
  background-color: var(--jp-brand-color1);
  position: absolute;
  top: 4px;
  right: 4px;
  padding: 5px 5px 1px;
}

.jp-SearchIconGroup svg {
  height: 20px;
  width: 20px;
}

.jp-SearchIconGroup .jp-icon3[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-input {
  background: transparent;
  width: calc(100% - 18px);
  float: left;
  border: none;
  outline: none;
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  line-height: var(--jp-private-commandpalette-search-height);
}

.lm-CommandPalette-input::-webkit-input-placeholder,
.lm-CommandPalette-input::-moz-placeholder,
.lm-CommandPalette-input:-ms-input-placeholder {
  color: var(--jp-ui-font-color2);
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Results
|----------------------------------------------------------------------------*/

.lm-CommandPalette-header:first-child {
  margin-top: 0;
}

.lm-CommandPalette-header {
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin-top: 8px;
  padding: 8px 0 8px 12px;
  text-transform: uppercase;
}

.lm-CommandPalette-header.lm-mod-active {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-header > mark {
  background-color: transparent;
  font-weight: bold;
  color: var(--jp-ui-font-color1);
}

.lm-CommandPalette-item {
  padding: 4px 12px 4px 4px;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  font-weight: 400;
  display: flex;
}

.lm-CommandPalette-item.lm-mod-disabled {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item.lm-mod-active {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item.lm-mod-active .lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-inverse-font-color0);
}

.lm-CommandPalette-item.lm-mod-active .jp-icon-selectable[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-item.lm-mod-active:hover:not(.lm-mod-disabled) {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item:hover:not(.lm-mod-active):not(.lm-mod-disabled) {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-itemContent {
  overflow: hidden;
}

.lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.lm-CommandPalette-item.lm-mod-disabled mark {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item .lm-CommandPalette-itemIcon {
  margin: 0 4px 0 0;
  position: relative;
  width: 16px;
  top: 2px;
  flex: 0 0 auto;
}

.lm-CommandPalette-item.lm-mod-disabled .lm-CommandPalette-itemIcon {
  opacity: 0.6;
}

.lm-CommandPalette-item .lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemCaption {
  display: none;
}

.lm-CommandPalette-content {
  background-color: var(--jp-layout-color1);
}

.lm-CommandPalette-content:empty::after {
  content: 'No results';
  margin: auto;
  margin-top: 20px;
  width: 100px;
  display: block;
  font-size: var(--jp-ui-font-size2);
  font-family: var(--jp-ui-font-family);
  font-weight: lighter;
}

.lm-CommandPalette-emptyMessage {
  text-align: center;
  margin-top: 24px;
  line-height: 1.32;
  padding: 0 8px;
  color: var(--jp-content-font-color3);
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Dialog {
  position: absolute;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-dialog-background);
}

.jp-Dialog-content {
  display: flex;
  flex-direction: column;
  margin-left: auto;
  margin-right: auto;
  background: var(--jp-layout-color1);
  padding: 24px 24px 12px;
  min-width: 300px;
  min-height: 150px;
  max-width: 1000px;
  max-height: 500px;
  box-sizing: border-box;
  box-shadow: var(--jp-elevation-z20);
  word-wrap: break-word;
  border-radius: var(--jp-border-radius);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color1);
  resize: both;
}

.jp-Dialog-content.jp-Dialog-content-small {
  max-width: 500px;
}

.jp-Dialog-button {
  overflow: visible;
}

button.jp-Dialog-button:focus {
  outline: 1px solid var(--jp-brand-color1);
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button:focus::-moz-focus-inner {
  border: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus {
  outline: 1px solid var(--jp-accept-color-normal, var(--jp-brand-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus {
  outline: 1px solid var(--jp-warn-color-normal, var(--jp-error-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline: 1px solid var(--jp-reject-color-normal, var(--md-grey-600));
}

button.jp-Dialog-close-button {
  padding: 0;
  height: 100%;
  min-width: unset;
  min-height: unset;
}

.jp-Dialog-header {
  display: flex;
  justify-content: space-between;
  flex: 0 0 auto;
  padding-bottom: 12px;
  font-size: var(--jp-ui-font-size3);
  font-weight: 400;
  color: var(--jp-ui-font-color1);
}

.jp-Dialog-body {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  font-size: var(--jp-ui-font-size1);
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

.jp-Dialog-footer {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  align-items: center;
  flex: 0 0 auto;
  margin-left: -12px;
  margin-right: -12px;
  padding: 12px;
}

.jp-Dialog-checkbox {
  padding-right: 5px;
}

.jp-Dialog-checkbox > input:focus-visible {
  outline: 1px solid var(--jp-input-active-border-color);
  outline-offset: 1px;
}

.jp-Dialog-spacer {
  flex: 1 1 auto;
}

.jp-Dialog-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.jp-Dialog-body > .jp-select-wrapper {
  width: 100%;
}

.jp-Dialog-body > button {
  padding: 0 16px;
}

.jp-Dialog-body > label {
  line-height: 1.4;
  color: var(--jp-ui-font-color0);
}

.jp-Dialog-button.jp-mod-styled:not(:last-child) {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Input-Boolean-Dialog {
  flex-direction: row-reverse;
  align-items: end;
  width: 100%;
}

.jp-Input-Boolean-Dialog > label {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MainAreaWidget > :focus {
  outline: none;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error {
  padding: 6px;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error > pre {
  width: auto;
  padding: 10px;
  background: var(--jp-error-color3);
  border: var(--jp-border-width) solid var(--jp-error-color1);
  border-radius: var(--jp-border-radius);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  white-space: pre-wrap;
  word-wrap: break-word;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/**
 * google-material-color v1.2.6
 * https://github.com/danlevan/google-material-color
 */
:root {
  --md-red-50: #ffebee;
  --md-red-100: #ffcdd2;
  --md-red-200: #ef9a9a;
  --md-red-300: #e57373;
  --md-red-400: #ef5350;
  --md-red-500: #f44336;
  --md-red-600: #e53935;
  --md-red-700: #d32f2f;
  --md-red-800: #c62828;
  --md-red-900: #b71c1c;
  --md-red-A100: #ff8a80;
  --md-red-A200: #ff5252;
  --md-red-A400: #ff1744;
  --md-red-A700: #d50000;
  --md-pink-50: #fce4ec;
  --md-pink-100: #f8bbd0;
  --md-pink-200: #f48fb1;
  --md-pink-300: #f06292;
  --md-pink-400: #ec407a;
  --md-pink-500: #e91e63;
  --md-pink-600: #d81b60;
  --md-pink-700: #c2185b;
  --md-pink-800: #ad1457;
  --md-pink-900: #880e4f;
  --md-pink-A100: #ff80ab;
  --md-pink-A200: #ff4081;
  --md-pink-A400: #f50057;
  --md-pink-A700: #c51162;
  --md-purple-50: #f3e5f5;
  --md-purple-100: #e1bee7;
  --md-purple-200: #ce93d8;
  --md-purple-300: #ba68c8;
  --md-purple-400: #ab47bc;
  --md-purple-500: #9c27b0;
  --md-purple-600: #8e24aa;
  --md-purple-700: #7b1fa2;
  --md-purple-800: #6a1b9a;
  --md-purple-900: #4a148c;
  --md-purple-A100: #ea80fc;
  --md-purple-A200: #e040fb;
  --md-purple-A400: #d500f9;
  --md-purple-A700: #a0f;
  --md-deep-purple-50: #ede7f6;
  --md-deep-purple-100: #d1c4e9;
  --md-deep-purple-200: #b39ddb;
  --md-deep-purple-300: #9575cd;
  --md-deep-purple-400: #7e57c2;
  --md-deep-purple-500: #673ab7;
  --md-deep-purple-600: #5e35b1;
  --md-deep-purple-700: #512da8;
  --md-deep-purple-800: #4527a0;
  --md-deep-purple-900: #311b92;
  --md-deep-purple-A100: #b388ff;
  --md-deep-purple-A200: #7c4dff;
  --md-deep-purple-A400: #651fff;
  --md-deep-purple-A700: #6200ea;
  --md-indigo-50: #e8eaf6;
  --md-indigo-100: #c5cae9;
  --md-indigo-200: #9fa8da;
  --md-indigo-300: #7986cb;
  --md-indigo-400: #5c6bc0;
  --md-indigo-500: #3f51b5;
  --md-indigo-600: #3949ab;
  --md-indigo-700: #303f9f;
  --md-indigo-800: #283593;
  --md-indigo-900: #1a237e;
  --md-indigo-A100: #8c9eff;
  --md-indigo-A200: #536dfe;
  --md-indigo-A400: #3d5afe;
  --md-indigo-A700: #304ffe;
  --md-blue-50: #e3f2fd;
  --md-blue-100: #bbdefb;
  --md-blue-200: #90caf9;
  --md-blue-300: #64b5f6;
  --md-blue-400: #42a5f5;
  --md-blue-500: #2196f3;
  --md-blue-600: #1e88e5;
  --md-blue-700: #1976d2;
  --md-blue-800: #1565c0;
  --md-blue-900: #0d47a1;
  --md-blue-A100: #82b1ff;
  --md-blue-A200: #448aff;
  --md-blue-A400: #2979ff;
  --md-blue-A700: #2962ff;
  --md-light-blue-50: #e1f5fe;
  --md-light-blue-100: #b3e5fc;
  --md-light-blue-200: #81d4fa;
  --md-light-blue-300: #4fc3f7;
  --md-light-blue-400: #29b6f6;
  --md-light-blue-500: #03a9f4;
  --md-light-blue-600: #039be5;
  --md-light-blue-700: #0288d1;
  --md-light-blue-800: #0277bd;
  --md-light-blue-900: #01579b;
  --md-light-blue-A100: #80d8ff;
  --md-light-blue-A200: #40c4ff;
  --md-light-blue-A400: #00b0ff;
  --md-light-blue-A700: #0091ea;
  --md-cyan-50: #e0f7fa;
  --md-cyan-100: #b2ebf2;
  --md-cyan-200: #80deea;
  --md-cyan-300: #4dd0e1;
  --md-cyan-400: #26c6da;
  --md-cyan-500: #00bcd4;
  --md-cyan-600: #00acc1;
  --md-cyan-700: #0097a7;
  --md-cyan-800: #00838f;
  --md-cyan-900: #006064;
  --md-cyan-A100: #84ffff;
  --md-cyan-A200: #18ffff;
  --md-cyan-A400: #00e5ff;
  --md-cyan-A700: #00b8d4;
  --md-teal-50: #e0f2f1;
  --md-teal-100: #b2dfdb;
  --md-teal-200: #80cbc4;
  --md-teal-300: #4db6ac;
  --md-teal-400: #26a69a;
  --md-teal-500: #009688;
  --md-teal-600: #00897b;
  --md-teal-700: #00796b;
  --md-teal-800: #00695c;
  --md-teal-900: #004d40;
  --md-teal-A100: #a7ffeb;
  --md-teal-A200: #64ffda;
  --md-teal-A400: #1de9b6;
  --md-teal-A700: #00bfa5;
  --md-green-50: #e8f5e9;
  --md-green-100: #c8e6c9;
  --md-green-200: #a5d6a7;
  --md-green-300: #81c784;
  --md-green-400: #66bb6a;
  --md-green-500: #4caf50;
  --md-green-600: #43a047;
  --md-green-700: #388e3c;
  --md-green-800: #2e7d32;
  --md-green-900: #1b5e20;
  --md-green-A100: #b9f6ca;
  --md-green-A200: #69f0ae;
  --md-green-A400: #00e676;
  --md-green-A700: #00c853;
  --md-light-green-50: #f1f8e9;
  --md-light-green-100: #dcedc8;
  --md-light-green-200: #c5e1a5;
  --md-light-green-300: #aed581;
  --md-light-green-400: #9ccc65;
  --md-light-green-500: #8bc34a;
  --md-light-green-600: #7cb342;
  --md-light-green-700: #689f38;
  --md-light-green-800: #558b2f;
  --md-light-green-900: #33691e;
  --md-light-green-A100: #ccff90;
  --md-light-green-A200: #b2ff59;
  --md-light-green-A400: #76ff03;
  --md-light-green-A700: #64dd17;
  --md-lime-50: #f9fbe7;
  --md-lime-100: #f0f4c3;
  --md-lime-200: #e6ee9c;
  --md-lime-300: #dce775;
  --md-lime-400: #d4e157;
  --md-lime-500: #cddc39;
  --md-lime-600: #c0ca33;
  --md-lime-700: #afb42b;
  --md-lime-800: #9e9d24;
  --md-lime-900: #827717;
  --md-lime-A100: #f4ff81;
  --md-lime-A200: #eeff41;
  --md-lime-A400: #c6ff00;
  --md-lime-A700: #aeea00;
  --md-yellow-50: #fffde7;
  --md-yellow-100: #fff9c4;
  --md-yellow-200: #fff59d;
  --md-yellow-300: #fff176;
  --md-yellow-400: #ffee58;
  --md-yellow-500: #ffeb3b;
  --md-yellow-600: #fdd835;
  --md-yellow-700: #fbc02d;
  --md-yellow-800: #f9a825;
  --md-yellow-900: #f57f17;
  --md-yellow-A100: #ffff8d;
  --md-yellow-A200: #ff0;
  --md-yellow-A400: #ffea00;
  --md-yellow-A700: #ffd600;
  --md-amber-50: #fff8e1;
  --md-amber-100: #ffecb3;
  --md-amber-200: #ffe082;
  --md-amber-300: #ffd54f;
  --md-amber-400: #ffca28;
  --md-amber-500: #ffc107;
  --md-amber-600: #ffb300;
  --md-amber-700: #ffa000;
  --md-amber-800: #ff8f00;
  --md-amber-900: #ff6f00;
  --md-amber-A100: #ffe57f;
  --md-amber-A200: #ffd740;
  --md-amber-A400: #ffc400;
  --md-amber-A700: #ffab00;
  --md-orange-50: #fff3e0;
  --md-orange-100: #ffe0b2;
  --md-orange-200: #ffcc80;
  --md-orange-300: #ffb74d;
  --md-orange-400: #ffa726;
  --md-orange-500: #ff9800;
  --md-orange-600: #fb8c00;
  --md-orange-700: #f57c00;
  --md-orange-800: #ef6c00;
  --md-orange-900: #e65100;
  --md-orange-A100: #ffd180;
  --md-orange-A200: #ffab40;
  --md-orange-A400: #ff9100;
  --md-orange-A700: #ff6d00;
  --md-deep-orange-50: #fbe9e7;
  --md-deep-orange-100: #ffccbc;
  --md-deep-orange-200: #ffab91;
  --md-deep-orange-300: #ff8a65;
  --md-deep-orange-400: #ff7043;
  --md-deep-orange-500: #ff5722;
  --md-deep-orange-600: #f4511e;
  --md-deep-orange-700: #e64a19;
  --md-deep-orange-800: #d84315;
  --md-deep-orange-900: #bf360c;
  --md-deep-orange-A100: #ff9e80;
  --md-deep-orange-A200: #ff6e40;
  --md-deep-orange-A400: #ff3d00;
  --md-deep-orange-A700: #dd2c00;
  --md-brown-50: #efebe9;
  --md-brown-100: #d7ccc8;
  --md-brown-200: #bcaaa4;
  --md-brown-300: #a1887f;
  --md-brown-400: #8d6e63;
  --md-brown-500: #795548;
  --md-brown-600: #6d4c41;
  --md-brown-700: #5d4037;
  --md-brown-800: #4e342e;
  --md-brown-900: #3e2723;
  --md-grey-50: #fafafa;
  --md-grey-100: #f5f5f5;
  --md-grey-200: #eee;
  --md-grey-300: #e0e0e0;
  --md-grey-400: #bdbdbd;
  --md-grey-500: #9e9e9e;
  --md-grey-600: #757575;
  --md-grey-700: #616161;
  --md-grey-800: #424242;
  --md-grey-900: #212121;
  --md-blue-grey-50: #eceff1;
  --md-blue-grey-100: #cfd8dc;
  --md-blue-grey-200: #b0bec5;
  --md-blue-grey-300: #90a4ae;
  --md-blue-grey-400: #78909c;
  --md-blue-grey-500: #607d8b;
  --md-blue-grey-600: #546e7a;
  --md-blue-grey-700: #455a64;
  --md-blue-grey-800: #37474f;
  --md-blue-grey-900: #263238;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| RenderedText
|----------------------------------------------------------------------------*/

:root {
  /* This is the padding value to fill the gaps between lines containing spans with background color. */
  --jp-private-code-span-padding: calc(
    (var(--jp-code-line-height) - 1) * var(--jp-code-font-size) / 2
  );
}

.jp-RenderedText {
  text-align: left;
  padding-left: var(--jp-code-padding);
  line-height: var(--jp-code-line-height);
  font-family: var(--jp-code-font-family);
}

.jp-RenderedText pre,
.jp-RenderedJavaScript pre,
.jp-RenderedHTMLCommon pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
  border: none;
  margin: 0;
  padding: 0;
}

.jp-RenderedText pre a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* console foregrounds and backgrounds */
.jp-RenderedText pre .ansi-black-fg {
  color: #3e424d;
}

.jp-RenderedText pre .ansi-red-fg {
  color: #e75c58;
}

.jp-RenderedText pre .ansi-green-fg {
  color: #00a250;
}

.jp-RenderedText pre .ansi-yellow-fg {
  color: #ddb62b;
}

.jp-RenderedText pre .ansi-blue-fg {
  color: #208ffb;
}

.jp-RenderedText pre .ansi-magenta-fg {
  color: #d160c4;
}

.jp-RenderedText pre .ansi-cyan-fg {
  color: #60c6c8;
}

.jp-RenderedText pre .ansi-white-fg {
  color: #c5c1b4;
}

.jp-RenderedText pre .ansi-black-bg {
  background-color: #3e424d;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-bg {
  background-color: #e75c58;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-bg {
  background-color: #00a250;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-bg {
  background-color: #ddb62b;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-bg {
  background-color: #208ffb;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-bg {
  background-color: #d160c4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-bg {
  background-color: #60c6c8;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-bg {
  background-color: #c5c1b4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-black-intense-fg {
  color: #282c36;
}

.jp-RenderedText pre .ansi-red-intense-fg {
  color: #b22b31;
}

.jp-RenderedText pre .ansi-green-intense-fg {
  color: #007427;
}

.jp-RenderedText pre .ansi-yellow-intense-fg {
  color: #b27d12;
}

.jp-RenderedText pre .ansi-blue-intense-fg {
  color: #0065ca;
}

.jp-RenderedText pre .ansi-magenta-intense-fg {
  color: #a03196;
}

.jp-RenderedText pre .ansi-cyan-intense-fg {
  color: #258f8f;
}

.jp-RenderedText pre .ansi-white-intense-fg {
  color: #a1a6b2;
}

.jp-RenderedText pre .ansi-black-intense-bg {
  background-color: #282c36;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-intense-bg {
  background-color: #b22b31;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-intense-bg {
  background-color: #007427;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-intense-bg {
  background-color: #b27d12;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-intense-bg {
  background-color: #0065ca;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-intense-bg {
  background-color: #a03196;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-intense-bg {
  background-color: #258f8f;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-intense-bg {
  background-color: #a1a6b2;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-default-inverse-fg {
  color: var(--jp-ui-inverse-font-color0);
}

.jp-RenderedText pre .ansi-default-inverse-bg {
  background-color: var(--jp-inverse-layout-color0);
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-bold {
  font-weight: bold;
}

.jp-RenderedText pre .ansi-underline {
  text-decoration: underline;
}

.jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr'] {
  background: var(--jp-rendermime-error-background);
  padding-top: var(--jp-code-padding);
}

/*-----------------------------------------------------------------------------
| RenderedLatex
|----------------------------------------------------------------------------*/

.jp-RenderedLatex {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);
}

/* Left-justify outputs.*/
.jp-OutputArea-output.jp-RenderedLatex {
  padding: var(--jp-code-padding);
  text-align: left;
}

/*-----------------------------------------------------------------------------
| RenderedHTML
|----------------------------------------------------------------------------*/

.jp-RenderedHTMLCommon {
  color: var(--jp-content-font-color1);
  font-family: var(--jp-content-font-family);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);

  /* Give a bit more R padding on Markdown text to keep line lengths reasonable */
  padding-right: 20px;
}

.jp-RenderedHTMLCommon em {
  font-style: italic;
}

.jp-RenderedHTMLCommon strong {
  font-weight: bold;
}

.jp-RenderedHTMLCommon u {
  text-decoration: underline;
}

.jp-RenderedHTMLCommon a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* Headings */

.jp-RenderedHTMLCommon h1,
.jp-RenderedHTMLCommon h2,
.jp-RenderedHTMLCommon h3,
.jp-RenderedHTMLCommon h4,
.jp-RenderedHTMLCommon h5,
.jp-RenderedHTMLCommon h6 {
  line-height: var(--jp-content-heading-line-height);
  font-weight: var(--jp-content-heading-font-weight);
  font-style: normal;
  margin: var(--jp-content-heading-margin-top) 0
    var(--jp-content-heading-margin-bottom) 0;
}

.jp-RenderedHTMLCommon h1:first-child,
.jp-RenderedHTMLCommon h2:first-child,
.jp-RenderedHTMLCommon h3:first-child,
.jp-RenderedHTMLCommon h4:first-child,
.jp-RenderedHTMLCommon h5:first-child,
.jp-RenderedHTMLCommon h6:first-child {
  margin-top: calc(0.5 * var(--jp-content-heading-margin-top));
}

.jp-RenderedHTMLCommon h1:last-child,
.jp-RenderedHTMLCommon h2:last-child,
.jp-RenderedHTMLCommon h3:last-child,
.jp-RenderedHTMLCommon h4:last-child,
.jp-RenderedHTMLCommon h5:last-child,
.jp-RenderedHTMLCommon h6:last-child {
  margin-bottom: calc(0.5 * var(--jp-content-heading-margin-bottom));
}

.jp-RenderedHTMLCommon h1 {
  font-size: var(--jp-content-font-size5);
}

.jp-RenderedHTMLCommon h2 {
  font-size: var(--jp-content-font-size4);
}

.jp-RenderedHTMLCommon h3 {
  font-size: var(--jp-content-font-size3);
}

.jp-RenderedHTMLCommon h4 {
  font-size: var(--jp-content-font-size2);
}

.jp-RenderedHTMLCommon h5 {
  font-size: var(--jp-content-font-size1);
}

.jp-RenderedHTMLCommon h6 {
  font-size: var(--jp-content-font-size0);
}

/* Lists */

/* stylelint-disable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon ul:not(.list-inline),
.jp-RenderedHTMLCommon ol:not(.list-inline) {
  padding-left: 2em;
}

.jp-RenderedHTMLCommon ul {
  list-style: disc;
}

.jp-RenderedHTMLCommon ul ul {
  list-style: square;
}

.jp-RenderedHTMLCommon ul ul ul {
  list-style: circle;
}

.jp-RenderedHTMLCommon ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol ol {
  list-style: upper-alpha;
}

.jp-RenderedHTMLCommon ol ol ol {
  list-style: lower-alpha;
}

.jp-RenderedHTMLCommon ol ol ol ol {
  list-style: lower-roman;
}

.jp-RenderedHTMLCommon ol ol ol ol ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol,
.jp-RenderedHTMLCommon ul {
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon ul ul,
.jp-RenderedHTMLCommon ul ol,
.jp-RenderedHTMLCommon ol ul,
.jp-RenderedHTMLCommon ol ol {
  margin-bottom: 0;
}

/* stylelint-enable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon hr {
  color: var(--jp-border-color2);
  background-color: var(--jp-border-color1);
  margin-top: 1em;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon > pre {
  margin: 1.5em 2em;
}

.jp-RenderedHTMLCommon pre,
.jp-RenderedHTMLCommon code {
  border: 0;
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  line-height: var(--jp-code-line-height);
  padding: 0;
  white-space: pre-wrap;
}

.jp-RenderedHTMLCommon :not(pre) > code {
  background-color: var(--jp-layout-color2);
  padding: 1px 5px;
}

/* Tables */

.jp-RenderedHTMLCommon table {
  border-collapse: collapse;
  border-spacing: 0;
  border: none;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  table-layout: fixed;
  margin-left: auto;
  margin-bottom: 1em;
  margin-right: auto;
}

.jp-RenderedHTMLCommon thead {
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  vertical-align: bottom;
}

.jp-RenderedHTMLCommon td,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon tr {
  vertical-align: middle;
  padding: 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}

.jp-RenderedMarkdown.jp-RenderedHTMLCommon td,
.jp-RenderedMarkdown.jp-RenderedHTMLCommon th {
  max-width: none;
}

:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon td,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon th,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon tr {
  text-align: right;
}

.jp-RenderedHTMLCommon th {
  font-weight: bold;
}

.jp-RenderedHTMLCommon tbody tr:nth-child(odd) {
  background: var(--jp-layout-color0);
}

.jp-RenderedHTMLCommon tbody tr:nth-child(even) {
  background: var(--jp-rendermime-table-row-background);
}

.jp-RenderedHTMLCommon tbody tr:hover {
  background: var(--jp-rendermime-table-row-hover-background);
}

.jp-RenderedHTMLCommon p {
  text-align: left;
  margin: 0;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon img {
  -moz-force-broken-image-icon: 1;
}

/* Restrict to direct children as other images could be nested in other content. */
.jp-RenderedHTMLCommon > img {
  display: block;
  margin-left: 0;
  margin-right: 0;
  margin-bottom: 1em;
}

/* Change color behind transparent images if they need it... */
[data-jp-theme-light='false'] .jp-RenderedImage img.jp-needs-light-background {
  background-color: var(--jp-inverse-layout-color1);
}

[data-jp-theme-light='true'] .jp-RenderedImage img.jp-needs-dark-background {
  background-color: var(--jp-inverse-layout-color1);
}

.jp-RenderedHTMLCommon img,
.jp-RenderedImage img,
.jp-RenderedHTMLCommon svg,
.jp-RenderedSVG svg {
  max-width: 100%;
  height: auto;
}

.jp-RenderedHTMLCommon img.jp-mod-unconfined,
.jp-RenderedImage img.jp-mod-unconfined,
.jp-RenderedHTMLCommon svg.jp-mod-unconfined,
.jp-RenderedSVG svg.jp-mod-unconfined {
  max-width: none;
}

.jp-RenderedHTMLCommon .alert {
  padding: var(--jp-notebook-padding);
  border: var(--jp-border-width) solid transparent;
  border-radius: var(--jp-border-radius);
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon .alert-info {
  color: var(--jp-info-color0);
  background-color: var(--jp-info-color3);
  border-color: var(--jp-info-color2);
}

.jp-RenderedHTMLCommon .alert-info hr {
  border-color: var(--jp-info-color3);
}

.jp-RenderedHTMLCommon .alert-info > p:last-child,
.jp-RenderedHTMLCommon .alert-info > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-warning {
  color: var(--jp-warn-color0);
  background-color: var(--jp-warn-color3);
  border-color: var(--jp-warn-color2);
}

.jp-RenderedHTMLCommon .alert-warning hr {
  border-color: var(--jp-warn-color3);
}

.jp-RenderedHTMLCommon .alert-warning > p:last-child,
.jp-RenderedHTMLCommon .alert-warning > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-success {
  color: var(--jp-success-color0);
  background-color: var(--jp-success-color3);
  border-color: var(--jp-success-color2);
}

.jp-RenderedHTMLCommon .alert-success hr {
  border-color: var(--jp-success-color3);
}

.jp-RenderedHTMLCommon .alert-success > p:last-child,
.jp-RenderedHTMLCommon .alert-success > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-danger {
  color: var(--jp-error-color0);
  background-color: var(--jp-error-color3);
  border-color: var(--jp-error-color2);
}

.jp-RenderedHTMLCommon .alert-danger hr {
  border-color: var(--jp-error-color3);
}

.jp-RenderedHTMLCommon .alert-danger > p:last-child,
.jp-RenderedHTMLCommon .alert-danger > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon blockquote {
  margin: 1em 2em;
  padding: 0 1em;
  border-left: 5px solid var(--jp-border-color2);
}

a.jp-InternalAnchorLink {
  visibility: hidden;
  margin-left: 8px;
  color: var(--md-blue-800);
}

h1:hover .jp-InternalAnchorLink,
h2:hover .jp-InternalAnchorLink,
h3:hover .jp-InternalAnchorLink,
h4:hover .jp-InternalAnchorLink,
h5:hover .jp-InternalAnchorLink,
h6:hover .jp-InternalAnchorLink {
  visibility: visible;
}

.jp-RenderedHTMLCommon kbd {
  background-color: var(--jp-rendermime-table-row-background);
  border: 1px solid var(--jp-border-color0);
  border-bottom-color: var(--jp-border-color2);
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
  display: inline-block;
  font-size: var(--jp-ui-font-size0);
  line-height: 1em;
  padding: 0.2em 0.5em;
}

/* Most direct children of .jp-RenderedHTMLCommon have a margin-bottom of 1.0.
 * At the bottom of cells this is a bit too much as there is also spacing
 * between cells. Going all the way to 0 gets too tight between markdown and
 * code cells.
 */
.jp-RenderedHTMLCommon > *:last-child {
  margin-bottom: 0.5em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-cursor-backdrop {
  position: fixed;
  width: 200px;
  height: 200px;
  margin-top: -100px;
  margin-left: -100px;
  will-change: transform;
  z-index: 100;
}

.lm-mod-drag-image {
  will-change: transform;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-lineFormSearch {
  padding: 4px 12px;
  background-color: var(--jp-layout-color2);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
  font-size: var(--jp-ui-font-size1);
}

.jp-lineFormCaption {
  font-size: var(--jp-ui-font-size0);
  line-height: var(--jp-ui-font-size1);
  margin-top: 4px;
  color: var(--jp-ui-font-color0);
}

.jp-baseLineForm {
  border: none;
  border-radius: 0;
  position: absolute;
  background-size: 16px;
  background-repeat: no-repeat;
  background-position: center;
  outline: none;
}

.jp-lineFormButtonContainer {
  top: 4px;
  right: 8px;
  height: 24px;
  padding: 0 12px;
  width: 12px;
}

.jp-lineFormButtonIcon {
  top: 0;
  right: 0;
  background-color: var(--jp-brand-color1);
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  padding: 4px 6px;
}

.jp-lineFormButton {
  top: 0;
  right: 0;
  background-color: transparent;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
}

.jp-lineFormWrapper {
  overflow: hidden;
  padding: 0 8px;
  border: 1px solid var(--jp-border-color0);
  background-color: var(--jp-input-active-background);
  height: 22px;
}

.jp-lineFormWrapperFocusWithin {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-lineFormInput {
  background: transparent;
  width: 200px;
  height: 100%;
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  line-height: 28px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-JSONEditor {
  display: flex;
  flex-direction: column;
  width: 100%;
}

.jp-JSONEditor-host {
  flex: 1 1 auto;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  background: var(--jp-layout-color0);
  min-height: 50px;
  padding: 1px;
}

.jp-JSONEditor.jp-mod-error .jp-JSONEditor-host {
  border-color: red;
  outline-color: red;
}

.jp-JSONEditor-header {
  display: flex;
  flex: 1 0 auto;
  padding: 0 0 0 12px;
}

.jp-JSONEditor-header label {
  flex: 0 0 auto;
}

.jp-JSONEditor-commitButton {
  height: 16px;
  width: 16px;
  background-size: 18px;
  background-repeat: no-repeat;
  background-position: center;
}

.jp-JSONEditor-host.jp-mod-focused {
  background-color: var(--jp-input-active-background);
  border: 1px solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

.jp-Editor.jp-mod-dropTarget {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/
.jp-DocumentSearch-input {
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  font-size: var(--jp-ui-font-size1);
  background-color: var(--jp-layout-color0);
  font-family: var(--jp-ui-font-family);
  padding: 2px 1px;
  resize: none;
}

.jp-DocumentSearch-overlay {
  position: absolute;
  background-color: var(--jp-toolbar-background);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  border-left: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  top: 0;
  right: 0;
  z-index: 7;
  min-width: 405px;
  padding: 2px;
  font-size: var(--jp-ui-font-size1);

  --jp-private-document-search-button-height: 20px;
}

.jp-DocumentSearch-overlay button {
  background-color: var(--jp-toolbar-background);
  outline: 0;
}

.jp-DocumentSearch-overlay button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-overlay button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-overlay-row {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
}

.jp-DocumentSearch-button-content {
  display: inline-block;
  cursor: pointer;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-button-content svg {
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-input-wrapper {
  border: var(--jp-border-width) solid var(--jp-border-color0);
  display: flex;
  background-color: var(--jp-layout-color0);
  margin: 2px;
}

.jp-DocumentSearch-input-wrapper:focus-within {
  border-color: var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper {
  all: initial;
  overflow: hidden;
  display: inline-block;
  border: none;
  box-sizing: border-box;
}

.jp-DocumentSearch-toggle-wrapper {
  width: 14px;
  height: 14px;
}

.jp-DocumentSearch-button-wrapper {
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
}

.jp-DocumentSearch-toggle-wrapper:focus,
.jp-DocumentSearch-button-wrapper:focus {
  outline: var(--jp-border-width) solid
    var(--jp-cell-editor-active-border-color);
  outline-offset: -1px;
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper,
.jp-DocumentSearch-button-content:focus {
  outline: none;
}

.jp-DocumentSearch-toggle-placeholder {
  width: 5px;
}

.jp-DocumentSearch-input-button::before {
  display: block;
  padding-top: 100%;
}

.jp-DocumentSearch-input-button-off {
  opacity: var(--jp-search-toggle-off-opacity);
}

.jp-DocumentSearch-input-button-off:hover {
  opacity: var(--jp-search-toggle-hover-opacity);
}

.jp-DocumentSearch-input-button-on {
  opacity: var(--jp-search-toggle-on-opacity);
}

.jp-DocumentSearch-index-counter {
  padding-left: 10px;
  padding-right: 10px;
  user-select: none;
  min-width: 35px;
  display: inline-block;
}

.jp-DocumentSearch-up-down-wrapper {
  display: inline-block;
  padding-right: 2px;
  margin-left: auto;
  white-space: nowrap;
}

.jp-DocumentSearch-spacer {
  margin-left: auto;
}

.jp-DocumentSearch-up-down-wrapper button {
  outline: 0;
  border: none;
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
  vertical-align: middle;
  margin: 1px 5px 2px;
}

.jp-DocumentSearch-up-down-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-up-down-button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-filter-button {
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-filter-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled:hover {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-search-options {
  padding: 0 8px;
  margin-left: 3px;
  width: 100%;
  display: grid;
  justify-content: start;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  justify-items: stretch;
}

.jp-DocumentSearch-search-filter-disabled {
  color: var(--jp-ui-font-color2);
}

.jp-DocumentSearch-search-filter {
  display: flex;
  align-items: center;
  user-select: none;
}

.jp-DocumentSearch-regex-error {
  color: var(--jp-error-color0);
}

.jp-DocumentSearch-replace-button-wrapper {
  overflow: hidden;
  display: inline-block;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color0);
  margin: auto 2px;
  padding: 1px 4px;
  height: calc(var(--jp-private-document-search-button-height) + 2px);
}

.jp-DocumentSearch-replace-button-wrapper:focus {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-replace-button {
  display: inline-block;
  text-align: center;
  cursor: pointer;
  box-sizing: border-box;
  color: var(--jp-ui-font-color1);

  /* height - 2 * (padding of wrapper) */
  line-height: calc(var(--jp-private-document-search-button-height) - 2px);
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-replace-button:focus {
  outline: none;
}

.jp-DocumentSearch-replace-wrapper-class {
  margin-left: 14px;
  display: flex;
}

.jp-DocumentSearch-replace-toggle {
  border: none;
  background-color: var(--jp-toolbar-background);
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-replace-toggle:hover {
  background-color: var(--jp-layout-color2);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.cm-editor {
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  border: 0;
  border-radius: 0;
  height: auto;

  /* Changed to auto to autogrow */
}

.cm-editor pre {
  padding: 0 var(--jp-code-padding);
}

.jp-CodeMirrorEditor[data-type='inline'] .cm-dialog {
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
}

.jp-CodeMirrorEditor {
  cursor: text;
}

/* When zoomed out 67% and 33% on a screen of 1440 width x 900 height */
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width1) solid
      var(--jp-editor-cursor-color);
  }
}

/* When zoomed out less than 33% */
@media screen and (min-width: 4320px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width2) solid
      var(--jp-editor-cursor-color);
  }
}

.cm-editor.jp-mod-readOnly .cm-cursor {
  display: none;
}

.jp-CollaboratorCursor {
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: none;
  border-bottom: 3px solid;
  background-clip: content-box;
  margin-left: -5px;
  margin-right: -5px;
}

.cm-searching,
.cm-searching span {
  /* `.cm-searching span`: we need to override syntax highlighting */
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.cm-searching::selection,
.cm-searching span::selection {
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.jp-current-match > .cm-searching,
.jp-current-match > .cm-searching span,
.cm-searching > .jp-current-match,
.cm-searching > .jp-current-match span {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.jp-current-match > .cm-searching::selection,
.cm-searching > .jp-current-match::selection,
.jp-current-match > .cm-searching span::selection {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.cm-trailingspace {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAsElEQVQIHQGlAFr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7+r3zKmT0/+pk9P/7+r3zAAAAAAAAAAABAAAAAAAAAAA6OPzM+/q9wAAAAAA6OPzMwAAAAAAAAAAAgAAAAAAAAAAGR8NiRQaCgAZIA0AGR8NiQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQyoYJ/SY80UAAAAASUVORK5CYII=);
  background-position: center left;
  background-repeat: repeat-x;
}

.jp-CollaboratorCursor-hover {
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  color: white;
  border-radius: 3px;
  padding-left: 4px;
  padding-right: 4px;
  padding-top: 1px;
  padding-bottom: 1px;
  text-align: center;
  font-size: var(--jp-ui-font-size1);
  white-space: nowrap;
}

.jp-CodeMirror-ruler {
  border-left: 1px dashed var(--jp-border-color2);
}

/* Styles for shared cursors (remote cursor locations and selected ranges) */
.jp-CodeMirrorEditor .cm-ySelectionCaret {
  position: relative;
  border-left: 1px solid black;
  margin-left: -1px;
  margin-right: -1px;
  box-sizing: border-box;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret > .cm-ySelectionInfo {
  white-space: nowrap;
  position: absolute;
  top: -1.15em;
  padding-bottom: 0.05em;
  left: -1px;
  font-size: 0.95em;
  font-family: var(--jp-ui-font-family);
  font-weight: bold;
  line-height: normal;
  user-select: none;
  color: white;
  padding-left: 2px;
  padding-right: 2px;
  z-index: 101;
  transition: opacity 0.3s ease-in-out;
}

.jp-CodeMirrorEditor .cm-ySelectionInfo {
  transition-delay: 0.7s;
  opacity: 0;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret:hover > .cm-ySelectionInfo {
  opacity: 1;
  transition-delay: 0s;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MimeDocument {
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-filebrowser-button-height: 28px;
  --jp-private-filebrowser-button-width: 48px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FileBrowser .jp-SidePanel-content {
  display: flex;
  flex-direction: column;
}

.jp-FileBrowser-toolbar.jp-Toolbar {
  flex-wrap: wrap;
  row-gap: 12px;
  border-bottom: none;
  height: auto;
  margin: 8px 12px 0;
  box-shadow: none;
  padding: 0;
  justify-content: flex-start;
}

.jp-FileBrowser-Panel {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
}

.jp-BreadCrumbs {
  flex: 0 0 auto;
  margin: 8px 12px;
}

.jp-BreadCrumbs-item {
  margin: 0 2px;
  padding: 0 2px;
  border-radius: var(--jp-border-radius);
  cursor: pointer;
}

.jp-BreadCrumbs-item:hover {
  background-color: var(--jp-layout-color2);
}

.jp-BreadCrumbs-item:first-child {
  margin-left: 0;
}

.jp-BreadCrumbs-item.jp-mod-dropTarget {
  background-color: var(--jp-brand-color2);
  opacity: 0.7;
}

/*-----------------------------------------------------------------------------
| Buttons
|----------------------------------------------------------------------------*/

.jp-FileBrowser-toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  padding-left: 0;
  padding-right: 2px;
  align-items: center;
  height: unset;
}

.jp-FileBrowser-toolbar > .jp-Toolbar-item .jp-ToolbarButtonComponent {
  width: 40px;
}

/*-----------------------------------------------------------------------------
| Other styles
|----------------------------------------------------------------------------*/

.jp-FileDialog.jp-mod-conflict input {
  color: var(--jp-error-color1);
}

.jp-FileDialog .jp-new-name-title {
  margin-top: 12px;
}

.jp-LastModified-hidden {
  display: none;
}

.jp-FileSize-hidden {
  display: none;
}

.jp-FileBrowser .lm-AccordionPanel > h3:first-child {
  display: none;
}

/*-----------------------------------------------------------------------------
| DirListing
|----------------------------------------------------------------------------*/

.jp-DirListing {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  outline: 0;
}

.jp-DirListing-header {
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  border-top: var(--jp-border-width) solid var(--jp-border-color2);
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
}

.jp-DirListing-headerItem {
  padding: 4px 12px 2px;
  font-weight: 500;
}

.jp-DirListing-headerItem:hover {
  background: var(--jp-layout-color2);
}

.jp-DirListing-headerItem.jp-id-name {
  flex: 1 0 84px;
}

.jp-DirListing-headerItem.jp-id-modified {
  flex: 0 0 112px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-DirListing-headerItem.jp-id-filesize {
  flex: 0 0 75px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-id-narrow {
  display: none;
  flex: 0 0 5px;
  padding: 4px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
  color: var(--jp-border-color2);
}

.jp-DirListing-narrow .jp-id-narrow {
  display: block;
}

.jp-DirListing-narrow .jp-id-modified,
.jp-DirListing-narrow .jp-DirListing-itemModified {
  display: none;
}

.jp-DirListing-headerItem.jp-mod-selected {
  font-weight: 600;
}

/* increase specificity to override bundled default */
.jp-DirListing-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  list-style-type: none;
  overflow: auto;
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-content mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.jp-DirListing-content .jp-DirListing-item.jp-mod-selected mark {
  color: var(--jp-ui-inverse-font-color0);
}

/* Style the directory listing content when a user drops a file to upload */
.jp-DirListing.jp-mod-native-drop .jp-DirListing-content {
  outline: 5px dashed rgba(128, 128, 128, 0.5);
  outline-offset: -10px;
  cursor: copy;
}

.jp-DirListing-item {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 4px 12px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-DirListing-checkboxWrapper {
  /* Increases hit area of checkbox. */
  padding: 4px;
}

.jp-DirListing-header
  .jp-DirListing-checkboxWrapper
  + .jp-DirListing-headerItem {
  padding-left: 4px;
}

.jp-DirListing-content .jp-DirListing-checkboxWrapper {
  position: relative;
  left: -4px;
  margin: -4px 0 -4px -8px;
}

.jp-DirListing-checkboxWrapper.jp-mod-visible {
  visibility: visible;
}

/* For devices that support hovering, hide checkboxes until hovered, selected...
*/
@media (hover: hover) {
  .jp-DirListing-checkboxWrapper {
    visibility: hidden;
  }

  .jp-DirListing-item:hover .jp-DirListing-checkboxWrapper,
  .jp-DirListing-item.jp-mod-selected .jp-DirListing-checkboxWrapper {
    visibility: visible;
  }
}

.jp-DirListing-item[data-is-dot] {
  opacity: 75%;
}

.jp-DirListing-item.jp-mod-selected {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.jp-DirListing-item.jp-mod-dropTarget {
  background: var(--jp-brand-color3);
}

.jp-DirListing-item:hover:not(.jp-mod-selected) {
  background: var(--jp-layout-color2);
}

.jp-DirListing-itemIcon {
  flex: 0 0 20px;
  margin-right: 4px;
}

.jp-DirListing-itemText {
  flex: 1 0 64px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

.jp-DirListing-itemText:focus {
  outline-width: 2px;
  outline-color: var(--jp-inverse-layout-color1);
  outline-style: solid;
  outline-offset: 1px;
}

.jp-DirListing-item.jp-mod-selected .jp-DirListing-itemText:focus {
  outline-color: var(--jp-layout-color1);
}

.jp-DirListing-itemModified {
  flex: 0 0 125px;
  text-align: right;
}

.jp-DirListing-itemFileSize {
  flex: 0 0 90px;
  text-align: right;
}

.jp-DirListing-editor {
  flex: 1 0 64px;
  outline: none;
  border: none;
  color: var(--jp-ui-font-color1);
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon::before {
  color: var(--jp-success-color1);
  content: '\25CF';
  font-size: 8px;
  position: absolute;
  left: -8px;
}

.jp-DirListing-item.jp-mod-running.jp-mod-selected
  .jp-DirListing-itemIcon::before {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-DirListing-item.lm-mod-drag-image,
.jp-DirListing-item.jp-mod-selected.lm-mod-drag-image {
  font-size: var(--jp-ui-font-size1);
  padding-left: 4px;
  margin-left: 4px;
  width: 160px;
  background-color: var(--jp-ui-inverse-font-color2);
  box-shadow: var(--jp-elevation-z2);
  border-radius: 0;
  color: var(--jp-ui-font-color1);
  transform: translateX(-40%) translateY(-58%);
}

.jp-Document {
  min-width: 120px;
  min-height: 120px;
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Main OutputArea
| OutputArea has a list of Outputs
|----------------------------------------------------------------------------*/

.jp-OutputArea {
  overflow-y: auto;
}

.jp-OutputArea-child {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-OutputPrompt {
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-outprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
  opacity: var(--jp-cell-prompt-opacity);

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-OutputArea-prompt {
  display: table-cell;
  vertical-align: top;
}

.jp-OutputArea-output {
  display: table-cell;
  width: 100%;
  height: auto;
  overflow: auto;
  user-select: text;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
}

.jp-OutputArea .jp-RenderedText {
  padding-left: 1ch;
}

/**
 * Prompt overlay.
 */

.jp-OutputArea-promptOverlay {
  position: absolute;
  top: 0;
  width: var(--jp-cell-prompt-width);
  height: 100%;
  opacity: 0.5;
}

.jp-OutputArea-promptOverlay:hover {
  background: var(--jp-layout-color2);
  box-shadow: inset 0 0 1px var(--jp-inverse-layout-color0);
  cursor: zoom-out;
}

.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay:hover {
  cursor: zoom-in;
}

/**
 * Isolated output.
 */
.jp-OutputArea-output.jp-mod-isolated {
  width: 100%;
  display: block;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated {
  position: relative;
}

body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/* pre */

.jp-OutputArea-output pre {
  border: none;
  margin: 0;
  padding: 0;
  overflow-x: auto;
  overflow-y: auto;
  word-break: break-all;
  word-wrap: break-word;
  white-space: pre-wrap;
}

/* tables */

.jp-OutputArea-output.jp-RenderedHTMLCommon table {
  margin-left: 0;
  margin-right: 0;
}

/* description lists */

.jp-OutputArea-output dl,
.jp-OutputArea-output dt,
.jp-OutputArea-output dd {
  display: block;
}

.jp-OutputArea-output dl {
  width: 100%;
  overflow: hidden;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dt {
  font-weight: bold;
  float: left;
  width: 20%;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dd {
  float: left;
  width: 80%;
  padding: 0;
  margin: 0;
}

.jp-TrimmedOutputs pre {
  background: var(--jp-layout-color3);
  font-size: calc(var(--jp-code-font-size) * 1.4);
  text-align: center;
  text-transform: uppercase;
}

/* Hide the gutter in case of
 *  - nested output areas (e.g. in the case of output widgets)
 *  - mirrored output areas
 */
.jp-OutputArea .jp-OutputArea .jp-OutputArea-prompt {
  display: none;
}

/* Hide empty lines in the output area, for instance due to cleared widgets */
.jp-OutputArea-prompt:empty {
  padding: 0;
  border: 0;
}

/*-----------------------------------------------------------------------------
| executeResult is added to any Output-result for the display of the object
| returned by a cell
|----------------------------------------------------------------------------*/

.jp-OutputArea-output.jp-OutputArea-executeResult {
  margin-left: 0;
  width: 100%;
}

/* Text output with the Out[] prompt needs a top padding to match the
 * alignment of the Out[] prompt itself.
 */
.jp-OutputArea-executeResult .jp-RenderedText.jp-OutputArea-output {
  padding-top: var(--jp-code-padding);
  border-top: var(--jp-border-width) solid transparent;
}

/*-----------------------------------------------------------------------------
| The Stdin output
|----------------------------------------------------------------------------*/

.jp-Stdin-prompt {
  color: var(--jp-content-font-color0);
  padding-right: var(--jp-code-padding);
  vertical-align: baseline;
  flex: 0 0 auto;
}

.jp-Stdin-input {
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  color: inherit;
  background-color: inherit;
  width: 42%;
  min-width: 200px;

  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;

  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0 0.25em;
  margin: 0 0.25em;
  flex: 0 0 70%;
}

.jp-Stdin-input::placeholder {
  opacity: 0;
}

.jp-Stdin-input:focus {
  box-shadow: none;
}

.jp-Stdin-input:focus::placeholder {
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Output Area View
|----------------------------------------------------------------------------*/

.jp-LinkedOutputView .jp-OutputArea {
  height: 100%;
  display: block;
}

.jp-LinkedOutputView .jp-OutputArea-output:only-child {
  height: 100%;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

@media print {
  .jp-OutputArea-child {
    break-inside: avoid-page;
  }
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-OutputPrompt {
    display: table-row;
    text-align: left;
  }

  .jp-OutputArea-child .jp-OutputArea-output {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }
}

/* Trimmed outputs warning */
.jp-TrimmedOutputs > a {
  margin: 10px;
  text-decoration: none;
  cursor: pointer;
}

.jp-TrimmedOutputs > a:hover {
  text-decoration: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Table of Contents
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toc-active-width: 4px;
}

.jp-TableOfContents {
  display: flex;
  flex-direction: column;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  height: 100%;
}

.jp-TableOfContents-placeholder {
  text-align: center;
}

.jp-TableOfContents-placeholderContent {
  color: var(--jp-content-font-color2);
  padding: 8px;
}

.jp-TableOfContents-placeholderContent > h3 {
  margin-bottom: var(--jp-content-heading-margin-bottom);
}

.jp-TableOfContents .jp-SidePanel-content {
  overflow-y: auto;
}

.jp-TableOfContents-tree {
  margin: 4px;
}

.jp-TableOfContents ol {
  list-style-type: none;
}

/* stylelint-disable-next-line selector-max-type */
.jp-TableOfContents li > ol {
  /* Align left border with triangle icon center */
  padding-left: 11px;
}

.jp-TableOfContents-content {
  /* left margin for the active heading indicator */
  margin: 0 0 0 var(--jp-private-toc-active-width);
  padding: 0;
  background-color: var(--jp-layout-color1);
}

.jp-tocItem {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-tocItem-heading {
  display: flex;
  cursor: pointer;
}

.jp-tocItem-heading:hover {
  background-color: var(--jp-layout-color2);
}

.jp-tocItem-content {
  display: block;
  padding: 4px 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow-x: hidden;
}

.jp-tocItem-collapser {
  height: 20px;
  margin: 2px 2px 0;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
}

.jp-tocItem-collapser:hover {
  background-color: var(--jp-layout-color3);
}

/* Active heading indicator */

.jp-tocItem-heading::before {
  content: ' ';
  background: transparent;
  width: var(--jp-private-toc-active-width);
  height: 24px;
  position: absolute;
  left: 0;
  border-radius: var(--jp-border-radius);
}

.jp-tocItem-heading.jp-tocItem-active::before {
  background-color: var(--jp-brand-color1);
}

.jp-tocItem-heading:hover.jp-tocItem-active::before {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapser {
  flex: 0 0 var(--jp-cell-collapser-width);
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
  border-radius: var(--jp-border-radius);
  opacity: 1;
}

.jp-Collapser-child {
  display: block;
  width: 100%;
  box-sizing: border-box;

  /* height: 100% doesn't work because the height of its parent is computed from content */
  position: absolute;
  top: 0;
  bottom: 0;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Hiding collapsers in print mode.

Note: input and output wrappers have "display: block" propery in print mode.
*/

@media print {
  .jp-Collapser {
    display: none;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Header/Footer
|----------------------------------------------------------------------------*/

/* Hidden by zero height by default */
.jp-CellHeader,
.jp-CellFooter {
  height: 0;
  width: 100%;
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Input
|----------------------------------------------------------------------------*/

/* All input areas */
.jp-InputArea {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-InputArea-editor {
  display: table-cell;
  overflow: hidden;
  vertical-align: top;

  /* This is the non-active, default styling */
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  background: var(--jp-cell-editor-background);
}

.jp-InputPrompt {
  display: table-cell;
  vertical-align: top;
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-inprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  opacity: var(--jp-cell-prompt-opacity);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-InputArea-editor {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }

  .jp-InputPrompt {
    display: table-row;
    text-align: left;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Placeholder {
  display: table;
  table-layout: fixed;
  width: 100%;
}

.jp-Placeholder-prompt {
  display: table-cell;
  box-sizing: border-box;
}

.jp-Placeholder-content {
  display: table-cell;
  padding: 4px 6px;
  border: 1px solid transparent;
  border-radius: 0;
  background: none;
  box-sizing: border-box;
  cursor: pointer;
}

.jp-Placeholder-contentContainer {
  display: flex;
}

.jp-Placeholder-content:hover,
.jp-InputPlaceholder > .jp-Placeholder-content:hover {
  border-color: var(--jp-layout-color3);
}

.jp-Placeholder-content .jp-MoreHorizIcon {
  width: 32px;
  height: 16px;
  border: 1px solid transparent;
  border-radius: var(--jp-border-radius);
}

.jp-Placeholder-content .jp-MoreHorizIcon:hover {
  border: 1px solid var(--jp-border-color1);
  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.25);
  background-color: var(--jp-layout-color0);
}

.jp-PlaceholderText {
  white-space: nowrap;
  overflow-x: hidden;
  color: var(--jp-inverse-layout-color3);
  font-family: var(--jp-code-font-family);
}

.jp-InputPlaceholder > .jp-Placeholder-content {
  border-color: var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Private CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-cell-scrolling-output-offset: 5px;
}

/*-----------------------------------------------------------------------------
| Cell
|----------------------------------------------------------------------------*/

.jp-Cell {
  padding: var(--jp-cell-padding);
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Common input/output
|----------------------------------------------------------------------------*/

.jp-Cell-inputWrapper,
.jp-Cell-outputWrapper {
  display: flex;
  flex-direction: row;
  padding: 0;
  margin: 0;

  /* Added to reveal the box-shadow on the input and output collapsers. */
  overflow: visible;
}

/* Only input/output areas inside cells */
.jp-Cell-inputArea,
.jp-Cell-outputArea {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Collapser
|----------------------------------------------------------------------------*/

/* Make the output collapser disappear when there is not output, but do so
 * in a manner that leaves it in the layout and preserves its width.
 */
.jp-Cell.jp-mod-noOutputs .jp-Cell-outputCollapser {
  border: none !important;
  background: transparent !important;
}

.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputCollapser {
  min-height: var(--jp-cell-collapser-min-height);
}

/*-----------------------------------------------------------------------------
| Output
|----------------------------------------------------------------------------*/

/* Put a space between input and output when there IS output */
.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper {
  margin-top: 5px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea {
  overflow-y: auto;
  max-height: 24em;
  margin-left: var(--jp-private-cell-scrolling-output-offset);
  resize: vertical;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea[style*='height'] {
  max-height: unset;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea::after {
  content: ' ';
  box-shadow: inset 0 0 6px 2px rgb(0 0 0 / 30%);
  width: 100%;
  height: 100%;
  position: sticky;
  bottom: 0;
  top: 0;
  margin-top: -50%;
  float: left;
  display: block;
  pointer-events: none;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-child {
  padding-top: 6px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-prompt {
  width: calc(
    var(--jp-cell-prompt-width) - var(--jp-private-cell-scrolling-output-offset)
  );
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay {
  left: calc(-1 * var(--jp-private-cell-scrolling-output-offset));
}

/*-----------------------------------------------------------------------------
| CodeCell
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| MarkdownCell
|----------------------------------------------------------------------------*/

.jp-MarkdownOutput {
  display: table-cell;
  width: 100%;
  margin-top: 0;
  margin-bottom: 0;
  padding-left: var(--jp-code-padding);
}

.jp-MarkdownOutput.jp-RenderedHTMLCommon {
  overflow: auto;
}

/* collapseHeadingButton (show always if hiddenCellsButton is _not_ shown) */
.jp-collapseHeadingButton {
  display: flex;
  min-height: var(--jp-cell-collapser-min-height);
  font-size: var(--jp-code-font-size);
  position: absolute;
  background-color: transparent;
  background-size: 25px;
  background-repeat: no-repeat;
  background-position-x: center;
  background-position-y: top;
  background-image: var(--jp-icon-caret-down);
  right: 0;
  top: 0;
  bottom: 0;
}

.jp-collapseHeadingButton.jp-mod-collapsed {
  background-image: var(--jp-icon-caret-right);
}

/*
 set the container font size to match that of content
 so that the nested collapse buttons have the right size
*/
.jp-MarkdownCell .jp-InputPrompt {
  font-size: var(--jp-content-font-size1);
}

/*
  Align collapseHeadingButton with cell top header
  The font sizes are identical to the ones in packages/rendermime/style/base.css
*/
.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='1'] {
  font-size: var(--jp-content-font-size5);
  background-position-y: calc(0.3 * var(--jp-content-font-size5));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='2'] {
  font-size: var(--jp-content-font-size4);
  background-position-y: calc(0.3 * var(--jp-content-font-size4));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='3'] {
  font-size: var(--jp-content-font-size3);
  background-position-y: calc(0.3 * var(--jp-content-font-size3));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='4'] {
  font-size: var(--jp-content-font-size2);
  background-position-y: calc(0.3 * var(--jp-content-font-size2));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='5'] {
  font-size: var(--jp-content-font-size1);
  background-position-y: top;
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='6'] {
  font-size: var(--jp-content-font-size0);
  background-position-y: top;
}

/* collapseHeadingButton (show only on (hover,active) if hiddenCellsButton is shown) */
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-collapseHeadingButton {
  display: none;
}

.jp-Notebook.jp-mod-showHiddenCellsButton
  :is(.jp-MarkdownCell:hover, .jp-mod-active)
  .jp-collapseHeadingButton {
  display: flex;
}

/* showHiddenCellsButton (only show if jp-mod-showHiddenCellsButton is set, which
is a consequence of the showHiddenCellsButton option in Notebook Settings)*/
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton {
  margin-left: calc(var(--jp-cell-prompt-width) + 2 * var(--jp-code-padding));
  margin-top: var(--jp-code-padding);
  border: 1px solid var(--jp-border-color2);
  background-color: var(--jp-border-color3) !important;
  color: var(--jp-content-font-color0) !important;
  display: flex;
}

.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton:hover {
  background-color: var(--jp-border-color2) !important;
}

.jp-showHiddenCellsButton {
  display: none;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Using block instead of flex to allow the use of the break-inside CSS property for
cell outputs.
*/

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-notebook-toolbar-padding: 2px 5px 2px 2px;
}

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-NotebookPanel-toolbar {
  padding: var(--jp-notebook-toolbar-padding);

  /* disable paint containment from lumino 2.0 default strict CSS containment */
  contain: style size !important;
}

.jp-Toolbar-item.jp-Notebook-toolbarCellType .jp-select-wrapper.jp-mod-focused {
  border: none;
  box-shadow: none;
}

.jp-Notebook-toolbarCellTypeDropdown select {
  height: 24px;
  font-size: var(--jp-ui-font-size1);
  line-height: 14px;
  border-radius: 0;
  display: block;
}

.jp-Notebook-toolbarCellTypeDropdown span {
  top: 5px !important;
}

.jp-Toolbar-responsive-popup {
  position: absolute;
  height: fit-content;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-end;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: var(--jp-notebook-toolbar-padding);
  z-index: 1;
  right: 0;
  top: 0;
}

.jp-Toolbar > .jp-Toolbar-responsive-opener {
  margin-left: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-Notebook-ExecutionIndicator {
  position: relative;
  display: inline-block;
  height: 100%;
  z-index: 9997;
}

.jp-Notebook-ExecutionIndicator-tooltip {
  visibility: hidden;
  height: auto;
  width: max-content;
  width: -moz-max-content;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color1);
  text-align: justify;
  border-radius: 6px;
  padding: 0 5px;
  position: fixed;
  display: table;
}

.jp-Notebook-ExecutionIndicator-tooltip.up {
  transform: translateX(-50%) translateY(-100%) translateY(-32px);
}

.jp-Notebook-ExecutionIndicator-tooltip.down {
  transform: translateX(calc(-100% + 16px)) translateY(5px);
}

.jp-Notebook-ExecutionIndicator-tooltip.hidden {
  display: none;
}

.jp-Notebook-ExecutionIndicator:hover .jp-Notebook-ExecutionIndicator-tooltip {
  visibility: visible;
}

.jp-Notebook-ExecutionIndicator span {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  color: var(--jp-ui-font-color1);
  line-height: 24px;
  display: block;
}

.jp-Notebook-ExecutionIndicator-progress-bar {
  display: flex;
  justify-content: center;
  height: 100%;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*
 * Execution indicator
 */
.jp-tocItem-content::after {
  content: '';

  /* Must be identical to form a circle */
  width: 12px;
  height: 12px;
  background: none;
  border: none;
  position: absolute;
  right: 0;
}

.jp-tocItem-content[data-running='0']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background: none;
}

.jp-tocItem-content[data-running='1']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background-color: var(--jp-inverse-layout-color3);
}

.jp-tocItem-content[data-running='0'],
.jp-tocItem-content[data-running='1'] {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Notebook-footer {
  height: 27px;
  margin-left: calc(
    var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
      var(--jp-cell-padding)
  );
  width: calc(
    100% -
      (
        var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
          var(--jp-cell-padding) + var(--jp-cell-padding)
      )
  );
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  color: var(--jp-ui-font-color3);
  margin-top: 6px;
  background: none;
  cursor: pointer;
}

.jp-Notebook-footer:focus {
  border-color: var(--jp-cell-editor-active-border-color);
}

/* For devices that support hovering, hide footer until hover */
@media (hover: hover) {
  .jp-Notebook-footer {
    opacity: 0;
  }

  .jp-Notebook-footer:focus,
  .jp-Notebook-footer:hover {
    opacity: 1;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Imports
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-side-by-side-output-size: 1fr;
  --jp-side-by-side-resized-cell: var(--jp-side-by-side-output-size);
  --jp-private-notebook-dragImage-width: 304px;
  --jp-private-notebook-dragImage-height: 36px;
  --jp-private-notebook-selected-color: var(--md-blue-400);
  --jp-private-notebook-active-color: var(--md-green-400);
}

/*-----------------------------------------------------------------------------
| Notebook
|----------------------------------------------------------------------------*/

/* stylelint-disable selector-max-class */

.jp-NotebookPanel {
  display: block;
  height: 100%;
}

.jp-NotebookPanel.jp-Document {
  min-width: 240px;
  min-height: 120px;
}

.jp-Notebook {
  padding: var(--jp-notebook-padding);
  outline: none;
  overflow: auto;
  background: var(--jp-layout-color0);
}

.jp-Notebook.jp-mod-scrollPastEnd::after {
  display: block;
  content: '';
  min-height: var(--jp-notebook-scroll-padding);
}

.jp-MainAreaWidget-ContainStrict .jp-Notebook * {
  contain: strict;
}

.jp-Notebook .jp-Cell {
  overflow: visible;
}

.jp-Notebook .jp-Cell .jp-InputPrompt {
  cursor: move;
}

/*-----------------------------------------------------------------------------
| Notebook state related styling
|
| The notebook and cells each have states, here are the possibilities:
|
| - Notebook
|   - Command
|   - Edit
| - Cell
|   - None
|   - Active (only one can be active)
|   - Selected (the cells actions are applied to)
|   - Multiselected (when multiple selected, the cursor)
|   - No outputs
|----------------------------------------------------------------------------*/

/* Command or edit modes */

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-InputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-OutputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

/* cell is active */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser {
  background: var(--jp-brand-color1);
}

/* cell is dirty */
.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt {
  color: var(--jp-warn-color1);
}

.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt::before {
  color: var(--jp-warn-color1);
  content: '';
}

.jp-Notebook .jp-Cell.jp-mod-active.jp-mod-dirty .jp-Collapser {
  background: var(--jp-warn-color1);
}

/* collapser is hovered */
.jp-Notebook .jp-Cell .jp-Collapser:hover {
  box-shadow: var(--jp-elevation-z2);
  background: var(--jp-brand-color1);
  opacity: var(--jp-cell-collapser-not-active-hover-opacity);
}

/* cell is active and collapser is hovered */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser:hover {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/* Command mode */

.jp-Notebook.jp-mod-commandMode .jp-Cell.jp-mod-selected {
  background: var(--jp-notebook-multiselected-color);
}

.jp-Notebook.jp-mod-commandMode
  .jp-Cell.jp-mod-active.jp-mod-selected:not(.jp-mod-multiSelected) {
  background: transparent;
}

/* Edit mode */

.jp-Notebook.jp-mod-editMode .jp-Cell.jp-mod-active .jp-InputArea-editor {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-cell-editor-active-background);
}

/*-----------------------------------------------------------------------------
| Notebook drag and drop
|----------------------------------------------------------------------------*/

.jp-Notebook-cell.jp-mod-dropSource {
  opacity: 0.5;
}

.jp-Notebook-cell.jp-mod-dropTarget,
.jp-Notebook.jp-mod-commandMode
  .jp-Notebook-cell.jp-mod-active.jp-mod-selected.jp-mod-dropTarget {
  border-top-color: var(--jp-private-notebook-selected-color);
  border-top-style: solid;
  border-top-width: 2px;
}

.jp-dragImage {
  display: block;
  flex-direction: row;
  width: var(--jp-private-notebook-dragImage-width);
  height: var(--jp-private-notebook-dragImage-height);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
  overflow: visible;
}

.jp-dragImage-singlePrompt {
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

.jp-dragImage .jp-dragImage-content {
  flex: 1 1 auto;
  z-index: 2;
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  line-height: var(--jp-code-line-height);
  padding: var(--jp-code-padding);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background-color);
  color: var(--jp-content-font-color3);
  text-align: left;
  margin: 4px 4px 4px 0;
}

.jp-dragImage .jp-dragImage-prompt {
  flex: 0 0 auto;
  min-width: 36px;
  color: var(--jp-cell-inprompt-font-color);
  padding: var(--jp-code-padding);
  padding-left: 12px;
  font-family: var(--jp-cell-prompt-font-family);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: 1.9;
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
}

.jp-dragImage-multipleBack {
  z-index: -1;
  position: absolute;
  height: 32px;
  width: 300px;
  top: 8px;
  left: 8px;
  background: var(--jp-layout-color2);
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

/*-----------------------------------------------------------------------------
| Cell toolbar
|----------------------------------------------------------------------------*/

.jp-NotebookTools {
  display: block;
  min-width: var(--jp-sidebar-min-width);
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
    * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  overflow: auto;
}

.jp-ActiveCellTool {
  padding: 12px 0;
  display: flex;
}

.jp-ActiveCellTool-Content {
  flex: 1 1 auto;
}

.jp-ActiveCellTool .jp-ActiveCellTool-CellContent {
  background: var(--jp-cell-editor-background);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  min-height: 29px;
}

.jp-ActiveCellTool .jp-InputPrompt {
  min-width: calc(var(--jp-cell-prompt-width) * 0.75);
}

.jp-ActiveCellTool-CellContent > pre {
  padding: 5px 4px;
  margin: 0;
  white-space: normal;
}

.jp-MetadataEditorTool {
  flex-direction: column;
  padding: 12px 0;
}

.jp-RankedPanel > :not(:first-child) {
  margin-top: 12px;
}

.jp-KeySelector select.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: var(--jp-border-width) solid var(--jp-border-color1);
}

.jp-KeySelector label,
.jp-MetadataEditorTool label,
.jp-NumberSetter label {
  line-height: 1.4;
}

.jp-NotebookTools .jp-select-wrapper {
  margin-top: 4px;
  margin-bottom: 0;
}

.jp-NumberSetter input {
  width: 100%;
  margin-top: 4px;
}

.jp-NotebookTools .jp-Collapse {
  margin-top: 16px;
}

/*-----------------------------------------------------------------------------
| Presentation Mode (.jp-mod-presentationMode)
|----------------------------------------------------------------------------*/

.jp-mod-presentationMode .jp-Notebook {
  --jp-content-font-size1: var(--jp-content-presentation-font-size1);
  --jp-code-font-size: var(--jp-code-presentation-font-size);
}

.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-InputPrompt,
.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-OutputPrompt {
  flex: 0 0 110px;
}

/*-----------------------------------------------------------------------------
| Side-by-side Mode (.jp-mod-sideBySide)
|----------------------------------------------------------------------------*/
.jp-mod-sideBySide.jp-Notebook .jp-Notebook-cell {
  margin-top: 3em;
  margin-bottom: 3em;
  margin-left: 5%;
  margin-right: 5%;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell {
  display: grid;
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-output-size)
    );
  grid-template-rows: auto minmax(0, 1fr) auto;
  grid-template-areas:
    'header header header'
    'input handle output'
    'footer footer footer';
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell.jp-mod-resizedCell {
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-resized-cell)
    );
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellHeader {
  grid-area: header;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-inputWrapper {
  grid-area: input;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-outputWrapper {
  /* overwrite the default margin (no vertical separation needed in side by side move */
  margin-top: 0;
  grid-area: output;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellFooter {
  grid-area: footer;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle {
  grid-area: handle;
  user-select: none;
  display: block;
  height: 100%;
  cursor: ew-resize;
  padding: 0 var(--jp-cell-padding);
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle::after {
  content: '';
  display: block;
  background: var(--jp-border-color2);
  height: 100%;
  width: 5px;
}

.jp-mod-sideBySide.jp-Notebook
  .jp-CodeCell.jp-mod-resizedCell
  .jp-CellResizeHandle::after {
  background: var(--jp-border-color0);
}

.jp-CellResizeHandle {
  display: none;
}

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Cell-Placeholder {
  padding-left: 55px;
}

.jp-Cell-Placeholder-wrapper {
  background: #fff;
  border: 1px solid;
  border-color: #e5e6e9 #dfe0e4 #d0d1d5;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  margin: 10px 15px;
}

.jp-Cell-Placeholder-wrapper-inner {
  padding: 15px;
  position: relative;
}

.jp-Cell-Placeholder-wrapper-body {
  background-repeat: repeat;
  background-size: 50% auto;
}

.jp-Cell-Placeholder-wrapper-body div {
  background: #f6f7f8;
  background-image: -webkit-linear-gradient(
    left,
    #f6f7f8 0%,
    #edeef1 20%,
    #f6f7f8 40%,
    #f6f7f8 100%
  );
  background-repeat: no-repeat;
  background-size: 800px 104px;
  height: 104px;
  position: absolute;
  right: 15px;
  left: 15px;
  top: 15px;
}

div.jp-Cell-Placeholder-h1 {
  top: 20px;
  height: 20px;
  left: 15px;
  width: 150px;
}

div.jp-Cell-Placeholder-h2 {
  left: 15px;
  top: 50px;
  height: 10px;
  width: 100px;
}

div.jp-Cell-Placeholder-content-1,
div.jp-Cell-Placeholder-content-2,
div.jp-Cell-Placeholder-content-3 {
  left: 15px;
  right: 15px;
  height: 10px;
}

div.jp-Cell-Placeholder-content-1 {
  top: 100px;
}

div.jp-Cell-Placeholder-content-2 {
  top: 120px;
}

div.jp-Cell-Placeholder-content-3 {
  top: 140px;
}

</style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
The following CSS variables define the main, public API for styling JupyterLab.
These variables should be used by all plugins wherever possible. In other
words, plugins should not define custom colors, sizes, etc unless absolutely
necessary. This enables users to change the visual theme of JupyterLab
by changing these variables.

Many variables appear in an ordered sequence (0,1,2,3). These sequences
are designed to work well together, so for example, `--jp-border-color1` should
be used with `--jp-layout-color1`. The numbers have the following meanings:

* 0: super-primary, reserved for special emphasis
* 1: primary, most important under normal situations
* 2: secondary, next most important under normal situations
* 3: tertiary, next most important under normal situations

Throughout JupyterLab, we are mostly following principles from Google's
Material Design when selecting colors. We are not, however, following
all of MD as it is not optimized for dense, information rich UIs.
*/

:root {
  /* Elevation
   *
   * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here:
   *
   * https://github.com/material-components/material-components-web
   * https://material-components-web.appspot.com/elevation.html
   */

  --jp-shadow-base-lightness: 0;
  --jp-shadow-umbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.2
  );
  --jp-shadow-penumbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.14
  );
  --jp-shadow-ambient-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.12
  );
  --jp-elevation-z0: none;
  --jp-elevation-z1: 0 2px 1px -1px var(--jp-shadow-umbra-color),
    0 1px 1px 0 var(--jp-shadow-penumbra-color),
    0 1px 3px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z2: 0 3px 1px -2px var(--jp-shadow-umbra-color),
    0 2px 2px 0 var(--jp-shadow-penumbra-color),
    0 1px 5px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z4: 0 2px 4px -1px var(--jp-shadow-umbra-color),
    0 4px 5px 0 var(--jp-shadow-penumbra-color),
    0 1px 10px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z6: 0 3px 5px -1px var(--jp-shadow-umbra-color),
    0 6px 10px 0 var(--jp-shadow-penumbra-color),
    0 1px 18px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z8: 0 5px 5px -3px var(--jp-shadow-umbra-color),
    0 8px 10px 1px var(--jp-shadow-penumbra-color),
    0 3px 14px 2px var(--jp-shadow-ambient-color);
  --jp-elevation-z12: 0 7px 8px -4px var(--jp-shadow-umbra-color),
    0 12px 17px 2px var(--jp-shadow-penumbra-color),
    0 5px 22px 4px var(--jp-shadow-ambient-color);
  --jp-elevation-z16: 0 8px 10px -5px var(--jp-shadow-umbra-color),
    0 16px 24px 2px var(--jp-shadow-penumbra-color),
    0 6px 30px 5px var(--jp-shadow-ambient-color);
  --jp-elevation-z20: 0 10px 13px -6px var(--jp-shadow-umbra-color),
    0 20px 31px 3px var(--jp-shadow-penumbra-color),
    0 8px 38px 7px var(--jp-shadow-ambient-color);
  --jp-elevation-z24: 0 11px 15px -7px var(--jp-shadow-umbra-color),
    0 24px 38px 3px var(--jp-shadow-penumbra-color),
    0 9px 46px 8px var(--jp-shadow-ambient-color);

  /* Borders
   *
   * The following variables, specify the visual styling of borders in JupyterLab.
   */

  --jp-border-width: 1px;
  --jp-border-color0: var(--md-grey-400);
  --jp-border-color1: var(--md-grey-400);
  --jp-border-color2: var(--md-grey-300);
  --jp-border-color3: var(--md-grey-200);
  --jp-inverse-border-color: var(--md-grey-600);
  --jp-border-radius: 2px;

  /* UI Fonts
   *
   * The UI font CSS variables are used for the typography all of the JupyterLab
   * user interface elements that are not directly user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-ui-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-ui-font-scale-factor: 1.2;
  --jp-ui-font-size0: 0.83333em;
  --jp-ui-font-size1: 13px; /* Base font size */
  --jp-ui-font-size2: 1.2em;
  --jp-ui-font-size3: 1.44em;
  --jp-ui-font-family: system-ui, -apple-system, blinkmacsystemfont, 'Segoe UI',
    helvetica, arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol';

  /*
   * Use these font colors against the corresponding main layout colors.
   * In a light theme, these go from dark to light.
   */

  /* Defaults use Material Design specification */
  --jp-ui-font-color0: rgba(0, 0, 0, 1);
  --jp-ui-font-color1: rgba(0, 0, 0, 0.87);
  --jp-ui-font-color2: rgba(0, 0, 0, 0.54);
  --jp-ui-font-color3: rgba(0, 0, 0, 0.38);

  /*
   * Use these against the brand/accent/warn/error colors.
   * These will typically go from light to darker, in both a dark and light theme.
   */

  --jp-ui-inverse-font-color0: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color1: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color2: rgba(255, 255, 255, 0.7);
  --jp-ui-inverse-font-color3: rgba(255, 255, 255, 0.5);

  /* Content Fonts
   *
   * Content font variables are used for typography of user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-content-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-content-line-height: 1.6;
  --jp-content-font-scale-factor: 1.2;
  --jp-content-font-size0: 0.83333em;
  --jp-content-font-size1: 14px; /* Base font size */
  --jp-content-font-size2: 1.2em;
  --jp-content-font-size3: 1.44em;
  --jp-content-font-size4: 1.728em;
  --jp-content-font-size5: 2.0736em;

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-content-presentation-font-size1: 17px;
  --jp-content-heading-line-height: 1;
  --jp-content-heading-margin-top: 1.2em;
  --jp-content-heading-margin-bottom: 0.8em;
  --jp-content-heading-font-weight: 500;

  /* Defaults use Material Design specification */
  --jp-content-font-color0: rgba(0, 0, 0, 1);
  --jp-content-font-color1: rgba(0, 0, 0, 0.87);
  --jp-content-font-color2: rgba(0, 0, 0, 0.54);
  --jp-content-font-color3: rgba(0, 0, 0, 0.38);
  --jp-content-link-color: var(--md-blue-900);
  --jp-content-font-family: system-ui, -apple-system, blinkmacsystemfont,
    'Segoe UI', helvetica, arial, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol';

  /*
   * Code Fonts
   *
   * Code font variables are used for typography of code and other monospaces content.
   */

  --jp-code-font-size: 13px;
  --jp-code-line-height: 1.3077; /* 17px for 13px base */
  --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */
  --jp-code-font-family-default: menlo, consolas, 'DejaVu Sans Mono', monospace;
  --jp-code-font-family: var(--jp-code-font-family-default);

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-code-presentation-font-size: 16px;

  /* may need to tweak cursor width if you change font size */
  --jp-code-cursor-width0: 1.4px;
  --jp-code-cursor-width1: 2px;
  --jp-code-cursor-width2: 4px;

  /* Layout
   *
   * The following are the main layout colors use in JupyterLab. In a light
   * theme these would go from light to dark.
   */

  --jp-layout-color0: white;
  --jp-layout-color1: white;
  --jp-layout-color2: var(--md-grey-200);
  --jp-layout-color3: var(--md-grey-400);
  --jp-layout-color4: var(--md-grey-600);

  /* Inverse Layout
   *
   * The following are the inverse layout colors use in JupyterLab. In a light
   * theme these would go from dark to light.
   */

  --jp-inverse-layout-color0: #111;
  --jp-inverse-layout-color1: var(--md-grey-900);
  --jp-inverse-layout-color2: var(--md-grey-800);
  --jp-inverse-layout-color3: var(--md-grey-700);
  --jp-inverse-layout-color4: var(--md-grey-600);

  /* Brand/accent */

  --jp-brand-color0: var(--md-blue-900);
  --jp-brand-color1: var(--md-blue-700);
  --jp-brand-color2: var(--md-blue-300);
  --jp-brand-color3: var(--md-blue-100);
  --jp-brand-color4: var(--md-blue-50);
  --jp-accent-color0: var(--md-green-900);
  --jp-accent-color1: var(--md-green-700);
  --jp-accent-color2: var(--md-green-300);
  --jp-accent-color3: var(--md-green-100);

  /* State colors (warn, error, success, info) */

  --jp-warn-color0: var(--md-orange-900);
  --jp-warn-color1: var(--md-orange-700);
  --jp-warn-color2: var(--md-orange-300);
  --jp-warn-color3: var(--md-orange-100);
  --jp-error-color0: var(--md-red-900);
  --jp-error-color1: var(--md-red-700);
  --jp-error-color2: var(--md-red-300);
  --jp-error-color3: var(--md-red-100);
  --jp-success-color0: var(--md-green-900);
  --jp-success-color1: var(--md-green-700);
  --jp-success-color2: var(--md-green-300);
  --jp-success-color3: var(--md-green-100);
  --jp-info-color0: var(--md-cyan-900);
  --jp-info-color1: var(--md-cyan-700);
  --jp-info-color2: var(--md-cyan-300);
  --jp-info-color3: var(--md-cyan-100);

  /* Cell specific styles */

  --jp-cell-padding: 5px;
  --jp-cell-collapser-width: 8px;
  --jp-cell-collapser-min-height: 20px;
  --jp-cell-collapser-not-active-hover-opacity: 0.6;
  --jp-cell-editor-background: var(--md-grey-100);
  --jp-cell-editor-border-color: var(--md-grey-300);
  --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-cell-editor-active-background: var(--jp-layout-color0);
  --jp-cell-editor-active-border-color: var(--jp-brand-color1);
  --jp-cell-prompt-width: 64px;
  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
  --jp-cell-prompt-letter-spacing: 0;
  --jp-cell-prompt-opacity: 1;
  --jp-cell-prompt-not-active-opacity: 0.5;
  --jp-cell-prompt-not-active-font-color: var(--md-grey-700);

  /* A custom blend of MD grey and blue 600
   * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */
  --jp-cell-inprompt-font-color: #307fc1;

  /* A custom blend of MD grey and orange 600
   * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */
  --jp-cell-outprompt-font-color: #bf5b3d;

  /* Notebook specific styles */

  --jp-notebook-padding: 10px;
  --jp-notebook-select-background: var(--jp-layout-color1);
  --jp-notebook-multiselected-color: var(--md-blue-50);

  /* The scroll padding is calculated to fill enough space at the bottom of the
  notebook to show one single-line cell (with appropriate padding) at the top
  when the notebook is scrolled all the way to the bottom. We also subtract one
  pixel so that no scrollbar appears if we have just one single-line cell in the
  notebook. This padding is to enable a 'scroll past end' feature in a notebook.
  */
  --jp-notebook-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - var(--jp-cell-padding) - 1px
  );

  /* Rendermime styles */

  --jp-rendermime-error-background: #fdd;
  --jp-rendermime-table-row-background: var(--md-grey-100);
  --jp-rendermime-table-row-hover-background: var(--md-light-blue-50);

  /* Dialog specific styles */

  --jp-dialog-background: rgba(0, 0, 0, 0.25);

  /* Console specific styles */

  --jp-console-padding: 10px;

  /* Toolbar specific styles */

  --jp-toolbar-border-color: var(--jp-border-color1);
  --jp-toolbar-micro-height: 8px;
  --jp-toolbar-background: var(--jp-layout-color1);
  --jp-toolbar-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.24);
  --jp-toolbar-header-margin: 4px 4px 0 4px;
  --jp-toolbar-active-background: var(--md-grey-300);

  /* Statusbar specific styles */

  --jp-statusbar-height: 24px;

  /* Input field styles */

  --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-input-active-background: var(--jp-layout-color1);
  --jp-input-hover-background: var(--jp-layout-color1);
  --jp-input-background: var(--md-grey-100);
  --jp-input-border-color: var(--jp-inverse-border-color);
  --jp-input-active-border-color: var(--jp-brand-color1);
  --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3);

  /* General editor styles */

  --jp-editor-selected-background: #d9d9d9;
  --jp-editor-selected-focused-background: #d7d4f0;
  --jp-editor-cursor-color: var(--jp-ui-font-color0);

  /* Code mirror specific styles */

  --jp-mirror-editor-keyword-color: #008000;
  --jp-mirror-editor-atom-color: #88f;
  --jp-mirror-editor-number-color: #080;
  --jp-mirror-editor-def-color: #00f;
  --jp-mirror-editor-variable-color: var(--md-grey-900);
  --jp-mirror-editor-variable-2-color: rgb(0, 54, 109);
  --jp-mirror-editor-variable-3-color: #085;
  --jp-mirror-editor-punctuation-color: #05a;
  --jp-mirror-editor-property-color: #05a;
  --jp-mirror-editor-operator-color: #a2f;
  --jp-mirror-editor-comment-color: #408080;
  --jp-mirror-editor-string-color: #ba2121;
  --jp-mirror-editor-string-2-color: #708;
  --jp-mirror-editor-meta-color: #a2f;
  --jp-mirror-editor-qualifier-color: #555;
  --jp-mirror-editor-builtin-color: #008000;
  --jp-mirror-editor-bracket-color: #997;
  --jp-mirror-editor-tag-color: #170;
  --jp-mirror-editor-attribute-color: #00c;
  --jp-mirror-editor-header-color: blue;
  --jp-mirror-editor-quote-color: #090;
  --jp-mirror-editor-link-color: #00c;
  --jp-mirror-editor-error-color: #f00;
  --jp-mirror-editor-hr-color: #999;

  /*
    RTC user specific colors.
    These colors are used for the cursor, username in the editor,
    and the icon of the user.
  */

  --jp-collaborator-color1: #ffad8e;
  --jp-collaborator-color2: #dac83d;
  --jp-collaborator-color3: #72dd76;
  --jp-collaborator-color4: #00e4d0;
  --jp-collaborator-color5: #45d4ff;
  --jp-collaborator-color6: #e2b1ff;
  --jp-collaborator-color7: #ff9de6;

  /* Vega extension styles */

  --jp-vega-background: white;

  /* Sidebar-related styles */

  --jp-sidebar-min-width: 250px;

  /* Search-related styles */

  --jp-search-toggle-off-opacity: 0.5;
  --jp-search-toggle-hover-opacity: 0.8;
  --jp-search-toggle-on-opacity: 1;
  --jp-search-selected-match-background-color: rgb(245, 200, 0);
  --jp-search-selected-match-color: black;
  --jp-search-unselected-match-background-color: var(
    --jp-inverse-layout-color0
  );
  --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0);

  /* Icon colors that work well with light or dark backgrounds */
  --jp-icon-contrast-color0: var(--md-purple-600);
  --jp-icon-contrast-color1: var(--md-green-600);
  --jp-icon-contrast-color2: var(--md-pink-600);
  --jp-icon-contrast-color3: var(--md-blue-600);

  /* Button colors */
  --jp-accept-color-normal: var(--md-blue-700);
  --jp-accept-color-hover: var(--md-blue-800);
  --jp-accept-color-active: var(--md-blue-900);
  --jp-warn-color-normal: var(--md-red-700);
  --jp-warn-color-hover: var(--md-red-800);
  --jp-warn-color-active: var(--md-red-900);
  --jp-reject-color-normal: var(--md-grey-600);
  --jp-reject-color-hover: var(--md-grey-700);
  --jp-reject-color-active: var(--md-grey-800);

  /* File or activity icons and switch semantic variables */
  --jp-jupyter-icon-color: #f37626;
  --jp-notebook-icon-color: #f37626;
  --jp-json-icon-color: var(--md-orange-700);
  --jp-console-icon-background-color: var(--md-blue-700);
  --jp-console-icon-color: white;
  --jp-terminal-icon-background-color: var(--md-grey-800);
  --jp-terminal-icon-color: var(--md-grey-200);
  --jp-text-editor-icon-color: var(--md-grey-700);
  --jp-inspector-icon-color: var(--md-grey-700);
  --jp-switch-color: var(--md-grey-400);
  --jp-switch-true-position-color: var(--md-orange-900);
}
</style>
<style type="text/css">
/* Force rendering true colors when outputing to pdf */
* {
  -webkit-print-color-adjust: exact;
}

/* Misc */
a.anchor-link {
  display: none;
}

/* Input area styling */
.jp-InputArea {
  overflow: hidden;
}

.jp-InputArea-editor {
  overflow: hidden;
}

.cm-editor.cm-s-jupyter .highlight pre {
/* weird, but --jp-code-padding defined to be 5px but 4px horizontal padding is hardcoded for pre.cm-line */
  padding: var(--jp-code-padding) 4px;
  margin: 0;

  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;

}

.jp-OutputArea-output pre {
  line-height: inherit;
  font-family: inherit;
}

.jp-RenderedText pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
}

/* Hiding the collapser by default */
.jp-Collapser {
  display: none;
}

@page {
    margin: 0.5in; /* Margin for each printed piece of paper */
}

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}
</style>
<!-- Load mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"> </script>
<!-- MathJax configuration -->
<script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                messageStyle: 'none',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
<!-- End of mathjax configuration --><script type="module">
  document.addEventListener("DOMContentLoaded", async () => {
    const diagrams = document.querySelectorAll(".jp-Mermaid > pre.mermaid");
    // do not load mermaidjs if not needed
    if (!diagrams.length) {
      return;
    }
    const mermaid = (await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs")).default;
    const parser = new DOMParser();

    mermaid.initialize({
      maxTextSize: 100000,
      maxEdges: 100000,
      startOnLoad: false,
      fontFamily: window
        .getComputedStyle(document.body)
        .getPropertyValue("--jp-ui-font-family"),
      theme: document.querySelector("body[data-jp-theme-light='true']")
        ? "default"
        : "dark",
    });

    let _nextMermaidId = 0;

    function makeMermaidImage(svg) {
      const img = document.createElement("img");
      const doc = parser.parseFromString(svg, "image/svg+xml");
      const svgEl = doc.querySelector("svg");
      const { maxWidth } = svgEl?.style || {};
      const firstTitle = doc.querySelector("title");
      const firstDesc = doc.querySelector("desc");

      img.setAttribute("src", `data:image/svg+xml,${encodeURIComponent(svg)}`);
      if (maxWidth) {
        img.width = parseInt(maxWidth);
      }
      if (firstTitle) {
        img.setAttribute("alt", firstTitle.textContent);
      }
      if (firstDesc) {
        const caption = document.createElement("figcaption");
        caption.className = "sr-only";
        caption.textContent = firstDesc.textContent;
        return [img, caption];
      }
      return [img];
    }

    async function makeMermaidError(text) {
      let errorMessage = "";
      try {
        await mermaid.parse(text);
      } catch (err) {
        errorMessage = `${err}`;
      }

      const result = document.createElement("details");
      result.className = 'jp-RenderedMermaid-Details';
      const summary = document.createElement("summary");
      summary.className = 'jp-RenderedMermaid-Summary';
      const pre = document.createElement("pre");
      const code = document.createElement("code");
      code.innerText = text;
      pre.appendChild(code);
      summary.appendChild(pre);
      result.appendChild(summary);

      const warning = document.createElement("pre");
      warning.innerText = errorMessage;
      result.appendChild(warning);
      return [result];
    }

    async function renderOneMarmaid(src) {
      const id = `jp-mermaid-${_nextMermaidId++}`;
      const parent = src.parentNode;
      let raw = src.textContent.trim();
      const el = document.createElement("div");
      el.style.visibility = "hidden";
      document.body.appendChild(el);
      let results = null;
      let output = null;
      try {
        let { svg } = await mermaid.render(id, raw, el);
        svg = cleanMermaidSvg(svg);
        results = makeMermaidImage(svg);
        output = document.createElement("figure");
        results.map(output.appendChild, output);
      } catch (err) {
        parent.classList.add("jp-mod-warning");
        results = await makeMermaidError(raw);
        output = results[0];
      } finally {
        el.remove();
      }
      parent.classList.add("jp-RenderedMermaid");
      parent.appendChild(output);
    }


    /**
     * Post-process to ensure mermaid diagrams contain only valid SVG and XHTML.
     */
    function cleanMermaidSvg(svg) {
      return svg.replace(RE_VOID_ELEMENT, replaceVoidElement);
    }


    /**
     * A regular expression for all void elements, which may include attributes and
     * a slash.
     *
     * @see https://developer.mozilla.org/en-US/docs/Glossary/Void_element
     *
     * Of these, only `<br>` is generated by Mermaid in place of `\n`,
     * but _any_ "malformed" tag will break the SVG rendering entirely.
     */
    const RE_VOID_ELEMENT =
      /<\s*(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)\s*([^>]*?)\s*>/gi;

    /**
     * Ensure a void element is closed with a slash, preserving any attributes.
     */
    function replaceVoidElement(match, tag, rest) {
      rest = rest.trim();
      if (!rest.endsWith('/')) {
        rest = `${rest} /`;
      }
      return `<${tag} ${rest}>`;
    }

    void Promise.all([...diagrams].map(renderOneMarmaid));
  });
</script>
<style>
  .jp-Mermaid:not(.jp-RenderedMermaid) {
    display: none;
  }

  .jp-RenderedMermaid {
    overflow: auto;
    display: flex;
  }

  .jp-RenderedMermaid.jp-mod-warning {
    width: auto;
    padding: 0.5em;
    margin-top: 0.5em;
    border: var(--jp-border-width) solid var(--jp-warn-color2);
    border-radius: var(--jp-border-radius);
    color: var(--jp-ui-font-color1);
    font-size: var(--jp-ui-font-size1);
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .jp-RenderedMermaid figure {
    margin: 0;
    overflow: auto;
    max-width: 100%;
  }

  .jp-RenderedMermaid img {
    max-width: 100%;
  }

  .jp-RenderedMermaid-Details > pre {
    margin-top: 1em;
  }

  .jp-RenderedMermaid-Summary {
    color: var(--jp-warn-color2);
  }

  .jp-RenderedMermaid:not(.jp-mod-warning) pre {
    display: none;
  }

  .jp-RenderedMermaid-Summary > pre {
    display: inline-block;
    white-space: normal;
  }
</style>
<!-- End of mermaid configuration --></head>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
<main><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">imbalanced</span><span class="o">-</span><span class="n">learn</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>PREDICCIN DE DIABETES EN MUJERES DE LA COMUNIDAD PIMA</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Estructura-general-del-proyecto-en-Google-Colab-+-Drive:-organizaci%C3%B3n-del-proyecto-y-guardado-de-datos"><strong>Estructura general del proyecto en Google Colab + Drive: organizacin del proyecto y guardado de datos</strong><a class="anchor-link" href="#Estructura-general-del-proyecto-en-Google-Colab-+-Drive:-organizaci%C3%B3n-del-proyecto-y-guardado-de-datos"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Antes de comenzar con el anlisis y procesamiento de datos, se establece una estructura ordenada de carpetas dentro de Google Drive para facilitar la trazavilidad, evolucin y comprensin por otros. Esto permite separar claramente los datos originales, los datos procesados, los modelos entrenados, los pipelines y los resultados.</p>
<p>Esta organizacin facilitar el seguimiento del proyecto, su mantenimiento y posibles mejoras o reutilizacin en el futuro.</p>
<p><strong>Estructura del proyecto:</strong></p>
<p>Se crean carpetas de almacenamiento de los diferentes documentos del proyecto.</p>
<ul>
<li>datos_originales/: Contiene el dataset original cargado.</li>
<li>datos_procesados/: Aqu se almacenarn los conjuntos X_train, X_test, y_train y y_test ya procesados.</li>
<li>pipelines/: Guardaremos aqu los pipelines de procesamiento y modelado.(.joblib)</li>
<li>modelos/: Se almacenarn los modelos entrenados (.pkl).</li>
<li>modelos optimizados/: Modelos tras GridSearch (.pkl)</li>
<li>resultados/: Mtricas, visualizaciones (grficas ROC, matrices, tablas comparativas, etc.) (.png. .csv)</li>
<li>notebooks/: versiones del notebook organizadas por fases del proyecto.</li>
</ul>
<p>Esto permite reiniciar y continuar el proyecto en cualquier momento con total control.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>El siguiente bloque mueve automticamente los archivos generados en /content a su carpeta correspondiente en Drive.</p>
<ul>
<li>Ver qu archivos hay en /content`</li>
<li>Moverlos automticamente a su carpeta correspondiente</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Estructura-del-proyecto-y-guardado-de-datos"><strong>Estructura del proyecto y guardado de datos</strong><a class="anchor-link" href="#Estructura-del-proyecto-y-guardado-de-datos"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Cargar-las-librerias-y-montar-Google-Drive"><strong>Cargar las librerias y montar Google Drive</strong><a class="anchor-link" href="#Cargar-las-librerias-y-montar-Google-Drive"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.colab</span><span class="w"> </span><span class="kn">import</span> <span class="n">drive</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># 1. Montar Google Drive</span>
<span class="n">drive</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">'/content/drive'</span><span class="p">)</span>

<span class="c1"># 2. Ruta base de tu proyecto</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>

<span class="c1"># 3. Carpetas principales</span>
<span class="n">folders</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"datos_originales"</span><span class="p">,</span> <span class="c1"># (dataset original descargado)</span>
    <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="c1">#(divisin en subcarpetas especficas)</span>
    <span class="s2">"pipelines"</span><span class="p">,</span>
    <span class="s2">"modelos"</span><span class="p">,</span>
    <span class="s2">"modelos_optimizados"</span><span class="p">,</span>
    <span class="s2">"resultados"</span><span class="p">,</span>
    <span class="s2">"notebooks"</span>
<span class="p">]</span>

<span class="c1"># 4. Subcarpetas dentro de datos_procesados</span>
<span class="n">subfolders_datos_procesados</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"original"</span><span class="p">,</span> <span class="c1"># (divisin inicial: X_train, X_test, y_train, y_test)</span>
    <span class="s2">"limpieza"</span><span class="p">,</span> <span class="c1">#  (X_train_procesado  ceros a NaN)</span>
    <span class="s2">"imputado"</span><span class="p">,</span>
    <span class="s2">"escalado"</span><span class="p">,</span>
    <span class="s2">"smote"</span><span class="p">,</span>
    <span class="s2">"final"</span><span class="p">,</span>
    <span class="s2">"backup"</span> <span class="c1">#asegura que se trabaja siempre con las ltimas versiones definitivas de los datos transformados y listos para modelado.</span>
<span class="p">]</span>

<span class="c1"># 5. Crear carpetas principales</span>
<span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">folders</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="n">folder</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 6. Crear subcarpetas dentro de datos_procesados</span>
<span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subfolders_datos_procesados</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="n">sub</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 7. Confirmacin visual</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Estructura de carpetas creada correctamente:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Carpeta base:"</span><span class="p">,</span> <span class="n">base_path</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Subcarpetas:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">base_path</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"Contenido en datos_procesados:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Crear-rutas-directas-a-las-carpetas"><strong>Crear rutas directas a las carpetas</strong><a class="anchor-link" href="#Crear-rutas-directas-a-las-carpetas"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>

<span class="c1"># Rutas base</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_datos_procesados</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">)</span>
<span class="n">ruta_datos_originales</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_originales"</span><span class="p">)</span>
<span class="n">ruta_modelos</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"modelos"</span><span class="p">)</span>
<span class="n">ruta_modelos_opt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"modelos_optimizados"</span><span class="p">)</span>
<span class="n">ruta_pipelines</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"pipelines"</span><span class="p">)</span>
<span class="n">ruta_resultados</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"resultados"</span><span class="p">)</span>
<span class="n">ruta_notebooks</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"notebooks"</span><span class="p">)</span>

<span class="c1"># Archivos que hay en el entorno de trabajo (Colab '/content')</span>
<span class="n">archivos</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">"/content"</span><span class="p">)</span>

<span class="c1"># Clasificar y mover</span>
<span class="k">for</span> <span class="n">archivo</span> <span class="ow">in</span> <span class="n">archivos</span><span class="p">:</span>
    <span class="n">ruta_origen</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"/content"</span><span class="p">,</span> <span class="n">archivo</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".csv"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".pkl"</span><span class="p">):</span>
        <span class="n">destino</span> <span class="o">=</span> <span class="n">ruta_modelos_opt</span> <span class="k">if</span> <span class="s2">"optimizado"</span> <span class="ow">in</span> <span class="n">archivo</span> <span class="k">else</span> <span class="n">ruta_modelos</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">destino</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".png"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jpg"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".joblib"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_pipelines</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".ipynb"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_notebooks</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="s2">"original"</span> <span class="ow">in</span> <span class="n">archivo</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">".gsheet"</span><span class="p">,</span> <span class="s2">".xlsx"</span><span class="p">)):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_originales</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Todos los archivos han sido organizados correctamente."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Reubicaci%C3%B3n-autom%C3%A1tica-de-archivos"><strong>Reubicacin automtica de archivos</strong><a class="anchor-link" href="#Reubicaci%C3%B3n-autom%C3%A1tica-de-archivos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>En este bloque se revisan todos los archivos generados en /content al volver a cargar el notebook, y se mueven automticamente a su carpeta correspondiente dentro del proyecto.</p>
<p>Esto asegura que no queden archivos sueltos y que todo est correctamente guardado para la continuidad del proyecto.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Reubicar archivos generados automticamente al volver a ejecutar el notebook</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>

<span class="c1"># 1. Revisar los archivos que hay en /content</span>
<span class="n">archivos_content</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">"/content"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Archivos en /content antes de mover:"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">archivo</span> <span class="ow">in</span> <span class="n">archivos_content</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">" -"</span><span class="p">,</span> <span class="n">archivo</span><span class="p">)</span>

<span class="c1"># 2. Clasificacin y movimiento</span>
<span class="k">for</span> <span class="n">archivo</span> <span class="ow">in</span> <span class="n">archivos_content</span><span class="p">:</span>
    <span class="n">ruta_origen</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"/content"</span><span class="p">,</span> <span class="n">archivo</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".csv"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".pkl"</span><span class="p">):</span>
        <span class="n">destino</span> <span class="o">=</span> <span class="n">ruta_modelos_opt</span> <span class="k">if</span> <span class="s2">"optimizado"</span> <span class="ow">in</span> <span class="n">archivo</span> <span class="k">else</span> <span class="n">ruta_modelos</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">destino</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".png"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jpg"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".joblib"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_pipelines</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".ipynb"</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"notebooks"</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>
    <span class="k">elif</span> <span class="s2">"original"</span> <span class="ow">in</span> <span class="n">archivo</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="n">archivo</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">".gsheet"</span><span class="p">,</span> <span class="s2">".xlsx"</span><span class="p">)):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_originales</span><span class="p">,</span> <span class="n">archivo</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Todos los archivos han sido organizados correctamente."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Crear-archivo-para-Trazabilidad-de-los-archivos-del-proyecto:-trazabilidad_archivos_proyecto.csv"><strong>Crear archivo para Trazabilidad de los archivos del proyecto: trazabilidad_archivos_proyecto.csv</strong><a class="anchor-link" href="#Crear-archivo-para-Trazabilidad-de-los-archivos-del-proyecto:-trazabilidad_archivos_proyecto.csv"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Este bloque genera un archivo.csv con todos los archivos presentes en cada carpeta del proyecto (datos, modelos, pipelines, resultados, notebooks), incluyendo una marca de tiempo en el nombre del archivo.</p>
<p>Esto permite guardar versiones diarias y comparar cambios en el proyecto.</p>
<p>El archivo se guarda en: resultados/trazabilidad_archivos_proyecto_YYYYMMDD_HHMM.csv</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear diccionario con carpetas relevantes</span>
<span class="n">carpetas_a_rastrear</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"datos_originales"</span><span class="p">:</span> <span class="n">ruta_datos_originales</span><span class="p">,</span>
    <span class="s2">"datos_procesados"</span><span class="p">:</span> <span class="n">ruta_datos_procesados</span><span class="p">,</span>
    <span class="s2">"modelos"</span><span class="p">:</span> <span class="n">ruta_modelos</span><span class="p">,</span>
    <span class="s2">"modelos_optimizados"</span><span class="p">:</span> <span class="n">ruta_modelos_opt</span><span class="p">,</span>
    <span class="s2">"pipelines"</span><span class="p">:</span> <span class="n">ruta_pipelines</span><span class="p">,</span>
    <span class="s2">"resultados"</span><span class="p">:</span> <span class="n">ruta_resultados</span><span class="p">,</span>
    <span class="s2">"notebooks"</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"notebooks"</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Recoger los archivos de cada carpeta</span>
<span class="n">contenido</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"Carpeta"</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">"Archivo"</span><span class="p">:</span> <span class="p">[]}</span>

<span class="k">for</span> <span class="n">nombre_carpeta</span><span class="p">,</span> <span class="n">ruta</span> <span class="ow">in</span> <span class="n">carpetas_a_rastrear</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">archivos</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">ruta</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">archivo</span> <span class="ow">in</span> <span class="n">archivos</span><span class="p">:</span>
            <span class="n">contenido</span><span class="p">[</span><span class="s2">"Carpeta"</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nombre_carpeta</span><span class="p">)</span>
            <span class="n">contenido</span><span class="p">[</span><span class="s2">"Archivo"</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">archivo</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Error leyendo </span><span class="si">{</span><span class="n">nombre_carpeta</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># Crear DataFrame</span>
<span class="n">df_trazabilidad</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">contenido</span><span class="p">)</span>

<span class="c1"># Obtener fecha y hora actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Nombre con marca de tiempo</span>
<span class="n">nombre_archivo</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"trazabilidad_archivos_proyecto_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span>

<span class="c1"># Guardar en .csv dentro de la carpeta resultados</span>
<span class="n">ruta_guardado</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"trazabilidad_archivos_proyecto.csv"</span><span class="p">)</span>
<span class="n">df_trazabilidad</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Trazabilidad guardada correctamente en:"</span><span class="p">,</span> <span class="n">ruta_guardado</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Definici%C3%B3n-del-problema-y-contexto-del-dataset"><strong>Definicin del problema y contexto del dataset</strong><a class="anchor-link" href="#Definici%C3%B3n-del-problema-y-contexto-del-dataset"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="1-Objetivo-del-proyecto">1 Objetivo del proyecto<a class="anchor-link" href="#1-Objetivo-del-proyecto"></a></h2><p>El objetivo de este proyecto es <strong>predecir la presencia de diabetes</strong> en pacientes en funcin de diferentes caractersticas mdicas como:</p>
<ul>
<li>Edad</li>
<li>Nivel de glucosa en sangre</li>
<li>Presin arterial</li>
<li>ndice de Masa Corporal (IMC)</li>
<li>Funcin del pedigr de la diabetes (factor gentico)</li>
<li>Embarazos</li>
<li>Presin arterial (diastlica)</li>
<li>Insulina</li>
</ul>
<p>El modelo pretende ayudar en la <strong>deteccin temprana</strong> y permitir una mejor <strong>gestin del riesgo</strong> en personas con posibles indicios de desarrollar esta enfermedad.</p>
<h2 id="2-Importancia-del-problema">2 Importancia del problema<a class="anchor-link" href="#2-Importancia-del-problema"></a></h2><p>La diabetes es una enfermedad crnica de gran prevalencia que puede tener consecuencias graves si no se detecta y trata a tiempo: enfermedades cardiovasculares, dao renal, prdida de visin, entre otras.</p>
<p>Desarrollar un modelo predictivo puede aportar beneficios clave:</p>
<ul>
<li><strong>Deteccin temprana</strong> de casos de alto riesgo</li>
<li><strong>Apoyo a profesionales</strong> para una mejor toma de decisiones</li>
<li><strong>Optimizacin de recursos</strong> en pruebas mdicas</li>
<li><strong>Mejora de programas de salud pblica y prevencin</strong></li>
</ul>
<h2 id="3-%C2%BFQui%C3%A9n-se-beneficiar%C3%ADa?">3 Quin se beneficiara?<a class="anchor-link" href="#3-%C2%BFQui%C3%A9n-se-beneficiar%C3%ADa?"></a></h2><ul>
<li><strong>Profesionales de la salud</strong>: apoyo en diagnstico y priorizacin de pacientes</li>
<li><strong>Pacientes y ciudadanos</strong>: conocer su riesgo y actuar preventivamente</li>
<li><strong>Instituciones de salud pblica</strong>: campaas de prevencin ms dirigidas</li>
</ul>
<h2 id="4-Soluciones-actuales-vs.-modelo-propuesto">4 Soluciones actuales vs. modelo propuesto<a class="anchor-link" href="#4-Soluciones-actuales-vs.-modelo-propuesto"></a></h2><p>Actualmente, la diabetes se diagnostica con anlisis clnicos como la glucosa en sangre. Sin embargo, estos diagnsticos suelen realizarse cuando los sntomas ya estn presentes.</p>
<p>Un modelo predictivo podra:</p>
<ul>
<li>Estimar el riesgo antes de que se manifiesten sntomas</li>
<li>Priorizar la atencin en poblaciones de riesgo</li>
<li>Automatizar parte del anlisis de grandes volmenes de datos</li>
<li>Complementar el diagnstico clnico, <strong>sin sustituirlo</strong></li>
</ul>
<h2 id="5-Enfoque-de-Machine-Learning">5 Enfoque de Machine Learning<a class="anchor-link" href="#5-Enfoque-de-Machine-Learning"></a></h2><ul>
<li><strong>Tipo de problema</strong>: Clasificacin supervisada</li>
<li><strong>Etiquetas disponibles</strong>:<ul>
<li>1: paciente con diabetes</li>
<li>0: paciente sin diabetes</li>
</ul>
</li>
<li><strong>Entrada esperada</strong>: Variables clnicas cuantitativas</li>
<li><strong>Modelo a entrenar</strong>: Clasificador que predice si una persona tiene o no diabetes a partir de sus variables mdicas</li>
</ul>
<h2 id="6-Evaluaci%C3%B3n-del-rendimiento-del-modelo">6 Evaluacin del rendimiento del modelo<a class="anchor-link" href="#6-Evaluaci%C3%B3n-del-rendimiento-del-modelo"></a></h2><p>Las mtricas principales que se utilizarn para evaluar el rendimiento sern:</p>
<ul>
<li>Accuracy (Exactitud)</li>
<li>Precision (Precisin)</li>
<li>Recall (Sensibilidad)</li>
<li>F1-score</li>
<li>ROC-AUC</li>
</ul>
<p>Un objetivo razonable es lograr un modelo con <strong>recall elevado</strong>, para minimizar falsos negativos (riesgo no detectado).</p>
<h2 id="7-Supuestos-iniciales">7 Supuestos iniciales<a class="anchor-link" href="#7-Supuestos-iniciales"></a></h2><ul>
<li>Los datos son representativos y no presentan sesgos importantes, aunque se revisar esto.</li>
<li>No hay informacin personal identificable (dataset anonimizado).</li>
<li>La distribucin de clases est desbalanceada.</li>
<li>Se asume que algunos valores cero en variables como Glucosa o Insulina representan <strong>valores faltantes</strong>, no datos reales.</li>
<li>Se detectarn y tratarn valores extremos o inconsistentes.</li>
<li>La poblacin es limitada a mujeres de etnia indgena Pima, lo que puede no generalizar bien a otras poblaciones.</li>
</ul>
<h2 id="8-Procedencia-del-dataset">8 Procedencia del dataset<a class="anchor-link" href="#8-Procedencia-del-dataset"></a></h2><ul>
<li><strong>Fuente</strong>: Instituto Nacional de Diabetes y Enfermedades Digestivas y Renales (EE.UU.)</li>
<li><strong>Publicado en</strong>: Kaggle</li>
<li><strong>Contexto</strong>: Estudios clnicos en Phoenix, Arizona</li>
<li><strong>Poblacin</strong>: Mujeres de ascendencia india Pima, mayores de 21 aos</li>
<li><strong>Formato</strong>: CSV</li>
<li><strong>Tamao</strong>: 768 registros y 9 columnas</li>
<li><strong>Acceso</strong>: Libre y sin restricciones</li>
<li><strong>Contenido</strong>: Datos annimos (sin informacin personal)</li>
<li><strong>Variables</strong>: 8 predictoras + 1 variable objetivo (<code>Outcome</code>)</li>
</ul>
<h2 id="9-Descripci%C3%B3n-de-las-variables">9 Descripcin de las variables<a class="anchor-link" href="#9-Descripci%C3%B3n-de-las-variables"></a></h2><h3 id="Variables-predictoras-(X)">Variables predictoras (<code>X</code>)<a class="anchor-link" href="#Variables-predictoras-(X)"></a></h3><ul>
<li><p>Pregnancies: Nmero de embarazos<br/>
_ Relacionado con riesgo de diabetes gestacional y futura diabetes tipo 2_</p>
</li>
<li><p>Glucose: Concentracin de glucosa en sangre tras prueba de tolerancia<br/>
_ Indicador clave para diagnstico de diabetes_</p>
</li>
<li><p>BloodPressure: Presin arterial diastlica (mm Hg)<br/>
_ La hipertensin es comn en personas con diabetes_</p>
</li>
<li><p>SkinThickness: Grosor del pliegue cutneo del trceps<br/>
_ Relacionado con acumulacin de grasa subcutnea_</p>
</li>
<li><p>BMI: ndice de Masa Corporal<br/>
_ La obesidad es un factor determinante en la resistencia a la insulina_</p>
</li>
<li><p>Insulin: Niveles sricos de insulina<br/>
_ Puede indicar resistencia a la insulina_</p>
</li>
<li><p>DiabetesPedigreeFunction: Funcin de pedigr de diabetes<br/>
_ Riesgo gentico de padecer diabetes_</p>
</li>
<li><p>Age: Edad en aos<br/>
_ Riesgo mayor con el envejecimiento_</p>
</li>
</ul>
<h3 id="Variable-objetivo-(Y)">Variable objetivo (<code>Y</code>)<a class="anchor-link" href="#Variable-objetivo-(Y)"></a></h3><ul>
<li>Outcome: 0 = No tiene diabetes | 1 = Tiene diabetes</li>
</ul>
<h2 id="10-Posibles-problemas-en-los-datos">10 Posibles problemas en los datos<a class="anchor-link" href="#10-Posibles-problemas-en-los-datos"></a></h2><ul>
<li><strong>Valores cero</strong> en variables clnicas pueden indicar datos faltantes.</li>
<li><strong>Poblacin limitada</strong> a mujeres indgenas Pima, bajo poder generalizador.</li>
<li><strong>Clase desbalanceada</strong>: ms registros de pacientes sin diabetes.</li>
<li><strong>Presencia de outliers</strong> en variables como Insulin, SkinThickness.</li>
</ul>
<h2 id="11-Carga,-almacenamiento-y-acceso-al-dataset">11 Carga, almacenamiento y acceso al dataset<a class="anchor-link" href="#11-Carga,-almacenamiento-y-acceso-al-dataset"></a></h2><ul>
<li>El dataset ha sido descargado en formato <code>.csv</code> y guardado tanto en en <strong>Google Drive</strong> como en<strong>entorno local</strong>.</li>
<li>Ser cargado en Google Colab para su anlisis.</li>
<li>El proyecto tendr una estructura ordenada de carpetas para almacenar datos, modelos y resultados.</li>
</ul>
<h2 id="12-Distribuci%C3%B3n-de-los-datos">12 Distribucin de los datos<a class="anchor-link" href="#12-Distribuci%C3%B3n-de-los-datos"></a></h2><p>Se usar la siguiente particin para el modelado:</p>
<ul>
<li><strong>80%</strong> para entrenamiento, X_train, y_train, de estos:<ul>
<li>80% para entrenamiento real</li>
<li>20% validacin (para tuning, curvas ROC, comparacin de modelos, etc).</li>
</ul>
</li>
<li><strong>20%</strong> para test, X_test, y_test (conjunto virgen para evaluacin final)</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="1.-Obtenci%C3%B3n-de-datos"><strong>1. Obtencin de datos</strong><a class="anchor-link" href="#1.-Obtenci%C3%B3n-de-datos"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="1.1.-Cargar-las-librerias-necesarias"><strong>1.1. Cargar las librerias necesarias</strong><a class="anchor-link" href="#1.1.-Cargar-las-librerias-necesarias"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Importar librerias de manipulacin de datos y anlisis</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span> <span class="c1"># Se usa para el procesamiento y limpieza de datos</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span> <span class="c1"># Operaciones matemticas</span>
<span class="c1">#Importar librerias de visualizacin</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span> <span class="c1"># Visualizacin de datos</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span> <span class="c1"># Visualizacin de datos</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span> <span class="c1"># Visualizacin de datos</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="1.2.-Descargar-los-datos-del-Dataset--Crear-el-DataFrame-desde-csv"><strong>1.2. Descargar los datos del Dataset- Crear el DataFrame desde csv</strong><a class="anchor-link" href="#1.2.-Descargar-los-datos-del-Dataset--Crear-el-DataFrame-desde-csv"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Nombre: diabetes_informe.csv.csv</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Definir la ruta al dataset</span>
<span class="n">ruta_dataset</span> <span class="o">=</span> <span class="s1">'/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_originales/diabetes_informe.csv.csv'</span>

<span class="c1"># Cargar el dataset original</span>
<span class="n">diabetes_informe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ruta_dataset</span><span class="p">)</span>

<span class="c1"># Guardar el dataset original en la carpeta datos_originales</span>
<span class="n">ruta_datos_originales</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_originales"</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="1.3.-Exploraci%C3%B3n-inicial-del-dataset"><strong>1.3. Exploracin inicial del dataset</strong><a class="anchor-link" href="#1.3.-Exploraci%C3%B3n-inicial-del-dataset"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Empezar a visualizar el contenido del dataset para valorar que datos hay.</p>
<p>Por ser mi primer proyecto, he optado por visualizar los datos con todas las posibilidades, aunque para un primer anlisis me centrar en en algunos concretos:</p>
<p>Visualizar el dataset: si se ha cargado correctamente (ver las primeras / ltimas 5 filas y las variables)
Explicacin general del dataset: Ver la estructura: n de filas, columnas, tipos de datos, et.
Posteriomente realizar las adecuaciones y modificaciones</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="1.3.1.-Visualizar-el-dataset"><strong>1.3.1. Visualizar el dataset</strong><a class="anchor-link" href="#1.3.1.-Visualizar-el-dataset"></a></h3><p>Voy a mostrar las primeras y las ltimas 5 filas para visualizar si el dataset se ha cargado correctamente.</p>
<p>Realizar un primer anlisis e interpretacin de las variables y datos obtenidos.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Mostrar las primeras 5 filas del dataset por defecto, no voy a mostrar ms</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Mostrar las ltimas  5 filas del dataset por defecto, no voy a mostrar ms</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="1.3.2.-Visualizaciones-iniciales-sin-valor-anal%C3%ADtico"><strong>1.3.2. Visualizaciones iniciales sin valor analtico</strong><a class="anchor-link" href="#1.3.2.-Visualizaciones-iniciales-sin-valor-anal%C3%ADtico"></a></h3><p>Visualizaciones del dataset que he descrito pero que no aportan valor para el anlisis, solo como consulta por si preciso alguna informacin determinante.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># N de filas y de columnas</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Nombre de columnas</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Qu indices</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Contar valores</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Tipo de valor</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#len(diabetes_informe['ID'].unique()) # solo si hay columna id. en este caso, no lo llamo porque no hay columna id</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#variables categricas</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="2.-Exploraci%C3%B3n-del-Dataset-(EDA---Exploratory-Data-Analysis)"><strong>2. Exploracin del Dataset (EDA - Exploratory Data Analysis)</strong><a class="anchor-link" href="#2.-Exploraci%C3%B3n-del-Dataset-(EDA---Exploratory-Data-Analysis)"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Esquema-de-la-secci%C3%B3n-2:-EDA--Exploratory-Data">Esquema de la seccin 2: EDA- Exploratory Data<a class="anchor-link" href="#Esquema-de-la-secci%C3%B3n-2:-EDA--Exploratory-Data"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p> Analizar la estructura del dataset y sus variables.</p>
<p> Resumen estadstico:</p>
<p>Identificar patrones, tendencias y relaciones entre variables.</p>
<p>Detectar problemas como valores nulos, outliers y distribuciones sesgadas.</p>
<p> Visualizar datos para detectar valores atpicos</p>
<p> Establecer correlaciones entre las variables.</p>
<p> Informe exploratorio automtico</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="2.1-Revisi%C3%B3n-inicial-del-dataset"><strong>2.1 Revisin inicial del dataset</strong><a class="anchor-link" href="#2.1-Revisi%C3%B3n-inicial-del-dataset"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Este paso es clave porque nos da una vista rpida del dataset y entender</p>
<ul>
<li>la estructura de los datos.</li>
<li>Nos dice cuntas filas y columnas hay en el dataset.</li>
<li>Nos muestra los tipos de datos de cada columna.</li>
<li>Nos indica si hay valores nulos explcitos en alguna variable.</li>
<li>Estadsticas generales (media, min, max, etc.): df.describe()</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.1.1.-Estructura-del-dataset"><strong>2.1.1. Estructura del dataset</strong><a class="anchor-link" href="#2.1.1.-Estructura-del-dataset"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Resumen general del dataset: N de columnas, N de filas, tipo dde datos, datos nulos No nulos, memoria usada</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis e interpretacin</strong></p>
<ul>
<li><strong>Tamao</strong>: 768 entradas y 9 columnas. - Indica que tengo datos de 768 pacientes con 9 variables.</li>
<li><strong>Valores nulos:</strong> DiabetesPedigreeFunction tiene 695 registros, por tanto 73 registros tienen valores nulos o faltantes. - Indica que tengo que decidir cmo tratar estos valores faltantes (rellenar con la media, mediana, eliinarlos, etc))</li>
<li><strong>Variables clnicas sin valores nulos pero con posibles datos errneos</strong> Glucose, BloodPressure, SkinThickness, Insulin y BMI no tienen valores nulos explcitos , pero es probable que tengan valores 0 que representen datos faltantes-- Utilizar describe() para ver los valores mnimos.</li>
<li><strong>Datos</strong>: Las 7 columnas son nmeros enteros int64 y 2 columnas son decimales float64( IMC, DiabetesPedigreeFunction). No hay columnas object, por tanto, no tengo que transformar a numero.</li>
<li><strong>Tamao datos</strong>: 54.1 KB. Me parece que es un cnjunto pequeo, fcil de manejar en memoria, aunque puede resultar pequeo para el muestro. Tengo que determinarlo bien.</li>
</ul>
<p><strong>Prximos pasos</strong></p>
<ul>
<li>Realizar y revisar el resumen estadstico</li>
<li>Verificar cuntos valores 0 hay en las variables clnicas</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.1.2.-Resumen-estad%C3%ADstico"><strong>2.1.2. Resumen estadstico</strong><a class="anchor-link" href="#2.1.2.-Resumen-estad%C3%ADstico"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Obtener resumen de estadsticas generales: media, desvicin, min, max.. para ver como se distribuyen los datos, ver valores nulos o anmalos</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis e interpretacin</strong></p>
<ol>
<li>Pregnancies: Media: 3.85, mnimo 0, mximo 17.</li>
</ol>
<ul>
<li>Hay valores altos mx 17 y un mnimo 0 que puede ser real</li>
</ul>
<ol start="2">
<li>Glucosa: Media 120.89, mnimo 0 mximo 199</li>
</ol>
<ul>
<li>El valor mnimo de 0 no es fisiolgicamente posible  tratar como NaN.</li>
</ul>
<ol start="3">
<li>BloodPressure: Media 69.10, mnimo 0  mximo 122</li>
</ol>
<ul>
<li>Presin arterial en 0 tambin es irreal  tratar como NaN.</li>
</ul>
<ol start="4">
<li>SkinThickness: Media 20.54, mnimo 0  mximo 99</li>
</ol>
<ul>
<li>Grosor en 0 es un valor faltante enmascarado. 99 puede ser un outlier.</li>
</ul>
<ol start="5">
<li>Insulin: Media 79.80, mnimo 0 mximo 846</li>
</ol>
<ul>
<li>Muchsimos valores en 0, y 846 puede ser un outlier extremo</li>
</ul>
<ol start="6">
<li>BMI: Media 31.99, mnimo 0  mximo 67.10</li>
</ol>
<ul>
<li>El valor 0 no es posible  imputar. El resto tiene distribucin aparentemente normal.</li>
</ul>
<ol start="7">
<li>DiabetesPedigreeFunction: Media 0.47, mnimo 0.078  mximo 2.42</li>
</ol>
<ul>
<li>No hay 0 pero hay valores altos que podran considerarse outliers</li>
</ul>
<ol start="8">
<li>Age: Media  33.24, mnimo 21 mximo 81.</li>
</ol>
<ul>
<li>Distribucin razonable, sin 0 ni problemas aparentes</li>
</ul>
<ol start="9">
<li>Outcome: Media 0.35, mnimo 0 mximo 1</li>
</ol>
<ul>
<li>Dataset desbalanceado. 65% no tienen diabetes. 35% si</li>
</ul>
<p><strong>Primera conclusin</strong></p>
<ul>
<li>Valores "0" como datos faltantes en: Glucose, BloodPressure, SkinThickness, Insulin, BMI.</li>
<li>Outliers extremos detectados en: Insulin (&gt;500), SkinThickness (=99), DPF (&gt;2).</li>
<li>Variables sin incidencias: Pregnancies, Age, Outcome.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.1.3-Detetar-o-Identificar-los-valores-nulos-o-sospechosos"><strong>2.1.3 Detetar o Identificar los valores nulos o sospechosos</strong><a class="anchor-link" href="#2.1.3-Detetar-o-Identificar-los-valores-nulos-o-sospechosos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ol>
<li><p>Identificar valores nulos: Permite saber qu columnas tienen datos faltantes antes de analizarlos. Es clave para decidir sy hay que limpiar los datos antes de analizarlos.</p>
</li>
<li><p>Identificar valores == 0 Permite saber si tenemos valores == 0 que pueden ser datos faltantes enmascarados o incongruentes con las variables</p>
</li>
</ol>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Identificar valores nulos</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Identificar valores ==0 en variables clnicas</span>
<span class="p">(</span><span class="n">diabetes_informe</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Conclusiones clave:</strong></p>
<ol>
<li><strong>Valores 0 como datos faltantes</strong></li>
</ol>
<p>Se detectan valores 0 en variables clnicas donde fisiolgicamente no es posible que existan:</p>
<ul>
<li>Glucose: una glucosa en sangre de 0 mg/dL no es viable.</li>
<li>BloodPressure: presin arterial diastlica de 0 mmHg tampoco es posible.</li>
<li>SkinThickness: un grosor de pliegue cutneo de 0 mm indica dato faltante.</li>
<li>Insulin: valores en 0 reflejan claramente ausencia de datos.</li>
<li>BMI (ndice de Masa Corporal): un IMC de 0 no tiene sentido clnico.</li>
</ul>
<p>Estas variables requieren transformar los ceros en NaN para poder tratarlos mediante imputacin adecuada.
2. <strong>Presencia de outliers clnicos y estadsticos</strong></p>
<ul>
<li>Insulin: valores extremadamente altos (hasta 846 U/mL), muy por encima de lo esperable: analizar y posiblemente tratar como outliers.</li>
<li>SkinThickness: valor mximo de 99 mm podra estar fuera del rango clnico habitual: revisar.</li>
<li>DiabetesPedigreeFunction (DPF): aunque no tiene ceros, algunos valores son extremadamente elevados (&gt;2.0), lo que podra afectar la distribucin: evaluar si es necesario aplicar transformacin logartmica o tcnica de escalado robusto.</li>
</ul>
<ol start="3">
<li><strong>Variables sin incidencias directas</strong></li>
</ol>
<ul>
<li>Pregnancies y Age presentan valores coherentes dentro de un rango razonable.</li>
<li>Outcome (variable objetivo) contiene nicamente 0 y 1, como se espera.</li>
</ul>
<p><strong>Implicaciones para el preprocesamiento</strong>
Es necesario aplicar una estrategia clara para:</p>
<ul>
<li>Transformar los ceros fisiolgicamente imposibles en NaN.</li>
<li>Imputar los valores nulos de manera adecuada (por media, mediana o tcnica avanzada).</li>
<li>Detectar y tratar outliers clnicamente significativos o estadsticamente extremos.</li>
</ul>
<p>Esto garantizar que los datos utilizados en el modelo de entrenamiento estn limpios, consistentes y sean clnicamente coherentes.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.1.4.-Identificar-filas-duplicadas"><strong>2.1.4. Identificar filas duplicadas</strong><a class="anchor-link" href="#2.1.4.-Identificar-filas-duplicadas"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Verificar si hay filas duplicadas</span>
<span class="n">duplicated_rows</span> <span class="o">=</span> <span class="n">diabetes_informe</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span>
<span class="n">num_duplicated_rows</span> <span class="o">=</span> <span class="n">duplicated_rows</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Nmero de filas duplicadas: </span><span class="si">{</span><span class="n">num_duplicated_rows</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="2.2.-Visualizaci%C3%B3n-de-la-distribuci%C3%B3n-de-variables:-datos-y-tendencias"><strong>2.2. Visualizacin de la distribucin de variables: datos y tendencias</strong><a class="anchor-link" href="#2.2.-Visualizaci%C3%B3n-de-la-distribuci%C3%B3n-de-variables:-datos-y-tendencias"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Voy a graficar las distribuciones de los datos y detectar sospechosos que pueden afectar al anlisis. Para ello voy a realizar las siguientes visualizaciones</p>
<p>1: Entender cmo estn distribuidos los datos, utilizar histogramas que me permiten ver la distribucin de cada variable. Identificar sesgos y valores extremos. Nos dicen si una variable es normal o est desequilibrada.</p>
<p>2: Visualizar y detectar valores atpicos y mostrar la dispersin de los datos, para elo utilizar el diagramas de caja.</p>
<p>3: Mostrar y analizar la relacin entre las variables con el mapa de calor de correlaciones: Me ayudar a ver qu variables estn ms relacionadas y decidir qu variables pueden ser tiles en el modelo.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.2.1.-Histograma"><strong>2.2.1. Histograma</strong><a class="anchor-link" href="#2.2.1.-Histograma"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#librerias importadas</span>

<span class="c1"># Histograma de todas las variables para ver cmo estn distribuidas todos los valroes de una variable en diferentes rangos</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Distribucin de las variables'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># Muestra la figura con todos los subgrficos generados.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis e interpretacin variable a variable</strong></p>
<ol>
<li><p><strong>Pregnancies</strong></p>
<ul>
<li>La mayora de los pacientes tiene entre 0 y 2 embarazos.</li>
<li>Hay valores elevados (hasta 17), lo que genera un sesgo a la derecha.</li>
<li><strong>No hay valores imposibles</strong>, por lo tanto, no requiere imputacin.</li>
</ul>
</li>
<li><p><strong>Glucose</strong></p>
<ul>
<li>Tiene una distribucin aproximadamente normal.</li>
<li><strong>Se detectan valores 0</strong>, lo cual <strong>no es fisiolgicamente posible</strong>: se imputarn como NaN.</li>
</ul>
</li>
<li><p><strong>BloodPressure</strong></p>
<ul>
<li>Distribucin centrada entre 60-80 mmHg.</li>
<li>Presencia de <strong>valores 0</strong>, lo que indica datos faltantes: se imputarn como NaN.</li>
</ul>
</li>
<li><p><strong>SkinThickness</strong></p>
<ul>
<li>Distribucin con pico en 0  indica datos faltantes.</li>
<li>Parece seguir una curva normal tras eliminar ceros.</li>
<li><strong>Requiere imputacin</strong> y revisin de posibles outliers.</li>
</ul>
</li>
<li><p><strong>Insulin</strong></p>
<ul>
<li>Distribucin altamente sesgada.</li>
<li>Gran nmero de valores 0 (inexistencia fisiolgica).</li>
<li>Presencia de valores extremos (hasta 846): <strong>outliers severos</strong>.</li>
<li>Se imputarn los 0 y se evaluar el tratamiento de los extremos.</li>
</ul>
</li>
<li><p><strong>BMI</strong></p>
<ul>
<li>Distribucin bastante normal.</li>
<li>Existen <strong>algunos valores en 0</strong>, lo cual <strong>no es clnicamente posible</strong>: se imputarn.</li>
</ul>
</li>
<li><p><strong>DiabetesPedigreeFunction</strong></p>
<ul>
<li>Distribucin sesgada a la derecha.</li>
<li>No hay ceros, pero <strong>hay valores muy altos</strong> (&gt;2.0) que pueden ser outliers.</li>
<li>Se considerar normalizacin o escalado robusto.</li>
</ul>
</li>
<li><p><strong>Age</strong></p>
<ul>
<li>Distribucin sesgada a la izquierda.</li>
<li>La mayora tiene entre 20 y 50 aos.</li>
<li>Sin valores 0 ni extremos visibles: no requiere limpieza.</li>
</ul>
</li>
<li><p><strong>Outcome (variable objetivo)</strong></p>
<ul>
<li>nica <strong>variable tipo categrica</strong> y est desbalanceada:<ul>
<li>Clase 0 (sin diabetes)  65%</li>
<li>Clase 1 (con diabetes)  35%</li>
</ul>
</li>
<li>Este desequilibrio puede hacer que los modelos predictivos aprendan a predecir mayoritariamente la clase 0. Si no se trata, el modelo podra tener una alta precisin global, pero un <strong>recall muy bajo</strong> para los casos de diabetes (los que realmente nos interesan detectar) y ser necesario aplicar tcnicas de <strong>balanceo</strong> como:<ul>
<li><strong>SMOTE (Synthetic Minority Over-sampling Technique)</strong></li>
<li><strong>Class weights</strong> en los modelos</li>
<li><strong>Resampling</strong> (undersampling/oversampling)
-Este punto ser abordado ms adelante en la fase de entrenamiento.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>Conclusiones</strong>:</p>
<ul>
<li><p>Variables con <strong>valores 0 fisiolgicamente imposibles</strong>:<br/>
Glucose, BloodPressure, SkinThickness, Insulin, BMI: se transformarn a NaN.</p>
</li>
<li><p><strong>Posibles Outliers detectados</strong>:</p>
<ul>
<li>Insulin (&gt;500)</li>
<li>SkinThickness (=99)</li>
<li>DiabetesPedigreeFunction (&gt;2.0)</li>
</ul>
</li>
<li><p>Variables sin incidencias:<br/>
Pregnancies, Age.</p>
</li>
<li><p>Variables desbalanceadas:
-Outcome</p>
</li>
</ul>
<p>Estas observaciones guiarn el proceso de <strong>limpieza y transformacin</strong> en el conjunto de entrenamiento, <strong>siempre despus del split para evitar data leakage</strong>.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.2.2.-Diagrama-de-caja:-Boxplots-Visualizar-y-detectar-valores-at%C3%ADpicos"><strong>2.2.2. Diagrama de caja: Boxplots-Visualizar y detectar valores atpicos</strong><a class="anchor-link" href="#2.2.2.-Diagrama-de-caja:-Boxplots-Visualizar-y-detectar-valores-at%C3%ADpicos"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="c1"># Configurar el tamao del grfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="c1"># Crear un boxplot para cada variable</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">diabetes_informe</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">"h"</span><span class="p">)</span>
<span class="c1"># Ttulo del grfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Boxplot de las Variables del Dataset"</span><span class="p">)</span>
<span class="c1"># Mostrar el grfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Modifico esta visin porque la escala aparece desbalanceada.</p>
<p>Algunas variables tienen valores que son muy altos y no permiten visualizar el resto de los datos y aparecen muchos puntos fuera de los bogotes, lo que puede indicar presencia de valores atpicos.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Configurar el tamao del grfico y crear subgrficos (3 filas x 3 columnas)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Boxplots de las Variables del Dataset"</span><span class="p">)</span>

<span class="c1">#Seleccionar las variables a graficar excluyendo 'Outcome' porque solo tiene 0 y 1</span>
<span class="n">columnas</span> <span class="o">=</span> <span class="n">diabetes_informe</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Toma todas las columnas excepto la ltima ('Outcome')</span>

<span class="c1">#Iterar sobre cada variable y graficarla en su respectivo subplot</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">columnas</span><span class="p">):</span>  <span class="c1"># axes.flatten() convierte la matriz de subplots en una lista</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">diabetes_informe</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"lightblue"</span><span class="p">)</span>  <span class="c1"># Crea el boxplot en cada subplot</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>  <span class="c1"># Agrega el ttulo con el nombre de la variable</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Muestra el grfico</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Embazaros</strong>: La mayora de los valores estn entre 0 y 7 embarazos.
Hay valores atpicos con valores superiores a 13 embarazos. La mediana est alrededor de 3 embarazos .</p>
<ul>
<li>Conclusin: Hay algunos valores atpicos, pero pueden ser reales, ya que hay mujeres con ms de 10 embarazos. Se mantienen.</li>
</ul>
<p><strong>2. Glucosa</strong>: Distribucin algo asimtrica con algunos valores atpicos en el extremo inferior (0) detectado como outliers. La mediana est alrededor de 120 mg/dl. Hay valores en 0 mg/dl (fisiolgicamente imposible).</p>
<ul>
<li>Conclusin: Transformar los valores 0 como datos faltantes (NaN) y evaluar sesgo.</li>
</ul>
<p><strong>3. TAD</strong>: Distribucin casi normal, con valores entre 60 y 90 mmHg. Se observan valores en 0, lo cual es irreal. Algunos valores atpicos por encima de 120 mmHg.</p>
<ul>
<li>Conclusin: Los valores en 0 como (NaN), los datos atpicos, valorar.</li>
</ul>
<p><strong>4. Grosor de la piel</strong> Tiene una distribucin con sesgo. La mediana est en 23 mm Pico en 0 y outliers en 99mm.</p>
<ul>
<li>Conclusin : Los valores en 0 (NaN) y analizar 99 como outlier</li>
</ul>
<p><strong>5. Insulina</strong> Muchos valores atpicos por encima de 300 U/ml, hasta 846. Hay un gran nmero de valores en 0, poco realista.</p>
<ul>
<li>Conclusin :Reemplazar los valores 0 por NaN y los valores atpicos, analizarlos, considerar imputacin o exclusin.</li>
</ul>
<p><strong>6. IMC</strong> Tiene una distribucin cercana a normal, con la mediana en 32. Hay valores 0, y supuestos outliers en &gt; 50.</p>
<ul>
<li>Conclusin : Reemplazar los valores 0 por NaN, analizar outliers.</li>
</ul>
<p><strong>7. DiabetesPedigreeFunction</strong> Distribucin muy sesgada a la derecha. Outliers &gt;1.5 hasta 2.42. No tiene valores en 0.</p>
<ul>
<li>Conclusin: Mantener, posible transformacin logartmica.</li>
</ul>
<p><strong>8. Edad</strong> Distribucin aceptable. La mayora de los pacientes tienen entre 25 y 50 aos. Existen algunos valores atpicos mayores de 70 aos.</p>
<ul>
<li>Conclusin : Parece correcto, sin necesidad de cambios.</li>
</ul>
<p><strong>Conclusiones generales:</strong></p>
<p>Presencia de valores 0 fisiolgicamente imposibles en:</p>
<ul>
<li>Glucose, BloodPressure, SkinThickness, Insulin, BMI: Se deben transformar a NaN antes de imputar</li>
</ul>
<p>Outliers clnicamente significativos en:</p>
<ul>
<li>Insulin (&gt;500), SkinThickness (=99), DPF (&gt;2): Se revisarn con criterios clnicos y estadsticos (IQR o percentiles)</li>
</ul>
<p>Variables sin incidencias:</p>
<ul>
<li>Pregnancies, Age,</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.2.3.-Guardado-de-las-visualizaciones"><strong>2.2.3. Guardado de las visualizaciones</strong><a class="anchor-link" href="#2.2.3.-Guardado-de-las-visualizaciones"></a></h3><p>Guardardo de las visualizaciones generadas en la carpeta resultados de Drive para asegurar la trazabilidad.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Obtener fecha y hora actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Ruta para guardar las visualizaciones</span>
<span class="n">ruta_boxplot</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/boxplot_distribucion_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.png"</span>
<span class="n">ruta_histogramas</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/histogramas_distribucion_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.png"</span>

<span class="c1"># Guardar Boxplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">diabetes_informe</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">"h"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Distribucin de las variables - Boxplots"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">ruta_boxplot</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Boxplot guardado correctamente en:"</span><span class="p">,</span> <span class="n">ruta_boxplot</span><span class="p">)</span>

<span class="c1"># Guardar Histogramas</span>
<span class="n">diabetes_informe</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">'skyblue'</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'black'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Distribucin de las variables - Histogramas"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">ruta_histogramas</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Histogramas guardados correctamente en:"</span><span class="p">,</span> <span class="n">ruta_histogramas</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="2.3.-An%C3%A1lisis-de-correlaci%C3%B3n"><strong>2.3. Anlisis de correlacin</strong><a class="anchor-link" href="#2.3.-An%C3%A1lisis-de-correlaci%C3%B3n"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Mapa de calor o de correlaciones:</strong></p>
<p>Para ver la relacin entre las variables e identificar aquellas que estn correlacionadas entre s:</p>
<p>Como realizar el cdigo: Explicacin del Cdigo para facilitar mi aprendizaje:</p>
<ul>
<li>plt.figure(figsize=(10, 8)) Ajusta el tamao del grfico.</li>
<li>sns.heatmap() Crea el mapa de calor:<ul>
<li>diabetes_informe.corr() Calcula la matriz de evaluacin entre todas las variables.</li>
<li>annot=True Muestra los valores numricos en cada celda.</li>
<li>cmap="coolwarm" Colores azul-rojo para diferencias visuales.</li>
<li>fmt=".2f" Formato con dos decimales.</li>
<li>linewidths=0.5 Separa las celdas con lneas finas.</li>
</ul>
</li>
<li>plt.title() Agrega un ttulo al grfico.</li>
<li>plt.show() Muestra el grfico.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="**2.3.1.-Mapa-de-calor:-Establecer-correlaciones-entre-variables****">**2.3.1. Mapa de calor: Establecer correlaciones entre variables****<a class="anchor-link" href="#**2.3.1.-Mapa-de-calor:-Establecer-correlaciones-entre-variables****"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Configuracin del tamao del mapa</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># Crear el mapa de calor con correlaciones- Ver qu variables estn relacionadas</span>
<span class="n">correlation_matrix</span> <span class="o">=</span> <span class="n">diabetes_informe</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">correlation_matrix</span><span class="p">,</span>
            <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>              <span class="c1"># Mostrar los valores</span>
            <span class="n">cmap</span><span class="o">=</span><span class="s2">"coolwarm"</span><span class="p">,</span>         <span class="c1"># Colores de calor (rojo-azul)</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s2">".2f"</span><span class="p">,</span>               <span class="c1"># Formato de decimales</span>
            <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>          <span class="c1"># Lneas entre celdas</span>
            <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>             <span class="c1"># Cuadrcula perfecta</span>
            <span class="n">cbar_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">'shrink'</span><span class="p">:</span> <span class="mf">0.75</span><span class="p">})</span> <span class="c1"># Tamao de la barra de color</span>

<span class="c1"># Ttulo y visualizacin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Mapa de Correlaciones entre Variables"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.3.2.-Guardado-y-trazabilidad-del-Mapa-de-Correlaci%C3%B3n"><strong>2.3.2. Guardado y trazabilidad del Mapa de Correlacin</strong><a class="anchor-link" href="#2.3.2.-Guardado-y-trazabilidad-del-Mapa-de-Correlaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Obtener fecha y hora actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Ruta y nombre de guardado con fecha</span>
<span class="n">ruta_guardado_heatmap</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/heatmap_correlacion_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.png"</span>

<span class="c1"># Guardar</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">ruta_guardado_heatmap</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Heatmap guardado correctamente en:"</span><span class="p">,</span> <span class="n">ruta_guardado_heatmap</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.3.3.-An%C3%A1lisis-e-interpretaci%C3%B3n-del-Mapa-de-Correlaci%C3%B3n"><strong>2.3.3. Anlisis e interpretacin del Mapa de Correlacin</strong><a class="anchor-link" href="#2.3.3.-An%C3%A1lisis-e-interpretaci%C3%B3n-del-Mapa-de-Correlaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Anlizar de las correlaciones y determinar si es relevante para el estudio</p>
<p><strong>La variable objetivo (Resultado - Diabetes)</strong> correlaciones con otras variables</p>
<ul>
<li>Glucosa (0,47) Presenta la mayor correlacin con la variable objetivo. Es la variable ms importante tanto clnica como estadsticamente. En el diagnstico de diabetes tipo 2, un valor de glucosa en ayunas 126 mg/dL es uno de los criterios clnicos principales.</li>
<li>IMC (0,29) El IMC tambin est moderadamente correlacionado con la diabetes. Un mayor IMC est asociado a mayor resistencia a la insulina, esto aumenta riesgo DM2. La obesidad uno de los principales factores de DM2.</li>
<li>Edad (0,24) Muestra una correlacin moderada, en lnea con la evidencia de que el riesgo de diabetes tipo 2 se incrementa con la edad por cambios metablicos progresivos. Tambin aumenta la resistencia a la insulina con los aos.</li>
<li>Embarazos(0.22) La cantidad de embarazos tiene una evaluacin moderada con la diabetes. Posiblemente porque la diabetes gestacional es un factor de riesgo.</li>
</ul>
<p><strong>Otras correlaciones entre variables</strong></p>
<ul>
<li><p>Embarazo y Edad (0.54) a mayor edad ms probabilidad de embarazo.</p>
</li>
<li><p>Relacin con diabetes: En cierta medida. Diabetes gestacional es factor de riesgo para la DM2. Ms embarazos ms probabilidad de cambios metablicos.</p>
</li>
<li><p>Insulin y SkinThickness (0.44) Una comparacin relativamente alta. Niveles altos de insulina estn relacionados con mayor acumulacin de grasa subcutnea y ambos estn relacionados con la resistencia a la insulina.</p>
</li>
<li><p>IMC y SkinThickess (0.39) Correlacin bastante alta. Es un indicador de obesidad y resistencia a la insulina. Un exceso de grasa est relacionado con mayor resistencia a la insulina( clave en la diabetes tipo 2).</p>
</li>
<li><p>Insulina y Glucosa (0.33) La insulina y la glucosa estn correlacionadas, lo cual es esperable, ya que ambas estn directamente relacionadas con el metabolismo del azcar.</p>
</li>
<li><p>TAD y IMC (0.28) La obesidad o IMC alto suele estar relacionada con la HTA, en esta ocasin es la TAD y tienen cierta relacin.</p>
</li>
</ul>
<p>Conclusin general</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><img alt="image.png" src="data:image/png;base64,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"/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>El anlisis de correlacin revela las siguientes relaciones importantes con la variable objetivo (Outcome):</p>
<ul>
<li><strong>Glucose</strong>: 0.47  Mayor predictor lineal de diabetes. Muy relevante.</li>
<li><strong>BMI</strong>: 0.29  Relacin clara con la diabetes. Altamente informativa.</li>
<li><strong>Age</strong>: 0.24  Relacin positiva: a mayor edad, ms probabilidad de diabetes.</li>
<li><strong>DPF</strong>: 0.17  Ligera correlacin con Outcome, representa carga gentica.</li>
</ul>
<p>Variables con baja correlacin como <strong>Insulin</strong>, <strong>BloodPressure</strong>, y <strong>SkinThickness</strong> se mantienen por ahora, ya que pueden aportar valor en modelos no lineales o al ser combinadas.</p>
<p>Aunque algunas variables presentan correlaciones entre s (p. ej., Embarazos -Edad o IMC -SkinThickness), no se observan niveles crticos de multicolinealidad. Aun as, se recomienda considerar estas relaciones al seleccionar caractersticas o aplicar mtodos de reduccin de dimensionalidad si es necesario.</p>
<p>Por tanto, NO se eliminar ninguna variable en esta etapa. Se decidir tras el anlisis de importancia de caractersticas y los resultados del modelo.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="2.4.-Comparativa-por-clase--(Outcome-0-=-No-diabetes,-1-=-Diabetes)"><strong>2.4. Comparativa por clase  (Outcome 0 = No diabetes, 1 = Diabetes)</strong><a class="anchor-link" href="#2.4.-Comparativa-por-clase--(Outcome-0-=-No-diabetes,-1-=-Diabetes)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Objetivo</strong>:</p>
<p>Analizar cmo se comportan las variables en funcin de la clase (Outcome).</p>
<p>Identificar diferencias claras entre los pacientes con y sin diabetes.</p>
<p>Visualizar las distribuciones para detectar patrones y diferencias.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.4.1.-Agrupar-por-clase-y-obtener-estad%C3%ADsticas-desccriptivas"><strong>2.4.1. Agrupar por clase y obtener estadsticas desccriptivas</strong><a class="anchor-link" href="#2.4.1.-Agrupar-por-clase-y-obtener-estad%C3%ADsticas-desccriptivas"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Clculo de medidas: Media y Mediana por Clase</strong></p>
<p>Calcular las medidas estadsticas (media y mediana) para cada variable, separadas por clase (Outcome).</p>
<p>Esto permitir ver diferencias claras entre las clases.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Media de cada variable segn Outcome</span>
<span class="n">media_por_clase</span> <span class="o">=</span> <span class="n">diabetes_informe</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Outcome"</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Mediana de cada variable segn Outcome</span>
<span class="n">mediana_por_clase</span> <span class="o">=</span> <span class="n">diabetes_informe</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Outcome"</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>

<span class="c1"># Mostramos ambas</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Media por clase:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">media_por_clase</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Mediana por clase:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">mediana_por_clase</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.4.2.-Visualizaci%C3%B3n-comparativa-con-boxplots"><strong>2.4.2. Visualizacin comparativa con boxplots</strong><a class="anchor-link" href="#2.4.2.-Visualizaci%C3%B3n-comparativa-con-boxplots"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Utilizar seaborn para crear boxplots que muestran la distribucin de cada variable por clase.</p>
<p>Esto permitir ver cmo se comportan las distribuciones y detectar posibles outliers.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Definir las variables numricas para comparar</span>
<span class="n">variables_numericas</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Pregnancies'</span><span class="p">,</span> <span class="s1">'Glucose'</span><span class="p">,</span> <span class="s1">'BloodPressure'</span><span class="p">,</span>
                       <span class="s1">'SkinThickness'</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">,</span>
                       <span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">]</span>

<span class="c1"># Crear un grfico de boxplots para cada variable</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">variable</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variables_numericas</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">diabetes_informe</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">'Set2'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Distribucin de </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2"> por Clase"</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.4.3.-An%C3%A1lisis-e-interpretaci%C3%B3n"><strong>2.4.3. Anlisis e interpretacin</strong><a class="anchor-link" href="#2.4.3.-An%C3%A1lisis-e-interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ol>
<li>Glucose</li>
</ol>
<ul>
<li>Media: 109.98 (sin) vs 141.26 (con)
-Mediana: 107 vs 140</li>
<li>Boxplot: diferencia clara y bien separada. Claramente mayor en pacientes con diabetes.</li>
<li><strong>Interpretacin</strong>: es la variable ms discriminante, tiene sentido clnico porque se basa en criterios diagnsticos reales.</li>
<li><strong>Decisin</strong>: mantener, imputar ceros como NaN, esencial para el modelo.</li>
</ul>
<ol start="2">
<li>BMI (ndice de Masa Corporal)</li>
</ol>
<ul>
<li>Media: 30.3 vs 35.14</li>
<li>Mediana: 30.05 vs 34.25</li>
<li>Boxplot: Diferencias notables</li>
<li><strong>Interpretacin</strong> Las personas con diabetes tienden a tener un IMC ms alto: sobrepeso y obesidad como factores de riesgo.</li>
<li><strong>Decisin</strong>: mantener, imputar 0 como NaN, podras considerar clasificar en categoras despus.</li>
</ul>
<ol start="3">
<li>Age</li>
</ol>
<ul>
<li>Media: 31.2 vs 37.07</li>
<li>Mediana: 27 vs 36</li>
<li>Boxplot: Claramente mayor edad en promedio para pacientes con diabetes, coherente con el riesgo asociado a la edad.</li>
<li><strong>Interpretacin</strong> La edad es un predictor potente y coherente con la evidencia clnica</li>
<li><strong>Decisin</strong>: mantener, incluso puedes probar agrupar en rangos de edad ms adelante.</li>
</ul>
<ol start="4">
<li>Pregnancies</li>
</ol>
<ul>
<li>Media: 3.30 vs 4.87</li>
<li>Mediana: 2 vs 4</li>
<li>Boxplot muestra una ligera diferencia.</li>
<li>Los pacientes con diabetes tienden a tener ms embarazos.</li>
<li><strong>Interpretacin:</strong> Tiene relacin con diabetes gestacional y edad</li>
<li><strong>Decisin</strong>: mantener, aunque podra correlacionarse con la edad.</li>
</ul>
<ol start="5">
<li>Blood Pressure (TAD)</li>
</ol>
<ul>
<li>Media: 68.18 vs 70.82</li>
<li>Mediana: 70 vs 74</li>
<li>Boxplot: Diferencia leve aunque ligeramente mayor en pacientes con diabetes, pero con ms variabilidad.</li>
<li><strong>Interpretacin</strong>: Aunque es clnicamente relevante, no discrimina tanto</li>
<li><strong>Decisin:</strong> mantener, pero revisar su impacto en correlacin con IMC.</li>
</ul>
<ol start="6">
<li>SkinThickness</li>
</ol>
<ul>
<li>Media: 19.66 vs 22.16</li>
<li>Mediana: 21 vs 27</li>
<li>Boxplot: Valores similares, pero con ms outliers en clase 1, aunque es leve aumento en pacientes con diabetes.</li>
<li><strong>Decisin</strong>: tiene muchos ceros: imputar y analizar importancia despus</li>
</ul>
<ol start="7">
<li>Insulin</li>
</ol>
<ul>
<li>Media: 68.79 vs 100.33</li>
<li>Mediana: 39 vs 0  curioso!</li>
<li>Boxplot muestra gran dispersin y muchos ceros</li>
<li>Notablemente ms alta en pacientes con diabetes, aunque con gran variabilidad.</li>
<li><strong>Decisin</strong>: gran cantidad de ceros, posibles outliers. Es candidata a:<ul>
<li>Imputacin</li>
<li>Anlisis con o sin esta variable</li>
</ul>
</li>
</ul>
<ol start="8">
<li>Diabetes Pedigree Function</li>
</ol>
<ul>
<li>Media: 0.43 vs 0.55</li>
<li>Mediana: 0.33 vs 0.45</li>
<li>Boxplot: Ligeramente superior en clase 1. Mayor en pacientes con diabetes, refleja una mayor carga gentica.</li>
<li><strong>Decisin</strong>: mantener, pero revisar outliers (valores altos), y ya sabemos que tiene nulos</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.4.4.-Guardado-de-kas-visualizaciones"><strong>2.4.4. Guardado de kas visualizaciones</strong><a class="anchor-link" href="#2.4.4.-Guardado-de-kas-visualizaciones"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Obtener fecha y hora actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Ruta y nombre de guardado con fecha</span>
<span class="n">ruta_guardado_boxplots</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/boxplots_comparativa_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.png"</span>


<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">ruta_guardado_boxplots</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Boxplots guardados correctamente en:"</span><span class="p">,</span> <span class="n">ruta_guardado_boxplots</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.4.5.-Conclusiones-finales-de-la-comparativa"><strong>2.4.5. Conclusiones finales de la comparativa</strong><a class="anchor-link" href="#2.4.5.-Conclusiones-finales-de-la-comparativa"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>En este apartado se realiza una comparacin entre pacientes con y sin diabetes para analizar las diferencias en cada variable.</p>
<p><strong>Anlisis de Media y Mediana por Clase</strong></p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Media (0)</th>
<th>Media (1)</th>
<th>Mediana (0)</th>
<th>Mediana (1)</th>
<th>Observaciones</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pregnancies</td>
<td>3.30</td>
<td>4.87</td>
<td>2</td>
<td>4</td>
<td>Ligeramente ms embarazos en clase 1</td>
</tr>
<tr>
<td>Glucose</td>
<td>109.98</td>
<td>141.26</td>
<td>107</td>
<td>140</td>
<td>Variable ms discriminante</td>
</tr>
<tr>
<td>BloodPressure</td>
<td>68.18</td>
<td>70.82</td>
<td>70</td>
<td>74</td>
<td>Diferencia leve</td>
</tr>
<tr>
<td>SkinThickness</td>
<td>19.66</td>
<td>22.16</td>
<td>21</td>
<td>27</td>
<td>Afectada por ceros y outliers</td>
</tr>
<tr>
<td>Insulin</td>
<td>68.79</td>
<td>100.33</td>
<td>39</td>
<td>0</td>
<td>Valores atpicos y muchos ceros</td>
</tr>
<tr>
<td>BMI</td>
<td>30.30</td>
<td>35.14</td>
<td>30.05</td>
<td>34.25</td>
<td>Diferencia clara y relevante</td>
</tr>
<tr>
<td>DiabetesPedigreeFunction</td>
<td>0.43</td>
<td>0.55</td>
<td>0.336</td>
<td>0.449</td>
<td>Ligera diferencia, con outliers</td>
</tr>
<tr>
<td>Age</td>
<td>31.19</td>
<td>37.07</td>
<td>27</td>
<td>36</td>
<td>Claramente mayor en clase 1</td>
</tr>
</tbody>
</table>
<p><strong>Conclusiones y decisiones para limpieza de datos</strong></p>
<p>Las diferencias en estas variables son estadsticamente significativas y clnicamente relevantes.</p>
<ul>
<li><strong>Glucose, BMI, Age</strong>: Variables altamente informativas. Se conservarn y se imputarn los valores <code>0</code> como <code>NaN</code>.</li>
<li><strong>Pregnancies</strong>: Mantener, posible correlacin con edad.</li>
<li><strong>BloodPressure</strong>: Diferencia leve, pero se conservar y se imputarn ceros.</li>
<li><strong>SkinThickness</strong>: Muy afectada por ceros y outliers. Imputar y analizar.</li>
<li><strong>Insulin</strong>: Muchos ceros y outliers. Evaluar si se mantiene o se descarta.</li>
<li><strong>DiabetesPedigreeFunction</strong>: Tiene valores faltantes (NaN) y outliers altos. Mantener y tratar los valores extremos.</li>
</ul>
<p><strong>Conclusin final del EDA:</strong></p>
<p>El anlisis exploratorio ha revelado:</p>
<ul>
<li>Valores 0 fisiolgicamente imposibles: sern tratados como <code>NaN</code>.</li>
<li>La clase positiva (diabetes) muestra claras diferencias en variables clave como Glucose, BMI y Age.</li>
<li>Se realizar imputacin basada en estadstica robusta (mediana) o transformaciones, solo tras el split de los datos para evitar data leakage.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="2.5.-Informe-exploratorio-autom%C3%A1tico"><strong>2.5. Informe exploratorio automtico</strong><a class="anchor-link" href="#2.5.-Informe-exploratorio-autom%C3%A1tico"></a></h2><p>Voy a tratar de ver los datos de manera automtica antes de empezar con transformaciones y adems para validad si los datos que yo he sacado tienen coherencia con esta visualizacin</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">ydata</span><span class="o">-</span><span class="n">profiling</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ydata_profiling</span><span class="w"> </span><span class="kn">import</span> <span class="n">ProfileReport</span>

<span class="c1"># Generar el reporte de pandas-profiling</span>
<span class="n">profile</span> <span class="o">=</span> <span class="n">ProfileReport</span><span class="p">(</span><span class="n">diabetes_informe</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Reporte de Anlisis Exploratorio de Datos Diabetes"</span><span class="p">,</span> <span class="n">explorative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mostrar el reporte</span>
<span class="n">profile</span><span class="o">.</span><span class="n">to_notebook_iframe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar el informe</span>
<span class="c1"># Obtener fecha y hora actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Definir la ruta para guardar el reporte</span>
<span class="n">ruta_guardado_reporte</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/informe_eda_diabetes_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.html"</span>

<span class="c1"># Guardar el reporte como archivo HTML</span>
<span class="n">profile</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">ruta_guardado_reporte</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Informe EDA guardado correctamente en:"</span><span class="p">,</span> <span class="n">ruta_guardado_reporte</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="2.6.-Conclusiones-del-An%C3%A1lisis-Exploratorio-de-Datos-(EDA)"><strong>2.6. Conclusiones del Anlisis Exploratorio de Datos (EDA)</strong><a class="anchor-link" href="#2.6.-Conclusiones-del-An%C3%A1lisis-Exploratorio-de-Datos-(EDA)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.6.1.-Objetivo"><strong>2.6.1. Objetivo</strong><a class="anchor-link" href="#2.6.1.-Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Resumir los hallazgos clave obtenidos en el EDA.</p>
<p>Identificar las implicaciones para el preprocesamiento y modelado.</p>
<p>Establecer los pasos siguientes para el procesamiento avanzado.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="2.6.2.-Aspectos-analizados-y-hallazgos-clave-del-EDA"><strong>2.6.2. Aspectos analizados y hallazgos clave del EDA</strong><a class="anchor-link" href="#2.6.2.-Aspectos-analizados-y-hallazgos-clave-del-EDA"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras realizar un anlisis exploratorio completo y contrastarlo con un informe automatizado, se destacan las siguientes conclusiones clave sobre el dataset:</p>
<p><strong>Aspecto Analizado:</strong></p>
<ol>
<li><strong>Estructura del Dataset:</strong>:</li>
</ol>
<ul>
<li>El dataset contiene 768 filas y 9 columnas.</li>
<li>Las variables incluyen medidas clnicas y demogrficas de pacientes (Glucose, BMI, Age, etc.) y la variable objetivo (Outcome).</li>
</ul>
<ol start="2">
<li><strong>Calidad de los datos</strong></li>
</ol>
<ul>
<li>Se identifican valores nulos y ceros no fisiolgicos en variables clnicas como Glucose, BloodPressure, SkinThickness, Insulin y BMI, que son fisiolgicamente imposibles.</li>
<li>No se detectan filas duplicadas.</li>
</ul>
<ol start="3">
<li><strong>Distribucin de variables</strong>	Variables como Insulin, SkinThickness, DPF y Age presentan distribuciones sesgadas.</li>
</ol>
<ul>
<li>Glucose: Distribucin asimtrica a la derecha (sesgo positivo), necesario considerar transformacin.</li>
<li>Insulin: Distribucin altamente asimtrica y con valores extremos.</li>
<li>BMI: Distribucin ligeramente sesgada, pero dentro de valores clnicamente razonables.</li>
<li>DiabetesPedigreeFunction: Distribucin sesgada, pero sin valores fuera de rango clnico.
-Age: Distribucin normal, sin valores extremos</li>
</ul>
<ol start="4">
<li><strong>Outliers</strong>	Se han identificado valores atpicos clnicamente relevantes, que deben tratarse para evitar impacto negativo en los modelos.</li>
<li><strong>Correlaciones</strong>	Glucose, BMI y Age presentan correlaciones positivas con el diagnstico de diabetes (Outcome).</li>
</ol>
<ul>
<li>Glucose: Presenta la mayor correlacin con la variable objetivo (Outcome) 0.47.</li>
<li>BMI: Correlacin moderada con Outcome 0.29.</li>
<li>Age: Correlacin moderada con Outcome 0.24.</li>
<li>Pregnancies: Relacin moderada con Outcome 0.22.</li>
<li>Insulin: Baja correlacin directa con Outcome, pero posible importancia no lineal.</li>
<li>DPF: Baja correlacin con Outcome, pero relevante clnicamente.</li>
</ul>
<ol start="6">
<li><strong>Comparativa por Clase (Outcome):</strong></li>
</ol>
<ul>
<li>Los pacientes con diabetes tienen valores promedio ms altos en:<ul>
<li>Glucose: Principal marcador de diabetes.</li>
<li>BMI: Relacionado con la obesidad y resistencia a la insulina.</li>
<li>Insulin: Relacionado con la resistencia a la insulina.</li>
<li>Age: Los pacientes diabticos son generalmente mayores.</li>
<li>DPF: Mayor carga gentica en pacientes diabticos.</li>
</ul>
</li>
<li>Estas diferencias son clnicamente relevantes y refuerzan la importancia de las variables.</li>
</ul>
<ol start="7">
<li><strong>Balance de clases</strong>	La variable Outcome est desbalanceada (65% no diabticos, 35% diabticos), lo cual requerir tcnicas de balanceo como SMOTE.</li>
<li><strong>Validacin automtica</strong>	El informe exploratorio automtico coincide con los hallazgos obtenidos manualmente, validando la fiabilidad del anlisis y el enfoque realizado.</li>
</ol>
<p><strong>Prximos pasos: Implicacin para el Preprocesamiento</strong>
A partir de este anlisis, el siguiente paso ser abordar el bloque:</p>
<ul>
<li><strong>3. Prepocesamiento avanzado de Datos</strong>:<ul>
<li>Transformacin de valores 0 a NaN</li>
<li>Tratamiento de valores nulos o incorrectos.</li>
<li>Tratamiento de outliers (con criterio estadstico y clnico).</li>
<li>Anlisis de la distribucin de variables para aplicar transformaciones si es necesario.</li>
<li>Separacin en conjunto de entrenamiento y test antes de transformar.</li>
<li>Escalado y codificacin de variables.</li>
<li>Balanceo de clases</li>
<li>Construccin de un Feature Pipeline.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="3.-Preprocesamiento-avanzado-de-datos"><strong>3. Preprocesamiento avanzado de datos</strong><a class="anchor-link" href="#3.-Preprocesamiento-avanzado-de-datos"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Esquema-de-la-secci%C3%B3n-3.-Procesamiento-de-datos">Esquema de la seccin 3. Procesamiento de datos<a class="anchor-link" href="#Esquema-de-la-secci%C3%B3n-3.-Procesamiento-de-datos"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>3.1 Divisin del dataset:</p>
<ul>
<li>variables predictoras vs objetivo + split train/test</li>
<li>Separacin de X (predictoras) y y (objetivo: Outcome)</li>
<li>Divisin del dataset en X_train y X_test usando train_test_split</li>
<li>Guardado y verificacin de tamaos</li>
</ul>
<p>3.2 Anlisis inicial del conjunto de entrenamiento (X_train)</p>
<ul>
<li>Revisin de estructura, tipos de datos y estadsticas generales</li>
<li>Exploracin de posibles problemas (valores anmalos, skewness, etc.)</li>
<li>Anlisis con describe(), info()</li>
<li>Visualizaciones generales</li>
</ul>
<p>3.3. Preparacin del dataset para imputacin</p>
<p>3.4 Anlisis de valores faltantes y ceros no fisiolgicos</p>
<ul>
<li>Deteccin de ceros como valores invlidos en variables como Glucose, Insulin, BloodPressure, etc.</li>
<li>Sustitucin por NaN en X_train nicamente (sin tocar test)</li>
<li>Visualizacin de missing values con grficas y isnull().sum()</li>
</ul>
<p>3.5 Anlisis clnico y estadstico variable por variable</p>
<ul>
<li>Justificacin clnica por variable (Pregnancies, Glucose, BMI, etc.)</li>
<li>Clculo de outliers con IQR y percentiles</li>
<li>Visualizaciones: Boxplot + Histograma</li>
<li>Decisin preliminar (mantener, imputar, transformar, eliminar) Sin ejecutar imputacin an, solo documentado</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="3.1.-Divisi%C3%B3n-del-dataset"><strong>3.1. Divisin del dataset</strong><a class="anchor-link" href="#3.1.-Divisi%C3%B3n-del-dataset"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.1.1.-Separar-variables-predictoras-vs-objetivo-+-split-train/test"><strong>3.1.1. Separar variables predictoras vs objetivo + split train/test</strong><a class="anchor-link" href="#3.1.1.-Separar-variables-predictoras-vs-objetivo-+-split-train/test"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Seleccionar las muestras para train- validation y test</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">train_test_split</span>

<span class="c1"># Separar X (features) de y (target)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">diabetes_informe</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'Outcome'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="c1">#variables predictoras</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">diabetes_informe</span><span class="p">[</span><span class="s2">"Outcome"</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.1.2.-Divisi%C3%B3n-inicial-train-test-split"><strong>3.1.2. Divisin inicial train-test-split</strong><a class="anchor-link" href="#3.1.2.-Divisi%C3%B3n-inicial-train-test-split"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Divisin inicial: 80% entrenamiento, 20% test</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.20</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">stratify</span><span class="o">=</span><span class="n">y</span><span class="p">)</span> <span class="c1">#Uso stratify=ypara mantener la proporcin de clases para que las clases (0 y 1) estn balanceadas proporcionalmente en ambos conjuntos.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.1.3-Resultado-de-la-divisi%C3%B3n"><strong>3.1.3 Resultado de la divisin</strong><a class="anchor-link" href="#3.1.3-Resultado-de-la-divisi%C3%B3n"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Comprobar dimensiones</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"X_train shape: </span><span class="si">{</span><span class="n">X_train</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"X_test shape: </span><span class="si">{</span><span class="n">X_test</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"y_train distribucin:</span><span class="se">\n</span><span class="si">{</span><span class="n">y_train</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"y_test distribucin:</span><span class="se">\n</span><span class="si">{</span><span class="n">y_test</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.1.4.Conclusi%C3%B3n"><strong>3.1.4.Conclusin</strong><a class="anchor-link" href="#3.1.4.Conclusi%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Antes de comenzar con imputaciones o transformaciones, es fundamental dividir el conjunto de datos para evitar <strong>data leakage</strong> y mantener un conjunto "virgen" para evaluar el modelo.</p>
<p>3.1 Separacin de variables predictoras y objetivo; se separa la variable objetivo (Outcome) del resto de variables predictoras.</p>
<p>3.2 Divisin train_test_split: se realiza una divisin del 80% para entrenamiento y 20% para test, <strong>estratificando por clase</strong> para conservar la proporcin entre personas con y sin diabetes.</p>
<p>3.3 Resultados de la divisin</p>
<ul>
<li>X_train.shape: (614, 8)</li>
<li>X_test.shape: (154, 8)</li>
</ul>
<p>Distribucin en y_train:</p>
<ul>
<li>Clase 0: 65.15%</li>
<li>Clase 1: 34.85%</li>
</ul>
<p>Distribucin en y_test:</p>
<ul>
<li>Clase 0: 64.94%</li>
<li>Clase 1: 35.06%</li>
</ul>
<p>3.4 Guardado de los datos
Se guardan los conjuntos divididos en la carpeta datos_procesados para facilitar su reutilizacin.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.1.5.-Guardado-de-datasets-originales-(X_train,-X_test,-y_train,-y_test)"><strong>3.1.5. Guardado de datasets originales (X_train, X_test, y_train, y_test)</strong><a class="anchor-link" href="#3.1.5.-Guardado-de-datasets-originales-(X_train,-X_test,-y_train,-y_test)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Guardamos el conjunto de datos tras la divisin inicial en entrenamiento y test, sin modificaciones.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Ruta donde guardar los datos tras limpieza</span>
<span class="n">ruta_limpieza</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"original"</span><span class="p">)</span>

<span class="c1"># Obtener fecha y hora actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Guardar datasets procesados con fecha</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"original"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"X_train_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"original"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"X_test_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">y_train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"original"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"y_train_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">y_test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"original"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"y_test_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Datasets de entrenamiento y test guardados correctamente en la carpeta priginal/ con fecha:"</span><span class="p">,</span> <span class="n">fecha_actual</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="3.2.-An%C3%A1lisis-inicial-del-conjunto-de-entrenamiento-(X_train)"><strong>3.2. Anlisis inicial del conjunto de entrenamiento (X_train)</strong><a class="anchor-link" href="#3.2.-An%C3%A1lisis-inicial-del-conjunto-de-entrenamiento-(X_train)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>El propsito de este anlisis es conocer en profundidad las variables del conjunto de entrenamiento, detectar posibles problemas en los datos (valores nulos, outliers, sesgos) y preparar el terreno para una correcta imputacin, limpieza y transformacin posterior, asegurando un flujo profesional de trabajo y evitando el data leakage.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.2.1.-Revisi%C3%B3n-b%C3%A1sica-del-dataset-de-entrenamiento"><strong>3.2.1. Revisin bsica del dataset de entrenamiento</strong><a class="anchor-link" href="#3.2.1.-Revisi%C3%B3n-b%C3%A1sica-del-dataset-de-entrenamiento"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizar las primeras filas del conjunto de entrenamiento</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.2.2.-Estructura-general-del-conjunto-de-entrenamiento"><strong>3.2.2. Estructura general del conjunto de entrenamiento</strong><a class="anchor-link" href="#3.2.2.-Estructura-general-del-conjunto-de-entrenamiento"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Informacin general</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Conclusi%C3%B3n:"><strong>Conclusin:</strong><a class="anchor-link" href="#Conclusi%C3%B3n:"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Observaciones:</p>
<ul>
<li>614 registros,</li>
<li>8 variables predictoras.</li>
</ul>
<p>Tipos de datos:</p>
<ul>
<li>6 variables de tipo entero (int64)</li>
<li>2 variables de tipo flotante (float64)</li>
</ul>
<p>No hay valores nulos explcitos (NaN), pero s hay valores fisiolgicamente imposibles (cero).</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.2.3.-An%C3%A1lisis-estad%C3%ADstico-general-(describe())"><strong>3.2.3. Anlisis estadstico general (describe())</strong><a class="anchor-link" href="#3.2.3.-An%C3%A1lisis-estad%C3%ADstico-general-(describe())"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Estadsticas generales</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Conclusi%C3%B3n:"><strong>Conclusin:</strong><a class="anchor-link" href="#Conclusi%C3%B3n:"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><img alt="image.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAp4AAAHDCAIAAAAC7I1wAAAgAElEQVR4Ae29/68c1X3/339g7NqVNnJqUBwRzFq6EMUCxduUykTFjCoU0gSxbykhxUpGUaOK0OuaRmqFWKduBcpBwVESJ+tGTaQE7EiBSh4ndnFTR6BYBI+B4hjMxY6/jX0dMOaOcXuv2XnnfV+fPD8vnZndu3fv7rmzs8/9Ac6eOV9er8f58jxf5nr/IOWHBEiABEiABEigRAT+oES+0BUSIAESIAESIIGU0s5OQAIkQAIkQAKlIkBpL1Vz0hkSIAESIAES+IMpfkiABEiABEiABEpEwOmuvdVqpWkq/9UBrrBIgARIgARIgAT6RcCptPfLaJZDAiRAAiRAAiTQjoBTacd+vZ01jCcBEiABEiABElggAafSvkBbmZ0ESIAESIAESGBOAk6lnXftc7YHE5AACZAACZDAAgk4lfYF2srsJEACJEACJEACcxJwKu28a5+zPZiABEiABEiABBZIwKm0L9BWZicBEiABEiABEpiTgFNp5137nO3BBCRAAiRAAiSwQAJOpX2BtjI7CZAACZAACZDAnAScSjvv2udsDyYgARIgARIggQUScCrtC7SV2UmABEiABEiABOYk4FTaedc+Z3swAQmQAAmQAAkskIBTaV+grcxOAiRAAiRAAiQwJwGn0s679jnbgwlIgARIgARIYIEEnEr7Am1l9pEiMD09/Tezn+np6azjFy5c2Lp168svv5x9xBgSIAESGHECTqWdd+0j3tvgfhiGnuetXr36xIkTiLx06dL69es9zwvDsNVqPfbYY/fff3+urqdp+tprr11//fU/+MEPkJ0BEiABEiABIeBU2gmdBISASLvnedu3bweTffv2ve9971uyZEkYhohkgARIgARIYL4EnEo779rn2zxlTR+GYaVSueOOO3zfT5IkTdOZmZn77rvvox/9aKVSEWkPgkCeGmNWr17daDQqlcry5cu/853vtFqtKIokZRzH1Wr1gQce2LBhw5IlSz796U8fOXJkw4YNnud9/OMfP336dJqm77777tatWyuVyu+OBG655ZZf/OIXaZpeunTp/vvvX7p0qed5n//8569cuVJW2vSLBEhg1Ag4lfZRg0t/2xEQaf/mN7+5atWqgwcPpml6/Pjxm2666Zvf/GautHuet2XLljfeeOPee++97rrrjh8/bkn72NjY888//53vfGfJkiWrVq3as2fP7t27K5XK1q1bW63W5s2bV65cuWfPnpMnT27cuPEDH/jAkSNHjDFS+6lTpx5//HFZYbQzmPEkQAIkMEQEnEo779qHqGcM1FSR9ueee+6uu+4aHx9vtVrbt2+/6667nnvuuVxpX716tey/JeMLL7xgSfujjz6apqns4L/4xS+2Wq2pqanbb789CILz58+PjY09/PDD4tHRo0evvfbaHTt2bN26deXKlXv37r169epAnWXhJEACJOCYgFNpd+wbqyssAVHoKIp27do1Njb261//ev369Tt27IBgp2mqD+Sr1Wocx2mayiV9GIZIKXJujIG0SzhJEt/3gyCQlE8//bTQQPpLly5t3LjR87xVq1bt3bu3sKxoGAmQAAnMl4BTaedd+3ybp6zpIe3nz5+/+eabP//5z4+NjZ04cQKC3Udpz921P/nkk8L2zTffvPfee8fGxs6fP19W2vSLBEhg1Ag4lfZRg0t/2xGAtKdpumnTJs/z5Fh+ENKevWtfu3bt6dOnH3nkkUOHDr311lsPPPAApb1dSzGeBEhgGAk4lXbetQ9jFxmEzVraDx48iJfpBiHtaZpevnz5wQcfXL58ued5t91227Fjx9I0/drXviYxN9544zPPPDMIN1kmCZAACSwKAafSvigeslISIAESIAESGCkCTqWdd+0j1bfoLAmQAAmQwKIQcCrti+IhKyUBEiABEiCBkSLgVNp51z5SfYvOkgAJkAAJLAoBp9K+KB6yUhIgARIgARIYKQJOpZ137SPVt+gsCZAACZDAohBwKu2L4iErJQESIAESIIGRIuBU2rlrH6m+RWdJgARIgAQWhYBTaV8UD1kpCZAACZAACYwUAafSzjfkR6pv0VkSIAESIIFFIeBU2hfFQ1ZKAiRAAiRAAiNFwKm08659pPoWnSUBEiABElgUAk6lfU4PL1y4sHXr1pdffjk3pTEGv9utE+CHvXUkwySgCeBn2nUkw0Ug8Ktf/erDH/7wr371q1xjOs8JuVkWGNlunum5WP1jSD0XssCMGmPuhKl/mWmBdXWZXQ/JMAy/8Y1vTE9Pd5mXyeYkMBBp37Vr19KlS/fv34/qX3nllWuuuebb3/52mqbYuyOAZK+99tr111//gx/8ADE60G7I5fZUnZFhEtDziBsaMzMzX/7yl//mb/5menr6N7/5zYYNGzzPW7ly5Y9+9KP33nvvscce+8QnPpEkiRtj3NdijPE8b/369ZcuXULtJ06cWL16daVSiaJIIicnJ2+//faf/vSnSGMFOs8JVuK+fG03z/Rc+AKl/fDhwx2WPl1apTHmTphupP03v/nNHXfc8bOf/SxNUz0kv/KVr9x6661vvvlml+4g2cmTJ9etW7d7927EMCAEBiLtZ86cWbNmzaZNm0B5+/bt11577dGjRxHTQ6DdkMvtqT2UzywlJqDnETdu7t+/f2xsbGJiIkkS3/f/4i/+4vXXX9+yZUulUjl48OCbb765fv36ZrPpxhj3tYi0L1myZN++fah9+/bty5cvv+aaayDteFScQLt5pmcLFyLt77777t13371ly5bsRqhne3InTDfSrmvp15B84okn1q1bNzk52TOQUmYciLS3Wq3x8fGbb775t7/9bZqm77777l133fWZz3zmv//7v2+77TZv9rNx48ZLly5J637uc5+78cYbfd9/9tlnK5VKGIYzMzOPPPLIypUrPc9btWrV3r170zQ1xqxevbrZbL7//e9funTpQw89JAc46KlXr17dvn17pVLxPO/ee+89d+5cKdusBE69/PLLf/Znf+Z53vLly3/0ox+lafqb3/zm7rvv9jxv6dKln/vc56TtrGQyLxhjJO+GDRtOnz6dpmluu09PTz/++OPShT7+8Y//+te/rlarmzZt+sQnPuF53sc+9rGTJ09K3u9973urVq3yPO/666//8Y9/3Gq1pqen//mf/1k60oYNG9588813331369atEnPLLbf84he/SNM0mwxNMzMzc99998nqdv/+/ZVK5bnnnkvTVFa9Dz/8cJqm27dvtza1yF6CgDHmuuuuu/XWW7/4xS+KLF26dGn9+vV//ud/Lrv27Bg/ffr02rVr77vvvpmZmfPnz69du3bz5s2HDh2SOUHmigceeGDDhg1Lliz59Kc/feTIETkL+fjHPy49IbeZLl26dP/99y9dutTzvM9//vNXrlzReF944YW1a9d6nrd27VppVi3t1tMdO3asXLnylVdeSdN0ZmbmM5/5zF133XX48GFrWkvT9NKlSxs3bpTp66//+q9xUHH48GH0/AcffPDy5ctpmj7zzDM33nijHOo8++yz2ryDBw+uWbNGNkVBEKxfv/6rX/3q8uXLK5XKd7/7XQHb/dgJwzBN0yAIbr/99kceeUSXo0UXh0yrVq2SEdGZYdYpWc4GQSC+CNJ9+/bJCPI8r1qtvvjii9Vq1RgjJvm+L4dYFnN5WqvV/vIv/3LFihXPP/+8NTbPnz9/880379q1S3NjeCDSnqbpvn37li9fLmfyr7zyyrXXXrtr164oiv793//9rbfe+tGPfrRkyZIdO3bIcP3whz88MTGRpim61+XLl3/wgx+88cYbp06duv3222WVIPuAIAhOnjy5Y8eOZcuW/du//ZvuFs1m85prrtm7d+/JkyfXr18vcwTbuGgEZNh/6lOfOnv27C9/+csnn3xycnLylltu2bBhw9GjR59//vmxsbG77777woULvu/rZNI91q5d+/zsZ2xsTJo42+7T09OPPfbYsmXLvvWtb0lvefnll6vV6sqVK3/+85/v3r27UqmI7jabzWXLlu3YseP06dNbtmxZtmzZ/v37JcFTTz114cKFxx9//Ny5c5s3b165cuWePXtOnjy5cePGD3zgA0eOHLGSnT9/HqjPnDkzNjYmS9IdO3asXr1atEdPeVEUrVmz5qWXXkKuMgVkNv/6179erVZPnDiRpulzzz33kY985Bvf+IboXO4Yf+KJJ+RUwxhz0003nTp1CnOCzBVjY2PPP//8d77znSVLlqxatWrPnj3SClu3bm21WrnNZIxZtWrVwYMHT5069fjjj+tLkCNHjnzwgx/csmXLb3/720ajsXr16hMnTkDas0/3799/7bXX7tixI03T48ePX3fddU8++WQURU8//bSe1rQlR48e3bBhg7h85MiRD3zgAxs3bjx58uSePXtWrly5efPm06dPr1mz5u/+7u8uXLjw1FNPHThwQHcDY8ydd94pK4AgCJYsWfJP//RPJ0+exPHPvMYOpF2Xs2zZsgMHDoCzFLhx48YLFy7867/+64oVKw4ePNiZYdapqakp3/ctaT958uQzzzxTqVR++MMfTk5Onj59OivtWeYnTpwIgmDp0qWyyMgOular9cUvfvFLX/qS5sbwoKT9t7/97c033yy7E2PMmjVrzp49K2vMVqslo9QYIwFJpqVdNwxGmuwDjh8/nqbp1NTU7bffLl1Hdu0XLly48847sUUwxoyNjenZVpfJ8CISkN3bhg0bZMZP03Tv3r1/9Ed/JPvaNE137Nhx7bXX/upXv1q/fr1OJrPP008/LcY/+uij1Wr1jTfeyLb70aNHb7755n/8x3/EMabuaaKvGzduTJLkzjvv/MxnPjMzM5OmqXTaTZs27dq1a9myZd/73vfkWOj8+fNjY2PopUePHpX53UqmkUZRVK1W5dgZHThNUy3tYpLMtjpvOcLi9Ysvvrh27drt27fLSd7vDvNkarYO5IFIzp//9E//dM2aNU888YSeEwTXo48+imtaGeyYCto109atW1euXLl3796rV69abLdt27ZmzZozZ85IRStWrNi7dy+MyT7ds2fPZ2Y/MzMzu3btwqpFihULjTGWJU8//bRI+7Zt26677jqZwX7XGTZt2nTzzTcfPnx49erVGzduzL1pDmY/Ur7stqemptI0PX369OrVq40x8xo7kPZbb7314sWLuhxI+969e1esWCENJB5t27atM8OsUydPnsxKexzHqAWNaO3as8z37t0bBAEMzh10xhhs+q0mHtmvg5L2NE0ffvjhW2+99dSpU77vj4+Pt1qt06dP/+3f/u2NN964fPlyz/Mg7dK6ehhfvXr1qaeeWr9+vZyUyovxGHLWFCnSPjExUa1W5bRf/pv7Ov3ItnShHJcZ3/M8OVSXqxbZ16ZpirtJK5meF+SCBsd6Vrv/53/+54oVK7AIsOYR0Vff96XPiFroTvU7RX/ooYeWLl0qx55yJozSMINbybCMkJ6spT131y7llFva4zjeunXr705fXn755bGxsf3796Nxc8d4mqY/+9nPlixZctttt8n7d2h0YM9tzSAIJGW2mfTZuJyjYCwEQaB7jud5YRhinsl9+uSTT1533XXHjh27b/YzMzMj09rY2BimtZdeekl3P7istRkdOI7jvXv3ykQn15QwT44ksffFzaMm0MPYyS0HnOVwVGMxxnRmePvtt8uCA05NTEz0Ju25zLXBuYOO0q77jIQHKO0HDx689tprt23bds011+zbt+/tt99ev379Zz/72dOzHzmK0cNVS/uuXbtWrFixe/fuJEkw0nQnvnjx4q233iqHMNLwk5OTWENk/WRM0Qi0Wq3Dhw9Xq9UvfelL2Z0H9gE6mTV3P/zww2NjY8ePH8+2u/Qr7LP1VAgJ931fTnqsXTty/e4U9KGHHlqxYsXPf/7z7K79ySefFKRIpo/W9a5deydXyLKWHRFpf+WVV6rV6n333ScvFkDncse47Nr/5E/+5JprrhGRhuTouUKHcRBi7ZXlcAXN9Oabb957773WSZ4xZu3atdbZnp5wsk9PnDhRrVa3b98+Nja2e/duOYK699579bQmW2osGTvs2rEZvXr16k9/+tNKpbJt2zY9VNvt2uU6YNu2bbp3yYlXh7GDXTvEGOWAcxiGeJ9AW5KmaS7D7FHErbfeeubMGd/3N27cKOvdTZs2yUYLtVhDEuKd2yJ4CnusQUdpBxkEBijt0unf9773SfeVgfeFL3zh9OnTO3bsWLJkSYdd+7Zt2yqVyv79++WmCrt2z/O2bNkiV01yLarv2o0xcpETx/GBAweeeuop+MlAcQicP3++0WicO3fu1VdfveWWW770pS9l7wu//OUvnzlzxkom84JcyeOqstVqZdtd/vBMOsPJkye/9a1vyV27aCp27UmSWHft11xzzeHDh7///e/v3bt3amrq61//+ooVK1588UXrEnft2rWnT5+2kmlpl3tE2SOKd3fffbe8If/BD37wyJEjaZq+9NJLY2NjOldx2mjhlkAgr1y58qlPfcrzvO3bt+sjmdwx/sQTT3zwgx985ZVXNm/efMstt0xOTkIMtJzrMKRd33DLKxHSTI888sihQ4feeuutBx54wJL2KIpWrFjxwAMPnDx58vXXX9++ffvly5dhee5TeUHy+uuvX7du3fnZz9jYGKa1pUuXGmOuXLnyf/7P//nQhz60d+/e559/fu3atbl37ddcc83jjz/+0ksvbdu27a233vrlL3+5cuVKS9offfRRfde+dOnSHTt26Bc+5jV2IO3ZcsD51KlTN9100z333HP06NGTJ09u3759cnKyA0PrBQJxSu6/5dWWPXv2rFq1SuZwWW/9wz/8w9tvv60bEeKdyxxP0zTNHXRfmv0svNOWqYQBSrsczniet3XrVvlz9u9+97uVSmXZsmUPPfSQXBTp1tW79tOnT+Pd1wceeADSvnr16r//+7/HSaksCdHw77777kMPPSTHYtdff73+w/oytdmw+/L2229/8pOflBO/u+++W87hjx07Ji2+dOnSzZs3X758OZtMZp+HH374+uuv9zwPp5e57X758uXNmzfLe9Gf/exnX3vtNbyzo6Vdv0iPd6R//OMf468zvv/977darcuXLz/44IPStW677bZjx46laZpNhqYRAcABAG4WUMUovCEvwzZNU30tjV17dowfPHjwQx/60ObNm1utlgjGli1brDfk9YGHXqjJqXVuM33ta1+ThrvxxhufeeYZtJFMSnv27JHutHz58q9+9aszMzOQ9larlX0q7nieJ5eMrVZLprXly5djWpM7bOnPH/3oRx999FGR9jRNf/GLX9xyyy2e51Uqlccff3x6evqNN9742Mc+Jn8bcv/99+t/BiBN04MHD950001yPS9vyH/hC1/QfzeUpmn3YwfSvn79eqscSHuapi+88IIYuXTp0iAIkiTpwDDXqTRNX3/99Y9+9KOe533yk5988MEHpTNMT0+Pj497njc2NqZX25jDc5njae6g4xvyuksjPFhpRzUMkMDCCejZZ+GlDbqE/fv333jjjXhV0Kqu9H/XbvnLr70RkBsK2R1pheuttFLm4t+15zarU2nX7xnlWsNIEuhAYLikfXp6+m9mP/Kavfar1WqV/l+j0/4yvBAC+Id4Ke1ZjPzX6LJMJMaptLczgvEk0A2B4ZL2bjxiGhLongClvXtWTOlU2mXXjr07AmwGEiABEiABEiCBfhFwKu39MprlkAAJkAAJkAAJtCPgVNq5TW/XDIwnARIgARIggX4RcCrt/TKa5ZAACZAACZAACbQj4FTaedferhkYTwIkQAIkQAL9IuBU2vtlNMshARIgARIgARJoR8CptPOuvV0zMJ4ESIAESIAE+kXAqbT3y2iWQwIkQAIkQAIk0I6AU2nnXXu7ZmA8CZAACZAACfSLgFNp75fRLIcESIAESIAESKAdAafSzrv2ds3AeBIgARIgARLoF4GBSPur/JAACZAACZAACSwSgYFIe7t1B+/a25FhPAmQAAmQAAn0i4BTae+X0SyHBEiABEiABEigHQGn0s679nbNwHgSIAESIAES6BcBp9LeL6NZDgmQAAmQAAmQQDsCTqWdd+3tmoHxJEACJEACJNAvAk6lvV9GsxwSIAESIAESIIF2BJxKO+/a2zUD40mABEiABEigXwScSnu/jGY5JEACJEACJEAC7Qg4lXbetbdrBsaTAAmQAAmQQL8IOJX2fhnNckiABEiABEiABNoRcCrtvGtv1wyMJwESIAESIIF+EXAq7f0ymuWQAAmQAAmQAAm0I+BU2nnX3q4ZGE8CJEACJEAC/SLgVNr7ZTTLIQESIAESIAESaEfAqbTzrr1dMzCeBEiABEiABPpFwKm0p2ka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p9LOu/Zh6Ra0kwRIgARIYHgJOJX24cVEy0mABEiABEhgWAg4lXbetQ9Lt6CdJEACJEACw0vAqbQPLyZaTgIkQAIkQALDQsCptPOufVi6Be0kARIgARIYXgJOpX14MdFyEiABEiABEhgWAk6lnXftw9ItaCcJkAAJkMDwEnAq7cOLiZaTAAmQAAmQwLAQcCrt3dy1txbwGRbotJMESIAESIAEBkfAqbS3c0PU/OrVqxcvXjx79uzx48ePHTv2atefY8eOHT9+/OzZsxcvXrx69aqU1q4uxpMACZAACZBAuQk4lfbsXbvI8PT09Pnz51999dVTp05dvHjxypUrMzMz3XOfmZm5cuXKxYsXT5069eqrr54/f356epoC3z1ApiQBEiABEigTAafSrsGJ9LZarYsXL77++uuTk5PzknNdlA7PzMycP3/+9ddfv3jxIqrQCRgmARKGy6xGAAACsElEQVQgARIggXITcCrtsmt/7733RHTfe++9ycnJiYmJ6enp/lL+3//934mJicnJSah79sCgvzWyNBIgARIgARIoCAGn0p6mqdbaycnJ48eP92WznqU5MzNz/PhxqnuWDGNIgARIgATKTcCptGO/jnP4Aem6tNnMzMyxY8f0yTz37uXuzfSOBEiABEggTVNH0q43661Wa3p6+tixY5cvXx50G1y+fPnYsWN4qw5mDLpelk8CJEACJEACi0XAqbTLrv3q1avnzp2L49iNz2fPnj137pw+MODe3Q151kICJEACJLAoBFxIO/bKrVbrvffem5mZee211wZ6FK9Rojqqu8bCMAmQAAmQQFkJDFzata5fvXr1vffee+utt86ePdsl0BMnTnz5y1++8847X375Zcly+PDhv/qrv7rnnnvOnDnTZSFnzpx566233pv9aHu6zM5kJEACJEACJDBEBJxKu4jrmTNn3n777W4YJUly3XXXebOfP/7jPz4++6lUKhJTrVYvXbrUTTlvv/32mTNnpHZKezfEmIYESIAESGB4CQxW2rWOvvfee1dnP2+88cb//M//dIPsv/7rv0TF5b//8i//smPHDh2za9eubsq5cuXKG2+8IWcGPJbvhhjTkAAJkAAJDC8BR9IuO2ZR92PHjl29erUbZHEcL1++HFq+adOmF154AV89z/v2t7/dTTnyV3CQdq3u3WRnGhIgARIgARIYIgIDlHZryy4v0M3MzLz66qvdAwrD8CMf+Ygcwn/jG99I03T79u0f+tCHJOanP/1pl0W9+uqrMzMzUHdtW5clMBkJkAAJkAAJDAUBF9IuW3Y5jZe/aO9y1w6CzWbzD//wD0+cOIGYr3zlK+9///vfffddxHQIyK59enpabLAu3Ttk5CMSIAESIAESGDoC/xc7TK6kaqySPQAAAABJRU5ErkJggg=="/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Conclusin</strong>:</p>
<p>Variables como Glucose, BloodPressure, SkinThickness, Insulin y BMI contienen valores cero que deben ser tratados como datos faltantes, ya que no tienen sentido clnico. Adems, existen outliers que debern ser evaluados con criterio clnico y estadstico (por ejemplo, valores extremos en Insulin y DPF).</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.2.4-Distribuci%C3%B3n-de-las-variables-(histogramas)"><strong>3.2.4 Distribucin de las variables (histogramas)</strong><a class="anchor-link" href="#3.2.4-Distribuci%C3%B3n-de-las-variables-(histogramas)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Histograma</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Distribucin de las variables (X_train)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Conclusi%C3%B3n:"><strong>Conclusin:</strong><a class="anchor-link" href="#Conclusi%C3%B3n:"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Conclusin</strong>:</p>
<p>Se han generado histogramas para todas las variables del conjunto X_train. A continuacin, un resumen de las observaciones:</p>
<ul>
<li>Pregnancies: Sesgada a la derecha. La mayora de pacientes tiene entre 0 y 5 embarazos.</li>
<li>Glucose: Distribucin tipo normal con picos en 0. Los ceros deben tratarse como NaN.</li>
<li>BloodPressure: Distribucin centrada, pero con ceros no fisiolgicos.</li>
<li>SkinThickness: Distribucin sesgada con un gran pico en 0. Muchos valores faltantes mal codificados.</li>
<li>Insulin: Distribucin extremadamente sesgada con muchos ceros y valores muy elevados (outliers).</li>
<li>BMI: Forma similar a una normal, pero tambin presenta ceros.</li>
<li>DPF: Sesgo a la derecha, varios valores muy altos.</li>
<li>Age: Sesgo a la derecha. Rango razonable entre 21 y 81 aos.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.2.5-Visualizaci%C3%B3n-de-outliers-(Boxplots)"><strong>3.2.5 Visualizacin de outliers (Boxplots)</strong><a class="anchor-link" href="#3.2.5-Visualizaci%C3%B3n-de-outliers-(Boxplots)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Boxplots para detectar outliers</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Boxplots de las variables (X_train)"</span><span class="p">)</span>

<span class="n">columnas</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">columns</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">columnas</span><span class="p">):</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">X_train</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"skyblue"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Conclusiones"><strong>Conclusiones</strong><a class="anchor-link" href="#Conclusiones"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>A travs de boxplots individuales por variable se identifican:</p>
<ul>
<li>Valores atpicos en todas las variables, especialmente en:<ul>
<li>Insulin: Valores extremos superiores (hasta 744).</li>
<li>DPF: Varios valores por encima de 2.</li>
</ul>
</li>
<li>SkinThickness y BMI: Muestran una gran concentracin de valores cercanos al mnimo y algunos outliers superiores.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.2.6-Valores-sospechosos-nulos-e-igual-a-cero"><strong>3.2.6 Valores sospechosos nulos e igual a cero</strong><a class="anchor-link" href="#3.2.6-Valores-sospechosos-nulos-e-igual-a-cero"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Verificar valores nulos</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="p">(</span><span class="n">X_train</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Interpretacin</strong>: Estas variables deben ser transformadas para sustituir los valores 0 por NaN antes de aplicar imputacin.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.2.7-Conclusi%C3%B3n-y-pr%C3%B3ximos-paso"><strong>3.2.7 Conclusin y prximos paso</strong><a class="anchor-link" href="#3.2.7-Conclusi%C3%B3n-y-pr%C3%B3ximos-paso"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisiones preliminares:</strong></p>
<ul>
<li>Reemplazar valores 0 en las variables clnicas indicadas por np.nan.</li>
<li>Analizar y decidir cmo tratar los outliers:<ul>
<li>Excluir?</li>
<li>Imputar?</li>
<li>Transformar con log o PowerTransformer?</li>
</ul>
</li>
<li>Mantener las variables como estn si los valores extremos son clnicamente posibles (como embarazos o edad alta).</li>
<li>Documentar cada decisin con base en estadsticas, visualizacin y justificacin clnica.</li>
</ul>
<p><strong>Siguiente paso</strong>: Aplicar la transformacin de ceros a NaN, imputar valores faltantes con la mediana (o mtodos ms avanzados), y preparar el Feature Pipeline.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="3.3.-Preparaci%C3%B3n-del-dataset-para-imputaci%C3%B3n-y-tratamiento-de-outliers"><strong>3.3. Preparacin del dataset para imputacin y tratamiento de outliers</strong><a class="anchor-link" href="#3.3.-Preparaci%C3%B3n-del-dataset-para-imputaci%C3%B3n-y-tratamiento-de-outliers"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Para evitar modificar el conjunto original, se crea una copia de X_train llamada X_train_procesado. Este ser el dataset sobre el que se realizarn las transformaciones necesarias.</p>
<p>Se ha guardado una copia del dataset procesado como X_train_procesado.csv para mantener trazabilidad.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.3.1-Crear,-preparar-y-verificar-copia-del-conjunto-de-datos-de-entrenamiento"><strong>3.3.1 Crear, preparar y verificar copia del conjunto de datos de entrenamiento</strong><a class="anchor-link" href="#3.3.1-Crear,-preparar-y-verificar-copia-del-conjunto-de-datos-de-entrenamiento"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear copia segura del conjunto de entrenamiento antes de imputaciones</span>
<span class="n">X_train_procesado</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">X_train_procesado</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="3.4.-Justificaci%C3%B3n,-reemplazo-y-an%C3%A1lisis-de-valores-faltantes-y-ceros-no-fisiol%C3%B3gicos-en-X_train_procesado"><strong>3.4. Justificacin, reemplazo y anlisis de valores faltantes y ceros no fisiolgicos en X_train_procesado</strong><a class="anchor-link" href="#3.4.-Justificaci%C3%B3n,-reemplazo-y-an%C3%A1lisis-de-valores-faltantes-y-ceros-no-fisiol%C3%B3gicos-en-X_train_procesado"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.4.1.-Justificaci%C3%B3n-cl%C3%ADnica-y-t%C3%A9cnica-del-reemplazo-de-ceros-antes-del-an%C3%A1lisis-de-outliers"><strong>3.4.1. Justificacin clnica y tcnica del reemplazo de ceros antes del anlisis de outliers</strong><a class="anchor-link" href="#3.4.1.-Justificaci%C3%B3n-cl%C3%ADnica-y-t%C3%A9cnica-del-reemplazo-de-ceros-antes-del-an%C3%A1lisis-de-outliers"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Justificacin clnica</strong></p>
<p>Antes de realizar el anlisis de valores atpicos (outliers) mediante mtodos estadsticos como el rango intercuartlico (IQR), se ha decidido reemplazar los valores <strong>cero no fisiolgicamente vlidos</strong> por <code>NaN</code> en las siguientes variables clnicas:</p>
<ul>
<li><strong>Glucose</strong></li>
<li><strong>BloodPressure</strong></li>
<li><strong>SkinThickness</strong></li>
<li><strong>Insulin</strong></li>
<li><strong>BMI</strong></li>
</ul>
<p><strong>Justificacin clnica</strong></p>
<p>Desde el punto de vista mdico, un valor cero en estas variables no representa una medicin realista ni fisiolgicamente posible. Por ejemplo:</p>
<ul>
<li>Un nivel de <strong>glucosa en sangre igual a 0</strong> es incompatible con la vida.</li>
<li>Un valor de <strong>insulina o grosor de piel (SkinThickness) igual a 0</strong> no tiene sentido clnico.</li>
<li>Un <strong>IMC igual a 0</strong> implicara un peso corporal nulo, lo cual es imposible.</li>
</ul>
<p><strong>Justificacin estadstica</strong></p>
<p>Desde el punto de vista estadstico, mantener estos ceros artificiales habra distorsionado severamente los clculos de:</p>
<ul>
<li>Percentiles (Q1, Q3)</li>
<li>Rango intercuartlico (IQR)</li>
<li>Media y desviacin estndar</li>
<li>Identificacin de outliers</li>
</ul>
<p>Por esta razn, se ha aplicado primero una transformacin de ceros a <code>NaN</code> para aislar los datos errneos y garantizar que los clculos posteriores se realicen <strong>de forma ms fiable y clnicamente coherente</strong>.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.4.2.-Identificaci%C3%B1on-y-reemplazo-de-ceros-no-fisiol%C3%B3gicos-por-NaN"><strong>3.4.2. Identificacion y reemplazo de ceros no fisiolgicos por NaN</strong><a class="anchor-link" href="#3.4.2.-Identificaci%C3%B1on-y-reemplazo-de-ceros-no-fisiol%C3%B3gicos-por-NaN"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Se han reemplado por NaN los valores 0 de variables clnicas que no pueden tener valor cero desde el punto de vista mdico: Glucose, BloodPressure, SkinThickness, Insulin, BMI</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Columnas con ceros no fisiolgicamente vlidos</span>
<span class="n">columnas_con_ceros_invalidos</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Glucose'</span><span class="p">,</span> <span class="s1">'BloodPressure'</span><span class="p">,</span> <span class="s1">'SkinThickness'</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">]</span>

<span class="c1"># Sustituir ceros por NaN</span>
<span class="n">X_train_procesado</span><span class="p">[</span><span class="n">columnas_con_ceros_invalidos</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_train_procesado</span><span class="p">[</span><span class="n">columnas_con_ceros_invalidos</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.4.3.-Guardado-el-dataset-X_train_procesado-tras-transformaci%C3%B3n-de-valores-0-a-NaN"><strong>3.4.3. Guardado el dataset X_train_procesado tras transformacin de valores 0 a NaN</strong><a class="anchor-link" href="#3.4.3.-Guardado-el-dataset-X_train_procesado-tras-transformaci%C3%B3n-de-valores-0-a-NaN"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Guardamos la versin de X_train tras la transformacin de ceros incoherentes en valores nulos (NaN), antes de la imputacin de datos.(X_train_procesado)</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Guardar dataset X_train_procesado</span>
<span class="c1"># Ruta de la subcarpeta imputado</span>
<span class="n">ruta_imputado</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"limpieza"</span><span class="p">)</span>

<span class="c1"># Fecha actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Guardar el dataset modificado</span>
<span class="n">X_train_procesado</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"limpieza"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"X_train_procesado_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" X_train_procesado (con ceros no fisiolgicos transformados a NaN) guardado en carpeta limpieza/ con fecha </span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.4.4.-Revisi%C3%B3n-de-valores-nulos-tras-transformaci%C3%B3n"><strong>3.4.4. Revisin de valores nulos tras transformacin</strong><a class="anchor-link" href="#3.4.4.-Revisi%C3%B3n-de-valores-nulos-tras-transformaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Se  han reemplado por NaN los valores 0 de variables clnicas que no pueden tener valor cero desde el punto de vista mdico: Glucose, BloodPressure, SkinThickness, Insulin, BMI</p>
<p>El siguiente grfico de calor confirma que las variables seleccionadas contienen ahora valores nulos, mientras que el resto permanece intacto.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Verificar que los cambios se han realizado</span>
<span class="n">X_train_procesado</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.4.5.-Visualizaci%C3%B3n-de-valores-nulos-mediante-un-mapa-de-calor"><strong>3.4.5. Visualizacin de valores nulos mediante un mapa de calor</strong><a class="anchor-link" href="#3.4.5.-Visualizaci%C3%B3n-de-valores-nulos-mediante-un-mapa-de-calor"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Interpretacin visual:</strong></p>
<ul>
<li>Fondo negro:  indica valores no nulos (no hay NaN)</li>
<li>Rayas claras verticales (amarillo claro o blanco) indican valores nulos (hay NaN) en esas columnas.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>El mapa de calor de valores nulos muestra que, tras reemplazar los valores cero por NaN en las variables clnicas, se han generado correctamente valores nulos en las columnas correspondientes:</p>
<ul>
<li>SkinThickness, Insulin y BloodPressure presentan una gran cantidad de nulos.</li>
<li>Glucose y BMI tienen pocos valores nulos.</li>
<li>Las columnas que no deben contener nulos (Pregnancies, Age, DPF) aparecen completamente negras, confirmando que se mantienen sin modificar.</li>
</ul>
<p>Esta visualizacin sirve como validacin de que el reemplazo se aplic correctamente y solo a las variables clnicas afectadas por ceros no fisiolgicos.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'magma'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Mapa de calor de valores nulos (X_train_procesado)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Se han reemplado por NaN los valores 0 de variables clnicas que no pueden tener valor cero desde el punto de vista mdico: Glucose, BloodPressure, SkinThickness, Insulin, BMI</p>
<p>El siguiente grfico de calor confirma que las variables seleccionadas contienen ahora valores nulos, mientras que el resto permanece intacto.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="3.5-An%C3%A1lisis-univariante:-cl%C3%ADnico,-estad%C3%ADstico-y-tratamiento-de-valores-extremos-(Outliers)"><strong>3.5 Anlisis univariante: clnico, estadstico y tratamiento de valores extremos (Outliers)</strong><a class="anchor-link" href="#3.5-An%C3%A1lisis-univariante:-cl%C3%ADnico,-estad%C3%ADstico-y-tratamiento-de-valores-extremos-(Outliers)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo:"><strong>Objetivo</strong>:<a class="anchor-link" href="#Objetivo:"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Identificar valores atpicos que puedan alterar el rendimiento de los modelos. Para ello aplicaremos:</p>
<ul>
<li>Criterio clnico (sentido mdico, evidencia y lgico)</li>
<li>Criterio estadstico (IQR).</li>
<li>Anlisis visual con boxplots e histogramas e interpretacin paso a paso.</li>
</ul>
<ol>
<li>Boxplot (diagrama de caja)
Te permite ver rpidamente los valores fuera del rango IQR, es decir, los posibles outliers estadsticos.
Ideal para detectar valores atpicos en variables numricas.</li>
<li>Histograma + KDE (densidad): Permite ver la distribucin general de la variable. Ayuda a identificar asimetra (skewness), acumulaciones de valores, gaps o colas largas que justifican transformaciones como log o PowerTransformer.
Si hay outliers muy extremos, se visualizarn alejados a la derecha o izquierda.</li>
</ol>
<ul>
<li>Anlisis visual multivariable (dispersin): Se tratar en un bloque aparte. <strong>Punto 4</strong>.</li>
</ul>
<ol start="3">
<li>Grfico de dispersin: Es til para:</li>
</ol>
<ul>
<li>Observar la relacin entre variables, como por ejemplo si un mayor BMI va acompaado de mayor SkinThicknes.</li>
<li>Detectar patrones de dispersin o concentracin, como acumulaciones extraas o puntos fuera del grupo (outliers multivariados).</li>
<li>Diferencias por clase (hue=outcome) si las personas con diabetes tienden a agruparse en zonas del grfico</li>
<li>Valores atpicos combinados: Identificar posibles errores por cruzamiento clnico: valores de glucosa altos sin insulina alta, etc.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Esquema-para-cada-variable"><strong>Esquema para cada variable</strong><a class="anchor-link" href="#Esquema-para-cada-variable"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">analizar_variable</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span> <span class="n">variable</span><span class="p">):</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Anlisis estadstico de la variable: </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="c1"># 1. Crear copia segura del DataFrame</span>
    <span class="n">df_var</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># 2. Clculos estadsticos</span>
    <span class="n">Q1</span> <span class="o">=</span> <span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">Q3</span> <span class="o">=</span> <span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
    <span class="n">IQR</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">-</span> <span class="n">Q1</span>

    <span class="n">limite_superior</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>
    <span class="n">limite_inferior</span> <span class="o">=</span> <span class="n">Q1</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>

    <span class="n">percentil_95</span> <span class="o">=</span> <span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">percentil_99</span> <span class="o">=</span> <span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.99</span><span class="p">)</span>
    <span class="n">percentil_01</span> <span class="o">=</span> <span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">percentil_05</span> <span class="o">=</span> <span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Q1: </span><span class="si">{</span><span class="n">Q1</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Q3: </span><span class="si">{</span><span class="n">Q3</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"IQR: </span><span class="si">{</span><span class="n">IQR</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Lmite inferior (IQR): </span><span class="si">{</span><span class="n">limite_inferior</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Lmite superior (IQR): </span><span class="si">{</span><span class="n">limite_superior</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Percentil 95: </span><span class="si">{</span><span class="n">percentil_95</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Percentil 99: </span><span class="si">{</span><span class="n">percentil_99</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Percentil 01: </span><span class="si">{</span><span class="n">percentil_01</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Percentil 05: </span><span class="si">{</span><span class="n">percentil_05</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="c1"># 3. Valores extremos</span>
    <span class="n">outliers</span> <span class="o">=</span> <span class="n">df_var</span><span class="p">[</span><span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">limite_superior</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Nmero de outliers por encima del lmite IQR: </span><span class="si">{</span><span class="n">outliers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">outliers</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">())</span>

    <span class="c1"># 4. Visualizaciones</span>
    <span class="c1"># Boxplot</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Boxplot de la variable </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># Histogramas</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df_var</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Distribucin de la variable </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Frecuencia"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.1-Variable:-Pregnancies-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.1 Variable: Pregnancies  Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.1-Variable:-Pregnancies-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica e interpretacin de los resultados</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong></p>
<p>La variable representa el nmero de embarazos previos. Aunque valores elevados son poco frecuentes, no son imposibles, especialmente en poblaciones de alta natalidad como la comunidad Pima. El valor extremo debe evaluarse ms desde una perspectiva de representatividad del modelo que de error clnico.</p>
<p><strong>2. Anlisis clnico y estadstico (X_train_procesado)</strong></p>
<ul>
<li>Rango observado: 0 - 17</li>
<li>Q1: 1.0</li>
<li>Q3: 6.0</li>
<li>IQR: 5.0</li>
<li>mite inferior (IQR): -6.5 (no relevante aqu, mnimo es 0)</li>
<li>Lmite superior (IQR): 13.5</li>
<li>Percentil 95: 10.0</li>
<li>Percentil 99: 13.0</li>
<li>N de outliers por encima del lmite IQR: 2</li>
</ul>
<p><strong>3. Anlisis visual</strong></p>
<ul>
<li>Boxplot</li>
<li>Muestra dos puntos claramente por encima de 13.5, considerados outliers.</li>
<li>La mayora de los valores estn por debajo de 10.</li>
<li>Histograma</li>
<li>Distribucin asimtrica a la derecha, como es esperable en eventos contables (muchas mujeres con pocos embarazos y pocas con muchos).</li>
<li>Presencia de valores extremos (14) poco frecuentes pero posibles.</li>
</ul>
<p><strong>4. Interpretacin y decisin</strong></p>
<ul>
<li>Valores 14 y 17: No son errores, pero s extremos.</li>
<li>Representan casos raros de embarazos mltiples, clnicamente vlidos.</li>
</ul>
<p><strong>Decisin provisional:</strong></p>
<ul>
<li>Mantener los valores.</li>
<li>No imputar ni eliminar a menos que afecten claramente al modelo.</li>
<li>Alternativamente, se puede etiquetar como extremo clnico si se observa distorsin en la prediccin.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'Pregnancies'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.2-Variable:-Glucose-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.2 Variable: Glucose  Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.2-Variable:-Glucose-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica e interpretacion de los resultados</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Anlisis clnico:</strong></p>
<p>La glucosa plasmtica es un marcador clave en el diagnstico y monitoreo de la diabetes. Segn la evidencia clnica:</p>
<ul>
<li>En ayunas:<ul>
<li>Normal: 70  99 mg/dL</li>
<li>Prediabetes: 100  125 mg/dL</li>
<li>Diabetes:  126 mg/dL</li>
</ul>
</li>
<li>A las 2h post carga oral (OGTT):<ul>
<li>Normal: &lt; 140 mg/dL</li>
<li>Intolerancia: 140  199 mg/dL</li>
<li>Diabetes:  200 mg/dL</li>
</ul>
</li>
</ul>
<p>En el dataset indica que los valores son tras 2 horas de carga oral de glucosa.Sin embargo, los valores detallados, no muestran con claridad si las mediciones fueron en ayunas o post carga. Se observan valores entre 56 y 199 mg/dL, compatibles con mediciones en ayunas o mixtas en una poblacin con alto riesgo de diabetes.</p>
<p><strong>2. Justificacin clnica</strong>:</p>
<ul>
<li>Aunque el dataset indica "glucosa tras 2h", los valores reflejan niveles en ayunas.</li>
<li>Valores bajos (&lt;70): pueden indicar hipoglucemia. En este caso, el mnimo observado es 56, hipoglucemia severa que requiere atencin inmediata.</li>
<li>Valores altos (&gt;180): compatibles en diabetes mal controlada. Valor mximo: 199 mg/dL, dentro de rangos posibles para prediabetes o diabetes sin tratamiento.</li>
</ul>
<p><strong>3. Anlisis clnico y estadstico (X_train_procesado)</strong></p>
<ul>
<li>Rango observado: 56  199</li>
<li>Q1: 99.0</li>
<li>Q3: 140.75</li>
<li>IQR: 41.75</li>
<li>Lmite inferior (IQR): 36.375</li>
<li>Lmite superior (IQR): 203.375</li>
<li>Percentil 95: 180.5</li>
<li>Percentil 99: 196.0</li>
<li>N de outliers por encima del lmite IQR: 0</li>
</ul>
<p><strong>4. Anlisis visual</strong></p>
<ul>
<li>Boxplot<ul>
<li>No se identifican valores fuera del rango IQR.</li>
<li>La distribucin general es amplia pero sin extremos visuales.</li>
</ul>
</li>
<li>Histograma<ul>
<li>Distribucin asimtrica hacia la derecha (colas largas en valores altos).</li>
<li>Presencia esperable de valores &gt;140 (riesgo elevado).</li>
</ul>
</li>
</ul>
<p><strong>Decisin provisional</strong></p>
<ul>
<li>No se detectan valores fisiolgicamente imposibles. Los niveles bajos (56 mg/dL) son raros, pero posibles en hipoglucemias reales.</li>
<li>Mantener todos los valores, ya que reflejan situaciones clnicas posibles.</li>
<li>No es necesario imputar ni eliminar. Se puede aplicar transformacin si es necesario por sesgo (skewness).</li>
</ul>
<p><strong>Referencias clnicas</strong>:</p>
<p>MedinePlus  Prueba de glucosa <a href="https://medlineplus.gov/spanish/ency/article/003466.htm">https://medlineplus.gov/spanish/ency/article/003466.htm</a></p>
<p>MedicalNewsToday  Glucosa en sangre: <a href="https://www.medicalnewstoday.com/articles/es/prueba-de-glucosa-en-sangre">https://www.medicalnewstoday.com/articles/es/prueba-de-glucosa-en-sangre</a></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'Glucose'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.3-Variable:-BloodPressure-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.3 Variable: BloodPressure  Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.3-Variable:-BloodPressure-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica e interpretacin de los datos</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Anlisis clnico</strong></p>
<p>La presin arterial diastlica (PAD) representa la presin en las arterias cuando el corazn est en reposo entre latidos. Es un indicador crucial en la evaluacin del riesgo cardiovascular.</p>
<ul>
<li>Valores normales para adultos: 60  90 mmHg</li>
<li>Hipotensin: &lt; 60 mmHg</li>
<li>Hipertensin grado 1: 90  99 mmHg</li>
<li>Hipertensin grado 2:  100 mmHg</li>
<li>Valores &lt; 40 mmHg son clnicamente  muy raros, incompatibles con la vida. Se puede presentar en estado de shock o fallo multiorgnico incompatibles con la vida.</li>
<li>Valores 100-110 mmHg: posibles en pacientes con hipertensin mal controlada, especialmente en poblacin de riesgo (como en este dataset de personas con sospecha de diabetes). Y &gt; 120 mmHg pueden reflejar crisis hipertensivas.</li>
</ul>
<p><strong>2. Anlisis clnico y estadstico (X_train_procesado)</strong></p>
<ul>
<li>Rango observado: 24 - 122 mmHg</li>
<li>Q1: 64.0</li>
<li>Q3: 80.0</li>
<li>IQR: 16.0</li>
<li>Lmite inferior (IQR): 40.0</li>
<li>Lmite superior (IQR): 104.0</li>
<li>Percentil 01: 44.0</li>
<li>Percentil 05: 52.0</li>
<li>Percentil 95: 90.0</li>
<li>Percentil 99: 108.0</li>
<li>Valores extremos:</li>
<li>Valor mnimo: 24 mmHg: incompatible con la vida</li>
<li>Valores bajos (&lt;44): sospechosos, posiblemente errneos o reflejo de errores de medicin</li>
<li>Valor mximo: 122 mmHg: podra reflejar casos extremos de hipertensin no controlada</li>
<li>N de outliers por encima del lmite IQR: 14<ul>
<li>Valores atpicos altos: 106, 108, 110, 114, 122</li>
<li>Valores atpicos bajos (&lt; 40): 24, 28, 30, 38</li>
</ul>
</li>
</ul>
<p><strong>3. Anlisis visual</strong></p>
<ul>
<li><strong>Boxplot</strong>:</li>
<li>Muestra claramente outliers por ambos extremos</li>
<li>Principalmente a partir de 104 (alto) y menores a 40 (bajo).</li>
<li><strong>Histograma</strong><ul>
<li>Distribucin ligeramente sesgada hacia la izquierda</li>
<li>Pico entre 7080 mmHg (valor modal)lo cual concuerda con una poblacin adulta.</li>
<li>Presencia real de valores muy bajos y muy altos, aunque en menor cantidad</li>
</ul>
</li>
</ul>
<p><strong>Decisin provisional</strong></p>
<ul>
<li>Valores &lt; 44 mmHg: se consideran potencialmente errneos o clnicamente extremos: Revisar o imputar:<ul>
<li>Imputar con mediana o mediana por grupo (para mayor precisin)</li>
</ul>
</li>
<li>Valores &gt; 104 mmHg: posibles casos reales de hipertensin, si bien inusuales: Mantener con etiqueta de "extremo clnico"<ul>
<li>Conservar los valores altos con justificacin clnica. Documentar que los casos extremos han sido revisados</li>
</ul>
</li>
</ul>
<p><strong>Referencias clnicas:</strong></p>
<p>American Heart Association  Presin arterial <a href="https://www.heart.org/en/health-topics/high-blood-pressure/understanding-blood-pressure-readings">https://www.heart.org/en/health-topics/high-blood-pressure/understanding-blood-pressure-readings</a></p>
<p>MedlinePlus  Hipotensin e hipertensin <a href="https://medlineplus.gov/spanish/ency/article/007278.htm">https://medlineplus.gov/spanish/ency/article/007278.htm</a> //  <a href="https://medlineplus.gov/spanish/ency/article/000468.htm">https://medlineplus.gov/spanish/ency/article/000468.htm</a></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'BloodPressure'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Filtrar los valores menores a 44 mmHg que son fisiolgicamente poco probables</span>
<span class="n">valores_altos</span> <span class="o">=</span> <span class="n">X_train_procesado</span><span class="p">[</span><span class="n">X_train_procesado</span><span class="p">[</span><span class="s1">'BloodPressure'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">44</span><span class="p">]</span>
<span class="c1"># Mostrar cuntos valores cumplen esta condicin</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Cantidad de registros con BloodPressure menor a 44: </span><span class="si">{</span><span class="n">valores_altos</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># Verificar distribucin y ver frecuencia de cada nmero</span>
<span class="n">X_train_procesado</span><span class="p">[</span><span class="n">X_train_procesado</span><span class="p">[</span><span class="s1">'BloodPressure'</span><span class="p">]</span> <span class="o">&lt;</span><span class="mi">44</span><span class="p">][</span><span class="s1">'BloodPressure'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.4.-Variable:-SkinThickness-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.4. Variable: SkinThickness  Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.4.-Variable:-SkinThickness-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica e intepretacin de todos los resultados</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica:</strong>
El grosor del pliegue cutneo del trceps (SkinThickness) es un parmetro antropomtrico utilizado para estimar la grasa subcutnea.</p>
<p>Valores normales:</p>
<ul>
<li>Adultos jvenes: 10  25 mm</li>
<li>En personas con sobrepeso: 25  40 mm</li>
<li>Valores &gt; 50 mm son raros; &gt; 60 mm extremadamente inusuales</li>
<li>Valores &lt; 5  8 mm podran indicar desnutricin severa</li>
</ul>
<p>Este parmetro se ve afectado por edad, sexo, IMC y condiciones como lipedema, acantosis nigricans o esclerosis cutnea.</p>
<ol start="2">
<li>Interpretacin clnica:
Valor mnimo observado: 7 mm  posible caso de delgadez extrema o desnutricin</li>
</ol>
<p>Valor mximo observado: 99 mm  extremadamente alto, fuera del rango fisiolgico habitual</p>
<p>Valores &gt; 60 mm: considerados clnicamente inusuales
 podran distorsionar el modelo si no se tratan correctamente</p>
<p><strong>3. Anlisis clnico y estadstico (X_train_procesado)</strong></p>
<ul>
<li>Rango observado: 7  99 mm</li>
<li>Q1: 21.0</li>
<li>Q3: 36.0</li>
<li>IQR: 15.0</li>
<li>Lmite inferior (IQR): -1.5</li>
<li>Lmite superior (IQR): 58.5</li>
<li>Percentil 01: 10.0</li>
<li>Percentil 05: 13.0</li>
<li>Percentil 95: 46.0</li>
<li>Percentil 99: 51.6</li>
<li>Valores extremos:<ul>
<li>Valor mnimo observado: 7 mm, posible caso de delgadez extrema o desnutricin</li>
<li>Valor mximo observado: 99 mm, extremadamente alto, fuera del rango fisiolgico habitual</li>
</ul>
</li>
<li>Valores &gt; 60 mm: considerados clnicamente inusuales, podran distorsionar el modelo si no se tratan correctamente</li>
<li>N de outliers del lmite IQR: 6<ul>
<li>Valores por encima: 60 mm y 99 mm</li>
<li>Valores por debajo: 7 mm y 8 mm</li>
</ul>
</li>
</ul>
<p><strong>4. Anlisis visual</strong></p>
<ul>
<li>Boxplot:<ul>
<li>Claramente se observan dos outliers por encima de 58.5 mm</li>
</ul>
</li>
<li>Histograma:<ul>
<li>Distribucin sesgada a la derecha (skewed)</li>
<li>Pico modal alrededor de 25  30 mm</li>
<li>Valores &gt; 50 mm son muy escasos</li>
</ul>
</li>
</ul>
<p><strong>6. Decisin provisional</strong></p>
<ul>
<li>El valor de 99 mm es un outlier extremo clnico. Aunque puede estar relacionado con obesidad extrema, es raro y posiblemente distorsionante.</li>
<li>Imputar valores &gt;60 mm con la mediana (30 mm), previa comprobacin de consistencia con BMI</li>
<li>Conservar valores bajos si tienen sentido clnico (no se detectan valores &lt;7 mm)</li>
<li><strong>Hacer Grfico de dispersin:</strong><ul>
<li>Cruzar SkinThickness con BMI</li>
<li>Puede mostrar relacin entre obesidad severa y grosor elevado</li>
</ul>
</li>
</ul>
<p><strong>Referencias clnicas:</strong></p>
<p>ScienceDirect  Skinfold thickness <a href="https://www.sciencedirect.com/topics/agricultural-and-biological-sciences/skinfold-thickness">https://www.sciencedirect.com/topics/agricultural-and-biological-sciences/skinfold-thickness</a></p>
<p>EFDeportes  Clculo de ndices antropomtricos <a href="https://www.efdeportes.com/efd148/calculo-de-indices-antropometricos-en-adolescentes.htm">https://www.efdeportes.com/efd148/calculo-de-indices-antropometricos-en-adolescentes.htm</a></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'SkinThickness'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Filtrar los valores menores a 10 mmHg que son fisiolgicamente poco probables</span>
<span class="n">valores_altos</span> <span class="o">=</span> <span class="n">X_train_procesado</span><span class="p">[</span><span class="n">X_train_procesado</span><span class="p">[</span><span class="s1">'SkinThickness'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">]</span>
<span class="c1"># Mostrar cuntos valores cumplen esta condicin</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Cantidad de registros con SkinThickness menor a 10: </span><span class="si">{</span><span class="n">valores_altos</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="c1"># Verificar distribucin y ver frecuencia de cada nmero</span>
<span class="n">X_train_procesado</span><span class="p">[</span><span class="n">X_train_procesado</span><span class="p">[</span><span class="s1">'SkinThickness'</span><span class="p">]</span> <span class="o">&lt;</span><span class="mi">10</span><span class="p">][</span><span class="s1">'SkinThickness'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.5-Variable:-BMI-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.5 Variable: BMI  Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.5-Variable:-BMI-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica e interpretacin de todos los resultados</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica:</strong></p>
<p>El BMI es un indicador ampliamente utilizado para clasificar el estado nutricional en adultos. Se calcula como peso (kg) dividido por altura al cuadrado (m). Segn la Organizacin Mundial de la Salud (OMS):</p>
<ul>
<li>Peso bajo: &lt; 18.5</li>
<li>Normopeso: 18.5  24.9</li>
<li>Sobrepeso: 25  29.9</li>
<li>Obesidad grado I: 30  34.9</li>
<li>Obesidad grado II: 35  39.9</li>
<li>Obesidad grado III (severa):  40</li>
<li>Obesidad extrema (grado IV): &gt; 50 (muy poco frecuente)</li>
</ul>
<ol start="2">
<li>Interpretacin clnica:
Valores &gt; 50 indican obesidad extrema, asociada a riesgos metablicos elevados</li>
</ol>
<p>En este dataset, hay registros incluso &gt; 60, muy poco frecuentes en poblacin general</p>
<p>Valores bajos cercanos a 18.2 podran reflejar bajo peso o desnutricin leve</p>
<p><strong>2. Anlisis clnico y estadstico (X_train_procesado)</strong></p>
<ul>
<li>Rango observado: 18.2  67.1</li>
<li>Q1: 27.6</li>
<li>Q3: 36.6</li>
<li>IQR: 9.0</li>
<li>Lmite inferior (IQR): 14.1</li>
<li>Lmite superior (IQR): 50.1</li>
<li>Percentil 01: 19.5</li>
<li>Percentil 05: 22.12</li>
<li>Percentil 95: 44.08</li>
<li>Percentil 99: 49.99</li>
<li>Valores extremos:<ul>
<li>Valores &gt; 50 indican obesidad extrema, asociada a riesgos metablicos elevados. En este dataset, hay registros incluso &gt; 60, muy poco frecuentes en poblacin general</li>
<li>Valores bajos cercanos a 18.2 podran reflejar bajo peso o desnutricin leve y son compatibles con los datos bajos del grosor de la piel</li>
</ul>
</li>
<li>N de outliers por encima del lmite IQR: 6<ul>
<li>Valores: 52.3, 52.9, 53.2, 55.0, 57.3, 67.1</li>
</ul>
</li>
</ul>
<p><strong>3. Anlisis visual</strong></p>
<ul>
<li>Boxplot:<ul>
<li>Se identifican claramente los valores &gt;50 como outliers extremos</li>
<li>No hay valores bajos por debajo del lmite inferior (14.1)</li>
</ul>
</li>
<li>Histograma:<ul>
<li>Distribucin asimtrica a la derecha</li>
<li>Valores centrales entre 30 y 40 (coincide con obesidad leve a moderada)</li>
<li>Pico claro alrededor de 32  34</li>
</ul>
</li>
</ul>
<p>Grfico de dispersin (opcional):</p>
<p>Puede analizarse junto con SkinThickness o Glucose para ver si hay patrones de obesidad metablica</p>
<p><strong>4. Decisin provisional</strong></p>
<ul>
<li>Valores &gt;55 se consideran extremos y poco representativos</li>
<li>Se recomienda imputar por la mediana (3233)</li>
<li>Si se desea modelar especficamente con poblacin obesa severa, podran conservarse, pero sera necesario justificarlo</li>
<li>Realizar Grfico de dispersin, puede analizarse junto con SkinThickness o Glucose para ver si hay patrones de obesidad metablica</li>
</ul>
<p><strong>Referencias clnicas:</strong></p>
<p>OMS  Clasificacin del IMC <a href="https://www.who.int/es/news-room/fact-sheets/detail/obesity-and-overweight">https://www.who.int/es/news-room/fact-sheets/detail/obesity-and-overweight</a></p>
<p>Scielo  Obesidad mrbida en Espaa <a href="https://scielo.isciii.es/scielo.php?script=sci_arttext&amp;pid=S1135-57272003000300005">https://scielo.isciii.es/scielo.php?script=sci_arttext&amp;pid=S1135-57272003000300005</a></p>
<p>UBA  Poblaciones de referencia <a href="https://www.fmed.uba.ar/sites/default/files/2020-08/Poblaciones%20de%20Referencia.pdf">https://www.fmed.uba.ar/sites/default/files/2020-08/Poblaciones%20de%20Referencia.pdf</a></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.6-Variable:-Insulin---An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.6 Variable: Insulin - Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.6-Variable:-Insulin---An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica e interpretacin clnica</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong></p>
<p>La insulina es una hormona esencial para el control de la glucosa en sangre. En personas sanas, los niveles de insulina en ayunas suelen estar entre <strong>5 y 25 U/mL</strong>.</p>
<p><strong>Anlisis clnico y estadstico (X_train_procesado):</strong></p>
<ul>
<li><strong>Rango observado</strong>: de <strong>15 a 744 U/mL</strong></li>
<li><strong>Mximo registrado</strong>: <strong>744 U/mL</strong></li>
<li><strong>Lmite superior segn IQR</strong>: 344.75</li>
<li><strong>Percentil 99</strong>: 542.3</li>
<li><strong>Cantidad de registros &gt; 580</strong>: 1 (valor atpico severo)</li>
</ul>
<p><strong>2. Anlisis clnico y estadstico (X_train_procesado):</strong></p>
<ul>
<li>Rango observado: 15  744 U/mL</li>
<li>Q1: 76.0</li>
<li>Q3: 183.5</li>
<li>IQR: 107.5</li>
<li>Lmite inferior (IQR): -85.25</li>
<li>Lmite superior (IQR): 344.75</li>
<li>Percentil 95: 357.3</li>
<li>Percentil 99: 542.3</li>
<li>Registros con valores &gt; 500: 17<ul>
<li>Incluyen valores como 540, 579, 744 (fuera de la norma clnica)</li>
</ul>
</li>
<li>Valores extremos:<ul>
<li>Valores superiores a <strong>400 U/mL</strong> son raros, pero pueden observarse en:<ul>
<li><strong>Insulinomas</strong> (tumores secretores de insulina)</li>
<li><strong>Resistencia insulnica severa</strong></li>
<li><strong>Estados hiperglucmicos extremos</strong></li>
</ul>
</li>
<li>Valores mayores de <strong>600</strong> son considerados atpicos en la mayora de contextos clnicos.</li>
<li>El valor de <strong>744</strong> est dentro del percentil &gt;99 y podra distorsionar el modelo si no se gestiona correctamente.</li>
</ul>
</li>
</ul>
<p><strong>Decisin provisional</strong>:</p>
<ul>
<li>Se valorarn diferentes estrategias:Valores &gt;580:<ul>
<li>Imputar con la <strong>mediana</strong> si es un caso nico y extremo</li>
<li>Sustituir por el <strong>percentil 95</strong></li>
<li><strong>Conservar</strong> si representa un caso clnicamente vlido que aporte valor al modelo (si se desea conservar casos clnicamente excepcionales).</li>
</ul>
</li>
</ul>
<p>Esta decisin ser tomada y documentada en las siguientes secciones <strong>4 y 5 Tratamiento de valores extremos</strong>.</p>
<p><strong>Referencias clnicas</strong>:</p>
<ul>
<li><a href="https://medlineplus.gov/spanish/pruebas-de-laboratorio/insulina-en-la-sangre/">MedlinePlus: Insulina en sangre</a></li>
<li><a href="https://www.cancer.org/es/cancer/tumor-neuroendocrino-pancreatico/senales-y-sintomas.html">American Cancer Society: Tumores neuroendocrinos  Insulinoma</a></li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.7-Variable:-DiabetesPedigreeFunction-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.7 Variable: DiabetesPedigreeFunction  Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.7-Variable:-DiabetesPedigreeFunction-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica e interpretain de los resultados</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica:</strong></p>
<p>La Diabetes Pedigree Function (DPF) es una medida desarrollada para evaluar la influencia gentica en la probabilidad de desarrollar diabetes, en funcin del nmero y grado de parentesco con familiares afectados.</p>
<ul>
<li>Esta funcin se utiliza en investigaciones epidemiolgicas como el estudio de la comunidad indgena Pima.</li>
<li>En estudios clnicos, los valores tpicos oscilan entre 0.085 y 2.5, aunque valores ligeramente superiores pueden existir en poblaciones con alta prevalencia de diabetes.</li>
<li>En el dataset: La variable no est escalada artificialmente. Ya ha sido revisada y corregida: los valores estn en su escala original (0.0x a 2.3x).</li>
</ul>
<p><strong>2. Anlisis clnico y estadstico (X_train_procesado):</strong></p>
<ul>
<li>Rango observado: 0.078  2.329</li>
<li>Q1: 0.245</li>
<li>Q3: 0.639</li>
<li>IQR: 0.394</li>
<li>Lmite inferior (IQR): -0.346</li>
<li>Lmite superior (IQR): 1.231</li>
<li>Percentil 95: 1.13</li>
<li>Percentil 99: 1.69</li>
<li>N de outliers por encima del IQR: 19<ul>
<li>[1.25  2.32]<ul>
<li>Aunque estadsticamente hay valores que superan el lmite IQR, clnicamente estn dentro del rango esperable para la poblacin Pima, donde existe una fuerte predisposicin gentica.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>3. Anlisis visual:</strong></p>
<ul>
<li>Boxplot:<ul>
<li>Se observan mltiples valores atpicos por encima de 1.23 como outluiers estadsticos.</li>
<li>No hay valores fuera del rango clnicaente esperable</li>
</ul>
</li>
<li>Histograma:<ul>
<li>Distribucin fuertemente asimtrica hacia la derecha (valores concentrados cerca de 0.20.6 y una cola larga).</li>
<li>Indica sesgo alto, lo que puede afectar a modelos sensibles a la normalidad.</li>
</ul>
</li>
</ul>
<p><strong>Decisin provisional:</strong></p>
<ul>
<li>A pesar de ser valores fuera del rango IQR, son esperables en poblacin con alta predisposicin gentica y alta prevalencia de diabetes como la comunidad Pima.</li>
<li>No se imputan ni eliminan valores.</li>
<li>Se recomienda aplicar transformacin logartmica o PowerTransformer para reducir la asimetra de la distribucin por sesgo alto (skewness).</li>
</ul>
<p><strong>Referencias clnicas:</strong></p>
<p>ResearchGate  Determinants of Gestational Diabetes Pedigree Function for Pima Indian Females <a href="https://www.researchgate.net/publication/367013664_Determinants_of_Gestational_Diabetes_Pedigree_Function_for_Pima_Indian_Females">https://www.researchgate.net/publication/367013664_Determinants_of_Gestational_Diabetes_Pedigree_Function_for_Pima_Indian_Females</a></p>
<p>[Original paper introducing the DPF metric: Smith et al., 1988, Diabetes Care]</p>
<p>PubMed  Pima Indian Diabetes Dataset <a href="https://pubmed.ncbi.nlm.nih.gov/3044882/">https://pubmed.ncbi.nlm.nih.gov/3044882/</a></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'DiabetesPedigreeFunction'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="3.5.8-Variable:-Age-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"><strong>3.5.8 Variable: Age  Anlisis clnico y deteccin de valores extremos</strong><a class="anchor-link" href="#3.5.8-Variable:-Age-%E2%80%93-An%C3%A1lisis-cl%C3%ADnico-y-detecci%C3%B3n-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnic e interpretacin de los resultados</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica:</strong></p>
<p>La edad es un factor de riesgo clave en el desarrollo de diabetes tipo 2. En poblacin adulta, es esperable encontrar casos desde los 20 hasta ms de 80 aos, especialmente en poblaciones con alto riesgo como los Pima.</p>
<ul>
<li>No existen "outliers clnicos" per se.</li>
<li>Valores altos como 7080 aos aportan valor predictivo, especialmente si estn bien representados.</li>
</ul>
<p><strong>2. Anlisis clnico y estadstico (X_train_procesado):</strong></p>
<ul>
<li>Rango observado: 21  81</li>
<li>Q1: 24.0</li>
<li>Q3: 41.0</li>
<li>IQR: 17.0</li>
<li>Lmite inferior (IQR): -1.5</li>
<li>Lmite superior (IQR): 66.5</li>
<li>Percentil 95: 58.0</li>
<li>Percentil 99: 66.0</li>
</ul>
<p><strong>3. Anlisis visual:</strong></p>
<ul>
<li>Boxplot: Se identifican algunos valores por encima del lmite superior (66.5).</li>
<li>Histograma: Distribucin sesgada a la derecha (normal en poblacin adulta joven).</li>
</ul>
<p><strong>Decisin provisional:</strong></p>
<ul>
<li>No se considera outlier clnico.</li>
<li>Los valores extremos altos (hasta 81 aos) se consideran reales y valiosos.</li>
<li>No se eliminarn ni imputarn.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>2. Anlisis de valores extremos: Clculo IQR + lmites</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">analizar_variable</span><span class="p">(</span><span class="n">X_train_procesado</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="4.-An%C3%A1lisis-multivariante-y-visualizaciones"><strong>4. Anlisis multivariante y visualizaciones</strong><a class="anchor-link" href="#4.-An%C3%A1lisis-multivariante-y-visualizaciones"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>Explorar relaciones entre variables predictoras y el objetivo Outcome (0 = No diabtico, 1 = Diabtico), para identificar patrones y asociaciones clnicas o estadsticamente relevantes que puedan influir en el rendimiento del modelo.</li>
<li>Visualizar y analizar cmo se distribuyen las variables segn las clases (0 = No Diabetes, 1 = Diabetes).</li>
<li>Detectar combinaciones de variables que aporten informacin adicional para el modelo.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>4.1 Visualizacin de relaciones entre variables</p>
<ul>
<li>Scatterplots entre pares de variables (ej: <code>BMI</code> vs <code>SkinThickness</code>, <code>Glucose</code> vs <code>Insulin</code>)</li>
<li>Anlisis con <code>hue='Outcome'</code> para ver diferencia entre clases</li>
<li>Anlisis clnico complementario a decisiones del punto 3.4</li>
</ul>
<p>4.2 Decisiones finales de tratamiento de outliers</p>
<ul>
<li>Revisin conjunta con visualizaciones</li>
<li>Confirmacin de decisiones: mantener, imputar o eliminar?</li>
<li>Preparacin para preprocesamiento</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="4.1-An%C3%A1lisis-visual-Multivariable-con-Pairplot"><strong>4.1 Anlisis visual Multivariable con Pairplot</strong><a class="anchor-link" href="#4.1-An%C3%A1lisis-visual-Multivariable-con-Pairplot"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.1.1.-Pairplot-de-las-variables-num%C3%A9ricas-m%C3%A1s-relevantes"><strong>4.1.1. Pairplot de las variables numricas ms relevantes</strong><a class="anchor-link" href="#4.1.1.-Pairplot-de-las-variables-num%C3%A9ricas-m%C3%A1s-relevantes"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Objetivo</strong>: Visualizar relaciones bivariadas entre variables clave y su distribucin por clase (Outcome).</p>
<ul>
<li>Variables seleccionadas: Glucose, BMI, Age, Insulin, DPF.</li>
<li>Diferenciando por Outcome (0 = no diabetes, 1 = diabetes).</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Seleccin de variables numricas principales</span>
<span class="n">vars_seleccionadas</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Glucose'</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">,</span> <span class="s1">'DiabetesPedigreeFunction'</span><span class="p">]</span>

<span class="c1"># Unir X_train_procesado con y_train para poder graficar por Outcome (solo temporal)</span>
<span class="n">Xy_train</span> <span class="o">=</span> <span class="n">X_train_procesado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">Xy_train</span><span class="p">[</span><span class="s2">"Outcome"</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Pairplot</span>
<span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">Xy_train</span><span class="p">[</span><span class="n">vars_seleccionadas</span> <span class="o">+</span> <span class="p">[</span><span class="s1">'Outcome'</span><span class="p">]],</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Relaciones bivariadas entre variables clave y Outcome'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave</strong></p>
<ol>
<li>Glucose</li>
</ol>
<ul>
<li>Distribucin: Claramente desplazada hacia la derecha para Outcome = 1.</li>
<li>Relaciones:<ul>
<li>Con Insulin: se observa tendencia positiva, ms definida en Outcome 1.</li>
<li>Con BMI y DPF: no hay relacin fuerte, pero se acumulan puntos con valores altos en Outcome 1.</li>
</ul>
</li>
</ul>
<ol start="2">
<li>BMI</li>
</ol>
<ul>
<li>No hay una separacin muy clara, pero valores ms altos tienden a darse ms en personas con diabetes.</li>
<li>La dispersin con otras variables es alta, aunque combinada con Glucose o Age puede aportar valor.</li>
</ul>
<ol start="3">
<li>Age</li>
</ol>
<ul>
<li>Ms dispersin, especialmente en Outcome 0, donde hay muchas mujeres jvenes sin diabetes.</li>
<li>En Outcome 1 predominan personas mayores.</li>
</ul>
<ol start="4">
<li>Insulin</li>
</ol>
<ul>
<li>Relacin creciente con Glucose (ms insulina con ms glucosa).</li>
<li>Los valores extremos de insulina se concentran en Outcome 1.</li>
</ul>
<ol start="5">
<li>DPF (DiabetesPedigreeFunction)</li>
</ol>
<ul>
<li>Distribucin con fuerte sesgo hacia la izquierda.</li>
<li>En Outcome 1, ms valores &gt; 1.0 que en Outcome 0.</li>
</ul>
<p><strong>Conclusin provisional</strong></p>
<ul>
<li>Glucose es la variable ms discriminativa visualmente.</li>
<li>BMI e Insulin aportan valor cuando se combinan con otras variables.</li>
<li>DPF podra tener ms relevancia al aplicar transformaciones.</li>
<li>No hay relaciones lineales fuertes poe lo que se refuerza la necesidad de:<ul>
<li>Ingeniera de variables (feature engineering),</li>
<li>Modelos no lineales o ensamblados,</li>
<li>Transformaciones en variables con fuerte sesgo.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="4.2.-An%C3%A1lisis-Visual-Multivariable-con-Scatterplots"><strong>4.2. Anlisis Visual Multivariable con Scatterplots</strong><a class="anchor-link" href="#4.2.-An%C3%A1lisis-Visual-Multivariable-con-Scatterplots"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Los scatterplots (diagramas de dispersin) me permiten explorar visualmente las relaciones entre las variables clave del dataset y la variable objetivo (Outcome). Este anlisis es crucial para:</p>
<ul>
<li>Identificar patrones que diferencien a los pacientes con y sin diabetes.</li>
<li>Detectar posibles relaciones entre las variables numricas ms importantes.</li>
<li>Evaluar la distribucin de los datos segn la clase (Outcome).</li>
<li>Observar si existen outliers o acumulaciones de valores en regiones especficas.</li>
</ul>
<p><strong>Enfoque</strong>:
Se han seleccionado las variables ms relevantes para este anlisis:</p>
<ul>
<li>Glucose: Niveles de glucosa en sangre (mg/dL).</li>
<li>BMI: ndice de Masa Corporal.</li>
<li>Age: Edad de los pacientes.</li>
<li>Insulin: Niveles de insulina en sangre (U/mL).</li>
<li>DiabetesPedigreeFunction (DPF): Indica el riesgo gentico de desarrollar diabetes.</li>
</ul>
<p><strong>Scatterplots a realizar:</strong></p>
<ul>
<li>Glucose vs BMI: Relacin entre glucosa y obesidad.</li>
<li>Insulin vs Glucose: Relacin entre insulina y glucosa.</li>
<li>Age vs BMI: Relacin entre edad e ndice de masa corporal.</li>
<li>Glucose vs DPF: Interaccin entre glucosa y el factor gentico.</li>
<li>Age vs DPF: Relacin entre edad y predisposicin gentica.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Preparaci%C3%B3n-del-dataset-para-los-scatterplots"><strong>Preparacin del dataset para los scatterplots</strong><a class="anchor-link" href="#Preparaci%C3%B3n-del-dataset-para-los-scatterplots"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Dataset para los scatterplots. Unir X_train_procesado con y_train para poder graficar por Outcome</span>
<span class="n">Xy_train</span> <span class="o">=</span> <span class="n">X_train_procesado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">Xy_train</span><span class="p">[</span><span class="s2">"Outcome"</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.2.1.-Scatterplot-Glucose-vs-BMI-seg%C3%BAn-Outcome:"><strong>4.2.1. Scatterplot Glucose vs BMI segn Outcome:</strong><a class="anchor-link" href="#4.2.1.-Scatterplot-Glucose-vs-BMI-seg%C3%BAn-Outcome:"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Observar:</p>
<ul>
<li>Si los puntos con Outcome = 1 (diagnosticados) tienden a tener glucosa y/o BMI ms altos.</li>
<li>Si hay zonas de concentracin donde predomina un grupo.</li>
<li>Si hay superposicin entre clases o diferencias claras.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Grfico de dispersin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">Xy_train</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">'Glucose'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'BMI'</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s1">'coolwarm'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Relacin entre Glucose y BMI segn Outcome"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Nivel de Glucosa"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"ndice de Masa Corporal (BMI)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Diagnstico (Outcome)'</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'best'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave</strong>:</p>
<ol>
<li>Tendencia general:</li>
</ol>
<ul>
<li>Se observa una concentracin de casos sin diabetes (Outcome = 0) en valores moderados de glucosa (80 -130) y BMI entre 25 y 35.</li>
<li>En Outcome 1 (diabticos), se observa una concentracin de puntos en el rango alto de glucosa y BMI.</li>
<li>Los casos con diabetes (Outcome = 1) estn ms dispersos, especialmente cuando:<ul>
<li>Glucosa &gt; 140</li>
<li>BMI &gt; 35</li>
</ul>
</li>
</ul>
<ol start="2">
<li>reas de alto riesgo:</li>
</ol>
<ul>
<li>El cuadrante superior derecho (glucosa alta y BMI alto) concentra ms puntos rojos (Outcome = 1).</li>
<li>Este patrn es coherente con la evidencia clnica: la obesidad y la hiperglucemia son factores de riesgo conocidos.</li>
</ul>
<ol start="3">
<li>Superposicin:</li>
</ol>
<ul>
<li>A niveles de glucosa entre 100 y 130 y BMI entre 30 y 35, hay mezcla de clases, lo que indica que otros factores tambin influyen en el diagnstico.</li>
</ul>
<p><strong>Conclusin provisional:</strong></p>
<p>La combinacin de valores elevados de glucosa y BMI se asocia visualmente con mayor prevalencia de diabetes en este conjunto. Aunque hay solapamiento entre clases, esta visualizacin sugiere que estas dos variables combinadas podran tener peso predictivo importante.</p>
<ul>
<li>Este patrn indica que la combinacin de obesidad y altos niveles de glucosa es un fuerte indicador de diabetes.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.2.2.-Scatterplot-Insulin-vs.-Glucose-seg%C3%BAn-Outcome"><strong>4.2.2. Scatterplot Insulin vs. Glucose segn Outcome</strong><a class="anchor-link" href="#4.2.2.-Scatterplot-Insulin-vs.-Glucose-seg%C3%BAn-Outcome"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">X_train_procesado</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y_train</span><span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">'Glucose'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'Insulin'</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s1">'coolwarm'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Relacin entre Glucosa e Insulina segn Outcome'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Nivel de Glucosa'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Nivel de Insulina'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Diagnstico (Outcome)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave:</strong></p>
<ul>
<li>Se aprecia una tendencia creciente: a medida que aumenta la glucosa, tambin lo hace la insulina. Esto es esperable, ya que en estados prediabticos o resistentes, el cuerpo necesita ms insulina para procesar la glucosa.</li>
<li>Los pacientes con Outcome 1 (diabetes) tienden a agruparse en zonas altas de glucosa (130) con una variabilidad ms amplia de insulina, incluso en niveles bajos, lo que puede sugerir:<ul>
<li>Fallo en la produccin de insulina (diabetes tipo 1 o tipo 2 descompensada)</li>
<li>Resistencia insulnica (niveles altos de glucosa a pesar de insulina elevada)</li>
</ul>
</li>
<li>Asimismo, los pacientes con Outcome 1 (diabticos) presentan valores altos tanto de insulina como de glucosa.</li>
<li>En cambio, los puntos Outcome 0 (sin diagnstico) estn ms concentrados en zonas de glucosa entre 80 y 130 mg/dL, y niveles de insulina ms estables.</li>
</ul>
<p><strong>Conclusin provisional:</strong></p>
<ul>
<li>Confirma correlacin positiva esperable entre glucosa e insulina. (- Se evidencia una tendencia positiva: a mayor glucosa, mayor insulina.)</li>
<li>Refuerza la importancia clnica de ambas variables en el diagnstico.</li>
<li>Puede justificar:<ul>
<li>la creacin de una nueva variable combinada (ej. ratio glucosa/insulina),</li>
</ul>
</li>
<li>o analizar si juntas aportan ms poder predictivo al modelo.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.2.3.-Scatterplot-Edad-vs-BMI-seg%C3%BAn-Outcome"><strong>4.2.3. Scatterplot Edad vs BMI segn Outcome</strong><a class="anchor-link" href="#4.2.3.-Scatterplot-Edad-vs-BMI-seg%C3%BAn-Outcome"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear scatterplot Age vs BMI segn Outcome</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">X_train_procesado</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y_train</span><span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">'Age'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'BMI'</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s1">'coolwarm'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Relacin entre Edad e IMC segn Outcome'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Edad'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'ndice de Masa Corporal (BMI)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Diagnstico (Outcome)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave</strong></p>
<ol>
<li>Distribucin general:</li>
</ol>
<ul>
<li>La mayora de los casos se concentran entre los 20 y 45 aos de edad.</li>
<li>El IMC se concentra entre 25 y 40, con algunos valores extremos por encima de 50.</li>
</ul>
<ol start="2">
<li>Comparacin por Outcome (diagnstico de diabetes):</li>
</ol>
<ul>
<li>Las personas con diabetes (Outcome = 1) tienden a agruparse ms en los rangos altos de IMC (mayores de 35).</li>
<li>Tambin se observan ms casos de diabetes en edades ms avanzadas, especialmente a partir de los 35-40 aos.</li>
<li>En edades ms jvenes, los casos sin diabetes (Outcome = 0) son ms frecuentes, pero ya empiezan a verse algunos casos de Outcome = 1 con IMC muy alto.</li>
</ul>
<ol start="3">
<li>Relacin conjunta:</li>
</ol>
<ul>
<li>No hay una separacin drstica entre los grupos, pero s una tendencia leve a que a mayor edad y mayor IMC, aumenta la probabilidad de tener diabetes.</li>
</ul>
<p><strong>Conclusin provisional</strong></p>
<ul>
<li>La combinacin de edad e IMC es til como variable multivariada para distinguir entre pacientes con y sin diagnstico de diabetes.</li>
<li>No existe una frontera clara, pero se observa una acumulacin de casos de diabetes en edades medias-altas y con IMC elevado.</li>
<li>Puede ser interesante para modelos no lineales o para crear variables combinadas, como categorizaciones del tipo:</li>
<li>Obesidad joven vs. obesidad en edad avanzada.</li>
<li>Esta visualizacin refuerza la importancia de considerar ambos factores en conjunto.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.2.4.-Scatterplot-Glucosa-vs-DiabetesPedigreeFunction-seg%C3%BAn-Outcome"><strong>4.2.4. Scatterplot Glucosa vs DiabetesPedigreeFunction segn Outcome</strong><a class="anchor-link" href="#4.2.4.-Scatterplot-Glucosa-vs-DiabetesPedigreeFunction-seg%C3%BAn-Outcome"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear scatterplot Age vs BMI segn Outcome</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">X_train_procesado</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y_train</span><span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">'Glucose'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s1">'coolwarm'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Relacin entre Glucose e  DiabetesPedigreeFunction segn Outcome'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Glucose'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'DiabetesPedigreeFunction'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Diagnstico (Outcome)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave</strong></p>
<ol>
<li>Distribucin general:</li>
</ol>
<ul>
<li>La mayora de los puntos estn concentrados en valores bajos de DPF (&lt; 1.0).</li>
<li>La glucosa se extiende hasta cerca de 200 mg/dL, como se ha visto previamente.</li>
</ul>
<ol start="2">
<li>Relacin visual:</li>
</ol>
<ul>
<li>No se observa una correlacin lineal fuerte entre glucosa y DPF.</li>
<li>Sin embargo, los pacientes con diagnstico positivo (Outcome = 1, en naranja) tienden a concentrarse ms en:<ul>
<li>niveles moderados a altos de glucosa ( 120),</li>
<li>y niveles medios de DPF (&gt; 0.5).</li>
</ul>
</li>
</ul>
<ol start="3">
<li>Valores extremos:</li>
</ol>
<ul>
<li>Existen algunos casos con DPF alto (&gt; 1.5) y glucosa alta, asociados al Outcome 1.</li>
<li>Tambin hay pacientes con glucosa alta y DPF bajo que no tienen diagnstico positivo, lo cual sugiere que DPF por s sola no es determinante, pero podra tener un efecto modulador del riesgo.</li>
</ul>
<ol start="4">
<li>Comparacin entre clases:</li>
</ol>
<ul>
<li>Outcome 0 (azul): ms concentrados en glucosa &lt; 120 y DPF &lt; 0.5.</li>
<li>Outcome 1 (naranja): mayor dispersin, especialmente en glucosa alta.</li>
</ul>
<p><strong>Conclusin provisional</strong></p>
<ul>
<li>DPF es una variable til, especialmente cuando se combina con glucosa elevada.</li>
<li>Aunque no tiene una relacin directa fuerte, s muestra una tendencia diferencial por clase cuando se cruza con otras variables de riesgo como la glucosa.</li>
<li>No se requieren transformaciones especficas adicionales antes del modelado (ya se consider su skewness en fases previas).</li>
<li>Se recomienda incluir esta relacin en el anlisis multivariante final y posibles tcnicas de seleccin de caractersticas.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.2.5.-Scatterplot-Edad-vs-DPF-seg%C3%BAn-Outcome"><strong>4.2.5. Scatterplot Edad vs DPF segn Outcome</strong><a class="anchor-link" href="#4.2.5.-Scatterplot-Edad-vs-DPF-seg%C3%BAn-Outcome"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear scatterplot Age vs DPF segn Outcome</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">X_train_procesado</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y_train</span><span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">'Age'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s1">'coolwarm'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Relacin entre Age e  DiabetesPedigreeFunction segn Outcome'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Age'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'DiabetesPedigreeFunction'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Diagnstico (Outcome)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave</strong></p>
<ul>
<li>La mayor parte de los datos se concentra en edades entre 20 y 50 aos.</li>
<li>Los valores de DPF tambin se agrupan mayoritariamente entre 0.1 y 0.8.</li>
<li>Existen algunos valores atpicos de DPF superiores a 1.5, distribuidos de forma dispersa entre todas las edades.</li>
</ul>
<ol start="2">
<li>Relacin con Outcome (Diagnstico):</li>
</ol>
<ul>
<li>Se observa cierta mayor proporcin de Outcome = 1 (naranja) en valores altos de DPF (&gt;1.0), especialmente en edades jvenes (20-40).</li>
<li>Sin embargo, no hay una tendencia clara que relacione edad con valores elevados de DPF o con el diagnstico por s sola.</li>
</ul>
<ol start="3">
<li>Distribucin conjunta:</li>
</ol>
<ul>
<li>La relacin entre ambas variables no es lineal ni evidente.</li>
<li>El grfico muestra que personas jvenes pueden tener tanto valores bajos como altos de DPF, y estar en ambos outcomes.</li>
</ul>
<p><strong>Conclusin provisional</strong></p>
<ul>
<li>No se identifica una relacin directa entre edad y predisposicin gentica (DPF), aunque los valores altos de DPF parecen ms frecuentes en personas diagnosticadas con diabetes (Outcome = 1).</li>
<li>La DPF se comporta de forma independiente respecto a la edad, lo cual es coherente con su interpretacin clnica: la carga gentica no depende de la edad del paciente, aunque s puede influir en el desarrollo temprano de la enfermedad.</li>
<li>Se mantiene como una variable clnicamente relevante y su comportamiento justifica una posible transformacin por sesgo (PowerTransformer).</li>
<li>No se recomienda imputar ni eliminar valores, ya que todos son fisiolgicamente posibles.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.2.6.-Scatterplot-Edad-vs-Glucosa-seg%C3%BAn-Outcome"><strong>4.2.6. Scatterplot Edad vs Glucosa segn Outcome</strong><a class="anchor-link" href="#4.2.6.-Scatterplot-Edad-vs-Glucosa-seg%C3%BAn-Outcome"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">X_train_procesado</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y_train</span><span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">'Glucose'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'Age'</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s1">'coolwarm'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Relacin entre Glucosa y Edad segn Outcome'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Nivel de Glucosa'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Nivel de Age'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Diagnstico (Outcome)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave</strong></p>
<ol>
<li>Tendencia general:</li>
</ol>
<ul>
<li>La mayora de los puntos se agrupan en edades entre 20 y 50 aos, con niveles de glucosa entre 80 y 140 mg/dL.</li>
<li>A partir de los 50 aos, se observa una mayor concentracin de diagnsticos positivos (Outcome = 1), especialmente con glucosas superiores a 140 mg/dL.</li>
</ul>
<ol start="2">
<li>Distribucin por Outcome:</li>
</ol>
<ul>
<li>Personas sin diabetes (Outcome = 0) se distribuyen a lo largo de todo el rango de edad, especialmente con niveles de glucosa ms bajos (menores a 120).</li>
<li>Personas con diabetes (Outcome = 1) tienden a agruparse en edades medias-altas (40-70 aos) y con glucosa elevada (140).</li>
</ul>
<ol start="3">
<li>Poca presencia en extremos:</li>
</ol>
<ul>
<li>Edades muy jvenes (&lt;25) y muy avanzadas (&gt;70) son poco frecuentes en el dataset, por lo que hay que tener cautela al sacar conclusiones para esos rangos.</li>
</ul>
<p><strong>Conclusin provisional</strong></p>
<ul>
<li>Existe una relacin clnica esperada: a mayor edad, mayor es la probabilidad de desarrollar niveles elevados de glucosa y, por tanto, riesgo de diabetes.</li>
<li>Este scatterplot refuerza la importancia de considerar tanto la edad como la glucosa en el modelo predictivo, ya que muestran una asociacin clara con el diagnstico.</li>
<li>No se observan valores imposibles, pero se podra estudiar interaccin entre edad y glucosa en etapas avanzadas del proyecto</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="4.2.7.-Scatterplot-BMI-vs-Insulin-seg%C3%BAn-Outcome"><strong>4.2.7. Scatterplot BMI vs Insulin segn Outcome</strong><a class="anchor-link" href="#4.2.7.-Scatterplot-BMI-vs-Insulin-seg%C3%BAn-Outcome"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">X_train_procesado</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y_train</span><span class="p">),</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">'BMI'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">'Insulin'</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">'Outcome'</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s1">'coolwarm'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Relacin entre BMI e Insulina segn Outcome'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Nivel de BMI'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Nivel de Insulin'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'Diagnstico (Outcome)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Observaciones clave</strong></p>
<ul>
<li>Se observa una tendencia ascendente leve: a mayor BMI, suele haber mayor nivel de insulina.</li>
<li>Los valores de insulina por encima de 300 estn ms asociados a personas diagnosticadas con diabetes (Outcome = 1).</li>
<li>Tambin se detectan puntos agrupados con insulina = 0, que como mencionamos, podran representar valores faltantes (aunque hayan sido imputados), o individuos con baja respuesta pancretica.</li>
</ul>
<p><strong>Conclusin provisional</strong></p>
<p>Este grfico confirma la necesidad de:</p>
<ul>
<li>Revisar el tratamiento de ceros en insulina (ya lo hicimos en su momento).</li>
<li>Considerar transformaciones para reducir sesgo.</li>
<li>Ver si variables como BMI e Insulin tienen interaccin al predecir diabetes.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="4.3-Decisiones-finales-de-tratamiento-de-outliers"><strong>4.3 Decisiones finales de tratamiento de outliers</strong><a class="anchor-link" href="#4.3-Decisiones-finales-de-tratamiento-de-outliers"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Reflexin final del anlisis multivariado</strong></p>
<p>Tras realizar la visualizacin multivariable mediante scatterplots y pairplot, se han identificado varios patrones relevantes para el anlisis predictivo de diabetes:</p>
<ul>
<li>Glucosa y BMI: existe una concentracin notable de pacientes con Outcome 1 en rangos altos de glucosa y BMI. Esta combinacin refuerza su relevancia como predictores clave.</li>
<li>Insulina y Glucosa: aunque con ms dispersin, se aprecia que los casos con Outcome 1 tienden a tener niveles elevados de ambas variables. Hay una mayor presencia de valores altos de insulina entre los pacientes diagnosticados.</li>
<li>BMI e Insulina: si bien existe dispersin, hay una tendencia a valores ms altos de insulina en pacientes con BMI elevado, especialmente en los diagnosticados con diabetes.</li>
<li>Edad y BMI: la distribucin es ms homognea, sin una separacin clara entre los grupos. Sin embargo, se detecta un ligero desplazamiento hacia edades ms avanzadas y BMI ms alto en el grupo con Outcome 1.</li>
<li>Glucosa y DPF: el grupo con Outcome 1 tiende a presentar valores ms altos en ambas variables, aunque el patrn no es tan marcado como en otras combinaciones.</li>
<li>Edad y DPF: los valores altos de predisposicin gentica se concentran ms en edades jvenes y medias. No se aprecia una relacin lineal clara con la edad.</li>
</ul>
<p>Adems, el** anlisis del pairplot** permite observar:</p>
<ul>
<li>Asimetra evidente en variables como Insulin, DPF y Age.</li>
<li>Posibles correlaciones moderadas entre algunas combinaciones, aunque no todas tienen una relacin lineal fuerte.</li>
<li>Claras diferencias de distribucin por clase (Outcome) en variables como Glucose y BMI, lo que las convierte en candidatas clave para el modelo.</li>
</ul>
<p><strong>Conclusin provisional:</strong></p>
<p>Esta fase ha permitido identificar las variables ms relevantes para el diagnstico, detectar dispersiones importantes y reforzar la necesidad de:</p>
<ul>
<li>Tratar valores extremos (outliers clnicos y estadsticos).</li>
<li>Imputar valores faltantes de forma adecuada.</li>
<li>Aplicar transformaciones sobre variables con alta asimetra antes de entrenar modelos.</li>
<li>Asegurar la limpieza y estandarizacin de las variables antes del modelado.</li>
</ul>
<p>Estos pasos sern desarrollados a continuacin en la siguiente seccin (5. Tratamiento de valores extremos y transformaciones).</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="5.-Tratamiento-avanzado-de-datos:-valores-extremos-y-transformaciones"><strong>5. Tratamiento avanzado de datos: valores extremos y transformaciones</strong><a class="anchor-link" href="#5.-Tratamiento-avanzado-de-datos:-valores-extremos-y-transformaciones"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.1.-Objetivo"><strong>5.1. Objetivo</strong><a class="anchor-link" href="#5.1.-Objetivo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>Identificar y tratar valores extremos (outliers) en las variables seleccionadas detectados mediante criterios clnicos y estadsticos</li>
<li>Aplicar transformaciones a las variables con fuerte asimetra (skewness) que pueden afectar el rendimiento de los modelos.</li>
<li>Garantizar que las variables estn en rangos clnicamente coherentes y estadsticamente adecuados para el modelado (normalizacin y transformacin de las variables necesarias).</li>
</ul>
<p>El objetivo es garantizar que las variables estn en rangos razonables, sin distorsionar la distribucin y conservando su valor predictivo.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.2.-Creaci%C3%B3n-de-la-copia-segura-del-conjunto-de-entrenamiento"><strong>5.2. Creacin de la copia segura del conjunto de entrenamiento</strong><a class="anchor-link" href="#5.2.-Creaci%C3%B3n-de-la-copia-segura-del-conjunto-de-entrenamiento"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Antes de realizar cualquier transformacin, se genera una copia del conjunto de entrenamiento procesado (X_train_procesado) para evitar la prdida de informacin original.X_train_limpio</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear copia de seguridad antes del tratamiento de outliers</span>
<span class="n">X_train_limpio</span> <span class="o">=</span> <span class="n">X_train_procesado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.3.-Tratamiento-de-valores-extremos-(outliers)"><strong>5.3. Tratamiento de valores extremos (outliers)</strong><a class="anchor-link" href="#5.3.-Tratamiento-de-valores-extremos-(outliers)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.1-Tratamiento-de-outliers-en-la-variable:-Insulin"><strong>5.3.1 Tratamiento de outliers en la variable: Insulin</strong><a class="anchor-link" href="#5.3.1-Tratamiento-de-outliers-en-la-variable:-Insulin"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica:</strong></p>
<ul>
<li>Valores &gt;580 U/mL son raros y pueden distorsionar la distribucin.</li>
<li>Se imputarn los valores mayores a 580 con la mediana, como estrategia conservadora y clnica.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizar mediana antes de imputar</span>
<span class="n">mediana_insulin</span> <span class="o">=</span> <span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'Insulin'</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Mediana de Insulin: </span><span class="si">{</span><span class="n">mediana_insulin</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># Reemplazar valores &gt;580 por la mediana</span>
<span class="n">X_train_limpio</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'Insulin'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">580</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">]</span> <span class="o">=</span> <span class="n">mediana_insulin</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Visualizacin post-imputacin  Insulin</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Histograma actualizado</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'Insulin'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Distribucin de Insulin despus del tratamiento de valores extremos"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Insulin (U/mL)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Frecuencia"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Boxplot actualizado</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'Insulin'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Boxplot de Insulin tras el tratamiento de outliers"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Insulin (U/mL)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis post-tratamiento de outliers</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Visualizacin tras tratamiento de outliers</strong></p>
<ul>
<li>Histograma + KDE<ul>
<li>La distribucin sigue siendo asimtrica hacia la derecha, aunque ha mejorado ligeramente.</li>
<li>Se observa una concentracin importante de valores en el rango 50  250 U/mL, que se alinea con niveles esperables de insulina en ayunas.</li>
</ul>
</li>
<li>Boxplot<ul>
<li>Persisten algunos valores por encima del rango IQR, pero el nmero de outliers ha disminuido.</li>
</ul>
</li>
<li>Se han sustituido los valores extremos identificados (por encima de 580 U/mL) por la mediana (125.0 U/mL), tal como fue decidido clnicamente.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.2-Tratamiento-de-outliers-en-la-variable:-SkinThickness"><strong>5.3.2 Tratamiento de outliers en la variable: SkinThickness</strong><a class="anchor-link" href="#5.3.2-Tratamiento-de-outliers-en-la-variable:-SkinThickness"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica:</strong></p>
<ul>
<li>99 es un valor extremo anmalo: fuera de rango normal (generalmente hasta 50-60), imputar con la mediana.</li>
<li>60 est justo al lmite, pero puede mantenerse si se justifica.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizar mediana antes de imputar</span>
<span class="n">mediana_skin</span> <span class="o">=</span> <span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'SkinThickness'</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Mediana de SkinThickness: </span><span class="si">{</span><span class="n">mediana_skin</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># Reemplazar el valor 99 de SkinThickness por la mediana</span>
<span class="n">X_train_limpio</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'SkinThickness'</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">99</span><span class="p">,</span> <span class="s1">'SkinThickness'</span><span class="p">]</span> <span class="o">=</span> <span class="n">mediana_skin</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Visualizacin post-imputacin  SkinThickness</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Histograma + KDE</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'SkinThickness'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"skyblue"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Distribucin de SkinThickness despus del tratamiento de outliers'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'SkinThickness (mm)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Frecuencia'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Boxplot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'SkinThickness'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"steelblue"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Boxplot de SkinThickness tras el tratamiento de outliers'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'SkinThickness (mm)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis post-tratamiento de outliers</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Visualizacin post-tratamiento:</strong></p>
<ul>
<li>Histograma con KDE:<ul>
<li>muestra una distribucin ms realista y suavizada, sin picos anmalos.</li>
</ul>
</li>
<li>Boxplot:<ul>
<li>Confirma la eliminacin del valor extremo artificial.</li>
<li>Se mantiene un nico valor alto (60 mm), dentro del rango clnicamente posible, por lo que se decidi no eliminar.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.3-Tratamiento-de-outliers-en-la-variable:-DiabetesPedigreeFunction"><strong>5.3.3 Tratamiento de outliers en la variable: DiabetesPedigreeFunction</strong><a class="anchor-link" href="#5.3.3-Tratamiento-de-outliers-en-la-variable:-DiabetesPedigreeFunction"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica y de modelado:</strong></p>
<p>Aunque se trata de valores altos, no son imposibles fisiolgicamente y podran aportar informacin relevante. Sin embargo, por el alto sesgo, conviene transformarla posteriormente. No vamos a imputar ni eliminar valores, sino mantenerlos.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Distribucin y visualizacin tras revisin clnica y estadstica</strong></p>
<p>A diferencia de otras variables, DPF no presenta valores fisiolgicamente imposibles, pero s una distribucin altamente sesgada a la derecha, como se observa en:</p>
<ul>
<li>Histograma: Se aprecia una alta concentracin de valores entre 0.1 y 0.6, con una cola larga hacia la derecha (valores altos).</li>
<li>Boxplot: Se identifican mltiples valores por encima del lmite superior del IQR (&gt; 1.23). Aunque son considerados outliers estadsticos, clnicamente son posibles dentro de una poblacin con riesgo elevado de diabetes como la comunidad Pima.</li>
</ul>
<p><strong>Decisin clnica y de modelado</strong></p>
<ul>
<li>Valores observados: Rango de 0.078 a 2.329.</li>
<li>Mediana: 0.3825 (se mantiene sin cambio).</li>
<li>Valores extremos (outliers): No se eliminan ni imputan por ser clnicamente coherentes.</li>
</ul>
<p><strong>Recomendacin para modelado:</strong></p>
<p>Se sugiere aplicar una transformacin logartmica o PowerTransformer para corregir la asimetra (skewness) y mejorar la calidad del modelado.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.4.-Tratamiento-de-outliers-en-la-variable:-Age"><strong>5.3.4. Tratamiento de outliers en la variable: Age</strong><a class="anchor-link" href="#5.3.4.-Tratamiento-de-outliers-en-la-variable:-Age"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica:</strong></p>
<ul>
<li>Se mantendrn todos los valores sin eliminar ni imputar.</li>
<li>No es necesaria ninguna transformacin para outliers.</li>
<li>Puede aplicarse escalado posteriormente para normalizacin, pero no se modifica el valor origina</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li><p>Histograma:</p>
</li>
<li><p>Muestra una clara concentracin de personas jvenes (20-40 aos), lo cual es caracterstico del dataset Pima.</p>
</li>
<li><p>Boxplot:</p>
<ul>
<li>Revela algunos valores superiores a los 65 aos, pero todos dentro de un rango clnicamente plausible.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.5.-Tratamiento-de-outliers-en-la-variable:-BloodPressure"><strong>5.3.5. Tratamiento de outliers en la variable: BloodPressure</strong><a class="anchor-link" href="#5.3.5.-Tratamiento-de-outliers-en-la-variable:-BloodPressure"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica</strong></p>
<ul>
<li>Valores &lt; 44 mmHg, incompatible con la vida: imputar con la mediana general (ms adelante por grupo si lo aplicamos)</li>
<li>Valores &gt; 104 mmHg, casos extremos plausibles clnicamente (posible hipertensin severa), se mantiene sin imputar, pero se documentar como caso extremo clnico para seeguimiento posterior.</li>
</ul>
<p>Se ha aplicado una imputacin dirigida solo a los valores inferiores extremos (&lt;44), ya que son clnicamente dudosos.</p>
<p>Los valores superiores se retienen para no perder la riqueza del dataset y reflejar casos reales de hipertensin.</p>
<p>Esta variable quedar disponible para transformaciones futuras (por sesgo) y se incluir en el escalado del Feature Pipeline.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizar la mediana</span>
<span class="n">mediana_bp</span> <span class="o">=</span> <span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BloodPressure'</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Mediana de BloodPressure: </span><span class="si">{</span><span class="n">mediana_bp</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># Imputar valores &lt; 44 mmHg</span>
<span class="n">X_train_limpio</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BloodPressure'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">44</span><span class="p">,</span> <span class="s1">'BloodPressure'</span><span class="p">]</span> <span class="o">=</span> <span class="n">mediana_bp</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Visualizacin post-imputacin  BloodPressure</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Boxplot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BloodPressure'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Boxplot de BloodPressure tras tratamiento de outliers"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"BloodPressure"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Histograma</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BloodPressure'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Distribucin de BloodPressure tras tratamiento de outliers"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"BloodPressure"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Frecuencia"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.6.--Tratamiento-de-outliers-en-la-variable:-BMI"><strong>5.3.6.  Tratamiento de outliers en la variable: BMI</strong><a class="anchor-link" href="#5.3.6.--Tratamiento-de-outliers-en-la-variable:-BMI"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica:</strong></p>
<ul>
<li>Imputar valores mayores a 55 con la mediana para:<ul>
<li>Minimizar el efecto de valores extremos sobre algoritmos sensibles como Regresin Logstica.</li>
<li>Mantener representatividad clnica sin distorsionar el rango habitual de la variable.</li>
<li>Preparar el dataset para una posible transformacin posterior (logartmica o PowerTransformer).</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizar la mediana de BMI antes del tratamiento</span>
<span class="n">mediana_bmi</span> <span class="o">=</span> <span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BMI'</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Mediana de BMI: </span><span class="si">{</span><span class="n">mediana_bmi</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Reemplazar valores extremos de BMI (&gt;55) por la mediana</span>
<span class="n">X_train_limpio</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BMI'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">55</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">]</span> <span class="o">=</span> <span class="n">mediana_bmi</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Visualizacin post-imputacin  BMI</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizacin para comprobar distribucin tras imputacin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BMI'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Boxplot de BMI despus del tratamiento de outliers"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"BMI"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_train_limpio</span><span class="p">[</span><span class="s1">'BMI'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Histograma de BMI despus del tratamiento de outliers"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"BMI"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Frecuencia"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.7.-Tratamiento-de-outliers-en-la-variable:-Pregnancies"><strong>5.3.7. Tratamiento de outliers en la variable: Pregnancies</strong><a class="anchor-link" href="#5.3.7.-Tratamiento-de-outliers-en-la-variable:-Pregnancies"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica y de modelado:</strong></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Aunque el valor 17 puede parecer extremo, es clnicamente posible en determinadas mujeres y no debe eliminarse sin justificacin mdica clara.</p>
<p>La distribucin es asimtrica, por lo que ser candidata a transformacin por sesgo en el paso siguiente.</p>
<p>No se eliminarn ni imputarn valores en esta variable. Los registros extremos se mantienen porque pueden aportar informacin relevante al modelo.</p>
<p>Se incluir en el Feature Pipeline para escalado y transformacin si fuera necesario.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.8.-Tratamiento-de-outliers-en-la-variable:-Glucose"><strong>5.3.8. Tratamiento de outliers en la variable: Glucose</strong><a class="anchor-link" href="#5.3.8.-Tratamiento-de-outliers-en-la-variable:-Glucose"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Decisin clnica y de modelado:</strong></p>
<ul>
<li>No se detectan valores fisiolgicamente imposibles.</li>
<li>Los niveles bajos (56 mg/dL) son raros, pero posibles en hipoglucemias reales.</li>
<li>Mantener todos los valores, ya que reflejan situaciones clnicas posibles.</li>
<li>No imputar ni eliminar.</li>
<li>Se puede aplicar transformacin si es necesario por sesgo (skewness).</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.3.9.-Guardado-X_train_limpio-tras-tratamiento-de-outliers"><strong>5.3.9. Guardado X_train_limpio tras tratamiento de outliers</strong><a class="anchor-link" href="#5.3.9.-Guardado-X_train_limpio-tras-tratamiento-de-outliers"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Guardamos la versin de X_train despus de haber realizado el tratamiento de valores extremos (outliers) basados en criterios clnico-estadsticos.(X_train_limpio)</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Ruta a la subcarpeta limpieza</span>
<span class="n">ruta_limpieza</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"limpieza"</span><span class="p">)</span>

<span class="c1"># Fecha y hora actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Guardar el dataset limpio despus de tratar outliers</span>
<span class="n">X_train_limpio</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"limpieza"</span><span class="p">,</span>  <span class="sa">f</span><span class="s2">"X_train_limpio_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" X_train_limpio (tras tratamiento de outliers) guardado en carpeta limpieza/ con fecha </span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><img alt="image.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA0cAAAF2CAIAAAAqYXT1AAAgAElEQVR4Aey8sWtcSfbH+/sHKnDQmYIXKBhYwwTToGCFgzX8khG/YAz7wIKFbRC8QWyweAIjJhjEwPshJhDNBCN+gRETLGhgwcND0A4ecvBb0ASDX2DoCQRtmKCDCZq1Znps2b6PU1Xn1Kl7q1tXcnerq/vbgVVdXXXq1KeqTn1v3Xv9H8V1P2/evDk/P3/9+vV1DaAeCIAACIAACIAACCwggdevX5+fn79582bGffuP67X37t27X3/9NSnp3r17VxSF/vd6TaAWCIAACIAACIAACMwnAa1zXLrk5+vXr1++fJn8qVRygl+vqeqG9jNBP2AKBEAABEAABEAABBaJwG+//fb777/PskdXVnXv3r178+bNGPmp1esse4K2QAAEQAAEQAAEQGCWBMZrnrdv37r7sDM7sbuaqntnP69evRoOh7OkhrZAAARAAARAAARAIDsCr+zHyacZOH8FVed8evfu3W+//ZZ8os65q3XrzMTpDEihCRAAARAAARAAARBwBGqqndevX//222+ioKZN7zqq7vz8/O3bt9P2DPZBAARAAARAAARAIGsC7j8MmTtVJw69e/duzEN1ePs168kH50EABEAABEAABOoT0Cd2yVqimkRHJYtNKrPWWZ244hIvX76cVPOwAwIgAAIgAAIgAAILTMCdhWkpNb3OXlnVvX37dryq07oVz9VNb+RgGQRAAARAAARA4KYI1Fc786XqtLp89+7dparupviiXRAAARAAARAAARCYNwIvX758+/ZtSU1NycnLz+pKfrj/rG6MN1q9jimGn0AABEAABEAABEAgawJ1NM/Lly/fvHlTUlNT6vUlqq7kxNu3by9VdVNyFGZBAARAAARAAARAIDsCTtXN5rhu8qpO61aXzm4A4DAIgAAIgAAIgAAIjCFQX+3krerGIMBPIAACIAACIAACILBUBOZU1b21n0vvwGr1ulTDhs6CAAiAAAiAAAgsFYE6mkdUXekm7DRAXeEObE1VNw0vYRMEQAAEQAAEQAAEciSQt6rTutWlcxwD+AwCIAACIAACIAACowjUVztzreouLi7G/y/Eo/o/qfz+8e72VyeDEeY6W8astXulX8/aTWNax6VcfJ0KgcQA/dReb9xt/zTx5jotY5r7NNqJRmu3lp4z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WSrLHxa1a3QqUH7M6GYG6BLCdEGsL+Jvxkm0ejkBqLrLGc1/iXlTdfogbf7pzdjDvFWdVq8zBofmQGBxCdzUTiw3a+h+SHRvaHFZL3rPbmouLTrX2fZvHlQd+SCfcD90tiBuurU6midvVXfThNE+CIAACIAACIAACMwLgbxVndatLj0vXOUwhMoAACAASURBVOEHCIAACIAACIAACEyCQH21k7eqmwQr2AABEAABEAABEACBRSCQt6rT6nURRgN9AAEQAAEQAAEQAIEUgTqaJ29Vl+o18kAABEAABEAABEBgGQnkreq0bnXpZRxD9BkEQAAEQAAEQGBxCdRXO3mrusUdQfQMBEAABEAABEAABK5GIG9Vp9Xr1fqN0iAAAiAAAiAAAiCQD4E6midvVZfPWMBTEAABEAABEAABEJgugbxVndatLj1dWrAOAiAAAiAAAiAAArMlUF/t5K3qZksVrYEACIAACIAACIDA/BLIW9Vp9TqG8b/xAQEQAAEQAAEQAIH5JjBGyRRFUUfz5K3qxvcfv4IACIAACIAACIDA8hDIW9Vp3erSyzNy6CkIgAAIgAAIgMAyEKivdvJWdcswlugjCIAACIAACIAACNQhkLeq0+q1Tm9RBgRAAARAAARAAARyJFBH8+St6nIcFfgMAiAAAiAAAiAAAtMgkLeq07rVpafBCDZBAARAAARAAARA4KYI1Fc7eau6m+KLdkEABEAABEAABEBg3gjkreq0ep03svAHBEAABEAABEAABCZFoI7myVvVTYoU7IAACIAACIAACIBA7gTyVnVat7p07uMB/0EABEAABEAABEBAE6ivdvJWdbrPSIMACIAACIAACIDAMhPIW9Vp9brMo4i+gwAIgAAIgAAILDaBOponb1W32OOH3oEACIAACIAACIBAfQJ5q7o6urU+C5QEARAAARAAARAAgfkkUEfz5K3q5pM7vAIBEAABEAABEACB2RPIW9Vp3erSVyB41m4a0zqOagx/PNx5eNS9iDIv+9JpGdPc75WK9Y93t786GZRy7dfePrXcSf2Ubx51aq1dplC/PzQci8akfu9REgRAYCkJdFou7lEAbLbPlpLBZDv9/iTncjOqr3byVnX1J8Pgh4PWnRXjPis7J0VR0MiVVV3/2w1z695RP2m4117zBtSfVqdIq7rThytmdec0ZSlzVac5sA47aze3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4adoImuj3oH1hUO/vGyFqsNymAmB2mpnWZ6rmwT1pw8apvHgX5MwBRsgAAIgAAIgAAIgMGkCi3NWN2kyZK/3TWv722e9fr/34+H2h8b8Yde9zjqNtmATBEAABEAABEAABEYR0Cd2o8rkrepG9WpS+f0nD/w9WdO4/fFu55dJGYYdEAABEAABEAABEJgwgbxVndatY5+rmzA1mAMBEAABEAABEACB2RCor3byVnWzoYlWQAAEQAAEQAAEQGD+CeSt6rR6nX/W8BAEQAAEQAAEQAAErkegjubJW9VdjwtqgQAIgAAIgAAIgMDiEchb1Wnd6tKLN0LoEQiAAAiAAAiAwDITqK928lZ1yzzG6DsIgAAIgAAIgAAIaAJ5qzqtXnWvkAYBEAABEAABEACBRSJQR/PkreoWabTQFxAAARAAARAAARB4HwJ5qzqtW136fVigLgiAAAiAAAiAAAjMG4H6aidvVTdv3OEPCIAACIAACIAACNwUgbxVnVavN0UQ7YIACIAACIAACIDAtAnU0Tx5q7ppE4R9EAABEAABEAABEMiFQN6qTutWl86FO/wEARAAARAAARAAgToE6qudvFVdHRYoAwIgAAIgAAIgAALLQCADVTfmEE6r12UYLfQRBEAABEAABEBgOQlcqnnevXs376ru/Pz8zZs3yzl+6DUIgAAIgAAIgAAI1CTw5s2b8/Pzi4uLt/x5pz41jdQv9h/ji0rT7Mzbi4uLX3/99dWrV6Mqat065khvVHXkgwAIgAAIgAAIgMCcE6ipdl69evXrr78mVd00OngdVfeb/UzDG9gEARAAARAAARAAgYUh8Pvvv//2229zrepevXr173//e9Q5nFavCzMq6AgIgAAIgAAIgAAIlAiM1zxv3749Pz9/9erVXKs6dxN2OByW+oavIAACIAACIAACIAACjsCvv/7qDurmV9W9efPm4uLi9evXv/766+vXr6sjp3XrqPO8ai3kgAAIgAAIgAAIgEAuBC5VO69fv3758uXr168vLi7evHkj7yfIGwvT6Gnd5+revXvnHHKq7uLi4vfff8fLsNMYEtgEARAAARAAARDImoB79fX333+/sB9RdSLppnTsdWVV9/btWzmuGw6H5+fnw+FQO6fVa9ZDAudBAARAAARAAARAYAyBquZ5+/btcDh8+fLlcDgcc1CnhdMY+1f96b1U3atXr37//fdff/315cuXv/32m3secEqOXrVjKA8CIAACIAACIAACMyDw7t27i4sL95+YvHz58tdff/39999fvXqVjaqT47pX9uMO7c7t5yU+IAACIAACIAACILBMBJwEcjcwnTQSSSe3X9++fTtHd2Dl0Tp3E/bNmzev+fO7/Qztx/1vdtV/f8UHBEAABEAABEAABHImUJU3LsdJICeHWBy9fmM/1fcknLabxiHiFe7AVlWdFnbubqyWd66H+BcEQAAEQAAEQAAEFpiAEz9y19WpOifpRh3UTelxtWuqOjmuk1uxr1+/dkeO8q90EgkQAAEQAAEQAAEQWDwConnkrqu+8aolXen2682ouqIo9D3g5HGd/F8nVWFX6q0+z1u8oUWPQAAEQAAEQAAEFpVAVdKUcpyec/873Y0c1BVFcclZ3RhVp4/rRNi5/5dF7igjAQIgAAIgAAIgAAKLTcCJH/mv6aqSbjYHdbVU3fWEnfRwsQcSvQMBEAABEAABEFhCAqJzdEL03Ozvvbp3Ly4/q6uqOn0ftnRiVzq0011FGgRAAARAAARAAAQWkoDWc+Ml3ZSeqLuCqrtU2FW1neveQo4cOgUCIAACIAACIAACJSXnvsr/Y+ISpZcTpirp6t6BdQKw6lnJ9VHaLtltZIIACIAACIAACIDAwhCoiqKqcJrG/1Gnbda6AztK1ZVuxer+LMwgoSMgAAIgAAIgAAIgMIqAFj86XZV00z6ou9pZXfI+rHNadwNpEAABEAABEAABEFhaAkk9NwNJd2VVN0bYQd4t7fRFx0EABEAABEAABEaJOZev75NOL32FO7DaifGuQ+FhcoMACIAACIAACCw8gTpySMunaaevqeouPbSr00+UAQEQAAEQAAEQAIEFJjBtGVeyf31V5wwt8Eiga/9/u3WMgzAQxVDw/remR1sFtIqepyQSAY9/YQIECBAgQIDAM4GvvXXn46+rzrZ7VrZvESBAgAABAkmBOwPu+Cv/WXXHVx8fJvsTigABAgQIEGgLHFfN2x7eXnVvy+//ECBAgAABAgQaAlZdo0cpCBAgQIAAgXUBq279AuQnQIAAAQIEGgJWXaNHKQgQIECAAIF1Aatu/QLkJ0CAAAECBBoCVl2jRykIECBAgACBdQGrbv0C5CdAgAABAgQaAlZdo0cpCBAgQIAAgXUBq279AuQnQIAAAQIEGgJWXaNHKQgQIECAAIF1Aatu/QLkJ0CAAAECBBoCVl2jRykIECBAgACBdQGrbv0C5CdAgAABAgQaAlZdo0cpCBAgQIAAgXUBq279AuQnQIAAAQIEGgJWXaNHKQgQIECAAIF1Aatu/QLkJ0CAAAECBBoCH/+MhIEbrDkYAAAAAElFTkSuQmCC"/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.4.-An%C3%A1lisis-cl%C3%ADnico-estad%C3%ADstico-post-tratamiento-de-outliers-por-variable"><strong>5.4. Anlisis clnico-estadstico post-tratamiento de outliers por variable</strong><a class="anchor-link" href="#5.4.-An%C3%A1lisis-cl%C3%ADnico-estad%C3%ADstico-post-tratamiento-de-outliers-por-variable"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.1-Insulin-%E2%80%93-An%C3%A1lisis-post-tratamiento-de-valores-extremos"><strong>5.4.1 Insulin  Anlisis post tratamiento de valores extremos</strong><a class="anchor-link" href="#5.4.1-Insulin-%E2%80%93-An%C3%A1lisis-post-tratamiento-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong>
Los niveles de insulina en ayunas varan ampliamente, pero niveles extremadamente altos (&gt;300 U/mL) pueden indicar resistencia severa a la insulina, mientras que niveles extremadamente bajos (&lt;20 U/mL) pueden ser fisiolgicamente dudosos si no estn bien documentados.</p>
<p>En poblacin con riesgo de diabetes como los Pima, valores elevados son posibles, pero los extremos deben ser revisados.</p>
<p><strong>2. Anlisis post tratamiento</strong></p>
<p>Se reemplazaron los valores de insulina &gt;580 (valor considerado extremo tras anlisis clnico y visual) por la mediana: 125.0.</p>
<p>No se eliminaron datos.</p>
<p><strong>Visualmente:</strong></p>
<ul>
<li>Histograma: distribucin sesgada hacia la derecha.</li>
<li>Boxplot: reduccin de outliers extremos, manteniendo distribucin original sin prdida de datos clave.</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin: Imputacin de valores extremos altos por la mediana para reducir sesgo sin perder informacin clnica.</li>
<li>Justificacin: Se conservan valores realistas para diabetes tipo 2, evitando distorsin en el entrenamiento del modelo.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.2-SkinThickness-%E2%80%93-An%C3%A1lisis-post-tratamiento-de-valores-extremos"><strong>5.4.2 SkinThickness  Anlisis post tratamiento de valores extremos</strong><a class="anchor-link" href="#5.4.2-SkinThickness-%E2%80%93-An%C3%A1lisis-post-tratamiento-de-valores-extremos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong>
Valores normales de pliegue cutneo oscilan entre 1040 mm. Un valor de 99 mm fue identificado como outlier no fisiolgico (posiblemente usado como placeholder).</p>
<p><strong>2. Anlisis post tratamient</strong>o</p>
<ul>
<li>Se imput el valor 99 mm (&gt;60mm) por la mediana: 29.0 mm.</li>
<li>Se conservaron todos los registros.</li>
</ul>
<p><strong>Visualmente</strong></p>
<ul>
<li>Histograma: distribucin moderadamente asimtrica.</li>
<li>Boxplot: outliers corregidos.</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin: Imputacin del valor errneo por la mediana.</li>
<li>Justificacin: Valor aislado no representativo. La mediana mantiene la coherencia con el resto del conjunto.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.3-DiabetesPedigreeFunction-(DPF)-%E2%80%93-An%C3%A1lisis-post-tratamiento"><strong>5.4.3 DiabetesPedigreeFunction (DPF)  Anlisis post tratamiento</strong><a class="anchor-link" href="#5.4.3-DiabetesPedigreeFunction-(DPF)-%E2%80%93-An%C3%A1lisis-post-tratamiento"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong>
La funcin DPF representa la predisposicin gentica. No tiene un rango fisiolgico concreto, pero valores &gt;1.5 son poco comunes.</p>
<p><strong>2. Anlisis post tratamiento</strong></p>
<ul>
<li>No se eliminaron ni imputaron datos.</li>
<li>Se detect fuerte sesgo a la derecha.</li>
</ul>
<p><strong>Visualmente</strong></p>
<ul>
<li>Histograma: asimetra pronunciada.</li>
<li>Boxplot: presencia de mltiples outliers en el extremo derecho.</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin: No imputar ni eliminar.</li>
<li>Prximo paso: aplicar PowerTransformer o log para corregir sesgo.</li>
<li>Justificacin: Valores son clnicamente plausibles en esta poblacin.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.4.-Age-%E2%80%93-An%C3%A1lisis-post-tratamiento"><strong>5.4.4. Age  Anlisis post tratamiento</strong><a class="anchor-link" href="#5.4.4.-Age-%E2%80%93-An%C3%A1lisis-post-tratamiento"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong>
Edad entre 20 y 80 aos. Valores extremos (como 81) son vlidos, pero deben analizarse con contexto.</p>
<p><strong>2. Anlisis post tratamiento</strong></p>
<ul>
<li>No se imputaron ni eliminaron datos.</li>
<li>Distribucin sesgada hacia la izquierda.</li>
</ul>
<p><strong>Visualizar</strong></p>
<ul>
<li>Histograma  pico entre 2130 aos, cola larga.</li>
<li>Boxplot  outliers moderados, pero clnicamente vlidos.</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin: Mantener todos los registros.</li>
<li>Prximo paso: posible transformacin si se requiere normalidad.</li>
<li>Justificacin: Valores extremos plausibles en poblacin general.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.5.-BloodPressure-%E2%80%93-An%C3%A1lisis-post-tratamiento"><strong>5.4.5. BloodPressure  Anlisis post tratamiento</strong><a class="anchor-link" href="#5.4.5.-BloodPressure-%E2%80%93-An%C3%A1lisis-post-tratamiento"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong></p>
<p>Valores &lt;44 mmHg: no compatibles con vida normal.</p>
<p>Valores &gt;104 mmHg: pueden indicar hipertensin, pero no son necesariamente outliers errneos.</p>
<p><strong>2. Anlisis post tratamiento</strong></p>
<p>Valores &lt;44 mmHg imputados con la mediana: 72.0 mmHg</p>
<p>Valores altos (&gt;104 mmHg) se conservaron como extremos clnicos.</p>
<p><strong>Visualizar</strong></p>
<ul>
<li>Histograma  forma ms simtrica tras imputacin.</li>
<li>Boxplot  limpieza de valores imposibles y conservacin de extremos altos.</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin: Imputacin de valores bajos no fisiolgicos.</li>
<li>Justificacin: Mejora robustez del modelo sin alterar la seal de hipertensin.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.6.-BMI-%E2%80%93-An%C3%A1lisis-post-tratamiento"><strong>5.4.6. BMI  Anlisis post tratamiento</strong><a class="anchor-link" href="#5.4.6.-BMI-%E2%80%93-An%C3%A1lisis-post-tratamiento"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong>
El IMC es un buen indicador del estado nutricional. Valores normales:</p>
<ul>
<li>Normal: 18.5  24.9</li>
<li>Sobrepeso: 25  29.9</li>
<li>Obesidad:  30</li>
</ul>
<p>En poblacin con riesgo de diabetes es esperable encontrar valores &gt;40.</p>
<p><strong>2. Anlisis post tratamiento</strong></p>
<ul>
<li>No se detectaron outliers clnicamente imposibles.</li>
<li>No se imputaron ni eliminaron registros.</li>
<li>Distribucin asimtrica hacia la derecha.</li>
</ul>
<p><strong>Visualizar</strong></p>
<ul>
<li>Histograma  concentracin en 2535, pero con cola larga hacia la derecha.</li>
<li>Boxplot  pocos valores extremos &gt;50, todos plausibles.</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin: Mantener todos los datos sin imputacin.</li>
<li>Posible uso de transformacin para normalizacin (log o PowerTransformer).</li>
<li>Justificacin: Distribucin esperable en poblacin con sobrepeso u obesidad.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.7.-Pregnancies-%E2%80%93-An%C3%A1lisis-post-tratamiento"><strong>5.4.7. Pregnancies  Anlisis post tratamiento</strong><a class="anchor-link" href="#5.4.7.-Pregnancies-%E2%80%93-An%C3%A1lisis-post-tratamiento"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong>
Nmero de embarazos a lo largo de la vida. En mujeres mayores puede alcanzar valores &gt;10. En mujeres jvenes (menores de 30) valores altos deben ser revisados, pero no son imposibles.</p>
<p><strong>2. Anlisis post tratamiento</strong></p>
<ul>
<li>No se imputaron ni eliminaron datos.</li>
<li>Valores extremos (1317) son bajos en frecuencia, pero posibles.</li>
</ul>
<p><strong>Visualizar</strong></p>
<ul>
<li>Histograma  concentracin entre 0 y 6 embarazos.</li>
<li>Boxplot  presencia de valores extremos, sin anomalas clnicas.</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin: Mantener todos los registros sin imputacin.</li>
<li>Justificacin: En poblacin multpara como Pima, estos valores son verosmiles.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.4.8.-Glucose---An%C3%A1lisis-post-tratamiento"><strong>5.4.8. Glucose - Anlisis post tratamiento</strong><a class="anchor-link" href="#5.4.8.-Glucose---An%C3%A1lisis-post-tratamiento"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>1. Justificacin clnica</strong>
Segn criterios clnicos:</p>
<ul>
<li>Normal en ayunas: 7099 mg/dL</li>
<li>Prediabetes: 100125 mg/dL</li>
<li>Diabetes:  126 mg/dL</li>
</ul>
<p>En este dataset, los valores van de 56 a 199 mg/dL:</p>
<ul>
<li>El valor mnimo (56 mg/dL) indica hipoglucemia severa, pero es posible clnicamente.</li>
<li>El valor mximo (199 mg/dL) refleja diabetes no controlada.</li>
</ul>
<p><strong>2. Anlisis post tratamiento</strong></p>
<ul>
<li>No se ha aplicado imputacin ni eliminacin, ya que todos los valores se consideran fisiolgicamente posibles en una poblacin en riesgo como la del estudio (Pima Indians).</li>
</ul>
<p><strong>Visualizar</strong></p>
<ul>
<li>Boxplot:<ul>
<li>La mayora de los valores estn dentro del rango intercuartlico.</li>
<li>No se detectan outliers segn IQR, pero s hay valores elevados clnicamente esperables.</li>
</ul>
</li>
<li>Histograma:<ul>
<li>Distribucin con asimetra hacia la derecha.</li>
<li>Se observa un nmero elevado de casos con niveles &gt; 140 mg/dL, lo que concuerda con el perfil clnico de la poblacin.</li>
</ul>
</li>
</ul>
<p><strong>3. Reflexin final</strong></p>
<ul>
<li>Decisin:<ul>
<li>No se han tratado como outliers ni se ha imputado ningn valor.</li>
<li>Se respeta la variabilidad clnica propia de una muestra de alto riesgo de diabetes.</li>
<li>Estos valores reflejan una condicin relevante y valiosa para los modelos predictivos.</li>
</ul>
</li>
<li>Posible transformacin si se mantiene un sesgo elevado (skewness), especialmente si se observa en las mtricas del modelo.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.5.Reflexi%C3%B3n-conjunta-del-tratamiento-de-valores-extremos"><strong>5.5.Reflexin conjunta del tratamiento de valores extremos</strong><a class="anchor-link" href="#5.5.Reflexi%C3%B3n-conjunta-del-tratamiento-de-valores-extremos"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Los valores extremos fueron gestionados de acuerdo a criterios clnicos, asegurando que las variables mantienen su relevancia diagnstica sin distorsionar su distribucin.</p>
<p>Este paso garantiza que el modelo no sea afectado por valores anmalos que podran reducir su precisin.</p>
<ul>
<li>Se mantienen los valores clnicamente vlidos y reemplazado outliers extremos en:<ul>
<li>Insulin: Reemplazo por la mediana.</li>
<li>SkinThickness: Reemplazo del valor 99 por la mediana.</li>
</ul>
</li>
<li>No se han eliminado datos para conservar el mximo de informacin.</li>
<li>No se han aplicado transformaciones definitivas, solo se ha definido su necesidad.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.6.-An%C3%A1lisis-de-asimetr%C3%ADa-(Skewness)-y-decisiones--Transformaciones-por-distribuci%C3%B3n-y-sesgo"><strong>5.6. Anlisis de asimetra (Skewness) y decisiones- Transformaciones por distribucin y sesgo</strong><a class="anchor-link" href="#5.6.-An%C3%A1lisis-de-asimetr%C3%ADa-(Skewness)-y-decisiones--Transformaciones-por-distribuci%C3%B3n-y-sesgo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Se parte de que la mejor prctica es pensar que no todas las variables responden igual a las transformaciones, por lo que presentar y visualizar diferentes transformaciones, van a permitir elegir la ms efectiva para cada una, lo que mejora el rendimiento del modelo final.</p>
<p>Por tanto, se analizan las variables con fuerte asimetra (skewness), pero no se aplican an las transformaciones. Esto garantiza que las transformaciones sean reproducibles y trazables en el Feature Pipeline (Bloque 6).</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>Anlisis de skewness<ul>
<li>Calcular skew de todas las variables numricas.</li>
</ul>
</li>
<li>Decidir qu variables necesitan transformacin:<ul>
<li>Skew moderado:</li>
<li>Skew fuerte:</li>
</ul>
</li>
<li>Comparacin de transformaciones<ul>
<li>Probar distintas transformaciones por variable: np.log1p(),np.sqrt(), PowerTransformer</li>
</ul>
</li>
<li>Visualizar histograma antes/despus y Comparar impacto en distribucin</li>
<li>Aplicacin definitiva y escalado:</li>
<li>Crear X_train_transformado con las transformaciones finales.</li>
<li>Guardar versin transformada.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Crear-copia-segura-para-transformaciones"><strong>Crear copia segura para transformaciones</strong><a class="anchor-link" href="#Crear-copia-segura-para-transformaciones"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">X_train_transformado</span> <span class="o">=</span> <span class="n">X_train_limpio</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.6.1.-An%C3%A1lisis-de-asimetr%C3%ADa-(Skewness)-de-todas-las-variables-num%C3%A9ricas-y-transformaciones"><strong>5.6.1. Anlisis de asimetra (Skewness) de todas las variables numricas y transformaciones</strong><a class="anchor-link" href="#5.6.1.-An%C3%A1lisis-de-asimetr%C3%ADa-(Skewness)-de-todas-las-variables-num%C3%A9ricas-y-transformaciones"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Objetivo</strong>:
Detectar variables con una distribucin fuertemente asimtrica que puedan distorsionar el rendimiento de los modelos de Machine Learning y tomar decisiones informadas sobre su transformacin</p>
<p>Este anlisis de la asimetra (skewness) permite identificar qu variables presentan distribuciones no normales. Una distribucin muy sesgada puede provocar que los algoritmos interpreten errneamente la importancia de ciertos valores extremos o patrones.</p>
<p><strong>Mtodo</strong>:
Se utiliza la mtrica de asimetra (skewness) para cada variable numrica.
Mide cunto se desva una distribucin de la simetra perfecta (la forma de una campana de Gauss).</p>
<ul>
<li>Skewness = 0  distribucin perfectamente simtrica.</li>
<li>Skewness &gt; 0  sesgo positivo (cola ms larga a la derecha). Muchos valores pequeos, pocos valores muy grandes.</li>
<li>Skewness &lt; 0  sesgo negativo (cola ms larga a la izquierda). Muchos valores grandes, pocos muy pequeos.</li>
</ul>
<p><strong>Regla prctica</strong>:</p>
<ul>
<li>skew &lt; 0.5: distribucin aproximadamente simtrica, no necesita transformacin.</li>
<li>0.5 &lt; skew &lt; 1: moderadamente sesgada.</li>
<li>skew &gt; 1: muy sesgada, requiere transformacin.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis de asimetra y transformaciones</strong></p>
<p>Se ha evaluado la distribucin de las variables con asimetra (skewness) superior a 0.5 utilizando tres mtodos de transformacin:</p>
<ul>
<li>log1p(): transformacin aplicando logaritmo natural + 1. Reduce las colas largas a la derecha</li>
<li>np.sqrt(): Raz cuadrada. Suaviza la asimeta positiva moderada</li>
<li>PowerTransformer() (de sklearn): ajusta la variable a una distribucin aproximadamente normal. Escoge automticamente entre Box-Cox o Yeo-Johnson (ms potente). Normaliza mejor que las otras, incluso si hay ceros o negativos.</li>
</ul>
<p><strong>Conclusiones:</strong></p>
<ul>
<li>PowerTransformer es la transformacin que <strong>mejor reduce la asimetra</strong> en la mayora de las variables, con valores de skewness cercanos a 0.</li>
<li>En algunos casos, como Pregnancies o Insulin, log1p tambin ha resultado efectiva.</li>
<li>Las transformaciones se evaluarn tambin <strong>visualmente</strong> en el apartado 5.6.2 antes de tomar una decisin final.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Importar libreria</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">scikit</span><span class="o">-</span><span class="n">learn</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">skew</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">PowerTransformer</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>5.6.1.1. Comprobacin de distribucin y asimetra (skewness) de todas las variables numricas</strong></p>
<p>Y mostrar solo las variables con sesgo&gt; 0.5 (moderado o alto)</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Calcular skewness (asimetra) de todas las variables numricas. skew() calcula el coeficiente de asimetra para cada columna numrica.</span>
<span class="n">skewness</span> <span class="o">=</span> <span class="n">X_train_transformado</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Mostrar solo variables con skewness &gt; 0.5 (sesgo moderado o alto)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Variables con alta asimetra (skewness &gt; 0.5):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">skewness</span><span class="p">[</span><span class="n">skewness</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>5.6.1.2. Interpretacin</strong>:</p>
<p>Estas variables tienen distribuciones sesgadas a la derecha, y por eso conviene aplicar transformaciones para normalizarlas, es decir, acercarlas a una distribucin simtrica, ms parecida a una normal. Esto facilita el trabajo de los modelos lineales y mejora estabilidad y precisin en otros modelos.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>5.6.1.3. Definir las variables con alta asimetra (skew &gt; 0.5)</strong>
Solo se transformarn las variables con asimetra significativa (skew &gt; 0.5).</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Variables numricas</span>
<span class="n">variables_a_transformar</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">,</span> <span class="s1">'Pregnancies'</span><span class="p">,</span><span class="s1">'SkinThickness'</span><span class="p">,</span> <span class="s1">'Glucose'</span><span class="p">]</span>

<span class="c1"># Crear un DataFrame para guardar los skewness (skew_df)</span>
<span class="n">skew_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">variables_a_transformar</span><span class="p">)</span>
<span class="n">skew_df</span><span class="p">[</span><span class="s1">'Original'</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_train_transformado</span><span class="p">[</span><span class="n">variables_a_transformar</span><span class="p">]</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.6.2.-Comparaci%C3%B3n-de-transformaciones-(log1p,-sqrt,-PowerTransformer)"><strong>5.6.2. Comparacin de transformaciones (log1p, sqrt, PowerTransformer)</strong><a class="anchor-link" href="#5.6.2.-Comparaci%C3%B3n-de-transformaciones-(log1p,-sqrt,-PowerTransformer)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Se prueban tres transformaciones para reducir la asimetra:</p>
<ul>
<li>log1p(): Transformacin logartmica + 1.</li>
<li>sqrt(): Raz cuadrada.</li>
<li>PowerTransformer: Ajuste automtico (Box-Cox o Yeo-Johnson).</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Aplicar transformaciones y comparar skewness</span>
<span class="n">skew_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">variables_a_transformar</span><span class="p">)</span>
<span class="n">skew_df</span><span class="p">[</span><span class="s1">'Original'</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_train_transformado</span><span class="p">[</span><span class="n">variables_a_transformar</span><span class="p">]</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span>

<span class="c1"># Aplicar log1p</span>
<span class="n">skew_df</span><span class="p">[</span><span class="s1">'log1p'</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_train_transformado</span><span class="p">[</span><span class="n">variables_a_transformar</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span>

<span class="c1"># Aplicar raz cuadrada (sqrt)</span>
<span class="n">skew_df</span><span class="p">[</span><span class="s1">'sqrt'</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_train_transformado</span><span class="p">[</span><span class="n">variables_a_transformar</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span>

<span class="c1"># Aplicar PowerTransformer (Yeo-Johnson)</span>
<span class="n">pt</span> <span class="o">=</span> <span class="n">PowerTransformer</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">'yeo-johnson'</span><span class="p">)</span>
<span class="n">X_power</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train_transformado</span><span class="p">[</span><span class="n">variables_a_transformar</span><span class="p">])</span>
<span class="n">skew_df</span><span class="p">[</span><span class="s1">'PowerTransformer'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_power</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_a_transformar</span><span class="p">)</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>5.6.2.1. Mostrar resultados ordenados</strong></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">skew_df</span> <span class="o">=</span> <span class="n">skew_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">'Original'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">skew_df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'Blues'</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.6.3.-Guardado-X_train_transformado-despu%C3%A9s-de-aplicar-PowerTransformer"><strong>5.6.3. Guardado X_train_transformado despus de aplicar PowerTransformer</strong><a class="anchor-link" href="#5.6.3.-Guardado-X_train_transformado-despu%C3%A9s-de-aplicar-PowerTransformer"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Una vez aplicado PowerTransformer a las variables con alta asimetra, se guarda el conjunto X_train_transformado en la carpeta datos_procesados/escalado/.</p>
<p>Esto permite conservar una versin del dataset ya escalado, pero sin imputar an los valores nulos.</p>
<p>Guardar el dataset en esta fase asegura la trazabilidad y permitir reiniciar o comparar transformaciones si es necesario.</p>
<ul>
<li>X_train_transformado_<fecha>.csv</fecha></li>
<li>Carpeta: datos_procesados/escalado/ porque PowerTransformer es una transformacin de escalado/normalizacin</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Obtener fecha actual</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># Guardar X_train_transformado en escalado</span>
<span class="n">nombre_archivo_transformado</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"X_train_transformado_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span>
<span class="n">ruta_guardado_transformado</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s2">"escalado"</span><span class="p">,</span> <span class="n">nombre_archivo_transformado</span><span class="p">)</span>
<span class="n">X_train_transformado</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado_transformado</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Dataset X_train_transformado guardado en escalado: </span><span class="si">{</span><span class="n">nombre_archivo_transformado</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.6.4.-Visualizaci%C3%B3n-y-Comparaci%C3%B3n-del-impacto-transformaciones:-probar-distintas-transformaciones-por-variable"><strong>5.6.4. Visualizacin y Comparacin del impacto transformaciones: probar distintas transformaciones por variable</strong><a class="anchor-link" href="#5.6.4.-Visualizaci%C3%B3n-y-Comparaci%C3%B3n-del-impacto-transformaciones:-probar-distintas-transformaciones-por-variable"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Realizar transformaciones visuales para justificar y mejorar la toma de decisin.</p>
<p>Se han realizado muestras de 4 visualizaciones por cada variable con sesgo:</p>
<ul>
<li>Distribucin original</li>
<li>Distribucin tras log1p</li>
<li>Distribucin tras sqrt</li>
<li>Distribucin tras PowerTransformer</li>
</ul>
<p>Ha permitido:</p>
<ul>
<li>Confirmar que PowerTransformer consigue la forma ms simtrica (campana).</li>
<li>Justificar visualmente que no todas las transformaciones funcionan igual en todas las variables.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">PowerTransformer</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">PowerTransformer</span>

<span class="k">def</span><span class="w"> </span><span class="nf">comparar_transformaciones</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Visualizar la distribucin original y transformada (log1p, sqrt, PowerTransformer)</span>
<span class="sd">    de una variable del DataFrame X_train_transformado.</span>
<span class="sd">    """</span>
    <span class="c1"># Aplicar transformaciones</span>
    <span class="n">X_log</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">X_train_transformado</span><span class="p">[</span><span class="n">var</span><span class="p">])</span>  <span class="c1"># log(1 + x)</span>
    <span class="n">X_sqrt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">X_train_transformado</span><span class="p">[</span><span class="n">var</span><span class="p">])</span>  <span class="c1"># raz cuadrada</span>
    <span class="n">X_power</span> <span class="o">=</span> <span class="n">PowerTransformer</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train_transformado</span><span class="p">[[</span><span class="n">var</span><span class="p">]])</span>  <span class="c1"># PowerTransformer espera 2D</span>

    <span class="c1"># Visualizacin</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_train_transformado</span><span class="p">[</span><span class="n">var</span><span class="p">],</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'steelblue'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Original: </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_log</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'orange'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"log1p(</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_sqrt</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'seagreen'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"sqrt(</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">X_power</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'purple'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"PowerTransformer(</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Comparacin de transformaciones para </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'Insulin'</span><span class="p">,</span> <span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">,</span> <span class="s1">'Pregnancies'</span><span class="p">,</span> <span class="s1">'Glucose'</span><span class="p">]:</span>
    <span class="n">comparar_transformaciones</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.6.5.-Evaluaci%C3%B3n-de-Transformaciones-por-Sesgo-(Skewness)"><strong>5.6.5. Evaluacin de Transformaciones por Sesgo (Skewness)</strong><a class="anchor-link" href="#5.6.5.-Evaluaci%C3%B3n-de-Transformaciones-por-Sesgo-(Skewness)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Objetivo</strong>
Evaluar la distribucin de las variables numricas con alta asimetra y determinar la mejor transformacin para reducir el sesgo, mejorar la normalidad y optimizar el rendimiento de los modelos.</p>
<p><strong>Evaluacin de Transformaciones:</strong>
Comparados tres mtodos de transformacin para las variables identificadas como asimtricas:</p>
<ul>
<li><strong>log1p()</strong>: Efectiva en variables con sesgo moderado, pero limitada en valores muy bajos o negativos.</li>
<li><strong>sqrt()</strong>: til para reducir asimetra moderada, pero no tan efectiva en distribuciones muy sesgadas.</li>
<li><strong>PowerTransformer (Yeo-Johnson)</strong>: Ha demostrado ser la transformacin ms efectiva para normalizar las variables, incluso en presencia de valores bajos o negativos.</li>
</ul>
<p><strong>Interpretacin de los resultados por variales</strong></p>
<ul>
<li>DiabetesPedigreeFunction (DPF):<ul>
<li>Muy sesgada originalmente (1.81).</li>
<li>PowerTransformer logra una gran mejora, dejndola casi simtrica (0.136).</li>
<li><strong>Aplicar</strong>: PowerTransformer</li>
</ul>
</li>
<li>Insulin:<ul>
<li>Altamente sesgada (1.76).</li>
<li>Ambas log1p y PowerTransformer reducen significativamente el skew.</li>
<li><strong>Decisin</strong>: PowerTransformer garantiza normalidad con seguridad, y es ms robusta si hay valores bajos.(0.02)</li>
<li><strong>Aplicar</strong>: PowerTransformer</li>
</ul>
</li>
<li>Age:<ul>
<li>Skew moderado (1.13).</li>
<li>La transformacin ms efectiva es PowerTransformer (0.146).</li>
<li><strong>Aplicar</strong>: PowerTransformer</li>
</ul>
</li>
<li>Pregnancies:<ul>
<li>Todas las transformaciones ayudan.</li>
<li>Dado que es discreta, PowerTransformer sigue siendo segura.(-0.045)</li>
<li><strong>Aplicar</strong>: PowerTransformer
-Glucose:</li>
<li>Skew moderado (0.55).</li>
<li>Tanto log1p como PowerTransformer corrigen eficazmente.(0.001)</li>
<li><strong>Aplicar</strong>: PowerTransformer</li>
</ul>
</li>
</ul>
<p><strong>Conclusin</strong></p>
<p>No se ha aplicado an ninguna transformacin a las variables del dataset.
Sin embargo, los resultados del anlisis indican que:</p>
<ul>
<li><strong>PowerTransformer (Yeo-Johnson)</strong> es la transformacin ms efectiva para todas las variables seleccionadas.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.7.-Imputaci%C3%B3n-final-de-Valores-Nulos-y-Creaci%C3%B3n-de-X_train_final"><strong>5.7. Imputacin final de Valores Nulos y Creacin de X_train_final</strong><a class="anchor-link" href="#5.7.-Imputaci%C3%B3n-final-de-Valores-Nulos-y-Creaci%C3%B3n-de-X_train_final"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras aplicar las transformaciones para corregir la asimetra de las variables (PowerTransformer), permanecen valores nulos (NaN) que deben ser imputados antes del modelado.</p>
<p><strong>Objetivo</strong> Imputar los valores nulos de forma definitiva sobre el DataFrame X_train_transformado, el cual ha pasado por:</p>
<ul>
<li>Reemplazo de ceros no fisiolgicos por NaN (X_train_procesado)</li>
<li>Tratamiento de outliers (X_train_limpio)</li>
<li>Transformaciones de distribucin (X_train_transformado)</li>
</ul>
<p>Para ello:</p>
<ul>
<li>Se realiza la imputacin usando la mediana de cada variable, ya que es una estrategia robusta frente a valores extremos.</li>
<li>El dataset resultante ser llamado X_train_final, que contendr los datos:</li>
<li>Limpios de outliers</li>
<li>Transformados para corregir sesgos</li>
<li>Sin valores nulos</li>
</ul>
<p>Esto garantiza que el conjunto de entrenamiento est completamente preparado para la fase de modelado.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.7.1.-Verificaci%C3%B3n-de-valores-nulos-(antes-de-imputar)"><strong>5.7.1. Verificacin de valores nulos (antes de imputar)</strong><a class="anchor-link" href="#5.7.1.-Verificaci%C3%B3n-de-valores-nulos-(antes-de-imputar)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Verificar si an quedan valores nulos</span>
<span class="n">nulos_restantes</span> <span class="o">=</span> <span class="n">X_train_transformado</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Valores nulos restantes por variable:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nulos_restantes</span><span class="p">[</span><span class="n">nulos_restantes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizar los valores nulos en un mapa de calor</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">X_train_transformado</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"YlGnBu"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Mapa de valores nulos en X_train_transformado (antes de imputar)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.7.2.-Imputaci%C3%B3n-con-la-mediana-en-un-dataset-nuevo-X_train_final"><strong>5.7.2. Imputacin con la mediana en un dataset nuevo X_train_final</strong><a class="anchor-link" href="#5.7.2.-Imputaci%C3%B3n-con-la-mediana-en-un-dataset-nuevo-X_train_final"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Por qu utilizo la mediana?</strong>
La mediana es robusta frente a valores extremos, asegurando que la imputacin no distorsione la distribucin.</p>
<p><strong>Por qu X_train_final y no X_train_transformado?</strong>
X_train_final es la versin definitiva y lista para modelado.
No afecta al dataset transformado, manteniendo trazabilidad.</p>
<p><strong>Est ya transformado este dataset?</strong>
NO, aqu solo se ha imputado. Las transformaciones se aplicarn en el Feature Pipeline (Bloque 6), asegurando reproducibilidad.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Crear una copia para trabajar</span>
<span class="n">X_train_final</span> <span class="o">=</span> <span class="n">X_train_transformado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Imputar valores nulos con la mediana</span>
<span class="n">X_train_final</span> <span class="o">=</span> <span class="n">X_train_final</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">X_train_final</span><span class="o">.</span><span class="n">median</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.7.3.--Confirmaci%C3%B3n-de-que-no-quedan-nulos"><strong>5.7.3.  Confirmacin de que no quedan nulos</strong><a class="anchor-link" href="#5.7.3.--Confirmaci%C3%B3n-de-que-no-quedan-nulos"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"Valores nulos restantes tras la imputacin:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train_final</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="5.7.4.-Guardado-del-dataset-final-transformado-y-limpio"><strong>5.7.4. Guardado del dataset final transformado y limpio</strong><a class="anchor-link" href="#5.7.4.-Guardado-del-dataset-final-transformado-y-limpio"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Definir ruta de guardado</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados/final"</span><span class="p">)</span>

<span class="c1"># Crear la carpeta final</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Guardar el dataset imputado y transformado</span>
<span class="n">fecha_hora</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>
<span class="n">nombre_archivo</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"X_train_final_</span><span class="si">{</span><span class="n">fecha_hora</span><span class="si">}</span><span class="s2">.csv"</span>
<span class="n">ruta_guardado</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="n">nombre_archivo</span><span class="p">)</span>

<span class="n">X_train_final</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Dataset `X_train_final` guardado correctamente en: </span><span class="si">{</span><span class="n">ruta_guardado</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.8-Revisi%C3%B3n-final-de-X_train_final-antes-del-pipeline"><strong>5.8 Revisin final de X_train_final antes del pipeline</strong><a class="anchor-link" href="#5.8-Revisi%C3%B3n-final-de-X_train_final-antes-del-pipeline"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Tras la imputacin final</strong> y antes de avanzar al escalado, codificacin y creacin del Feature Pipeline, es fundamental revisar que el dataset X_train_final:</p>
<ul>
<li>Vista previa:	Que las variables y registros sean coherentes</li>
<li>Estadsticas descriptivas:	Que los valores mnimos, mximos y medianas sean razonables</li>
<li>Comprobacin de valores nulos:	Que no queden datos faltantes que afecten el entrenamiento</li>
<li>Tipos de datos_	Que todo est en formato numrico o correcto para modelado</li>
</ul>
<p>Esta estrategia es robusta frente a outliers y adecuada para modelos sensibles a distorsiones.</p>
<p>Se ha aplicado sobre un dataset clnicamente validado, corregido y transformado.</p>
<p>Ya se encuentra listo para el escalado, ingeniera de variables o uso directo en un pipeline evitando errores posteriores</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Visualizar las primeras filas del DataFrame transformado</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Vista previa de X_train_final:"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">X_train_final</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># 2. Estadsticas descriptivas del DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Estadsticas bsicas por variable:"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">X_train_final</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>

<span class="c1"># 3. Comprobacin de valores nulos por columna</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Comprobacin de valores nulos por columna:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train_final</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

<span class="c1"># 4. Comprobacin de tipos de datos</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Tipos de datos por columna:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train_final</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="5.9.-Trazabilidad-de-versiones-y-dataset-generados"><strong>5.9. Trazabilidad de versiones y dataset generados</strong><a class="anchor-link" href="#5.9.-Trazabilidad-de-versiones-y-dataset-generados"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Objetivo</strong></p>
<p>Registrar ordenadamente todos los datasets creados hasta ahora (con sus fechas, rutas y descripciones), para llevar un control de la evolucin de los datos en el proyecto.</p>
<p>Durante el proceso de procesamiento, limpieza y transformacin del conjunto de entrenamiento (X_train), se han creado y guardado diferentes versiones intermedias para facilitar el control y la trazabilidad de los cambios aplicados.</p>
<p>Cada versin corresponde a un paso especfico del flujo de trabajo de limpieza y transformacin, y ha sido guardada en su carpeta correspondiente en Google Drive, de acuerdo a la estructura establecida.</p>
<ul>
<li>Saber en qu estado estaba cada dataset en cada momento.</li>
<li>Recuperar versiones anteriores si es necesario.</li>
<li>Mejorar la organizacin y trazabilidad del proyecto.</li>
<li>Facilitar la replicabilidad y transparencia..</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Definir manualmente las versiones creadas hasta ahora</span>
<span class="n">datasets_info</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento original (sin modificaciones)"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/original"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_test.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de test original (sin modificaciones)"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/original"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"y_train.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Variable objetivo de entrenamiento"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/original"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"y_test.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Variable objetivo de test"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/original"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train_procesado.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento con ceros no fisiolgicos reemplazados por NaN"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/imputado"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train_limpio.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento tras tratamiento de outliers (sin imputar nulos)"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/limpieza"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train_transformado.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento transformado con PowerTransformer (antes de imputacin)"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/escalado"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train_final.csv"</span><span class="p">,</span>
        <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento definitivo: transformado y con nulos imputados (versin final)"</span><span class="p">,</span>
        <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/final"</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="c1"># Convertir a DataFrame</span>
<span class="n">df_trazabilidad</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">datasets_info</span><span class="p">)</span>

<span class="c1"># Ver trazabilidad</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_trazabilidad</span><span class="p">)</span>

<span class="c1"># Guardar trazabilidad en la carpeta resultados</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>
<span class="n">nombre_archivo</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"trazabilidad_datasets_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span>
<span class="n">ruta_guardado</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados"</span><span class="p">,</span> <span class="n">nombre_archivo</span><span class="p">)</span>

<span class="n">df_trazabilidad</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Mostrar tabla de trazabilidad</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Trazabilidad guardada correctamente en: </span><span class="si">{</span><span class="n">ruta_guardado</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="6.-Feature-Pipeline-profesional-(preparaci%C3%B3n-para-modelado)"><strong>6. Feature Pipeline profesional (preparacin para modelado)</strong><a class="anchor-link" href="#6.-Feature-Pipeline-profesional-(preparaci%C3%B3n-para-modelado)"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="6.1-Objetivo-del-Feature-Pipeline"><strong>6.1 Objetivo del Feature Pipeline</strong><a class="anchor-link" href="#6.1-Objetivo-del-Feature-Pipeline"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Antes de entrenar los modelos de Machine Learning, es fundamental preparar los datos correctamente.</p>
<p>El objetivo de esta seccin es construir un Feature Pipeline que automatice el preprocesamiento de datos de las variables antes del modelado.</p>
<p><strong>Este Feature Pipeline incluye</strong>:</p>
<ol>
<li>Pipeline V1:</li>
</ol>
<ul>
<li>Imputacin de valores nulos con la mediana (seguridad para datos nuevos): Tcnica (SimpleImputer(strategy='median')), porque aunque no haya nulos ahora, puede haber en datos futuros. Esto garantiza consistencia incluso en nuevos datos.</li>
<li>Transformacin para corregir sesgo (skewness) mediante PowerTransformer en variables altamente asimtricas. Esto mejora la normalidad de las distribuciones y optimiza el rendimiento de modelos lineales.</li>
<li>Estandarizacin (escalado) de variables numricas restantes para igualar la media y la varianza (StandardScaler, media 0, varianza 1). Esto es fundamental para modelos que dependen de la escala de las variables, como Logistic Regression y SVC.</li>
</ul>
<ol start="2">
<li>Pipeline V2:</li>
</ol>
<ul>
<li>Imputacin de valores nulos con la mediana (SimpleImputer(strategy='median')).</li>
<li>Estandarizacin (escalado) de todas las variables numricas (StandardScaler), sin aplicar PowerTransformer. Esto mantiene las distribuciones originales, pero asegura que todas las variables estn en la misma escala.</li>
</ul>
<p><strong>Por qu crear dos pipelines</strong></p>
<ul>
<li>Permite comparar el impacto de las transformaciones avanzadas (PowerTransformer) frente a un escalado estndar (StandardScaler).</li>
<li>Mejora la trazabilidad y reproducibilidad del proyecto, permitiendo evaluar cul de las transformaciones ofrece mejores resultados en los modelos.</li>
<li>Simplifica el anlisis y comparacin de modelos, ya que se entrenan con dos versiones de los datos (V1 y V2).</li>
</ul>
<p><strong>Beneficios</strong></p>
<ul>
<li>Mejora la trazabilidad y facilita la validacin cruzada.</li>
<li>Automatizacin completa del preprocesamiento en entrenamiento y validacin.</li>
<li>Optimizacin del rendimiento de modelos sensibles a la escala y normalidad.</li>
<li>Facilidad de mantenimiento y mejora futura.</li>
<li>Coherencia clnica y estadstica con las transformaciones justificadas en el anlisis previo.</li>
</ul>
<p><strong>Herramientas utilizadas</strong></p>
<ul>
<li>SimpleImputer (de sklearn.impute) para imputacin.</li>
<li>PowerTransformer (de sklearn.preprocessing) para normalizacin.</li>
<li>StandardScaler (de sklearn.preprocessing) para escalado estndar.</li>
<li>ColumnTransformer (de sklearn.compose) para aplicar diferentes transformaciones segn las variables.</li>
</ul>
<p><strong>Resultado esperado</strong></p>
<ol>
<li>Construir dos Feature Pipelines modulares que podrn ser:</li>
</ol>
<ul>
<li>Entrenados (fit_transform) sobre el conjunto de entrenamiento, convertir a DataFrame y guardar.</li>
<li>Aplicados (transform) sobre el conjunto de test o futuros datos, convertir a DataFrame y guardar.</li>
<li>Es decir, guardados y reutilizados en produccin si es necesario.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="6.2-Creaci%C3%B3n-del-Feature-Pipeline"><strong>6.2 Creacin del Feature Pipeline</strong><a class="anchor-link" href="#6.2-Creaci%C3%B3n-del-Feature-Pipeline"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Se construyen dos Feature Pipelines utilizando ColumnTransformer y Pipeline para aplicar imputacin y escalado a las variables numricas.</p>
<ol>
<li>Pipeline V1:</li>
</ol>
<ul>
<li>Imputacin de valores nulos mediante la mediana (SimpleImputer).</li>
<li>Transformacin de variables con alta asimetra (PowerTransformer).</li>
<li>Estandarizacin de las dems variables numricas (StandardScaler).</li>
</ul>
<ol start="2">
<li>Pipeline V2:</li>
</ol>
<ul>
<li>Imputacin de valores nulos mediante la mediana (SimpleImputer).</li>
<li>Estandarizacin de todas las variables numricas (StandardScaler), sin transformacin avanzada.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="6.2.1-Definici%C3%B3n-de-Variables-para-Transformaci%C3%B3n"><strong>6.2.1 Definicin de Variables para Transformacin</strong><a class="anchor-link" href="#6.2.1-Definici%C3%B3n-de-Variables-para-Transformaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Definir las variables a transformar</span>
<span class="n">variables_powertransformer</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Insulin'</span><span class="p">,</span> <span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">,</span> <span class="s1">'Pregnancies'</span><span class="p">,</span> <span class="s1">'Glucose'</span><span class="p">]</span> <span class="c1"># Separar las variables (variables_powertransformer) muy asimtricas (que necesitan normalizacin con PowerTransformer).</span>
<span class="n">variables_standardscaler</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'BloodPressure'</span><span class="p">,</span> <span class="s1">'SkinThickness'</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">]</span> <span class="c1"># Separar las variables moderadamente sesgadas (que solo necesitan escalado estndar).</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="6.2.2-Creaci%C3%B3n-del-Feature-Pipeline-V1-y-V2"><strong>6.2.2 Creacin del Feature Pipeline V1 y V2</strong><a class="anchor-link" href="#6.2.2-Creaci%C3%B3n-del-Feature-Pipeline-V1-y-V2"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.pipeline</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.compose</span><span class="w"> </span><span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.impute</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleImputer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardScaler</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Pipeline V1: Imputacin + PowerTransformer + StandardScaler</span>
<span class="n">pipeline_v1</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">(</span><span class="n">transformers</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s1">'skewed'</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">'imputacion'</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">'median'</span><span class="p">)),</span><span class="c1"># Reemplaza nulos con la mediana</span>
        <span class="p">(</span><span class="s1">'powertransform'</span><span class="p">,</span> <span class="n">PowerTransformer</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">'yeo-johnson'</span><span class="p">)),</span><span class="c1"># Transformacin para corregir sesgo</span>
        <span class="p">(</span><span class="s1">'escalado'</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())</span> <span class="c1"># Escala los datos con la mdia 0 y varianza 1</span>
    <span class="p">]),</span> <span class="n">variables_powertransformer</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">'standard'</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">'imputacion'</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">'median'</span><span class="p">)),</span>
        <span class="p">(</span><span class="s1">'escalado'</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())</span>
    <span class="p">]),</span> <span class="n">variables_standardscaler</span><span class="p">)</span>
<span class="p">])</span>

<span class="c1"># Pipeline V2: Imputacin + StandardScaler (Sin PowerTransformer)</span>
<span class="n">pipeline_v2</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">(</span><span class="n">transformers</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s1">'standard'</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">'imputacion'</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">'median'</span><span class="p">)),</span><span class="c1"># Reemplaza nulos con la mediana</span>
        <span class="p">(</span><span class="s1">'escalado'</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())</span>
    <span class="p">]),</span> <span class="n">variables_powertransformer</span> <span class="o">+</span> <span class="n">variables_standardscaler</span><span class="p">)</span>
<span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Feature Pipelines V1 y V2 creados correctamente."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="6.2.3-Guardado-y-Versionado-de-los-Pipelines"><strong>6.2.3 Guardado y Versionado de los Pipelines</strong><a class="anchor-link" href="#6.2.3-Guardado-y-Versionado-de-los-Pipelines"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">joblib</span>

<span class="c1"># Rutas claras y bien definidas</span>
<span class="n">ruta_pipelines</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/pipelines"</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ruta_pipelines</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Guardar los Pipelines V1 y V2</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">pipeline_v1</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_pipelines</span><span class="p">,</span> <span class="s1">'pipeline_v1.pkl'</span><span class="p">))</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">pipeline_v2</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_pipelines</span><span class="p">,</span> <span class="s1">'pipeline_v2.pkl'</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Pipelines V1 y V2 guardados correctamente en la carpeta pipelines."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="6.3-Aplicar-los-Pipelines-al-Conjunto-de-Entrenamiento"><strong>6.3 Aplicar los Pipelines al Conjunto de Entrenamiento</strong><a class="anchor-link" href="#6.3-Aplicar-los-Pipelines-al-Conjunto-de-Entrenamiento"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>El Feature Pipeline:</p>
<ul>
<li>No transforma otra vez el X_train_transformado ni el X_train_limpio.</li>
<li>Se entrena (fit_transform) sobre X_train_final, que ya est transformado e imputado manualmente.</li>
</ul>
<p>Pero por buenas prcticas aplica su propio flujo ms limpio y con lgica de produccin:</p>
<ul>
<li>Vuelve a aplicar SimpleImputer(median) como medida de seguridad para datos nuevos (aunque ya no haya nulos).</li>
<li>Aplica de nuevo PowerTransformer y StandardScaler, pero esta vez como parte de un flujo automtico y reproducible.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Explicacin:</strong>: fit_transform() aplica todos los pasos definidos en el pipeline:</p>
<ul>
<li><strong>Imputacin con seguridad</strong>: Primero imputa valores nulos con la mediana (aunque ya tratamos la mayora, es til tenerlo como seguridad).</li>
<li><strong>Estandarizacin:</strong> Luego escala los datos con StandardScaler para que todas las variables estn en la misma escala (media 0, desviacin estndar 1).</li>
<li><strong>Resultado</strong>: como un array de NumPy con todas las variables transformadas (imputadas y escaladas), para entrenar modelos.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="6.3.1-Aplicar-el-Pipeline-V1-y-guardado-entrenado"><strong>6.3.1 Aplicar el Pipeline V1 y guardado entrenado</strong><a class="anchor-link" href="#6.3.1-Aplicar-el-Pipeline-V1-y-guardado-entrenado"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">X_train_final_v1</span> <span class="o">=</span> <span class="n">pipeline_v1</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train_final</span><span class="p">)</span>
<span class="n">X_train_final_v1_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_train_final_v1</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_powertransformer</span> <span class="o">+</span> <span class="n">variables_standardscaler</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Dimensiones del dataset transformado (V1):"</span><span class="p">,</span> <span class="n">X_train_final_v1_df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">pipeline_v1</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_pipelines</span><span class="p">,</span> <span class="s1">'pipeline_v1_fitted.pkl'</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="6.3.2-Aplicar-el-Pipeline-V2-y-guardado-entrenado"><strong>6.3.2 Aplicar el Pipeline V2 y guardado entrenado</strong><a class="anchor-link" href="#6.3.2-Aplicar-el-Pipeline-V2-y-guardado-entrenado"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">X_train_final_v2</span> <span class="o">=</span> <span class="n">pipeline_v2</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train_final</span><span class="p">)</span>
<span class="n">X_train_final_v2_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_train_final_v2</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_powertransformer</span> <span class="o">+</span> <span class="n">variables_standardscaler</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Dimensiones del dataset transformado (V2):"</span><span class="p">,</span> <span class="n">X_train_final_v2_df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">pipeline_v2</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_pipelines</span><span class="p">,</span> <span class="s1">'pipeline_v2_fitted.pkl'</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="6.4-Aplicar-los-Pipelines-al-Conjunto-de-Test"><strong>6.4 Aplicar los Pipelines al Conjunto de Test</strong><a class="anchor-link" href="#6.4-Aplicar-los-Pipelines-al-Conjunto-de-Test"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="6.4.1-Aplicar-el-Pipeline-V1"><strong>6.4.1 Aplicar el Pipeline V1</strong><a class="anchor-link" href="#6.4.1-Aplicar-el-Pipeline-V1"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">X_test_final_v1</span> <span class="o">=</span> <span class="n">pipeline_v1</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">X_test_final_v1_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_test_final_v1</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_powertransformer</span> <span class="o">+</span> <span class="n">variables_standardscaler</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="6.4.2-Aplicar-el-Pipeline-V2"><strong>6.4.2 Aplicar el Pipeline V2</strong><a class="anchor-link" href="#6.4.2-Aplicar-el-Pipeline-V2"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">X_test_final_v2</span> <span class="o">=</span> <span class="n">pipeline_v2</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">X_test_final_v2_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_test_final_v2</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_powertransformer</span> <span class="o">+</span> <span class="n">variables_standardscaler</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="6.5-Guardado-y-Versionado-de-Datasets-Transformados"><strong>6.5 Guardado y Versionado de Datasets Transformados</strong><a class="anchor-link" href="#6.5-Guardado-y-Versionado-de-Datasets-Transformados"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">ruta_datos_procesados</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/final"</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Guardar los datasets transformados (V1 y V2)</span>
<span class="n">X_train_final_v1_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s1">'X_train_final_v1.csv'</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test_final_v1_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s1">'X_test_final_v1.csv'</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_train_final_v2_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s1">'X_train_final_v2.csv'</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test_final_v2_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos_procesados</span><span class="p">,</span> <span class="s1">'X_test_final_v2.csv'</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test_final_v2_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">'X_test_final_v2.csv'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">'Dataset transformados V1 y V2  guardados correctamente en la carpeta final'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="6.6.-Trazabilidad-actualizada-post-Feature-Pipeline-v1"><strong>6.6. Trazabilidad actualizada post Feature Pipeline v1</strong><a class="anchor-link" href="#6.6.-Trazabilidad-actualizada-post-Feature-Pipeline-v1"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Documentar Trazabilidad</strong></p>
<ul>
<li>Pipeline V1: Imputacin + PowerTransformer + StandardScaler.</li>
<li>Pipeline V2: Imputacin + StandardScaler.</li>
<li>Datasets transformados guardados: X_train_final_v1, X_test_final_v1, X_train_final_v2, X_test_final_v2.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># 1. Definir la fecha actual para el versionado</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y%m</span><span class="si">%d</span><span class="s2">_%H%M"</span><span class="p">)</span>

<span class="c1"># 2. Definir las rutas base</span>
<span class="n">ruta_resultados</span> <span class="o">=</span> <span class="s1">'/content/drive/MyDrive/proyecto_diabetes/resultados'</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 3. Definir los elementos de trazabilidad</span>
<span class="n">trazabilidad_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"diabetes_informe.csv"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Dataset original sin modificaciones"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_originales"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train.csv"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento original (sin modificaciones)"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/original"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_test.csv"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de test original (sin modificaciones)"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/original"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"feature_pipeline_v1.pkl"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Feature Pipeline V1: Imputacin + PowerTransformer + StandardScaler"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"pipelines"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"feature_pipeline_v2.pkl"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Feature Pipeline V2: Imputacin + StandardScaler"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"pipelines"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train_final_v1.csv"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento transformado: PowerTransformet + StandardScaler (V1)"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/final"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_test_final_v1.csv"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de test transformado (V1)"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/final"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_train_final_v2.csv"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de entrenamiento transformado StandardScaler (V2)"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/final"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"Archivo"</span><span class="p">:</span> <span class="s2">"X_test_final_v2.csv"</span><span class="p">,</span> <span class="s2">"Descripcin"</span><span class="p">:</span> <span class="s2">"Conjunto de test transformado (V2)"</span><span class="p">,</span> <span class="s2">"Carpeta"</span><span class="p">:</span> <span class="s2">"datos_procesados/final"</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># 4. Convertir a DataFrame para visualizacin</span>
<span class="n">df_trazabilidad</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">trazabilidad_data</span><span class="p">)</span>

<span class="c1"># 5. Guardar el archivo de trazabilidad</span>
<span class="n">nombre_trazabilidad</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"trazabilidad_proyecto_diabetes_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span>
<span class="n">df_trazabilidad</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_trazabilidad</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># 6. Mostrar el resultado</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Trazabilidad del proyecto guardada correctamente en: </span><span class="si">{</span><span class="n">nombre_trazabilidad</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_trazabilidad</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="7.-An%C3%A1lisis-previo-al-modelado-(Evaluaci%C3%B3n-del-objetivo-y-relevancia-de-variables)"><strong>7. Anlisis previo al modelado (Evaluacin del objetivo y relevancia de variables)</strong><a class="anchor-link" href="#7.-An%C3%A1lisis-previo-al-modelado-(Evaluaci%C3%B3n-del-objetivo-y-relevancia-de-variables)"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="7.1.-An%C3%A1lisis-del-desbalanceo-del-conjunto-de-entrenamiento-(y_train)"><strong>7.1. Anlisis del desbalanceo del conjunto de entrenamiento (y_train)</strong><a class="anchor-link" href="#7.1.-An%C3%A1lisis-del-desbalanceo-del-conjunto-de-entrenamiento-(y_train)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Justificacin clnica</strong></p>
<p>En un problema de prediccin de diabetes, detectar correctamente los casos positivos (diabetes = 1) es prioritario desde el punto de vista clnico.
Un dataset desbalanceado puede llevar a que el modelo aprenda a predecir mayoritariamente la clase mayoritaria, ignorando la minoritaria.</p>
<p><strong>Objetivo del anlisis</strong></p>
<ul>
<li>Verificar si las clases (0 = No diabetes, 1 = Diabetes) estn desbalanceadas en el conjunto de entrenamiento (y_train).</li>
<li>Evaluar el impacto clnico del desbalance.</li>
<li>Decidir si aplicamos tcnicas de balanceo (SMOTE, class_weight='balanced').</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">glob</span>

<span class="c1"># Buscar el archivo y_train ms reciente directamente en la carpeta original</span>
<span class="n">archivos_y_train_original</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/original/y_train_*.csv"</span><span class="p">)</span> <span class="c1">#glob permite buscar archivos con patrones de bsqueda</span>

<span class="c1"># Verificar si se encontraron archivos y ordenarlos por fecha de creacin (ltimo creado)</span>
<span class="k">if</span> <span class="n">archivos_y_train_original</span><span class="p">:</span>
    <span class="n">archivos_y_train_original</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Ordenar por fecha de modificacin (ltimo)</span>
    <span class="n">archivo_y_train_reciente</span> <span class="o">=</span> <span class="n">archivos_y_train_original</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># El ms reciente</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Archivo y_train ms reciente encontrado: </span><span class="si">{</span><span class="n">archivo_y_train_reciente</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="c1"># Cargar el archivo ms reciente</span>
    <span class="n">y_train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">archivo_y_train_reciente</span><span class="p">)</span>

    <span class="c1"># Verificar que es una serie (vector) y no un DataFrame</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">y_train</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>  <span class="c1"># Convertir a serie si es DataFrame</span>

    <span class="c1"># Recalcular el conteo de clases y porcentajes de manera clara</span>
    <span class="n">conteo</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
    <span class="n">porcentajes</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">"Conteo de clases:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">conteo</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Porcentaje por clase:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">porcentajes</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="c1"># Visualizacin de la distribucin de clases en y_train (corregida sin warning)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">conteo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">conteo</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="n">conteo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">palette</span><span class="o">=</span><span class="s1">'pastel'</span><span class="p">,</span> <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Distribucin de Clases en y_train'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Clase (Outcome)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Nmero de muestras'</span><span class="p">)</span>

<span class="c1"># Aadir etiquetas de las clases directamente</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">conteo</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">'No diabetes (0)'</span><span class="p">,</span> <span class="s1">'Diabetes (1)'</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'upper right'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="****7.1.1.-An%C3%A1lisis-del-Desbalance-de-Clases-en-el-Conjunto-de-entrenamiento-y_train****">****7.1.1. Anlisis del Desbalance de Clases en el Conjunto de entrenamiento y_train****<a class="anchor-link" href="#****7.1.1.-An%C3%A1lisis-del-Desbalance-de-Clases-en-el-Conjunto-de-entrenamiento-y_train****"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Distribucin de Clases:</strong></p>
<ul>
<li>Clase 0 (No diabetes): 400 muestras (65.15%)</li>
<li>Clase 1 (Diabetes): 214 muestras (34.85%)</li>
</ul>
<p><strong>Interpretacin Clnica:</strong></p>
<p>El conjunto de entrenamiento est desbalanceado (65% No Diabetes vs 35% Diabetes).</p>
<p>Desde un punto de vista clnico, nos interesa detectar correctamente los casos positivos (diabetes).</p>
<p>Esto significa que un modelo podra:</p>
<ul>
<li>Aprender a predecir principalmente la clase mayoritaria (No Diabetes).</li>
<li>Tener un bajo recall (sensibilidad) para la clase minoritaria (Diabetes), lo cual es peligroso desde el punto de vista clnico.</li>
</ul>
<p><strong>Decisin Tcnica y Clnica:</strong></p>
<p>No se aplica balanceo an.
Este punto tiene un objetivo exploratorio y se realiza antes del entrenamiento base. El desbalance se abordar en fases posteriores:</p>
<ul>
<li>Aplicar tcnicas de balanceo en la fase de modelado y optimizacin (posterior)</li>
<li>Se aplicar SMOTE (Synthetic Minority Over-sampling Technique) solo a los modelos donde sea necesario (Logistic Regression, SVC).</li>
<li>Se usar class_weight='balanced' en modelos que lo soporten (Logistic Regression, RandomForest).</li>
<li>Se evaluar si el balance mejora las mtricas de recall y F1-score para la clase positiva (diabetes).</li>
</ul>
<p>**Cundo aplico las tcnicas de balanceo? **
-En la fase de modelado</p>
<ul>
<li>Entrenar modelos sin balanceo (para tener una referencia base).</li>
<li>Aplicar SMOTE y class_weight='balanced' y compararemos los resultados.</li>
</ul>
<p>Esto garantiza que se comprenda mejor el impacto del balanceo.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="7.2.-Renombrar-la-variable-objetivo-y_train-para-tener-mayor-claridad-sin-modificar-el-objetivo-final"><strong>7.2. Renombrar la variable objetivo y_train para tener mayor claridad sin modificar el objetivo final</strong><a class="anchor-link" href="#7.2.-Renombrar-la-variable-objetivo-y_train-para-tener-mayor-claridad-sin-modificar-el-objetivo-final"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Para mantener una buena organizacin y trazabilidad del proyecto, se crea una copia definitiva y trazable de la variable objetivo y_train con el nombre y_train_final, y se guarda en la carpeta datos_procesados/final/, junto con los conjuntos X_train_final_v1.csv y X_test_final_v1.csv - X_train_final_v2.csv y X_test_final_v2.csv.</p>
<p>Esto permite:</p>
<ul>
<li>Clarificar que esta versin ser la utilizada en el entrenamiento de los modelos.</li>
<li>Asegurar la consistencia con los conjuntos de datos procesados y transformados.</li>
<li>Facilitar la carga directa del dataset final para futuros procesos de reentrenamiento o validacin externa.</li>
</ul>
<p><strong>Nota</strong>: No se realizan transformaciones adicionales sobre la variable objetivo, ya que no requiere escalado ni normalizacin.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Dado que y_train ya est definido y es el objetivo final, lo renombramos para mayor claridad</span>
<span class="n">y_train_final</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Definir la ruta de guardado</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/final"</span>
<span class="c1"># Guardar y_train_final</span>
<span class="n">y_train_final</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">ruta_final</span><span class="si">}</span><span class="s2">/y_train_final.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Verificando la copia</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Conjunto objetivo (y_train_final) creado correctamente:"</span><span class="p">,</span> <span class="n">y_train_final</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># Confirmar guardado</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"y_train_final guardado correctamente en: </span><span class="si">{</span><span class="n">ruta_final</span><span class="si">}</span><span class="s2">/y_train_final.csv"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="7.3.-An%C3%A1lisis-de-Importancia-de-Variables-(V1-y-V2)"><strong>7.3. Anlisis de Importancia de Variables (V1 y V2)</strong><a class="anchor-link" href="#7.3.-An%C3%A1lisis-de-Importancia-de-Variables-(V1-y-V2)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Evaluar la importancia de cada variable predictora en relacin con el diagnstico de diabetes utilizando dos mtodos complementarios:</p>
<ul>
<li><strong>SelectKBest con ANOVA F-score</strong>: mide la relacin estadstica entre cada variable independiente y la variable objetivo.</li>
<li><strong>RandomForestClassifier:</strong> evala cunto contribuye cada variable a la prediccin del modelo, incluyendo relaciones no lineales.</li>
</ul>
<p><strong>Justificacin tcnica y clnica:</strong></p>
<ul>
<li>Combinamos dos perspectivas (estadstica y de modelo) para tomar decisiones ms robustas.</li>
<li>La comparacin entre V1 (con PowerTransformer) y V2 (solo StandardScaler) nos permite observar si las transformaciones afectan la relevancia de las variables</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Importar-librerias"><strong>Importar librerias</strong><a class="anchor-link" href="#Importar-librerias"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.feature_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">SelectKBest</span><span class="p">,</span> <span class="n">f_classif</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">MinMaxScaler</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Cargar-datasets-s-(V1-y-V2)-y-y_train_final"><strong>Cargar datasets s (V1 y V2) y y_train_final</strong><a class="anchor-link" href="#Cargar-datasets-s-(V1-y-V2)-y-y_train_final"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>En este anlisis se utilizan directamente los conjuntos de datos transformados en el punto 6.6 y la variable objetivo renombrada en el punto 7.2. No es necesario volver a cargarlos, ya que se ha verificado que los archivos ms recientes estn correctamente definidos y disponibles en memoria:</p>
<ul>
<li>X_train_final_v1_df: Dataset transformado con PowerTransformer + StandardScaler (V1)</li>
<li>X_train_final_v2_df: Dataset transformado solo con StandardScaler (V2)</li>
<li>y_train_final: Variable objetivo</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Definir rutas base</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/final"</span>

<span class="c1"># Carga explcita SIN prefijos ambiguos</span>
<span class="n">X_train_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v1.csv"</span><span class="p">))</span>  <span class="c1"># 8 variables</span>
<span class="n">X_train_v2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v2.csv"</span><span class="p">))</span>  <span class="c1"># 8 variables</span>
<span class="n">y_train_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_train_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>  <span class="c1"># Variable objetivo</span>

<span class="c1"># Confirmar dimensiones</span>
<span class="n">X_train_v1</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">X_train_v2</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y_train_final</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="7.3.1.-An%C3%A1lisis-con-SelectKBest-y-RandomForest-en-V1-y-en-V2-y-Normalizaci%C3%B3n"><strong>7.3.1. Anlisis con SelectKBest y RandomForest en V1 y en V2 y Normalizacin</strong><a class="anchor-link" href="#7.3.1.-An%C3%A1lisis-con-SelectKBest-y-RandomForest-en-V1-y-en-V2-y-Normalizaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Ahora podemos aplicar el anlisis de importancia de variables sin errores, utilizando esta variable objetivo (y_train_final).</p>
<ul>
<li>Aplicar SelectKBest (F-score) y RandomForest (Feature Importance) a ambas versiones del dataset (V1 y V2).</li>
<li>Normalizar las mtricas para facilitar la comparacin visual.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Anlisis de Importancia de Variables con SelectKBest y RandomForest para V1</span>
<span class="c1"># SelectKBest (F-Score) en V1</span>
<span class="n">selector_v1</span> <span class="o">=</span> <span class="n">SelectKBest</span><span class="p">(</span><span class="n">score_func</span><span class="o">=</span><span class="n">f_classif</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="s1">'all'</span><span class="p">)</span>
<span class="n">selector_v1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>
<span class="n">scores_v1</span> <span class="o">=</span> <span class="n">selector_v1</span><span class="o">.</span><span class="n">scores_</span>

<span class="c1"># RandomForest (Feature Importance) en V1</span>
<span class="n">rf_v1</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">rf_v1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>
<span class="n">importancias_v1</span> <span class="o">=</span> <span class="n">rf_v1</span><span class="o">.</span><span class="n">feature_importances_</span>

<span class="c1"># Anlisis de Importancia de Variables con SelectKBest y RandomForest para V2</span>
<span class="c1"># SelectKBest (F-Score) en V2</span>
<span class="n">selector_v2</span> <span class="o">=</span> <span class="n">SelectKBest</span><span class="p">(</span><span class="n">score_func</span><span class="o">=</span><span class="n">f_classif</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="s1">'all'</span><span class="p">)</span>
<span class="n">selector_v2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v2</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>
<span class="n">scores_v2</span> <span class="o">=</span> <span class="n">selector_v2</span><span class="o">.</span><span class="n">scores_</span>

<span class="c1"># RandomForest (Feature Importance) en V2</span>
<span class="n">rf_v2</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">rf_v2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v2</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>
<span class="n">importancias_v2</span> <span class="o">=</span> <span class="n">rf_v2</span><span class="o">.</span><span class="n">feature_importances_</span>

<span class="c1"># Crear DataFrame comparativo</span>
<span class="n">comparacion_importancia</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">'Variable'</span><span class="p">:</span> <span class="n">X_train_v1</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span>
    <span class="s1">'Score (V1)'</span><span class="p">:</span> <span class="n">scores_v1</span><span class="p">,</span>
    <span class="s1">'Importancia (V1)'</span><span class="p">:</span> <span class="n">importancias_v1</span><span class="p">,</span>
    <span class="s1">'Score (V2)'</span><span class="p">:</span> <span class="n">scores_v2</span><span class="p">,</span>
    <span class="s1">'Importancia (V2)'</span><span class="p">:</span> <span class="n">importancias_v2</span>
<span class="p">})</span>

<span class="c1"># Normalizar las mtricas para visualizacin () mejor comparacin (0 a 1))</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span>
<span class="n">comparacion_importancia</span><span class="p">[[</span><span class="s1">'Score Normalizado (V1)'</span><span class="p">,</span> <span class="s1">'Importancia Normalizada (V1)'</span><span class="p">,</span>
                         <span class="s1">'Score Normalizado (V2)'</span><span class="p">,</span> <span class="s1">'Importancia Normalizada (V2)'</span><span class="p">]]</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span>
    <span class="n">comparacion_importancia</span><span class="p">[[</span><span class="s1">'Score (V1)'</span><span class="p">,</span> <span class="s1">'Importancia (V1)'</span><span class="p">,</span> <span class="s1">'Score (V2)'</span><span class="p">,</span> <span class="s1">'Importancia (V2)'</span><span class="p">]]</span>
<span class="p">)</span>

<span class="c1"># Calcular promedio de importancia</span>
<span class="n">comparacion_importancia</span><span class="p">[</span><span class="s1">'Promedio Importancia'</span><span class="p">]</span> <span class="o">=</span> <span class="n">comparacion_importancia</span><span class="p">[[</span><span class="s1">'Importancia (V1)'</span><span class="p">,</span> <span class="s1">'Importancia (V2)'</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Ordenar por promedio de importancia (de mayor a menor)</span>
<span class="n">comparacion_importancia</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'Promedio Importancia'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">comparacion_importancia</span><span class="p">)</span>

<span class="c1"># Guardar para trazabilidad</span>
<span class="n">ruta_importancia</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"comparacion_importancia_variables.csv"</span><span class="p">)</span>
<span class="n">comparacion_importancia</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_importancia</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="7.3.2.-An%C3%A1lisis-de-los-resultados"><strong>7.3.2. Anlisis de los resultados</strong><a class="anchor-link" href="#7.3.2.-An%C3%A1lisis-de-los-resultados"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Las variables ms importantes en ambos enfoques son:</strong></p>
<ul>
<li><strong>Glucose (Glucosa):</strong> Es la variable ms importante y consistentemente relevante en V1 y V2.</li>
<li><strong>BMI (ndice de Masa Corporal):</strong> Segunda variable ms importante, con alta relevancia clnica.</li>
<li><strong>Age (Edad):</strong> Importante en ambos enfoques, relacionado con el riesgo de diabetes.</li>
<li><strong>DiabetesPedigreeFunction:</strong> Muestra una importancia moderada, reflejando la influencia gentica.</li>
<li><strong>Insulin (Insulina):</strong> Importancia baja, pero consistente en ambos mtodos.</li>
</ul>
<p>Las variables <strong>menos importantes</strong> son:</p>
<ul>
<li>BloodPressure (Presin Arterial)</li>
<li>Pregnancies (Embarazos)</li>
<li>SkinThickness (Espesor de Piel)</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Interpretacin Clnica:</strong></p>
<ul>
<li>La Glucosa, el BMI y la Edad son clnicamente las ms relevantes.</li>
<li>La Insulina y la Funcin de Pedigr de Diabetes tambin son importantes, aunque con menor peso.</li>
<li>Las dems variables tienen una menor contribucin al modelo, pero su exclusin o inclusin debe ser justificada.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="7.3.3.-Visualizaci%C3%B3n-Comparativa-de-Importancia-de-Variables-(V1-vs.-V2)"><strong>7.3.3. Visualizacin Comparativa de Importancia de Variables (V1 vs. V2)</strong><a class="anchor-link" href="#7.3.3.-Visualizaci%C3%B3n-Comparativa-de-Importancia-de-Variables-(V1-vs.-V2)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Visualizacin Comparativa de Importancia de Variables (V1 vs V2)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_palette</span><span class="p">(</span><span class="s2">"Blues"</span><span class="p">)</span>  <span class="c1"># Utilizando una paleta de azules suaves</span>

<span class="c1"># Preparar los datos para la visualizacin</span>
<span class="n">df_melt</span> <span class="o">=</span> <span class="n">comparacion_importancia</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span><span class="o">=</span><span class="s1">'Variable'</span><span class="p">,</span>
    <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">'Score Normalizado (V1)'</span><span class="p">,</span> <span class="s1">'Importancia Normalizada (V1)'</span><span class="p">,</span>
        <span class="s1">'Score Normalizado (V2)'</span><span class="p">,</span> <span class="s1">'Importancia Normalizada (V2)'</span>
    <span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s1">'Mtrica'</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s1">'Valor Normalizado'</span>
<span class="p">)</span>

<span class="c1"># Visualizacin con grfico de barras</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_melt</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'Valor Normalizado'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'Variable'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Mtrica'</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">'Blues'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Comparativa de Importancia de Variables (V1 vs V2)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Importancia Normalizada"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Variable"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="7.3.4.-An%C3%A1lisis-de-la-Visualizaci%C3%B3n-comparativa-de-Importacia-de-Variables-(V1-vs-V2)"><strong>7.3.4. Anlisis de la Visualizacin comparativa de Importacia de Variables (V1 vs V2)</strong><a class="anchor-link" href="#7.3.4.-An%C3%A1lisis-de-la-Visualizaci%C3%B3n-comparativa-de-Importacia-de-Variables-(V1-vs-V2)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>La grfica muestra la importancia normalizada de cada variable utilizando dos mtodos:
-** SelectKBest (F-Score):** Mtodo estadstico para evaluar la relacin de cada variable con la clase objetivo (Diabetes).
<strong>- RandomForest (Feature Importance):</strong> Mtodo basado en rboles que evala la capacidad predictiva de cada variable.</p>
<p>Los <strong>resultados</strong> obtenidos mediante SelectKBest (F-score) y RandomForestClassifier (Feature Importance) en ambos pipelines (V1 con PowerTransformer, y V2 sin l) muestran una alta consistencia entre las variables ms relevantes. Las mtricas han sido normalizadas para facilitar la comparacin.</p>
<p><strong>Variables con mayor importancia tcnica y clnica:</strong></p>
<ol>
<li><strong>Glucose</strong>: Es claramente el predictor ms importante (mxima puntuacin en ambos mtodos y versiones). Representa directamente la glucemia, un indicador clnico clave en el diagnstico de diabetes.</li>
<li><strong>BMI (ndice de masa corporal):</strong> Segundo en importancia. Su relevancia est relacionada con el sobrepeso y obesidad, factores de riesgo reconocidos.</li>
<li><strong>Age</strong>: Edad avanzada est clnicamente asociada con mayor probabilidad de desarrollar diabetes tipo 2.</li>
<li><strong>DiabetesPedigreeFunction</strong>: Aporta informacin sobre el riesgo gentico. Tiene un impacto tcnico ms visible en Random Forest.</li>
<li><strong>Insulin</strong>: A pesar de su relevancia clnica, tiene una puntuacin tcnica moderada. Se mantendr para anlisis posteriores.
<strong>Variables con menor relevancia tcnica:</strong></li>
<li><strong>Pregnancies</strong>: Aunque tiene menor impacto tcnico, se considera clnicamente relevante en poblaciones con alta natalidad, como las mujeres Pima. Se evaluar su impacto en modelos simplificados.</li>
<li><strong>BloodPressure y SkinThickness:</strong> Son las menos importantes en promedio. Su impacto clnico es indirecto y pueden eliminarse en fases experimentales de modelado reducido.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="7.3.5.-An%C3%A1lisis-e-interpretaci%C3%B3n-cl%C3%ADnica-y-estad%C3%ADstica"><strong>7.3.5. Anlisis e interpretacin clnica y estadstica</strong><a class="anchor-link" href="#7.3.5.-An%C3%A1lisis-e-interpretaci%C3%B3n-cl%C3%ADnica-y-estad%C3%ADstica"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Tabla comparativa con degradado azul (para anlisis tcnico-clnico)</span>
<span class="c1"># Mostrar tabla con estilo visual en Colab</span>
<span class="n">columnas_formato</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'Score (V1)'</span><span class="p">,</span> <span class="s1">'Importancia (V1)'</span><span class="p">,</span>
    <span class="s1">'Score (V2)'</span><span class="p">,</span> <span class="s1">'Importancia (V2)'</span><span class="p">,</span>
    <span class="s1">'Score Normalizado (V1)'</span><span class="p">,</span> <span class="s1">'Importancia Normalizada (V1)'</span><span class="p">,</span>
    <span class="s1">'Score Normalizado (V2)'</span><span class="p">,</span> <span class="s1">'Importancia Normalizada (V2)'</span><span class="p">,</span>
    <span class="s1">'Promedio Importancia'</span>
<span class="p">]</span>

<span class="c1"># Visualizacin estilizada</span>
<span class="n">display</span><span class="p">(</span>
    <span class="n">comparacion_importancia</span>
    <span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="n">columnas_formato</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_formato</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'text-align'</span><span class="p">:</span> <span class="s1">'center'</span><span class="p">})</span>
<span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">MinMaxScaler</span>

<span class="c1"># Crear DataFrame con Score e Importancia</span>
<span class="n">comparacion_clinica</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">'Variable'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Glucose'</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">,</span> <span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">,</span> <span class="s1">'BloodPressure'</span><span class="p">,</span> <span class="s1">'Pregnancies'</span><span class="p">,</span> <span class="s1">'SkinThickness'</span><span class="p">],</span>
    <span class="s1">'Score'</span><span class="p">:</span> <span class="p">[</span><span class="mf">202.384</span><span class="p">,</span> <span class="mf">76.119</span><span class="p">,</span> <span class="mf">57.824</span><span class="p">,</span> <span class="mf">19.337</span><span class="p">,</span> <span class="mf">59.265</span><span class="p">,</span> <span class="mf">23.800</span><span class="p">,</span> <span class="mf">19.148</span><span class="p">,</span> <span class="mf">35.535</span><span class="p">],</span>
    <span class="s1">'Importancia'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.260</span><span class="p">,</span> <span class="mf">0.159</span><span class="p">,</span> <span class="mf">0.131</span><span class="p">,</span> <span class="mf">0.122</span><span class="p">,</span> <span class="mf">0.088</span><span class="p">,</span> <span class="mf">0.085</span><span class="p">,</span> <span class="mf">0.082</span><span class="p">,</span> <span class="mf">0.073</span><span class="p">],</span>
    <span class="s1">'Interpretacin clnica'</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">'Principal marcador de diagnstico de diabetes (glucosa en sangre).'</span><span class="p">,</span>
        <span class="s1">'Indicador de obesidad, asociado fuertemente a diabetes tipo 2.'</span><span class="p">,</span>
        <span class="s1">'La edad es un factor de riesgo natural en la aparicin de diabetes.'</span><span class="p">,</span>
        <span class="s1">'Funcin hereditaria. Cuanto mayor, ms predisposicin gentica.'</span><span class="p">,</span>
        <span class="s1">'Marcador de resistencia a la insulina o sensibilidad disminuida.'</span><span class="p">,</span>
        <span class="s1">'Puede estar alterada en casos de complicaciones vasculares.'</span><span class="p">,</span>
        <span class="s1">'Importante en mujeres por riesgo de diabetes gestacional.'</span><span class="p">,</span>
        <span class="s1">'Refleja grasa subcutnea. Menor relacin directa con diabetes.'</span>
    <span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Escalar mtricas para visualizacin (no afecta al anlisis)</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span>
<span class="n">comparacion_clinica</span><span class="p">[[</span><span class="s1">'Score'</span><span class="p">,</span> <span class="s1">'Importancia'</span><span class="p">]]</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">comparacion_clinica</span><span class="p">[[</span><span class="s1">'Score'</span><span class="p">,</span> <span class="s1">'Importancia'</span><span class="p">]])</span>

<span class="c1"># Formatear tabla visual</span>
<span class="n">comparacion_clinica</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Variable"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">comparacion_clinica</span><span class="o">.</span><span class="n">style</span>
        <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">"Score"</span><span class="p">,</span> <span class="s2">"Importancia"</span><span class="p">])</span>
        <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">"Interpretacin clnica"</span><span class="p">],</span> <span class="o">**</span><span class="p">{</span><span class="s1">'text-align'</span><span class="p">:</span> <span class="s1">'left'</span><span class="p">}))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Las 4 Variables Ms Importantes son Consistentes y Clnicamente Relevantes:</strong></p>
<ul>
<li>Glucose (Glucosa): Claramente el predictor ms fuerte de diabetes.</li>
<li>BMI (ndice de Masa Corporal): El sobrepeso es un factor de riesgo para la diabetes.</li>
<li>Age (Edad): La diabetes es ms frecuente a mayor edad.</li>
<li>DiabetesPedigreeFunction: Muestra la predisposicin gentica a la diabetes.</li>
</ul>
<p><strong>Relevancia media</strong></p>
<ul>
<li>Insulin (Insulina) importante para evaluar la resistencia a la insulina, pero su baja importancia podra deberse a la variabilidad en los datos.</li>
</ul>
<p><strong>Las variables menos importantes son:</strong></p>
<ul>
<li>BloodPressure (Presin Arterial): Tiene baja relevancia, su relacin con diabetes es indirecta.</li>
<li>Pregnancies (Embarazos): Aunque clnicamente relevante (diabetes gestacional), su impacto en este dataset es bajo.</li>
<li>SkinThickness (Espesor de Piel): Muy baja relevancia, sin impacto claro en el modelo.</li>
</ul>
<p><strong>Opciones Tcnicas para Seleccin de Variables:</strong></p>
<p>1 <strong>Mantener Todas las Variables (Estrategia Inicial):</strong></p>
<ul>
<li>Pros:<ul>
<li>No se pierde informacin potencial.
-Permite analizar el impacto de cada variable.</li>
</ul>
</li>
<li>Contras:<ul>
<li>El modelo puede ser menos eficiente (incluye variables de baja relevancia).</li>
<li>Mayor riesgo de sobreajuste.</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>Mantener las 5 Ms Importantes</strong> (Glucose, BMI, Age, DiabetesPedigreeFunction, Insulin):</li>
</ol>
<ul>
<li>Pros:<ul>
<li>Simplifica el modelo sin perder las variables clave.</li>
<li>Aumenta la eficiencia y claridad del modelo.</li>
<li>Las variables seleccionadas tienen relevancia clnica y predictiva.</li>
</ul>
</li>
<li>Contras:<ul>
<li>Se pueden perder pequeas contribuciones combinadas de otras variables.</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>Mantener Solo las Variables Consistentes en Ambos Mtodos:</strong>
Variables: Glucose, BMI, Age, DiabetesPedigreeFunction.</li>
</ol>
<ul>
<li>Pros:<ul>
<li>Simplificacin mxima, sin prdida de informacin relevante.</li>
<li>Solo mantener las variables que son consistentes en su importancia.</li>
</ul>
</li>
<li>Contras:<ul>
<li>Se puede perder el impacto de Insulin, que puede ser relevante en combinacin.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="7.3.6.-Decisi%C3%B3n-final-de-selecci%C3%B3n-de-variables"><strong>7.3.6. Decisin final de seleccin de variables</strong><a class="anchor-link" href="#7.3.6.-Decisi%C3%B3n-final-de-selecci%C3%B3n-de-variables"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Recomendacin Profesional:</strong></p>
<p><strong>Contexto Clnico: Poblacin Pima</strong></p>
<ul>
<li>Alta natalidad: El nmero de embarazos (Pregnancies) puede ser un factor clnicamente relevante.</li>
<li>Caractersticas Genticas: La variable DiabetesPedigreeFunction refleja el riesgo gentico.</li>
<li>Problemas Metablicos: Variables como Glucose, BMI, Insulin y Age son crticas para evaluar el riesgo de diabetes.</li>
<li>Presin Arterial y SkinThickness son menos relevantes para este grupo.</li>
</ul>
<p><strong>DECISIN</strong></p>
<ul>
<li><strong>Fase 1 Modelos con todas las variables:</strong></li>
</ul>
<p>Se utilizarn las 8 variables disponibles para entrenar todos los modelos clsicos y evaluar su rendimiento global. Esta fase busca capturar toda la informacin posible del dataset original.</p>
<ul>
<li>Variables utilizadas: ['Glucose', 'BMI', 'Insulin', 'Age', 'Pregnancies', 'BloodPressure', 'SkinThickness', 'DiabetesPedigreeFunction']</li>
</ul>
<p><strong>Justificacin:</strong></p>
<ul>
<li><p>Permite aprovechar toda la informacin clnica y tcnica disponible para evaluar el impacto de todas las variables en la prediccin.</p>
</li>
<li><p>Facilita la comparacin entre modelos completos y simplificados.</p>
</li>
<li><p>Importante como baseline inicial.</p>
</li>
<li><p><strong>Fase 2 Modelos simplificados (experimentales):</strong></p>
</li>
</ul>
<p>Se entrenarn modelos nicamente con las 5 variables ms relevantes tcnica y clnicamente.</p>
<ul>
<li>Variables utilizadas: ['Glucose', 'BMI', 'Age', 'DiabetesPedigreeFunction', 'Insulin']</li>
</ul>
<p><strong>Objetivo:</strong></p>
<ul>
<li>Evaluar si un modelo con menos variables puede lograr un rendimiento similar.</li>
<li>Mejorar interpretabilidad y reducir complejidad sin comprometer recall o F1-score.</li>
<li>Testar si la eliminacin de variables menos relevantes mejora la generalizacin y el rendimiento.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Variables seleccionadas para fase reducida</span>
<span class="n">variables_importantes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Glucose'</span><span class="p">,</span> <span class="s1">'BMI'</span><span class="p">,</span> <span class="s1">'Age'</span><span class="p">,</span> <span class="s1">'DiabetesPedigreeFunction'</span><span class="p">,</span> <span class="s1">'Insulin'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="7.4.-Creaci%C3%B3n-de-Datasets-Reducidos-(5-variables-m%C3%A1s-importantes)"><strong>7.4. Creacin de Datasets Reducidos (5 variables ms importantes)</strong><a class="anchor-link" href="#7.4.-Creaci%C3%B3n-de-Datasets-Reducidos-(5-variables-m%C3%A1s-importantes)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras el anlisis de importancia tcnica (SelectKBest y Random Forest) y la interpretacin clnica, se identificaron las 5 variables ms relevantes para la prediccin de diabetes en mujeres Pima:</p>
<ul>
<li>Glucose</li>
<li>BMI</li>
<li>Age</li>
<li>DiabetesPedigreeFunction</li>
<li>Insulin</li>
</ul>
<p>Estas variables sern utilizadas en una segunda fase experimental para entrenar modelos ms simples y evaluar si se logra un rendimiento comparable al de los modelos completos.</p>
<p>Los datasets resultantes <code>X_train_final_v1_reducido.csv y X_test_final_v1_reducido.csv) se han guardado en la carpeta </code>datos_procesados/final` para su posterior uso.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="c1"># 1. Ruta a la carpeta final</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/final"</span>

<span class="c1"># 2. Cargar los datasets completos directamente desde disco</span>
<span class="n">X_train_v1_completo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v1.csv"</span><span class="p">))</span>
<span class="n">X_test_v1_completo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_test_final_v1.csv"</span><span class="p">))</span>

<span class="c1"># 4. Crear datasets reducidos sin afectar los originales</span>
<span class="n">X_train_final_v1_reducido</span> <span class="o">=</span> <span class="n">X_train_v1_completo</span><span class="p">[</span><span class="n">variables_importantes</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X_test_final_v1_reducido</span> <span class="o">=</span> <span class="n">X_test_v1_completo</span><span class="p">[</span><span class="n">variables_importantes</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># 5. Guardar datasets reducidos</span>
<span class="n">X_train_final_v1_reducido</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v1_reducido.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test_final_v1_reducido</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_test_final_v1_reducido.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># 6. Confirmar</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Datasets reducidos creados desde las versiones completas y guardados correctamente."</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_train_final_v1_reducido:"</span><span class="p">,</span> <span class="n">X_train_final_v1_reducido</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_test_final_v1_reducido:"</span><span class="p">,</span> <span class="n">X_test_final_v1_reducido</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="8.-Entrenamiento-de-modelos:-Training-Pipeline"><strong>8. Entrenamiento de modelos: Training Pipeline</strong><a class="anchor-link" href="#8.-Entrenamiento-de-modelos:-Training-Pipeline"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Objetivo-del-Modelado-de-Clasificadores-de-Diabetes-y-definici%C3%B3n-de-fases"><strong>Objetivo del Modelado de Clasificadores de Diabetes y definicin de fases</strong><a class="anchor-link" href="#Objetivo-del-Modelado-de-Clasificadores-de-Diabetes-y-definici%C3%B3n-de-fases"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Objetivo General</strong></p>
<p>Evaluar el rendimiento de diferentes modelos de clasificacin para predecir la presencia de diabetes en mujeres Pima, comparando:</p>
<ul>
<li>Dos estrategias de transformacin de datos (Feature Pipelines V1 y V2).</li>
<li>Dos configuraciones de variables: todas las variables disponibles vs. las 5 variables ms importantes.</li>
</ul>
<p>Esto permitir identificar la mejor combinacin de procesamiento y seleccin de variables para maximizar el rendimiento del modelo en trminos clnicos y tcnicos.</p>
<p><strong>Estructura del Training Pipeline</strong></p>
<p>Se han definido dos fases de modelado:</p>
<ul>
<li>8.1: Pipeline V1 (Power + Std): X_train_final_v1, X_test_final_v1: Establecer el rendimiento base con transformaciones potentes<ul>
<li>Evaluar el rendimiento del pipeline con PowerTransformer + StandardScaler utilizando la totalidad de las variables. Baseline potente.</li>
</ul>
</li>
<li>8.2: Pipeline V2 (solo Std): X_train_final_v2, X_test_final_v2: Comparar contra una transformacin ms simple<ul>
<li>Comparar con un pipeline ms simple (solo StandardScaler). Evaluar si se logra rendimiento similar con menor complejidad computacional.</li>
</ul>
</li>
<li>8.3: Pipeline V1 (Power + Std): x_train_final_v1_reducido, X_test_final_v1_reducido: Evaluar si un modelo simplificado puede lograr buen rendimiento<ul>
<li>Testear si un modelo simplificado con solo las variables ms importantes alcanza un rendimiento competitivo y mejora la interpretabilidad.</li>
</ul>
</li>
<li>En todas las fases se utilizar la variable objetivo y_train_final (entrenamiento) y y_test_final (test).</li>
</ul>
<p><strong>Modelos a Evaluar</strong></p>
<p>Se entrenarn los siguientes clasificadores binarios:</p>
<ul>
<li><strong>Logisitc cRegression</strong>: Modelo lineal probabilstico, base interpretativa.
-<strong>DecisionTreeClassifier</strong>: rbol simple, til para interpretabilidad.</li>
<li><strong>RandomForestClassifier:</strong> Bosque de rboles, robusto ante overfitting.</li>
<li><strong>GradientBoostingClassifier</strong>: Modelo de boosting ms preciso, aunque ms lento.</li>
<li><strong>XGBoostClassifier:</strong>Versin optimizada de boosting, muy eficaz en competiciones.</li>
<li><strong>SVC</strong>: Clasificador de mrgenes, sensible al escalado.</li>
<li><strong>KNeighborsClassifier</strong>: Clasifica segn vecinos ms cercanos.</li>
<li><strong>GaussianNB</strong>: Clasificador bayesiano, rpido y eficaz si se cumplen supuestos.</li>
</ul>
<p><strong>Mtricas de Evaluacin</strong></p>
<p>Se analizarn mtricas estndar y especficas para problemas clnicos:</p>
<ul>
<li><strong>Accuracy</strong>: Proporcin total de aciertos. Si hay clases equilibradas rpida, puede ser engaosa si hay desbalance.</li>
<li><strong>Precision (clase 1)</strong>: Proporcin de verdaderos positivos entre los positivos predichos. Evitar etiquetar como diabtico uns persona sana. De los positivos predichos, cuntos lo eran realmente?</li>
<li><strong>Recall (clase 1)</strong>: Sensibilidad, importante para evitar falsos negativos. Muy importante: no dejar pasar a un paciente con diabetes sin identificarlo De los positivos reales, cuntos se detectaron? Prioritaria en salud.</li>
<li><strong>F1-score (clase 1)</strong>: Si quieres un equilibrio entre ambos Recomendado en este caso. Media armnica entre precision y recall. til con clases desbalanceadas.</li>
<li><strong>ROC-AUC</strong>: rea bajo la curva ROC,  Mide la capacidad de discriminar entre clases. Ideal para comparativas. Se usa mucho en salud.</li>
<li><strong>Cohen's Kappa</strong>: Mide la concordancia entre prediccin y realidad, ajustado por azar.</li>
<li>Se incluyen tambin las versiones macro y ponderadas (macro, weighted) de estas mtricas para comparar el equilibrio general del modelo.<ul>
<li>Macro average (precision, recall, f1)</li>
<li>Weighted average (precision, recall, f1)</li>
</ul>
</li>
</ul>
<p><strong>Visualizaciones complementarias</strong></p>
<ul>
<li>Matriz de confusin: Permite visualizar los errores del modelo: falsos positivos y negativos.</li>
<li>PR Curve: Visualiza precisin vs. recall: til en datasets desbalanceados.</li>
<li>Curva ROC: Muestra el desempeo global del modelo.</li>
</ul>
<p><strong>Proceso</strong></p>
<ol>
<li>Entrenar modelos en cada fase.</li>
<li>Evaluar en conjunto de test.</li>
<li>Comparar visual y numricamente.</li>
<li>Seleccionar el mejor pipeline y configuracin de variables.</li>
<li>Aplicar SMOTE o ajustes en los modelos seleccionados si es necesario.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Crear-y_test_final.csv-a-partir-del-original"><strong>Crear y_test_final.csv a partir del original</strong><a class="anchor-link" href="#Crear-y_test_final.csv-a-partir-del-original"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Definir rutas</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/final"</span>
<span class="n">ruta_original</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/original"</span>

<span class="c1"># Verificar si y_test_final ya existe</span>
<span class="n">ruta_y_test_final</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_test_final.csv"</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">ruta_y_test_final</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">" y_test_final.csv no encontrado en la carpeta 'final'. Creando a partir del original..."</span><span class="p">)</span>

    <span class="c1"># Buscar el archivo y_test ms reciente en la carpeta original</span>
    <span class="n">archivos_y_test</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">ruta_original</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"y_test"</span><span class="p">)]</span>
    <span class="n">archivos_y_test</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">archivos_y_test</span><span class="p">:</span>
        <span class="n">archivo_y_test_mas_reciente</span> <span class="o">=</span> <span class="n">archivos_y_test</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ruta_origen</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_original</span><span class="p">,</span> <span class="n">archivo_y_test_mas_reciente</span><span class="p">)</span>

        <span class="c1"># Cargar y guardar en carpeta final</span>
        <span class="n">y_test_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ruta_origen</span><span class="p">)</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
        <span class="n">y_test_final</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_y_test_final</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" y_test_final.csv creado correctamente a partir de: </span><span class="si">{</span><span class="n">archivo_y_test_mas_reciente</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">" No se encontr ningn archivo 'y_test' en la carpeta original."</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">" y_test_final.csv ya existe en la carpeta 'final'."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="8.1:-Fase-1.1:-Modelado-Pipeline-V1-(Power-+-Std)-8-variables"><strong>8.1: Fase 1.1: Modelado Pipeline V1 (Power + Std) 8 variables</strong><a class="anchor-link" href="#8.1:-Fase-1.1:-Modelado-Pipeline-V1-(Power-+-Std)-8-variables"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.1.1-Carga-y-verificaci%C3%B3n-de-datasets-de-la-Fase-1-(V1-%E2%80%93-Todas-las-variables)"><strong>8.1.1 Carga y verificacin de datasets de la Fase 1 (V1  Todas las variables)</strong><a class="anchor-link" href="#8.1.1-Carga-y-verificaci%C3%B3n-de-datasets-de-la-Fase-1-(V1-%E2%80%93-Todas-las-variables)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>En esta fase se utilizan los datasets generados con el Pipeline V1 (PowerTransformer + StandardScaler), manteniendo las 8 variables originales. Estos sern los conjuntos de entrenamiento y test utilizados para entrenar todos los modelos base en la Fase 1.</p>
<p><strong>Dataset utilizados:</strong></p>
<ul>
<li>X_train_final_v1.csv</li>
<li>X_test_final_v1.csv</li>
<li>y_train_final.csv</li>
<li>y_test_final.csv</li>
</ul>
<p><strong>Ubicacin- Trazabilidad</strong>:
Carpeta: /datos_procesados/final/</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="c1"># 1. Definir ruta base</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/final"</span>

<span class="c1"># 2. Cargar directamente los archivos correctos por nombre</span>
<span class="n">X_train_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v1.csv"</span><span class="p">))</span>
<span class="n">X_test_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_test_final_v1.csv"</span><span class="p">))</span>
<span class="n">y_train_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_train_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">y_test_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_test_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>

<span class="c1"># 4. Confirmar dimensiones</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Dimensiones de los datasets cargados (Fase 1 - V1 con 8 variables):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"X_train_v1: </span><span class="si">{</span><span class="n">X_train_v1</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"X_test_v1:  </span><span class="si">{</span><span class="n">X_test_v1</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"y_train_final: </span><span class="si">{</span><span class="n">y_train_final</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"y_test_final:  </span><span class="si">{</span><span class="n">y_test_final</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.1.2.-Definici%C3%B3n-de-Modelos-Base:-Diccionario-de-modelos-para-Fase-1--Pipeline-V1"><strong>8.1.2. Definicin de Modelos Base: Diccionario de modelos para Fase 1- Pipeline V1</strong><a class="anchor-link" href="#8.1.2.-Definici%C3%B3n-de-Modelos-Base:-Diccionario-de-modelos-para-Fase-1--Pipeline-V1"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.tree</span><span class="w"> </span><span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">GradientBoostingClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.svm</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neighbors</span><span class="w"> </span><span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.naive_bayes</span><span class="w"> </span><span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xgboost</span><span class="w"> </span><span class="kn">import</span> <span class="n">XGBClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">accuracy_score</span>

<span class="c1"># Diccionario con los modelos clsicos para Fase 1 (pipeline V1, 8 variables)</span>
<span class="n">modelos_fase1_v1</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"Logistic Regression"</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Decision Tree"</span><span class="p">:</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Random Forest"</span><span class="p">:</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Gradient Boosting"</span><span class="p">:</span> <span class="n">GradientBoostingClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"XGBoost"</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"SVC"</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"KNeighbors"</span><span class="p">:</span> <span class="n">KNeighborsClassifier</span><span class="p">(),</span>
    <span class="s2">"GaussianNB"</span><span class="p">:</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Modelos definidos correctamente para la Fase 1 con pipeline V1."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.1.3.-Entrenamiento-y-Evaluaci%C3%B3n-de-Modelos"><strong>8.1.3. Entrenamiento y Evaluacin de Modelos</strong><a class="anchor-link" href="#8.1.3.-Entrenamiento-y-Evaluaci%C3%B3n-de-Modelos"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>En este bloque se entrena cada uno de los modelos definidos en el punto anterior con el dataset completo transformado por el pipeline V1 (8 variables) y se evalan sus predicciones sobre el conjunto de test.</p>
<p>Se calculan mltiples mtricas clave, tanto especficas para la clase positiva (diabetes) como mtricas macro y weighted para una evaluacin ms equilibrada.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">f1_score</span><span class="p">,</span> <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">cohen_kappa_score</span><span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span> <span class="c1"># Import display</span>

<span class="c1"># Inicializar lista de resultados</span>
<span class="n">resultados_fase1_v1</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Entrenar y evaluar cada modelo</span>
<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_fase1_v1</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Entrenando modelo: </span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Mtricas especficas clase positiva</span>
    <span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">prec_1</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">rec_1</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">f1_1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_proba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Promedios macro y weighted</span>
    <span class="n">prec_macro</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">)</span>
    <span class="n">rec_macro</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">)</span>
    <span class="n">f1_macro</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">)</span>

    <span class="n">prec_weight</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">)</span>
    <span class="n">rec_weight</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">)</span>
    <span class="n">f1_weight</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">)</span>

    <span class="n">kappa</span> <span class="o">=</span> <span class="n">cohen_kappa_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>

    <span class="n">resultados_fase1_v1</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span>
        <span class="s2">"Precision (1)"</span><span class="p">:</span> <span class="n">prec_1</span><span class="p">,</span>
        <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="n">rec_1</span><span class="p">,</span>
        <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="n">f1_1</span><span class="p">,</span>
        <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span>
        <span class="s2">"Cohen's Kappa"</span><span class="p">:</span> <span class="n">kappa</span><span class="p">,</span>
        <span class="s2">"Precision (macro)"</span><span class="p">:</span> <span class="n">prec_macro</span><span class="p">,</span>
        <span class="s2">"Recall (macro)"</span><span class="p">:</span> <span class="n">rec_macro</span><span class="p">,</span>
        <span class="s2">"F1-score (macro)"</span><span class="p">:</span> <span class="n">f1_macro</span><span class="p">,</span>
        <span class="s2">"Precision (weighted)"</span><span class="p">:</span> <span class="n">prec_weight</span><span class="p">,</span>
        <span class="s2">"Recall (weighted)"</span><span class="p">:</span> <span class="n">rec_weight</span><span class="p">,</span>
        <span class="s2">"F1-score (weighted)"</span><span class="p">:</span> <span class="n">f1_weight</span>
    <span class="p">})</span>

<span class="c1"># Completar la lista resultados_fase1_v1</span>
<span class="n">df_resultados_fase1_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_fase1_v1</span><span class="p">)</span>

<span class="c1"># Detectar columnas numricas (excluye 'Modelo')</span>
<span class="n">columnas_numericas</span> <span class="o">=</span> <span class="n">df_resultados_fase1_v1</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">'number'</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Mostrar tabla con degradado solo en columnas numricas</span>
<span class="n">display</span><span class="p">(</span>
    <span class="n">df_resultados_fase1_v1</span><span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'text-align'</span><span class="p">:</span> <span class="s1">'center'</span><span class="p">})</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Luego de completar la lista resultados_fase1_v1</span>
<span class="n">df_resultados_fase1_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_fase1_v1</span><span class="p">)</span>

<span class="c1"># Detectar columnas numricas (excluye 'Modelo')</span>
<span class="n">columnas_numericas</span> <span class="o">=</span> <span class="n">df_resultados_fase1_v1</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">'number'</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Mostrar tabla con degradado solo en columnas numricas</span>
<span class="n">display</span><span class="p">(</span>
    <span class="n">df_resultados_fase1_v1</span><span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'text-align'</span><span class="p">:</span> <span class="s1">'center'</span><span class="p">})</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Tabla de resultados ordenada por Recall (1)</span>
<span class="n">columnas_metricas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Precision (1)"</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">,</span> <span class="s2">"Cohen's Kappa"</span><span class="p">,</span>
    <span class="s2">"Precision (macro)"</span><span class="p">,</span> <span class="s2">"Recall (macro)"</span><span class="p">,</span> <span class="s2">"F1-score (macro)"</span><span class="p">,</span>
    <span class="s2">"Precision (weighted)"</span><span class="p">,</span> <span class="s2">"Recall (weighted)"</span><span class="p">,</span> <span class="s2">"F1-score (weighted)"</span>
<span class="p">]</span>

<span class="c1"># Mostrar tabla con degradado azul</span>
<span class="n">df_resultados_fase1_v1</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="c1"># Seleccionar mtricas clave para graficar</span>
<span class="n">df_melt</span> <span class="o">=</span> <span class="n">df_resultados_fase1_v1</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span>
    <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s2">"Valor"</span>
<span class="p">)</span>

<span class="c1"># Grfico de barras</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_melt</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Valor"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Comparativa de Recall, F1-score y ROC-AUC por modelo (Fase 1 - Pipeline V1)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Valor"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.1.4.-Evaluaci%C3%B3n-de-Modelos-con-Pipeline-V1-(Fase-1_-Todas-las-variables)"><strong>8.1.4. Evaluacin de Modelos con Pipeline V1 (Fase 1_ Todas las variables)</strong><a class="anchor-link" href="#8.1.4.-Evaluaci%C3%B3n-de-Modelos-con-Pipeline-V1-(Fase-1_-Todas-las-variables)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Evaluar el rendimiento de modelos clsicos de clasificacin aplicando el Feature Pipeline V1 (PowerTransformer + StandardScaler) y usando todas las variables disponibles.</p>
<p><strong>Mtricas Consideradas:</strong></p>
<ul>
<li><strong>Recall (1)</strong>	Proporcin de casos de diabetes correctamente identificados (prioritaria en contexto clnico).</li>
<li><strong>F1-score (1)</strong>	Equilibrio entre precisin y recall, til en casos desbalanceados.</li>
<li><strong>ROC-AUC</strong>	Capacidad del modelo para discriminar entre clases positivas y negativas.</li>
</ul>
<p><strong>Anlisis de Resultados:</strong></p>
<ul>
<li><strong>XGBoost</strong> es el modelo con mejor Recall (1) (0.519), F1-score (1) (0.589) y ROC-AUC (0.809), siendo el ms equilibrado y prometedor en la Fase 1.</li>
<li><strong>Logistic Regression</strong> tiene un rendimiento muy cercano, con alta interpretabilidad clnica. Recall algo inferior, pero aceptable.</li>
<li><strong>Random Forest y Gradient Boosting</strong> muestran buen ROC-AUC (&gt;0.77), pero sacrifican Recall, lo que puede comprometer la sensibilidad del modelo.</li>
<li><strong>SVC y KNN</strong> presentan bajo Recall (&lt;0.20), siendo menos recomendables sin ajustes adicionales (balanceo).</li>
<li><strong>Decision Tree</strong> tiene bajo rendimiento general, aunque es til como modelo base simple.</li>
<li><strong>GaussianNB</strong> tiene un recall medio (0.296), pero se queda corto frente a XGBoost o Logistic.</li>
</ul>
<p><strong>Interpretacin Clnica:</strong></p>
<p>En contextos sanitarios es fundamental minimizar falsos negativos (Recall).</p>
<p>A pesar de que ningn modelo alcanza el 90% - 95 % requerido como ideal clnico, XGBoost y Logistic Regression son los que ms se acercan y sern base para comparacin futura.</p>
<p><strong>Se explorar en siguientes fases:</strong></p>
<ul>
<li>Tcnicas de balanceo (SMOTE, class_weight).</li>
<li>Ajuste de umbral de decisin.</li>
<li>Reduccin de variables (Fase 2).</li>
<li>Optimizacin de hiperparmetros.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.1.5-Guardar-el-resultado-del-pipeline-V1"><strong>8.1.5 Guardar el resultado del pipeline V1</strong><a class="anchor-link" href="#8.1.5-Guardar-el-resultado-del-pipeline-V1"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar resultados del pipeline V1</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_resultados</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"resultados"</span><span class="p">)</span>

<span class="n">ruta_guardado_fase1_v1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"resultados_fase1_pipeline_v1.csv"</span><span class="p">)</span>
<span class="n">df_resultados_fase1_v1</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado_fase1_v1</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Resultados guardados : Resultados_fase1_pipeline_v1."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="8.2.-Fase-1.2:-Modelado-con-Pipeline-V2-(StandardScaler)--8-variables"><strong>8.2. Fase 1.2: Modelado con Pipeline V2 (StandardScaler)- 8 variables</strong><a class="anchor-link" href="#8.2.-Fase-1.2:-Modelado-con-Pipeline-V2-(StandardScaler)--8-variables"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.2.1-Carga-y-verificaci%C3%B3n-de-datasets-de-la-Fase-1-(V2-%E2%80%93-Todas-las-variables)"><strong>8.2.1 Carga y verificacin de datasets de la Fase 1 (V2  Todas las variables)</strong><a class="anchor-link" href="#8.2.1-Carga-y-verificaci%C3%B3n-de-datasets-de-la-Fase-1-(V2-%E2%80%93-Todas-las-variables)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Evaluar el rendimiento de los modelos clsicos usando el conjunto de datos transformado con el Feature Pipeline V2, que aplica solo StandardScaler (sin PowerTransformer), manteniendo las 8 variables originales.</p>
<p><strong>Dataset utilizados</strong></p>
<ul>
<li>X_train_final_v2.csv (614, 8)  versin escalada con StandardScaler</li>
<li>X_test_final_v2.csv (154, 8)</li>
<li>y_train_final.csv</li>
<li>y_test_final.csv</li>
</ul>
<p><strong>Ubicacin- Trazabilidad</strong>: Carpeta: /datos_procesados/final/</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 8.2.1 Cargar datasets definitivos para Pipeline V2 (todas las variables)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="c1"># Ruta final donde estn guardados</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/datos_procesados/final"</span>

<span class="c1"># Cargar archivos</span>
<span class="n">X_train_v2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v2.csv"</span><span class="p">))</span>
<span class="n">X_test_v2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_test_final_v2.csv"</span><span class="p">))</span>
<span class="n">y_train_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_train_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">y_test_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_test_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>

<span class="c1"># Verificar dimensiones</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Dimensiones de los datasets cargados (Fase 2 - V2 con 8 variables):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_train_v2:"</span><span class="p">,</span> <span class="n">X_train_v2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_test_v2: "</span><span class="p">,</span> <span class="n">X_test_v2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_train_final:"</span><span class="p">,</span> <span class="n">y_train_final</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_test_final: "</span><span class="p">,</span> <span class="n">y_test_final</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.2.2.-Definici%C3%B3n-de-modelos-cl%C3%A1sicos-para-la-Fase-2-(pipeline-V2---todas-las-variables)"><strong>8.2.2. Definicin de modelos clsicos para la Fase 2 (pipeline V2 - todas las variables)</strong><a class="anchor-link" href="#8.2.2.-Definici%C3%B3n-de-modelos-cl%C3%A1sicos-para-la-Fase-2-(pipeline-V2---todas-las-variables)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Vamos a definir el mismo conjunto de modelos clsicos que en la Fase 1 para mantener una comparacin justa:</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.tree</span><span class="w"> </span><span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">GradientBoostingClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.svm</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neighbors</span><span class="w"> </span><span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.naive_bayes</span><span class="w"> </span><span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xgboost</span><span class="w"> </span><span class="kn">import</span> <span class="n">XGBClassifier</span>

<span class="c1"># Diccionario con los modelos</span>
<span class="n">modelos_fase1_v2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"Logistic Regression"</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Decision Tree"</span><span class="p">:</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Random Forest"</span><span class="p">:</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Gradient Boosting"</span><span class="p">:</span> <span class="n">GradientBoostingClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"XGBoost"</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"SVC"</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"KNeighbors"</span><span class="p">:</span> <span class="n">KNeighborsClassifier</span><span class="p">(),</span>
    <span class="s2">"GaussianNB"</span><span class="p">:</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Modelos definidos correctamente para la Fase 2 con pipeline V2."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.2.3.-Entrenamiento-t-Evaluaci%C3%B3n-de-Mocelos-V2"><strong>8.2.3. Entrenamiento t Evaluacin de Mocelos V2</strong><a class="anchor-link" href="#8.2.3.-Entrenamiento-t-Evaluaci%C3%B3n-de-Mocelos-V2"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Este bloque entrena cada modelo con el conjunto X_train_v2 y evala con X_test_v2, generando las mtricas clave:</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">f1_score</span><span class="p">,</span> <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">cohen_kappa_score</span>
<span class="p">)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Inicializar lista de resultados</span>
<span class="n">resultados_fase1_v2</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Entrenamiento y evaluacin de cada modelo</span>
<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_fase1_v2</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Entrenando modelo: </span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v2</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v2</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v2</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Mtricas principales</span>
    <span class="n">resultados_fase1_v2</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Precision (1)"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_proba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
        <span class="s2">"Cohen's Kappa"</span><span class="p">:</span> <span class="n">cohen_kappa_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Precision (macro)"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">),</span>
        <span class="s2">"Recall (macro)"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">),</span>
        <span class="s2">"F1-score (macro)"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">),</span>
        <span class="s2">"Precision (weighted)"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">),</span>
        <span class="s2">"Recall (weighted)"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">),</span>
        <span class="s2">"F1-score (weighted)"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">),</span>
    <span class="p">})</span>

<span class="c1"># Crear DataFrame con resultados</span>
<span class="n">df_resultados_fase1_v2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_fase1_v2</span><span class="p">)</span>
<span class="n">df_resultados_fase1_v2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mostrar tabla</span>
<span class="n">columnas_metricas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Precision (1)"</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">,</span> <span class="s2">"Cohen's Kappa"</span><span class="p">,</span>
    <span class="s2">"Precision (macro)"</span><span class="p">,</span> <span class="s2">"Recall (macro)"</span><span class="p">,</span> <span class="s2">"F1-score (macro)"</span><span class="p">,</span>
    <span class="s2">"Precision (weighted)"</span><span class="p">,</span> <span class="s2">"Recall (weighted)"</span><span class="p">,</span> <span class="s2">"F1-score (weighted)"</span>
<span class="p">]</span>

<span class="n">display</span><span class="p">(</span>
    <span class="n">df_resultados_fase1_v2</span>
    <span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_metricas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_metricas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'text-align'</span><span class="p">:</span> <span class="s1">'center'</span><span class="p">})</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Tabla de resultados ordenada por Recall (1)</span>
<span class="n">columnas_metricas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Precision (1)"</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">,</span> <span class="s2">"Cohen's Kappa"</span><span class="p">,</span>
    <span class="s2">"Precision (macro)"</span><span class="p">,</span> <span class="s2">"Recall (macro)"</span><span class="p">,</span> <span class="s2">"F1-score (macro)"</span><span class="p">,</span>
    <span class="s2">"Precision (weighted)"</span><span class="p">,</span> <span class="s2">"Recall (weighted)"</span><span class="p">,</span> <span class="s2">"F1-score (weighted)"</span>
<span class="p">]</span>

<span class="c1"># Mostrar tabla con degradado azul</span>
<span class="n">df_resultados_fase1_v2</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="c1"># Seleccin de mtricas</span>
<span class="n">df_melt_v2</span> <span class="o">=</span> <span class="n">df_resultados_fase1_v2</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span>
    <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s2">"Valor"</span>
<span class="p">)</span>

<span class="c1"># Grfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_melt_v2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Valor"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Comparativa de Recall, F1-score y ROC-AUC por modelo (Fase 2 - Pipeline V2)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Valor"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.2.4.-Evaluaci%C3%B3n-de-Modelos-con-Pipeline-V2-(Fase-1_-Todas-las-variables)"><strong>8.2.4. Evaluacin de Modelos con Pipeline V2 (Fase 1_ Todas las variables)</strong><a class="anchor-link" href="#8.2.4.-Evaluaci%C3%B3n-de-Modelos-con-Pipeline-V2-(Fase-1_-Todas-las-variables)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li><strong>XGBoost</strong> vuelve a destacar como el mejor modelo en esta fase, manteniendo un buen balance entre recall y F1-score.</li>
<li><strong>LogisticRegression</strong> mejora respecto a Fase 1 en recall, aunque su F1 no supera al de XGBoost.</li>
<li><strong>GaussianNB</strong> sorprende con el mejor recall (0.556), lo que podra ser til clnicamente.</li>
<li><strong>SVC y KNeighbors</strong> mejoran sus mtricas respecto a Fase 1, aunque siguen sin superar a los modelos principales.</li>
<li><strong>DecisionTree</strong> contina como el modelo ms dbil.</li>
</ul>
<p>El rendimiento general es <strong>similar al de Pipeline V1</strong>, aunque se observa una leve mejora en precisin para modelos como SVC. Esto sugiere que <strong>la transformacin PowerTransformer del Pipeline V1 aporta robustez</strong>, aunque Pipeline V2 es competitivo con algunos modelos.</p>
<p>Se recomienda continuar con la Fase 3 (modelos reducidos) y posteriormente aplicar tcnicas de <strong>balanceo de clases</strong> para maximizar recall.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Guardar-resultados-Pipeline-V2"><strong>Guardar resultados Pipeline V2</strong><a class="anchor-link" href="#Guardar-resultados-Pipeline-V2"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar resultados del pipeline V1</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_resultados</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"resultados"</span><span class="p">)</span>

<span class="n">ruta_guardado_fase1_v2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"resultados_fase1_pipeline_v2.csv"</span><span class="p">)</span>
<span class="n">df_resultados_fase1_v2</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado_fase1_v2</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Resultados guardados : Resultados_fase1_pipeline_v2."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="An%C3%A1lisis-Comparativo-entre-resultados-Pipeline-V1-vs.-V2"><strong>Anlisis Comparativo entre resultados Pipeline V1 vs. V2</strong><a class="anchor-link" href="#An%C3%A1lisis-Comparativo-entre-resultados-Pipeline-V1-vs.-V2"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Cargar resultados de ambos pipelines</span>
<span class="n">path_v1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"resultados"</span><span class="p">,</span> <span class="s2">"resultados_fase1_pipeline_v1.csv"</span><span class="p">)</span>
<span class="n">path_v2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"resultados"</span><span class="p">,</span> <span class="s2">"resultados_fase1_pipeline_v2.csv"</span><span class="p">)</span>

<span class="n">df_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_v1</span><span class="p">)</span>
<span class="n">df_v2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_v2</span><span class="p">)</span>

<span class="c1"># Aadir sufijos para distinguir mtricas</span>
<span class="n">df_v1</span> <span class="o">=</span> <span class="n">df_v1</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span><span class="o">.</span><span class="n">add_suffix</span><span class="p">(</span><span class="s2">" (V1)"</span><span class="p">)</span>
<span class="n">df_v2</span> <span class="o">=</span> <span class="n">df_v2</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span><span class="o">.</span><span class="n">add_suffix</span><span class="p">(</span><span class="s2">" (V2)"</span><span class="p">)</span>

<span class="c1"># Unir por ndice (modelo)</span>
<span class="n">comparativa</span> <span class="o">=</span> <span class="n">df_v1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df_v2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"inner"</span><span class="p">)</span>

<span class="c1"># Mostrar tabla comparativa (solo mtricas principales)</span>
<span class="n">columnas_seleccionadas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span>
<span class="p">]</span>
<span class="n">cols_v1</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="o">+</span> <span class="s2">" (V1)"</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas_seleccionadas</span><span class="p">]</span>
<span class="n">cols_v2</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="o">+</span> <span class="s2">" (V2)"</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas_seleccionadas</span><span class="p">]</span>

<span class="n">df_comparativa_v1_v2</span> <span class="o">=</span> <span class="n">comparativa</span><span class="p">[</span><span class="n">cols_v1</span> <span class="o">+</span> <span class="n">cols_v2</span><span class="p">]</span>

<span class="c1"># Visualizar con degradado</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_comparativa_v1_v2</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras entrenar y evaluar los modelos seleccionados con los datasets completos del Pipeline V1 (PowerTransformer + StandardScaler) y del Pipeline V2 (solo StandardScaler), se realiza una comparativa tcnica y clnica para identificar qu versin del pipeline ofrece un mejor rendimiento general y mayor robustez en la prediccin de diabetes.</p>
<p><strong>Observaciones Clave</strong></p>
<ul>
<li>XGBoost obtiene exactamente los mismos resultados en ambas versiones, con el mejor ROC-AUC (0.809) y el mayor Recall (1) = 0.519, lo que lo posiciona como el modelo ms robusto en ambas transformaciones.</li>
<li>Logistic Regression muestra una ligera mejora en Recall y ROC-AUC en V2, a costa de una pequea cada en Accuracy y F1.</li>
<li>GaussianNB mejora significativamente en V2, pasando de Recall (1) = 0.296 a 0.556, convirtindose en el segundo modelo ms sensible.</li>
<li>Modelos como SVC y KNeighbors tambin mejoran notablemente su Recall y F1 en el pipeline V2.</li>
</ul>
<p><strong>Resumen Comparativo</strong>
<img alt="image.png" src="data:image/png;base64,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"/></p>
<p><strong>Conclusin Tcnica y Clnica</strong></p>
<ul>
<li>Pipeline V1 es adecuado para modelos potentes basados en rboles, pero no logra buen recall en modelos lineales o sencillos.</li>
<li>Pipeline V2 logra mejores resultados de recall y F1 en modelos como GaussianNB o SVC, siendo por tanto ms apropiado en entornos clnicos donde es crucial minimizar los falsos negativos (es decir, no dejar sin diagnosticar casos de diabetes).</li>
</ul>
<p><strong>Conclusin Tcnica</strong></p>
<ul>
<li>El pipeline V2 (StandardScaler) ofrece mejoras concretas en modelos que son ms sensibles a la escala lineal, como SVC, KNN y GaussianNB.</li>
<li>El pipeline V1 (con PowerTransformer) se mantiene competitivo en modelos basados en boosting y rboles.</li>
</ul>
<p><strong>Decisin Final</strong></p>
<ul>
<li>Pipeline V2 ser considerado como referencia principal en contextos donde se prioriza la sensibilidad clnica.</li>
<li>Pipeline V1 se utilizar en la Fase 2 con las 5 variables ms importantes, para comprobar si un modelo reducido puede mantener el rendimiento o incluso mejorarlo.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar la tabla comparativa de mtricas entre V1 y V2</span>
<span class="n">nombre_archivo_comparativa</span> <span class="o">=</span> <span class="s2">"comparativa_modelos_v1_v2.csv"</span>
<span class="n">ruta_guardado_comparativa</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_archivo_comparativa</span><span class="p">)</span>

<span class="n">df_comparativa_v1_v2</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado_comparativa</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Archivo de comparativa guardado correctamente en: </span><span class="si">{</span><span class="n">ruta_guardado_comparativa</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="8.3-Fase-2:-Modelos-con-las-5-Variables-M%C3%A1s-Importantes-(Pipeline-V1)"><strong>8.3 Fase 2: Modelos con las 5 Variables Ms Importantes (Pipeline V1)</strong><a class="anchor-link" href="#8.3-Fase-2:-Modelos-con-las-5-Variables-M%C3%A1s-Importantes-(Pipeline-V1)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Evaluar si un modelo de clasificacin con solo las 5 variables ms relevantes tcnica y clnicamente puede lograr un rendimiento competitivo respecto al modelo completo con las 8 variables.</p>
<p><strong>Dataset utilizado</strong>
Se utilizarn los datasets reducidos generados en el punto 7.4, basados en el Pipeline V1:</p>
<ul>
<li>X_train_final_v1_reducido.csv</li>
<li>X_test_final_v1_reducido.csv</li>
<li>y_train_final.csv</li>
<li>y_test_final.csv</li>
</ul>
<p><strong>Variables seleccionadas</strong>
Las 5 variables seleccionadas por su importancia tcnica y relevancia clnica son: Glucose, BMI, Age, DiabetesPedigreeFunction, Insulin</p>
<p><strong>Objetivo Comparativo</strong></p>
<ul>
<li>Analizar si un modelo con solo 5 variables consigue mantener un rendimiento clnicamente vlido (recall  0.6 preferiblemente).</li>
<li>Comprobar si se gana en eficiencia y generalizacin reduciendo la dimensionalidad.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.3.1-Carga-y-verificaci%C3%B3n-de-datasets-de-la-Fase-2-(V1:-5-variables)"><strong>8.3.1 Carga y verificacin de datasets de la Fase 2 (V1: 5 variables)</strong><a class="anchor-link" href="#8.3.1-Carga-y-verificaci%C3%B3n-de-datasets-de-la-Fase-2-(V1:-5-variables)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="s2">"final"</span><span class="p">)</span>

<span class="n">X_train_reducido</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v1_reducido.csv"</span><span class="p">))</span>
<span class="n">X_test_reducido</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_test_final_v1_reducido.csv"</span><span class="p">))</span>
<span class="n">y_train_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_train_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">y_test_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_test_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"X_train_reducido:"</span><span class="p">,</span> <span class="n">X_train_reducido</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_test_reducido:"</span><span class="p">,</span> <span class="n">X_test_reducido</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_train_final:"</span><span class="p">,</span> <span class="n">y_train_final</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_test_final:"</span><span class="p">,</span> <span class="n">y_test_final</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Entrenamiento y evaluacin  FASE 2 (pipeline V1 con las 5 variables ms importantes)</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.3.2.-Definici%C3%B3n,-entrenamiento-y-evaluaci%C3%B3n-de-Modelos-Base:-Diccionario-de-modelos-para-Fase-2--Pipeline-V1-5-variables"><strong>8.3.2. Definicin, entrenamiento y evaluacin de Modelos Base: Diccionario de modelos para Fase 2- Pipeline V1 5 variables</strong><a class="anchor-link" href="#8.3.2.-Definici%C3%B3n,-entrenamiento-y-evaluaci%C3%B3n-de-Modelos-Base:-Diccionario-de-modelos-para-Fase-2--Pipeline-V1-5-variables"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Importar libreras</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">f1_score</span><span class="p">,</span>
    <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">cohen_kappa_score</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.tree</span><span class="w"> </span><span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">GradientBoostingClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.svm</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neighbors</span><span class="w"> </span><span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.naive_bayes</span><span class="w"> </span><span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xgboost</span><span class="w"> </span><span class="kn">import</span> <span class="n">XGBClassifier</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># 2. Definir modelos clsicos para esta fase</span>
<span class="n">modelos_fase2_v1</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"Logistic Regression"</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Decision Tree"</span><span class="p">:</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Random Forest"</span><span class="p">:</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"Gradient Boosting"</span><span class="p">:</span> <span class="n">GradientBoostingClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"XGBoost"</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s2">"logloss"</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"SVC"</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"KNeighbors"</span><span class="p">:</span> <span class="n">KNeighborsClassifier</span><span class="p">(),</span>
    <span class="s2">"GaussianNB"</span><span class="p">:</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1"># 3. Entrenamiento y evaluacin</span>
<span class="n">resultados_fase2_v1</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_fase2_v1</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Entrenando modelo: </span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_reducido</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_reducido</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_reducido</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">resultados_fase2_v1</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Precision (1)"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_proba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
        <span class="s2">"Cohen's Kappa"</span><span class="p">:</span> <span class="n">cohen_kappa_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Precision (macro)"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">),</span>
        <span class="s2">"Recall (macro)"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">),</span>
        <span class="s2">"F1-score (macro)"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'macro'</span><span class="p">),</span>
        <span class="s2">"Precision (weighted)"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">),</span>
        <span class="s2">"Recall (weighted)"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">),</span>
        <span class="s2">"F1-score (weighted)"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">'weighted'</span><span class="p">),</span>
    <span class="p">})</span>

<span class="c1"># 4. Convertir a DataFrame</span>
<span class="n">df_resultados_fase2_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_fase2_v1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># 5. Mostrar tabla con degradado</span>
<span class="n">columnas_metricas</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_resultados_fase2_v1</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="o">!=</span> <span class="s2">"Modelo"</span><span class="p">]</span>

<span class="n">display</span><span class="p">(</span><span class="n">df_resultados_fase2_v1</span><span class="o">.</span><span class="n">style</span>
        <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_metricas</span><span class="p">)</span>
        <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_metricas</span><span class="p">)</span>
        <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">"text-align"</span><span class="p">:</span> <span class="s2">"center"</span><span class="p">}))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Guardar-el-resulatdo-del-Pipeline-V1--Fase-2-5-variables"><strong>Guardar el resulatdo del Pipeline V1- Fase 2 5 variables</strong><a class="anchor-link" href="#Guardar-el-resulatdo-del-Pipeline-V1--Fase-2-5-variables"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar resultados del pipeline V1</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_resultados</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"resultados"</span><span class="p">)</span>

<span class="n">ruta_guardado_fase2_v1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"resultados_fase2_pipeline_v1_reducido.csv"</span><span class="p">)</span>
<span class="n">df_resultados_fase2_v1</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado_fase2_v1</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Resultados guardados : Resultados_fase2_pipeline_v1_reducido."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="8.4:-An%C3%A1lisis-Comparativo-Final-entre-Fases-y-Pipelines"><strong>8.4: Anlisis Comparativo Final entre Fases y Pipelines</strong><a class="anchor-link" href="#8.4:-An%C3%A1lisis-Comparativo-Final-entre-Fases-y-Pipelines"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>Determinar si es mejor el Pipeline V1 o V2 (con las 8 variables).</li>
<li>Evaluar si reducir a 5 variables (Fase 2) mejora la eficiencia sin sacrificar Recall.</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Definir rutas</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_resultados</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"resultados"</span><span class="p">)</span>

<span class="c1"># 2. Cargar resultados de las tres fases</span>
<span class="n">path_v1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"resultados_fase1_pipeline_v1.csv"</span><span class="p">)</span>
<span class="n">path_v2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"resultados_fase1_pipeline_v2.csv"</span><span class="p">)</span>
<span class="n">path_v1_reducido</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"resultados_fase2_pipeline_v1_reducido.csv"</span><span class="p">)</span>

<span class="n">df_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_v1</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span><span class="o">.</span><span class="n">add_suffix</span><span class="p">(</span><span class="s2">" (V1)"</span><span class="p">)</span>
<span class="n">df_v2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_v2</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span><span class="o">.</span><span class="n">add_suffix</span><span class="p">(</span><span class="s2">" (V2)"</span><span class="p">)</span>
<span class="n">df_v1_reducido</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_v1_reducido</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span><span class="o">.</span><span class="n">add_suffix</span><span class="p">(</span><span class="s2">" (V1_Reducido)"</span><span class="p">)</span>

<span class="c1"># 3. Unir por ndice (modelo)</span>
<span class="n">df_comparativa_final</span> <span class="o">=</span> <span class="n">df_v1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df_v2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"outer"</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df_v1_reducido</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"outer"</span><span class="p">)</span>

<span class="c1"># 4. Seleccionar mtricas clave</span>
<span class="n">metricas</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">]</span>
<span class="n">columnas</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">metricas</span><span class="p">:</span>
    <span class="n">columnas</span> <span class="o">+=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2"> (V1)"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2"> (V2)"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2"> (V1_Reducido)"</span><span class="p">]</span>

<span class="c1"># 5. Visualizar comparativa</span>
<span class="n">display</span><span class="p">(</span>
    <span class="n">df_comparativa_final</span><span class="p">[</span><span class="n">columnas</span><span class="p">]</span>
    <span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'text-align'</span><span class="p">:</span> <span class="s1">'center'</span><span class="p">})</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Guardar-los-resultados-de-la-Comparativa-Fase-1-v1-vs-v2-y-Fase-2-v1"><strong>Guardar los resultados de la Comparativa Fase 1 v1 vs v2 y Fase 2 v1</strong><a class="anchor-link" href="#Guardar-los-resultados-de-la-Comparativa-Fase-1-v1-vs-v2-y-Fase-2-v1"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar comparativa final</span>
<span class="n">nombre_archivo</span> <span class="o">=</span> <span class="s2">"comparativa_final_modelos_v1_v2_y modelo_v1_reducido.csv"</span>
<span class="n">df_comparativa_final</span><span class="p">[</span><span class="n">columnas</span><span class="p">]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_archivo</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Comparativa final guardada en: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_archivo</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="8.4.1.-An%C3%A1lisis-Comparativo-Final-de-Modelos:-Pipeline-V1-vs-V2-vs-V1-Reducido"><strong>8.4.1. Anlisis Comparativo Final de Modelos: Pipeline V1 vs V2 vs V1 Reducido</strong><a class="anchor-link" href="#8.4.1.-An%C3%A1lisis-Comparativo-Final-de-Modelos:-Pipeline-V1-vs-V2-vs-V1-Reducido"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis Interpretativo</strong></p>
<ul>
<li>XGBoost con Pipeline V1 (todas las variables) mostr el mejor rendimiento general, con un Recall (1) de 0.519 y ROC-AUC de 0.809.</li>
<li>Logistic Regression, aunque algo inferior en recall, mantiene un rendimiento competitivo y mejor interpretabilidad clnica.</li>
<li>SVC y GaussianNB muestran mejoras notables con el Pipeline V2, lo que sugiere que para algunos modelos una transformacin ms simple es suficiente.</li>
<li>El modelo reducido con solo 5 variables (V1 Reducido) mostr un rendimiento sorprendentemente competitivo:<ul>
<li>En algunos modelos como Gradient Boosting y Logistic Regression, las diferencias fueron mnimas respecto a usar las 8 variables.</li>
<li>Esto indica que se puede reducir la complejidad del modelo sin perder demasiado rendimiento, ganando interpretabilidad.</li>
</ul>
</li>
</ul>
<p><strong>Conclusin Final</strong></p>
<ul>
<li>El pipeline V1 con todas las variables sigue siendo la opcin ms robusta, especialmente con XGBoost o Logistic Regression.</li>
<li>Sin embargo, el modelo con solo 5 variables clave (V1 reducido) es altamente competitivo, ms eficiente y clnicamente interpretable.</li>
</ul>
<p><strong>Recomendacin:</strong></p>
<p>Usar el pipeline V1 como base, y considerar el modelo reducido en contextos donde se requiera mayor interpretabilidad o menor coste computacional.</p>
<p><strong>Archivo generado:</strong> comparativa_final_modelos_v1_v2_y modelo_v1_reducido.csv
<strong>Guardado en</strong>: resultados</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="An%C3%A1lisis-visual"><strong>Anlisis visual</strong><a class="anchor-link" href="#An%C3%A1lisis-visual"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Ruta a resultados</span>
<span class="n">ruta_resultados</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados"</span>
<span class="n">nombre_archivo</span> <span class="o">=</span> <span class="s2">"comparativa_final_modelos_v1_v2_y modelo_v1_reducido.csv"</span>
<span class="n">ruta_completa</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_archivo</span><span class="p">)</span>

<span class="c1"># Cargar archivo</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ruta_completa</span><span class="p">)</span>

<span class="c1"># Aadir columna "Modelo" si es necesario</span>
<span class="k">if</span> <span class="s2">"Modelo"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">"Modelo"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>

<span class="c1"># Convertir a formato largo</span>
<span class="n">df_melt</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span>
    <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"Recall (1) (V1)"</span><span class="p">,</span> <span class="s2">"Recall (1) (V2)"</span><span class="p">,</span> <span class="s2">"Recall (1) (V1_Reducido)"</span><span class="p">,</span>
        <span class="s2">"F1-score (1) (V1)"</span><span class="p">,</span> <span class="s2">"F1-score (1) (V2)"</span><span class="p">,</span> <span class="s2">"F1-score (1) (V1_Reducido)"</span><span class="p">,</span>
        <span class="s2">"ROC-AUC (V1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC (V2)"</span><span class="p">,</span> <span class="s2">"ROC-AUC (V1_Reducido)"</span>
    <span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s2">"Mtrica_Pipeline"</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s2">"Valor"</span>
<span class="p">)</span>

<span class="c1"># Separar columnas Mtrica y Pipeline</span>
<span class="n">df_melt</span><span class="p">[[</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="s2">"Pipeline"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_melt</span><span class="p">[</span><span class="s2">"Mtrica_Pipeline"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="sa">r</span><span class="s2">"(.+?) \((.+?)\)"</span><span class="p">)</span>

<span class="c1"># Grfico comparativo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_melt</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Valor"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Mtrica_Pipeline"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Comparativa de Recall, F1-score y ROC-AUC por modelo y pipeline"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Valor"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Mtrica y Pipeline"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Visualizaci%C3%B3n-final-(solo-modelos-seleccionados:-Logistic,-SVC,-XGBoost)"><strong>Visualizacin final (solo modelos seleccionados: Logistic, SVC, XGBoost)</strong><a class="anchor-link" href="#Visualizaci%C3%B3n-final-(solo-modelos-seleccionados:-Logistic,-SVC,-XGBoost)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Filtrar solo los modelos seleccionados</span>
<span class="n">modelos_seleccionados</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Logistic Regression"</span><span class="p">,</span> <span class="s2">"SVC"</span><span class="p">,</span> <span class="s2">"XGBoost"</span><span class="p">]</span>
<span class="c1">#Llamar a DataFrame que contiene la colimna Modelos</span>
<span class="n">df_comparativa_top</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Modelo"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">modelos_seleccionados</span><span class="p">)]</span>

<span class="c1"># Convertir a formato largo</span>
<span class="n">df_melt_top</span> <span class="o">=</span> <span class="n">df_comparativa_top</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span>
    <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_comparativa_top</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="o">!=</span> <span class="s2">"Modelo"</span><span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s2">"Mtrica y Pipeline"</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s2">"Valor"</span>
<span class="p">)</span>

<span class="c1"># Grfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_melt_top</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Valor"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Mtrica y Pipeline"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Comparativa de modelos seleccionados por mtricas y pipeline"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Valor"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Mtrica y Pipeline"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Modelos ms destacados</strong></p>
<p>Tras el anlisis de mtricas clave (Recall (1), F1-score (1) y ROC-AUC), los modelos ms competitivos han sido:</p>
<ul>
<li>XGBoost (Pipeline V1): Mayor rendimiento global con un ROC-AUC de 0.809, F1-score de 0.589 y Recall de 0.519.</li>
<li>Logistic Regression (Pipeline V1): Segunda mejor opcin, con alta interpretabilidad clnica, y mtricas equilibradas (Recall 0.481 y ROC-AUC 0.795).</li>
<li>SVC (Pipeline V2)</li>
</ul>
<p><strong>Decisin tcnica</strong></p>
<ul>
<li>El modelo XGBoost con Pipeline V1 (todas las variables) ha demostrado el mejor equilibrio entre rendimiento y estabilidad, especialmente en las mtricas clnicas clave como recall y AUC-ROC.</li>
<li>Este modelo ser seleccionado como base para la siguiente fase del proyecto: optimizacin avanzada y balanceo de clases.</li>
</ul>
<p><strong>Ventajas del modelo seleccionado</strong></p>
<ul>
<li>Captura relaciones no lineales y complejas.</li>
<li>Se beneficia del PowerTransformer, que mejora el ajuste de las variables.</li>
<li>Rendimiento robusto tanto en recall como en ROC-AUC.</li>
<li>Consistente entre conjunto completo y reducido.</li>
</ul>
<p><strong>Prximos pasos</strong></p>
<ul>
<li>Optimizacin de hiperparmetros con GridSearchCV.</li>
<li>Aplicacin de tcnicas de balanceo (como SMOTE).</li>
<li>Ajuste del umbral de decisin para maximizar recall.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="9.-Optimizaci%C3%B3n-de-Modelos"><strong>9. Optimizacin de Modelos</strong><a class="anchor-link" href="#9.-Optimizaci%C3%B3n-de-Modelos"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Ajustar los hiperparmetros de los modelos ms prometedores (Logistic Regression, XGBoost, SVC...) para mejorar el rendimiento, especialmente el recall y F1-score en la clase 1 (diabetes).</p>
<p><strong>Estructura</strong></p>
<ul>
<li>9.1	Seleccin de modelos para optimizacin:	Justificacin tcnica y clnica (por mtricas, interpretabilidad y robustez)</li>
<li>9.2	Optimizacin de Logistic Regression (GridSearchCV):	Ajuste de C, penalty, etc. + visualizacin resultados</li>
<li>9.3	Optimizacin de XGBoost: Ajuste de n_estimators, max_depth, learning_rate, etc.</li>
<li>9.4	Optimizacin de SVC:	Ajuste de C, kernel, gamma, etc.</li>
<li>9.5	Comparativa de modelos optimizados:	Tabla de mtricas + grfico</li>
<li>9.6	Eleccin del mejor modelo base:	Decisin justificada: balance entre rendimiento y utilidad clnica</li>
<li>9.7	Guardado del mejor modelo optimizado:	Versin final (.pkl), .joblib, .csv con predicciones si quieres evaluarlo luego</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="9.1-Selecci%C3%B3n-de-modelos-para-optimizaci%C3%B3n"><strong>9.1 Seleccin de modelos para optimizacin</strong><a class="anchor-link" href="#9.1-Selecci%C3%B3n-de-modelos-para-optimizaci%C3%B3n"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tomando como base el anlisis antrior y los criterios clnicos, voy a tratar de justificar qu modelos merecen ser optimizados mediante tcnicas como GridSearchCV o RandomizedSearchCV</p>
<p><strong>Criterios de seleccin:</strong></p>
<ul>
<li><strong>Rendimiento en mtricas clave</strong>: Recall, F1-score y ROC-AUC (especialmente para la clase 1 - diabetes).</li>
<li><strong>Estabilidad entre pipelines:</strong> Modelos que mantuvieron un rendimiento slido en V1, V2 y V1_Reducido.</li>
<li><strong>Interpretabilidad clnica:</strong> Capacidad de explicar decisiones del modelo a personal sanitario.</li>
<li><strong>Eficiencia</strong>: Tiempo de entrenamiento y posibilidad de deploy (Streamlit, API...).</li>
</ul>
<p><strong>Modelos seleccionados para optimizacin</strong>:</p>
<ul>
<li><strong>Logistic Regression</strong>	Buen balance entre rendimiento y explicabilidad. Mtricas altas en V1 y V1_Reducido.</li>
<li><strong>XGBoost</strong>	Mximo ROC-AUC (0.809), buen F1 y Recall. Robusto.</li>
<li><strong>SVC</strong>	Mejora destacada en Recall y ROC-AUC con el Pipeline V2. Potencial alto tras optimizacin.</li>
<li>Otros modelos como Random Forest o Gradient Boosting mostraron buen rendimiento, pero menor Recall o F1 que los seleccionados, y sern evaluados si es necesario.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="9.2-Optimizaci%C3%B3n-de-Logistic-Regression-(GridSearchCV)"><strong>9.2 Optimizacin de Logistic Regression (GridSearchCV)</strong><a class="anchor-link" href="#9.2-Optimizaci%C3%B3n-de-Logistic-Regression-(GridSearchCV)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Ajustar los hiperparmetros de LogisticRegression para maximizar el recall (deteccin de casos positivos de diabetes), manteniendo un buen equilibrio general.</p>
<p><strong>Hiperparmetros a optimizar</strong>:</p>
<ul>
<li>penalty: tipo de regularizacin (l1, l2)</li>
<li>C: fuerza de regularizacin inversa (valores pequeos implican mayor regularizacin)</li>
<li>solver: algoritmo de optimizacin compatible con el penalty</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">GridSearchCV</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">,</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">ConfusionMatrixDisplay</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">joblib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="c1"># 1. Definir el modelo base</span>
<span class="n">modelo_base</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># 2. Definir el espacio de bsqueda</span>
<span class="n">param_grid</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'penalty'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'l1'</span><span class="p">,</span> <span class="s1">'l2'</span><span class="p">],</span>
    <span class="s1">'C'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
    <span class="s1">'solver'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'liblinear'</span><span class="p">,</span> <span class="s1">'saga'</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># 3. Configurar el GridSearchCV</span>
<span class="n">grid_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span>
    <span class="n">estimator</span><span class="o">=</span><span class="n">modelo_base</span><span class="p">,</span>
    <span class="n">param_grid</span><span class="o">=</span><span class="n">param_grid</span><span class="p">,</span>
    <span class="n">scoring</span><span class="o">=</span><span class="s1">'recall'</span><span class="p">,</span>
    <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>

<span class="c1"># 4. Ajustar sobre el conjunto de entrenamiento V1 (8 variables)</span>
<span class="n">grid_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>

<span class="c1"># 5. Mostrar los mejores hiperparmetros</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Mejores hiperparmetros encontrados:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grid_search</span><span class="o">.</span><span class="n">best_params_</span><span class="p">)</span>

<span class="c1"># 6. Evaluar sobre el conjunto de test</span>
<span class="n">mejor_modelo</span> <span class="o">=</span> <span class="n">grid_search</span><span class="o">.</span><span class="n">best_estimator_</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">mejor_modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Evaluacin en conjunto de test:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>

<span class="c1"># Matriz de confusin</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin (como array):</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm</span><span class="p">)</span>

<span class="c1"># 7. Guardar el modelo optimizado</span>
<span class="n">ruta_modelo_logreg_opt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"logistic_regression_opt_v1.pkl"</span><span class="p">)</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">mejor_modelo</span><span class="p">,</span> <span class="n">ruta_modelo_logreg_opt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Modelo optimizado guardado en: </span><span class="si">{</span><span class="n">ruta_modelo_logreg_opt</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Visualizaci%C3%B3n"><strong>Visualizacin</strong><a class="anchor-link" href="#Visualizaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">roc_curve</span><span class="p">,</span> <span class="n">auc</span><span class="p">,</span> <span class="n">precision_recall_curve</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># 1. Predicciones y probabilidades</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">mejor_modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>
<span class="n">y_proba</span> <span class="o">=</span> <span class="n">mejor_modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># 2. Visualizacin de la matriz de confusin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">"d"</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Matriz de Confusin - Logistic Regression Optimizado (V1)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 3. Curva ROC</span>
<span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>
<span class="n">roc_auc</span> <span class="o">=</span> <span class="n">auc</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">'ROC curve (AUC = </span><span class="si">{</span><span class="n">roc_auc</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">)'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'darkorange'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'navy'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'False Positive Rate'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'True Positive Rate'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Curva ROC - Logistic Regression Optimizado (V1)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"lower right"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 4. Curva Precision-Recall</span>
<span class="n">precision</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">precision_recall_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Recall'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Precision'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Curva Precision-Recall - Logistic Regression Optimizado (V1)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="9.2.1.-Evaluaci%C3%B3n-Final-del-Modelo-Logistic-Regression-Optimizado-(Pipeline-V1)"><strong>9.2.1. Evaluacin Final del Modelo Logistic Regression Optimizado (Pipeline V1)</strong><a class="anchor-link" href="#9.2.1.-Evaluaci%C3%B3n-Final-del-Modelo-Logistic-Regression-Optimizado-(Pipeline-V1)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras aplicar GridSearchCV con validacin cruzada (5-fold) sobre el conjunto de entrenamiento transformado por el pipeline V1, se seleccionaron los mejores hiperparmetros para el modelo de Regresin Logstica:</p>
<ul>
<li><strong>Mejores parmetros:</strong> {'C': 0.01, 'penalty': 'l1', 'solver': 'liblinear'}</li>
<li><strong>Objetivo optimizado:</strong> Maximizar el Recall de la clase positiva (diabetes).</li>
</ul>
<p><strong>Interpretacin:</strong></p>
<ul>
<li><strong>Falsos negativos</strong>: 12 pacientes con diabetes no detectados (riesgo clnico).</li>
<li><strong>Falsos positivos</strong>: 32 casos identificados errneamente como diabticos.</li>
</ul>
<p><strong>Visualizaciones Complementarias</strong></p>
<p>Estas visualizaciones ayudan a comprender mejor el comportamiento del modelo, especialmente en un contexto clnico donde es prioritario maximizar el Recall para no dejar casos de diabetes sin detectar.</p>
<p><strong>Conclusin</strong>: El modelo optimizado mejora significativamente el Recall de la clase positiva, con un buen equilibrio entre sensibilidad y especificidad. Aun as, se observaron 12 falsos negativos, por lo que se explorarn prximas estrategias como:</p>
<ul>
<li>SMOTE o balanceo de clases.</li>
<li>Ajuste de umbral de decisin.</li>
<li>Modelos ms complejos o ensambles.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="9.3-Optimizaci%C3%B3n-de-XGBoost-(GridSearchCV)"><strong>9.3 Optimizacin de XGBoost (GridSearchCV)</strong><a class="anchor-link" href="#9.3-Optimizaci%C3%B3n-de-XGBoost-(GridSearchCV)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Buscar los mejores hiperparmetros para XGBoost optimizando principalmente:</p>
<ul>
<li>n_estimators: nmero de rboles</li>
<li>max_depth: profundidad mxima de los rboles</li>
<li>learning_rate: tasa de aprendizaje</li>
<li>(opcionalmente: subsample, colsample_bytree...)</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"X_train_v1"</span><span class="p">,</span> <span class="s2">"X_test_v1"</span><span class="p">,</span> <span class="s2">"y_train_final"</span><span class="p">,</span> <span class="s2">"y_test_final"</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2"> definido:"</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Definir el modelo base</span>
<span class="n">modelo_xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># 2. Espacio de bsqueda de hiperparmetros</span>
<span class="n">param_grid_xgb</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'n_estimators'</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
    <span class="s1">'max_depth'</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="s1">'learning_rate'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
    <span class="s1">'subsample'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
    <span class="s1">'colsample_bytree'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># 3. Configurar GridSearchCV</span>
<span class="n">grid_search_xgb</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span>
    <span class="n">estimator</span><span class="o">=</span><span class="n">modelo_xgb</span><span class="p">,</span>
    <span class="n">param_grid</span><span class="o">=</span><span class="n">param_grid_xgb</span><span class="p">,</span>
    <span class="n">scoring</span><span class="o">=</span><span class="s1">'recall'</span><span class="p">,</span>
    <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>

<span class="c1"># 4. Ajustar sobre conjunto de entrenamiento V1</span>
<span class="n">grid_search_xgb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>

<span class="c1"># 5. Resultados del mejor modelo</span>
<span class="n">mejor_xgb</span> <span class="o">=</span> <span class="n">grid_search_xgb</span><span class="o">.</span><span class="n">best_estimator_</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Mejores hiperparmetros encontrados:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grid_search_xgb</span><span class="o">.</span><span class="n">best_params_</span><span class="p">)</span>

<span class="c1"># 6. Evaluar en conjunto de test</span>
<span class="n">y_pred_xgb</span> <span class="o">=</span> <span class="n">mejor_xgb</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Evaluacin en test set:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">))</span>

<span class="c1"># Matriz de confusin</span>
<span class="n">matriz_xgb</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin (como array):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">matriz_xgb</span><span class="p">)</span>

<span class="c1"># 7. Guardar modelo optimizado</span>
<span class="n">nombre_modelo</span> <span class="o">=</span> <span class="s2">"xgboost_opt_v1.pkl"</span>
<span class="n">ruta_modelo_xgb</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="n">nombre_modelo</span><span class="p">)</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">mejor_xgb</span><span class="p">,</span> <span class="n">ruta_modelo_xgb</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Modelo XGBoost optimizado guardado en: </span><span class="si">{</span><span class="n">ruta_modelo_xgb</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Visualizaci%C3%B3n"><strong>Visualizacin</strong><a class="anchor-link" href="#Visualizaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Predecir probabilidades y etiquetas</span>
<span class="n">y_pred_xgb</span> <span class="o">=</span> <span class="n">mejor_modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>
<span class="n">y_proba_xgb</span> <span class="o">=</span> <span class="n">mejor_modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># 2. Matriz de confusin</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>

<span class="c1"># 3. Mostrar la matriz como array</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin (array):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>

<span class="c1"># 4. Visualizar matriz de confusin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">"d"</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Matriz de Confusin - XGBoost Optimizado"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Valor Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 5. Curva ROC</span>
<span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba_xgb</span><span class="p">)</span>
<span class="n">roc_auc</span> <span class="o">=</span> <span class="n">auc</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"ROC AUC = </span><span class="si">{</span><span class="n">roc_auc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curva ROC - XGBoost Optimizado"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Tasa de Falsos Positivos (FPR)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Tasa de Verdaderos Positivos (TPR)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"lower right"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 6. Curva Precision-Recall</span>
<span class="n">precision</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">precision_recall_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba_xgb</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'green'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curva Precision-Recall - XGBoost Optimizado"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Recall"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Precision"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="9.3.1.-Evaluaci%C3%B3n-Final-del-Modelo-XGBoost"><strong>9.3.1. Evaluacin Final del Modelo XGBoost</strong><a class="anchor-link" href="#9.3.1.-Evaluaci%C3%B3n-Final-del-Modelo-XGBoost"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Interpretacin clnica</strong></p>
<p>Este modelo tiene muy buen comportamiento en precisin, pero el recall del 52% es bajo para una herramienta de apoyo clnico, ya que deja sin detectar a casi la mitad de los pacientes reales con diabetes.</p>
<p>Esto significa que 26 personas con diabetes no seran derivadas para evaluacin adicional  clnicamente no aceptable sin ajustes.</p>
<p><strong>Conclusin profesional</strong></p>
<p>El modelo es fuerte tcnicamente, con buena precisin y AUC, pero su capacidad de detectar casos reales sigue siendo limitada.</p>
<p>No es an el modelo final clnicamente robusto, pero es un excelente candidato para:</p>
<ul>
<li>Ajuste del umbral de decisin (para mejorar recall)</li>
<li>Aplicacin de tcnicas de balanceo como SMOTE</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="9.4-Optimizaci%C3%B3n-de-SVC"><strong>9.4 Optimizacin de SVC</strong><a class="anchor-link" href="#9.4-Optimizaci%C3%B3n-de-SVC"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Ajuste de hiperparmetros (C, kernel, gamma)</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Definir el modelo base</span>
<span class="n">svc_base</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># 2. Definir el espacio de bsqueda</span>
<span class="n">param_grid_svc</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'C'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
    <span class="s1">'kernel'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'linear'</span><span class="p">,</span> <span class="s1">'rbf'</span><span class="p">],</span>
    <span class="s1">'gamma'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'scale'</span><span class="p">,</span> <span class="s1">'auto'</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># 3. Configurar GridSearchCV</span>
<span class="n">grid_svc</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span>
    <span class="n">estimator</span><span class="o">=</span><span class="n">svc_base</span><span class="p">,</span>
    <span class="n">param_grid</span><span class="o">=</span><span class="n">param_grid_svc</span><span class="p">,</span>
    <span class="n">scoring</span><span class="o">=</span><span class="s1">'recall'</span><span class="p">,</span>
    <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>

<span class="c1"># 4. Ajustar sobre conjunto de entrenamiento</span>
<span class="n">grid_svc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>

<span class="c1"># 5. Mostrar mejores hiperparmetros</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Mejores hiperparmetros encontrados:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grid_svc</span><span class="o">.</span><span class="n">best_params_</span><span class="p">)</span>

<span class="c1"># 6. Evaluar en test</span>
<span class="n">mejor_svc</span> <span class="o">=</span> <span class="n">grid_svc</span><span class="o">.</span><span class="n">best_estimator_</span>
<span class="n">y_pred_svc</span> <span class="o">=</span> <span class="n">mejor_svc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Evaluacin en conjunto de test:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">))</span>

<span class="c1"># Matriz de confusin</span>
<span class="n">cm_svc</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Matriz de Confusin (como array):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cm_svc</span><span class="p">)</span>

<span class="c1"># 7. Guardar modelo</span>
<span class="n">nombre_modelo_svc</span> <span class="o">=</span> <span class="s2">"svc_opt_v1.pkl"</span>
<span class="n">ruta_guardado_svc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="n">nombre_modelo_svc</span><span class="p">)</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">mejor_svc</span><span class="p">,</span> <span class="n">ruta_guardado_svc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Modelo SVC optimizado guardado en: </span><span class="si">{</span><span class="n">ruta_guardado_svc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Matriz de Confusin Grfica</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">disp</span> <span class="o">=</span> <span class="n">ConfusionMatrixDisplay</span><span class="p">(</span><span class="n">confusion_matrix</span><span class="o">=</span><span class="n">cm</span><span class="p">,</span> <span class="n">display_labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">disp</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">values_format</span><span class="o">=</span><span class="s1">'d'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Matriz de Confusin - SVC Optimizado (V1)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 2. Matriz de Confusin como array</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin (array):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>

<span class="c1"># 3. Curva ROC</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">mejor_modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">):</span>
    <span class="n">y_scores</span> <span class="o">=</span> <span class="n">mejor_modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">y_scores</span> <span class="o">=</span> <span class="n">mejor_modelo</span><span class="o">.</span><span class="n">decision_function</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>

<span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_scores</span><span class="p">)</span>
<span class="n">roc_auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_scores</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"AUC = </span><span class="si">{</span><span class="n">roc_auc</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">"k--"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"False Positive Rate"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"True Positive Rate"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curva ROC - SVC Optimizado"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"lower right"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 4. Curva de Precisin-Recall (PR)</span>
<span class="n">precision</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">precision_recall_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_scores</span><span class="p">)</span>
<span class="n">pr_auc</span> <span class="o">=</span> <span class="n">auc</span><span class="p">(</span><span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"AUC = </span><span class="si">{</span><span class="n">pr_auc</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Recall"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Precision"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curva Precisin-Recall - SVC Optimizado"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="9.4.1.Evaluacii%C3%B3n-Final-del-Modelo-SVC"><strong>9.4.1.Evaluaciin Final del Modelo SVC</strong><a class="anchor-link" href="#9.4.1.Evaluacii%C3%B3n-Final-del-Modelo-SVC"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Anlisis</strong></p>
<ul>
<li><strong>Lo positivo:</strong><ul>
<li>Alta capacidad para detectar los no diabticos (TN = 83).</li>
<li>Mejora respecto a la versin no optimizada del modelo.</li>
</ul>
</li>
<li>El kernel='linear' parece ser el ms estable con C=10.
<strong>- Lo preocupante:</strong></li>
<li>El recall del 50% implica que 1 de cada 2 personas diabticas no es detectada  clnicamente inaceptable.</li>
<li>Falsos negativos (FN=27) siguen siendo altos  riesgo en contexto clnico.</li>
</ul>
<p><strong>Conclusin clnica y tcnica</strong></p>
<ul>
<li>Este modelo no tiene rendimiento ideal. Su precisin general es buena (accuracy = 0.71), pero su capacidad para detectar casos positivos (recall = 0.50) es insuficiente para uso clnico, donde un recall  0.70 sera ms apropiado.</li>
<li>Por tanto, no se recomienda este modelo como final, pero puede seguir en el anlisis comparativo general de modelos optimizados.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="9.5.-Comparativa-de-Modelos-Optimizados-(Pipeline-V1---8-variables)"><strong>9.5. Comparativa de Modelos Optimizados (Pipeline V1 - 8 variables)</strong><a class="anchor-link" href="#9.5.-Comparativa-de-Modelos-Optimizados-(Pipeline-V1---8-variables)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Comparar de forma clara y visual el rendimiento de los tres modelos optimizados sobre el conjunto de test (X_test_v1, y_test_final), utilizando las siguientes mtricas clave:</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Cargar modelos optimizados desde disco</span>
<span class="n">modelo_logreg_opt</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"logistic_regression_opt_v1.pkl"</span><span class="p">))</span>
<span class="n">modelo_xgb_opt</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"xgboost_opt_v1.pkl"</span><span class="p">))</span>
<span class="n">modelo_svc_opt</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"svc_opt_v1.pkl"</span><span class="p">))</span>

<span class="c1"># 2. Diccionario de modelos</span>
<span class="n">modelos_optimizados_v1</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"Logistic Regression (Opt)"</span><span class="p">:</span> <span class="n">modelo_logreg_opt</span><span class="p">,</span>
    <span class="s2">"XGBoost (Opt)"</span><span class="p">:</span> <span class="n">modelo_xgb_opt</span><span class="p">,</span>
    <span class="s2">"SVC (Opt)"</span><span class="p">:</span> <span class="n">modelo_svc_opt</span>
<span class="p">}</span>

<span class="c1"># 3. Evaluar cada modelo</span>
<span class="n">resultados_opt</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_optimizados_v1</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">resultados_opt</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Precision (1)"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_proba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">"Cohen's Kappa"</span><span class="p">:</span> <span class="n">cohen_kappa_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
    <span class="p">})</span>

<span class="c1"># 4. Convertir a DataFrame</span>
<span class="n">df_resultados_optimizados_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_opt</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># 5. Mostrar tabla con estilo</span>
<span class="n">display</span><span class="p">(</span>
    <span class="n">df_resultados_optimizados_v1</span>
    <span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Precision (1)"</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">,</span> <span class="s2">"Cohen's Kappa"</span><span class="p">])</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Precision (1)"</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">,</span> <span class="s2">"Cohen's Kappa"</span><span class="p">])</span>
    <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">"text-align"</span><span class="p">:</span> <span class="s2">"center"</span><span class="p">})</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Guardar-los-resultados-de-la-Comparativa-de-Modelos-Optimizados-en-resultados"><strong>Guardar los resultados de la Comparativa de Modelos Optimizados en resultados</strong><a class="anchor-link" href="#Guardar-los-resultados-de-la-Comparativa-de-Modelos-Optimizados-en-resultados"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar el DataFrame de resultados de modelos optimizados</span>
<span class="n">nombre_archivo</span> <span class="o">=</span> <span class="s2">"resultados_modelos_optimizados_v1.csv"</span>
<span class="n">ruta_guardado</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_archivo</span><span class="p">)</span>

<span class="n">df_resultados_optimizados_v1</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_guardado</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Archivo guardado correctamente en: </span><span class="si">{</span><span class="n">ruta_guardado</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="9.5.1-An%C3%A1lisis-comparativo-de-modelos-optimizados"><strong>9.5.1 Anlisis comparativo de modelos optimizados</strong><a class="anchor-link" href="#9.5.1-An%C3%A1lisis-comparativo-de-modelos-optimizados"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Interpretacin Clnica y Tcnica</strong></p>
<ul>
<li>Logistic Regression optimizado ofrece el mejor recall (0.778), lo que lo convierte en el modelo ms sensible para identificar correctamente a los pacientes con diabetes. Tambin logra un buen equilibrio con su F1-score (0.656), por lo que es el ms recomendable desde un enfoque clnico.</li>
<li>XGBoost optimizado logra la mayor precisin (0.757) y la mayor exactitud global (0.773), siendo robusto en trminos de rendimiento general. Sin embargo, su recall es bajo (0.519), lo que puede implicar riesgo de falsos negativos clnicamente relevantes.</li>
<li>SVC optimizado muestra el ROC-AUC ms alto (0.818), indicando buena discriminacin general, pero su recall y F1-score son ms bajos, por lo que no se posiciona como el modelo ms clnicamente adecuado.</li>
</ul>
<p><strong>Conclusin</strong></p>
<p>El modelo optimizado de Logistic Regression es el ms adecuado desde el punto de vista clnico, ya que prioriza el recall (detectar correctamente los casos de diabetes), mantiene un buen equilibrio de mtricas y es fcil de interpretar.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="9.6.Elecci%C3%B3n-del-Mejor-Modelo-Optimizado-(Pipeline-V1)"><strong>9.6.Eleccin del Mejor Modelo Optimizado (Pipeline V1)</strong><a class="anchor-link" href="#9.6.Elecci%C3%B3n-del-Mejor-Modelo-Optimizado-(Pipeline-V1)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Modelos evaluados</strong>:</p>
<ul>
<li>Logistic Regression (Opt)</li>
<li>XGBoost (Opt)</li>
<li>SVC (Opt)</li>
</ul>
<p><strong>Decisin Final</strong></p>
<ul>
<li>Modelo seleccionado: <strong>Logistic Regression (Optimizado)</strong></li>
</ul>
<p><strong>Justificacin:</strong></p>
<ul>
<li>Tiene el mejor Recall (1), lo cual es clave en un contexto clnico donde los falsos negativos son crticos.</li>
<li>Ofrece una buena interpretabilidad, ideal para explicar decisiones a personal mdico.</li>
<li>Aunque XGBoost tiene mejor AUC, su menor Recall lo hace menos confiable para este caso.</li>
<li>SVC no aporta mejora suficiente y es ms complejo de ajustar.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="9.7.-Guardado-del-Mejor-Modelos-Optimizado-como-Versi%C3%B3n-Final"><strong>9.7. Guardado del Mejor Modelos Optimizado como Versin Final</strong><a class="anchor-link" href="#9.7.-Guardado-del-Mejor-Modelos-Optimizado-como-Versi%C3%B3n-Final"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras comparar los tres modelos optimizados (Logistic Regression, XGBoost y SVC), se selecciona <strong>Logistic Regression optimizado</strong> como el modelo base final, debido a:</p>
<ul>
<li><strong>Mayor Recall (1)</strong>: 0.778  fundamental en contextos clnicos.</li>
<li><strong>Interpretabilidad</strong>: es transparente y explicable.</li>
<li><strong>Rendimiento general equilibrado</strong>: F1-score (1) de 0.656 y ROC-AUC de 0.767.</li>
<li><strong>Robustez clnica</strong>: permite detectar ms casos positivos, minimizando falsos negativos.</li>
</ul>
<p>Este modelo ser guardado como modelo_base_final.pkl en la carpeta modelos_optimizados/ para futuras validaciones o implementacin en produccin.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Definir nombre y ruta de guardado</span>
<span class="n">nombre_modelo_final</span> <span class="o">=</span> <span class="s2">"modelo_base_final.pkl"</span>
<span class="n">ruta_guardado_modelo_final</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="n">nombre_modelo_final</span><span class="p">)</span>

<span class="c1"># 2. Guardar el modelo Logistic Regression optimizado como versin final</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_logreg_opt</span><span class="p">,</span> <span class="n">ruta_guardado_modelo_final</span><span class="p">)</span>

<span class="c1"># 3. Confirmacin</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Modelo base final guardado correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_guardado_modelo_final</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="10.-Validaci%C3%B3n-cruzada-(5-Folds)-de-Modelos-Optimizados"><strong>10. Validacin cruzada (5 Folds) de Modelos Optimizados</strong><a class="anchor-link" href="#10.-Validaci%C3%B3n-cruzada-(5-Folds)-de-Modelos-Optimizados"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Evaluar la estabilidad y robustez de los modelos optimizados (Logistic Regression, XGBoost, SVC) usando validacin cruzada (CV).</p>
<p>MI inters es mejorar especialmente en el recall para la clase 1 (diabticos), que es el objetivo clnico principal.</p>
<p><strong>Mtricas evaluadas:</strong></p>
<ul>
<li>Recall (1)  Principal mtrica clnica.</li>
<li>Accuracy, F1-score (1) y ROC-AUC como apoyo.</li>
</ul>
<p><strong>Modelos validados</strong></p>
<ul>
<li>Logistic Regression (Opt)</li>
<li>XGBoost (Opt)</li>
<li>SVC (Opt)</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="10.1.-Validaci%C3%B3n-cruzada-con-cross_val_score"><strong>10.1. Validacin cruzada con cross_val_score</strong><a class="anchor-link" href="#10.1.-Validaci%C3%B3n-cruzada-con-cross_val_score"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">cross_val_score</span><span class="p">,</span> <span class="n">StratifiedKFold</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_scorer</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">f1_score</span>

<span class="c1"># Definir particin estratificada</span>
<span class="n">cv</span> <span class="o">=</span> <span class="n">StratifiedKFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># Mtricas a evaluar</span>
<span class="n">scoring</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'recall_1'</span><span class="p">:</span> <span class="n">make_scorer</span><span class="p">(</span><span class="n">recall_score</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="s1">'accuracy'</span><span class="p">:</span> <span class="n">make_scorer</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">),</span>
    <span class="s1">'f1_1'</span><span class="p">:</span> <span class="n">make_scorer</span><span class="p">(</span><span class="n">f1_score</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="s1">'roc_auc'</span><span class="p">:</span> <span class="n">make_scorer</span><span class="p">(</span><span class="n">roc_auc_score</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Diccionario de modelos optimizados</span>
<span class="n">modelos_opt</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"Logistic Regression (Opt)"</span><span class="p">:</span> <span class="n">modelo_logreg_opt</span><span class="p">,</span>
    <span class="s2">"XGBoost (Opt)"</span><span class="p">:</span> <span class="n">modelo_xgb_opt</span><span class="p">,</span>
    <span class="s2">"SVC (Opt)"</span><span class="p">:</span> <span class="n">modelo_svc_opt</span>
<span class="p">}</span>

<span class="c1"># Evaluar con cross_val_score</span>
<span class="n">resultados_cv</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_opt</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Validando: </span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">resultados</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">metrica</span><span class="p">,</span> <span class="n">scorer</span> <span class="ow">in</span> <span class="n">scoring</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">scorer</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">cv</span><span class="p">)</span>
        <span class="n">resultados</span><span class="p">[</span><span class="n">metrica</span> <span class="o">+</span> <span class="s2">"_mean"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
        <span class="n">resultados</span><span class="p">[</span><span class="n">metrica</span> <span class="o">+</span> <span class="s2">"_std"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
    <span class="n">resultados_cv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resultados</span><span class="p">)</span>

<span class="c1"># Convertir a DataFrame</span>
<span class="n">df_cv_resultados</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_cv</span><span class="p">)</span>

<span class="c1"># Detectar columnas numricas vlidas (las que empiezan por 'mean_')</span>
<span class="n">columnas_numericas_cv</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_cv_resultados</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"mean_"</span><span class="p">)]</span>

<span class="c1"># Visualizacin con formato y degradado</span>
<span class="n">display</span><span class="p">(</span>
    <span class="n">df_cv_resultados</span>
    <span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas_cv</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas_cv</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">"Resultados de Validacin Cruzada (5 folds)"</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="10.2.-Visualizaci%C3%B3n-de-resultados"><strong>10.2. Visualizacin de resultados</strong><a class="anchor-link" href="#10.2.-Visualizaci%C3%B3n-de-resultados"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#  DataFrame: df_cv_resultados</span>
<span class="c1"># Columnas: ['Modelo', 'recall_1_mean', 'f1_1_mean', 'roc_auc_mean']</span>

<span class="c1"># 1. Reorganizar para visualizacin</span>
<span class="n">df_melt_cv</span> <span class="o">=</span> <span class="n">df_cv_resultados</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span>
    <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"recall_1_mean"</span><span class="p">,</span> <span class="s2">"f1_1_mean"</span><span class="p">,</span> <span class="s2">"roc_auc_mean"</span><span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s2">"Valor"</span>
<span class="p">)</span>

<span class="c1"># 2. Etiquetas limpias</span>
<span class="n">df_melt_cv</span><span class="p">[</span><span class="s2">"Mtrica"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_melt_cv</span><span class="p">[</span><span class="s2">"Mtrica"</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span>
    <span class="s2">"recall_1_mean"</span><span class="p">:</span> <span class="s2">"Recall (1)"</span><span class="p">,</span>
    <span class="s2">"f1_1_mean"</span><span class="p">:</span> <span class="s2">"F1-score (1)"</span><span class="p">,</span>
    <span class="s2">"roc_auc_mean"</span><span class="p">:</span> <span class="s2">"ROC-AUC"</span>
<span class="p">})</span>

<span class="c1"># 3. Grfico de barras</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_melt_cv</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Valor"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Validacin Cruzada (5-fold) - Modelos Optimizados"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Media de la Mtrica"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Mtrica"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="10.3.-Interpretaci%C3%B3n-de-los-resultados-con-Validaci%C3%B3n-cruzada-(5-folds)"><strong>10.3. Interpretacin de los resultados con Validacin cruzada (5 folds)</strong><a class="anchor-link" href="#10.3.-Interpretaci%C3%B3n-de-los-resultados-con-Validaci%C3%B3n-cruzada-(5-folds)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ol>
<li><strong>Logistic Regression (Opt):</strong></li>
</ol>
<ul>
<li>El mejor recall medio,  0.747: detecta ms pacientes con diabetes, lo que es crucial clnicamente.</li>
<li>Sacrifica algo de precisin y exactitud a cambio de identificar ms casos positivos.</li>
</ul>
<ol start="2">
<li><strong>XGBoost (Opt):</strong></li>
</ol>
<ul>
<li>Mejora en accuracy y ROC-AUC respecto a Logistic Regression, pero con peor recall.</li>
<li>Ms equilibrado, pero menos sensible a casos positivos.</li>
</ul>
<ol start="3">
<li><strong>SVC (Opt)</strong>:</li>
</ol>
<ul>
<li>El modelo ms preciso globalmente en accuracy (0.787), F1-score (0.660) y ROC-AUC (0.742).</li>
<li>Sin embargo, recall (1) ms bajo (0.593), lo que puede significar ms falsos negativos, algo crtico en salud.</li>
</ul>
<p><strong>Decisin Clnica Provisional</strong></p>
<ul>
<li><strong>Modelo Clnico Prioritario: Logistic Regression (Opt)</strong><ul>
<li>Porque el recall ms alto implica mayor capacidad de detectar pacientes con riesgo de diabetes, aunque se pierda algo de exactitud global.</li>
</ul>
</li>
<li>Modelo Alternativo / Complementario: SVC (Opt)<ul>
<li>Si se priorizara rendimiento general del sistema (accuracy, ROC-AUC), sin tanto foco en los positivos.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="10.4.-Comparativa-visual-del-rendimiento"><strong>10.4. Comparativa visual del rendimiento</strong><a class="anchor-link" href="#10.4.-Comparativa-visual-del-rendimiento"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Predecir-con-el-modelo-final"><strong>Predecir con el modelo final</strong><a class="anchor-link" href="#Predecir-con-el-modelo-final"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Definir modelo final explcitamente</span>
<span class="n">modelo_final</span> <span class="o">=</span> <span class="n">modelo_logreg_opt</span>
<span class="c1"># Predecir con el modelo final</span>
<span class="n">y_pred_final</span> <span class="o">=</span> <span class="n">modelo_final</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>
<span class="n">y_proba_final</span> <span class="o">=</span> <span class="n">modelo_final</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Probabilidad de clase positiva (diabetes)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Visualizaci%C3%B3n:-Curva-ROC"><strong>Visualizacin: Curva ROC</strong><a class="anchor-link" href="#Visualizaci%C3%B3n:-Curva-ROC"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba_final</span><span class="p">)</span>
<span class="n">roc_auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba_final</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'darkorange'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"ROC curve (AUC = </span><span class="si">{</span><span class="n">roc_auc</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">'navy'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"False Positive Rate"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"True Positive Rate"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curva ROC - Modelo Final"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"lower right"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Visualizaci%C3%B3n:-Curva-Precision-Recall"><strong>Visualizacin: Curva Precision-Recall</strong><a class="anchor-link" href="#Visualizaci%C3%B3n:-Curva-Precision-Recall"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">precision_recall_curve</span><span class="p">,</span> <span class="n">average_precision_score</span>

<span class="n">precision</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">precision_recall_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba_final</span><span class="p">)</span>
<span class="n">ap_score</span> <span class="o">=</span> <span class="n">average_precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba_final</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"AP = </span><span class="si">{</span><span class="n">ap_score</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Recall"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Precision"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curva Precision-Recall - Modelo Final"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper right"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Visualizaci%C3%B3n:-Matriz-de-confusi%C3%B3n-con-porcentajes"><strong>Visualizacin: Matriz de confusin con porcentajes</strong><a class="anchor-link" href="#Visualizaci%C3%B3n:-Matriz-de-confusi%C3%B3n-con-porcentajes"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Calcular la matriz de confusin</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_final</span><span class="p">)</span>
<span class="n">cm_percent</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>

<span class="c1"># 2. Crear etiquetas con porcentaje y conteo</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_percent</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>

<span class="c1"># 3. Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_percent</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span> <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin del Modelo"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Clase Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Matriz de Confusin con Porcentajes - Modelo Final Logistic Regression"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Tambin en formato array, si quieres visualizarlo como texto</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin (array):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n"><strong>Interpretacin</strong><a class="anchor-link" href="#Interpretaci%C3%B3n"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>La siguiente visualizacin representa la matriz de confusin obtenida tras evaluar el modelo final optimizado sobre el conjunto de test. Se ha utilizado un formato enriquecido que combina:</p>
<ul>
<li>Frecuencia absoluta (conteo de casos por celda).</li>
<li>Porcentaje relativo respecto al total de verdaderos por clase real.</li>
</ul>
<p><strong>Interpretacin Clnica:</strong></p>
<ul>
<li>Diagonal principal (superior izquierda y inferior derecha): muestra los aciertos del modelo, es decir, los pacientes correctamente clasificados como sanos o como diabticos.</li>
<li>Celdas fuera de la diagonal: representan los errores de clasificacin.</li>
<li>La celda [0,1] muestra los falsos positivos: pacientes sanos que el modelo ha clasificado como con diabetes.</li>
<li>La celda [1,0] muestra los falsos negativos: pacientes con diabetes que el modelo ha clasificado como sanos.</li>
</ul>
<p>En el contexto clnico de deteccin de diabetes, minimizar los falsos negativos es crucial, ya que implica dejar sin diagnstico a pacientes en riesgo.</p>
<p>En este caso, el modelo ha alcanzado un recall del 77.8%, lo que indica que detecta correctamente a ms de 3 de cada 4 pacientes con diabetes, siendo un resultado clnicamente til pero que debe ser mejorado.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="10.5.-Elecci%C3%B3n-Provisional-del-Mejor-Modelo-Optimizado:-Justificaci%C3%B3n-T%C3%A9cnica-y-Cl%C3%ADnica"><strong>10.5. Eleccin Provisional del Mejor Modelo Optimizado: Justificacin Tcnica y Clnica</strong><a class="anchor-link" href="#10.5.-Elecci%C3%B3n-Provisional-del-Mejor-Modelo-Optimizado:-Justificaci%C3%B3n-T%C3%A9cnica-y-Cl%C3%ADnica"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras la optimizacin y validacin cruzada de los modelos Logistic Regression, XGBoost y SVC, se ha comparado su rendimiento clnico utilizando las mtricas clave: Recall (1), F1-score (1) y ROC-AUC.</p>
<p><strong>Decido</strong>:</p>
<ol>
<li>Seleccionar <strong>Logistic Regression (Opt)</strong> como modelo final por su mejor Recall (1), interpretabilidad y robustez, caractersticas especialmente relevantes en un contexto clnico donde es preferible maximizar la deteccin de pacientes con riesgo de diabetes, incluso a costa de algunos falsos positivos.</li>
<li>Este modelo se guarda como versin final optimizada: modelo_final_opt_logreg_v1.pkl.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="10.5.1.Guardado-de-Predicciones-del-Modelo-Final-Optimizado"><strong>10.5.1.Guardado de Predicciones del Modelo Final Optimizado</strong><a class="anchor-link" href="#10.5.1.Guardado-de-Predicciones-del-Modelo-Final-Optimizado"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>El modelo final seleccionado (Logistic Regression optimizado con pipeline V1) ha sido evaluado sobre el conjunto de test.</p>
<p>Se han generado y almacenado las predicciones en un archivo <code>.csv</code> con las siguientes columnas:</p>
<ul>
<li><strong>Real:</strong> Clase real del paciente (0 = No diabetes, 1 = Diabetes).</li>
<li><strong>Prediccin:</strong> Clase predicha por el modelo.</li>
<li><strong>Probabilidad_Diabetes:</strong> Probabilidad estimada por el modelo para la clase positiva (diabetes).</li>
</ul>
<p>Este archivo puede ser til para anlisis posteriores, generacin de visualizaciones clnicas o explicacin de errores (ej. falsos negativos).</p>
<p>Archivo generado: 'predicciones_modelo_final_logreg_v1.csv'</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Predecir con el modelo final</span>
<span class="n">y_pred_final</span> <span class="o">=</span> <span class="n">modelo_final</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)</span>
<span class="n">y_proba_final</span> <span class="o">=</span> <span class="n">modelo_final</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># 2. Crear DataFrame con resultados</span>
<span class="n">df_resultados_pred</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"Real"</span><span class="p">:</span> <span class="n">y_test_final</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="s2">"Prediccin"</span><span class="p">:</span> <span class="n">y_pred_final</span><span class="p">,</span>
    <span class="s2">"Probabilidad_Diabetes"</span><span class="p">:</span> <span class="n">y_proba_final</span>
<span class="p">})</span>

<span class="c1"># 3. Guardar en CSV</span>
<span class="n">nombre_archivo_predicciones</span> <span class="o">=</span> <span class="s2">"predicciones_modelo_final_logreg_v1.csv"</span>
<span class="n">ruta_csv_pred</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_archivo_predicciones</span><span class="p">)</span>
<span class="n">df_resultados_pred</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_csv_pred</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Predicciones guardadas correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_csv_pred</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="10.5.2.---Guardado-del-modelo-optimizado-final"><strong>10.5.2. - Guardado del modelo optimizado final</strong><a class="anchor-link" href="#10.5.2.---Guardado-del-modelo-optimizado-final"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Definir el modelo elegido</span>
<span class="n">modelo_final</span> <span class="o">=</span> <span class="n">modelo_logreg_opt</span>  <span class="c1"># Ya est cargado</span>
<span class="n">nombre_modelo_final</span> <span class="o">=</span> <span class="s2">"modelo_final_opt_logreg_v1.pkl"</span>

<span class="c1"># 2. Guardar en modelos_optimizados</span>
<span class="n">ruta_guardado_modelo_final</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="n">nombre_modelo_final</span><span class="p">)</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_final</span><span class="p">,</span> <span class="n">ruta_guardado_modelo_final</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Modelo final guardado correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_guardado_modelo_final</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="11.-Ajuste-del-Umbral-de-Decisi%C3%B3n-para-el-Modelo-Logistic-Regresion-Optimizado"><strong>11. Ajuste del Umbral de Decisin para el Modelo Logistic Regresion Optimizado</strong><a class="anchor-link" href="#11.-Ajuste-del-Umbral-de-Decisi%C3%B3n-para-el-Modelo-Logistic-Regresion-Optimizado"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Explorar como vara el resndiemiento del modelo al modificar el umbral de clasificacin, que por defecto es de 0.5, y seleccionar uno que optimice el recall sin comprometer demasiado la precisin.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="11.1.-Calcular-m%C3%A9tricas-para-distintos-umbrales"><strong>11.1. Calcular mtricas para distintos umbrales</strong><a class="anchor-link" href="#11.1.-Calcular-m%C3%A9tricas-para-distintos-umbrales"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Umbrales a evaluar</span>
<span class="n">umbrales</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>

<span class="c1"># Inicializar lista de resultados</span>
<span class="n">resultados_umbral</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">umbral</span> <span class="ow">in</span> <span class="n">umbrales</span><span class="p">:</span>
    <span class="n">y_pred_umbral</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_proba_final</span> <span class="o">&gt;=</span> <span class="n">umbral</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="n">resultados_umbral</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Umbral"</span><span class="p">:</span> <span class="n">umbral</span><span class="p">,</span>
        <span class="s2">"Precision"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_umbral</span><span class="p">),</span>
        <span class="s2">"Recall"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_umbral</span><span class="p">),</span>
        <span class="s2">"F1-score"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_umbral</span><span class="p">)</span>
    <span class="p">})</span>

<span class="c1"># Convertir a DataFrame</span>
<span class="n">df_umbrales</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_umbral</span><span class="p">)</span>
<span class="n">df_umbrales</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="11.2.-Visualizar-evoluci%C3%B3n-de-m%C3%A9tricas"><strong>11.2. Visualizar evolucin de mtricas</strong><a class="anchor-link" href="#11.2.-Visualizar-evoluci%C3%B3n-de-m%C3%A9tricas"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Lneas con colores asignados</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales</span><span class="p">[</span><span class="s2">"Precision"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Precision"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales</span><span class="p">[</span><span class="s2">"Recall"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Recall"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales</span><span class="p">[</span><span class="s2">"F1-score"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"F1-score"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span>

<span class="c1"># Lnea vertical de referencia</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Umbral 0.5 (por defecto)"</span><span class="p">)</span>

<span class="c1"># Personalizacin del grfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Umbral de Decisin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Valor de Mtrica"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Evolucin de mtricas segn el umbral de decisin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="11.3.-Interpretaci%C3%B3nde-la-Curva-del-Umbral-de-Decisi%C3%B3n-y-elecci%C3%B3n-del-umbral-%C3%B3ptimo"><strong>11.3. Interpretacinde la Curva del Umbral de Decisin y eleccin del umbral ptimo</strong><a class="anchor-link" href="#11.3.-Interpretaci%C3%B3nde-la-Curva-del-Umbral-de-Decisi%C3%B3n-y-elecci%C3%B3n-del-umbral-%C3%B3ptimo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>La grfica muestra cmo cambian Precision, Recall y F1-score segn el umbral de decisin que aplicas al modelo Logistic Regression optimizado (V1).</p>
<p>A medida que el umbral disminuye (ej. &lt;0.5):</p>
<ul>
<li>El recall mejora (ms positivos detectados).</li>
<li>Pero la precisin baja (ms falsos positivos).</li>
<li>ntre umbral 0.15 y 0.25, se mantiene recall = 1.0, pero precision 0.35, lo que da un F1-score mximo de 0.52.</li>
<li>Pico del F1-score: en torno a umbral 0.15- 0.25. Esto significa que ese es el equilibrio ptimo entre precisin y recall.</li>
</ul>
<p><strong>Decido</strong></p>
<ul>
<li>Elegir el umbral ptimo final= 0.20 y generar nuevas predicciones con ese umbral</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="11.4.-Aplicaci%C3%B3n-del-umbral-ajustado-(0.20)-y-an%C3%A1lisis-cl%C3%ADnico"><strong>11.4. Aplicacin del umbral ajustado (0.20) y anlisis clnico</strong><a class="anchor-link" href="#11.4.-Aplicaci%C3%B3n-del-umbral-ajustado-(0.20)-y-an%C3%A1lisis-cl%C3%ADnico"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Definir el umbral ajustado</span>
<span class="n">umbral_optimo</span> <span class="o">=</span> <span class="mf">0.20</span>

<span class="c1"># 2. Generar nuevas predicciones usando ese umbral</span>
<span class="n">y_pred_ajustado</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_proba_final</span> <span class="o">&gt;=</span> <span class="n">umbral_optimo</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># 3. Calcular matriz de confusin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">f1_score</span><span class="p">,</span> <span class="n">classification_report</span>
<span class="p">)</span>

<span class="n">cm_ajustado</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_ajustado</span><span class="p">)</span>
<span class="n">cm_percent_ajustado</span> <span class="o">=</span> <span class="n">cm_ajustado</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm_ajustado</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">labels_ajustado</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm_ajustado</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_percent_ajustado</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span>
                             <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_ajustado</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
                            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_ajustado</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>

<span class="c1"># 4. Visualizar matriz enriquecida</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_percent_ajustado</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels_ajustado</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Clase Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Matriz de Confusin con Umbral </span><span class="si">{</span><span class="n">umbral_optimo</span><span class="si">}</span><span class="s2"> - Modelo Logistic Regression"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 5. Imprimir mtricas ajustadas</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">--- MTRICAS AJUSTADAS ---"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Umbral aplicado: </span><span class="si">{</span><span class="n">umbral_optimo</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Precision:"</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_ajustado</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Recall:"</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_ajustado</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"F1-score:"</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_ajustado</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="11.5.-Interpretaci%C3%B3n-cl%C3%ADnica"><strong>11.5. Interpretacin clnica</strong><a class="anchor-link" href="#11.5.-Interpretaci%C3%B3n-cl%C3%ADnica"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>Recall (1) = 1.00: Detecta todos los casos positivos (diabetes).</li>
<li>Precision (1) = 0.353: De cada 10 pacientes que predice con diabetes, 6-7 son falsos positivos.</li>
<li>F1-score (1) = 0.522: Balance bajo entre precision y recall, pero vlido en contexto clnico.</li>
<li>Falsos negativos = 0</li>
<li>Falsos positivos = 99</li>
</ul>
<p><strong>Interpretacin Clnica</strong></p>
<ul>
<li>Esta configuracin es altamente conservadora: prefiere "alarmar" aunque muchos sean falsos positivos.</li>
<li>Es ideal si el objetivo es no dejar pasar ni un solo caso de diabetes.</li>
<li>Aunque baja la precisin, el beneficio clnico puede ser alto: los falsos positivos solo reciben pruebas adicionales, no se ignoran casos reales.<ul>
<li>Ventaja: modelo muy sensible (recall = 1.0)</li>
<li>Desventaja: sobrecarga diagnstica por muchos falsos positivos.</li>
</ul>
</li>
</ul>
<p>Al aplicar un umbral ajustado de 0.20, el modelo clasifica como "diabetes" a ms pacientes que presentan probabilidad  0.20.</p>
<p>Esto aumenta significativamente el recall, lo que mejora la sensibilidad clnica (menos falsos negativos), a costa de una ligera disminucin en la precisin (ms falsos positivos).</p>
<p>Esta estrategia puede ser vlida en entornos donde es preferible detectar ms casos en riesgo (ej. cribado poblacional o medicina preventiva), aunque se requieran pruebas adicionales en segunda fase.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="11.6.-Guardado-del-resultado-de-predicci%C3%B3n-Umbral-0.20"><strong>11.6. Guardado del resultado de prediccin Umbral 0.20</strong><a class="anchor-link" href="#11.6.-Guardado-del-resultado-de-predicci%C3%B3n-Umbral-0.20"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar predicciones ajustadas</span>
<span class="n">df_pred_umbral</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"Real"</span><span class="p">:</span> <span class="n">y_test_final</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="s2">"Prediccin Ajustada"</span><span class="p">:</span> <span class="n">y_pred_ajustado</span><span class="p">,</span>
    <span class="s2">"Probabilidad_Diabetes"</span><span class="p">:</span> <span class="n">y_proba_final</span>
<span class="p">})</span>

<span class="n">nombre_csv</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"predicciones_modelo_final_logreg_umbral_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">umbral_optimo</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">)</span><span class="si">}</span><span class="s2">.csv"</span>
<span class="n">ruta_pred_umbral</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_csv</span><span class="p">)</span>
<span class="n">df_pred_umbral</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_pred_umbral</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">CSV guardado en: </span><span class="si">{</span><span class="n">ruta_pred_umbral</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="12.-Aplicaci%C3%B3n-de-SMOTE-y-Comparativa-Final"><strong>12. Aplicacin de SMOTE y Comparativa Final</strong><a class="anchor-link" href="#12.-Aplicaci%C3%B3n-de-SMOTE-y-Comparativa-Final"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Voy a aplicar la tcnica de SMOTE (Synthetic Minority Over-sampling Technique) sobre el conjunto de entrenamiento para balancear las clases y evaluar su impacto en los modelos previamente optimizados (Logistic Regression, XGBoost, SVC). Finalmente, comparar su rendimiento con los modelos sin SMOTE y elegir el modelo clnico definitivo.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="12.1-Aplicaci%C3%B3n-de-SMOTE-sobre-X_train_v1"><strong>12.1 Aplicacin de SMOTE sobre X_train_v1</strong><a class="anchor-link" href="#12.1-Aplicaci%C3%B3n-de-SMOTE-sobre-X_train_v1"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Se aplica la tcnica de SMOTE (Synthetic Minority Oversampling Technique) sobre X_train_v1 y y_train_final para balancear la clase minoritaria (diabetes = 1).</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">imblearn.over_sampling</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMOTE</span>

<span class="c1"># Aplicar SMOTE</span>
<span class="n">smote</span> <span class="o">=</span> <span class="n">SMOTE</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">X_train_v1_smote</span><span class="p">,</span> <span class="n">y_train_smote</span> <span class="o">=</span> <span class="n">smote</span><span class="o">.</span><span class="n">fit_resample</span><span class="p">(</span><span class="n">X_train_v1</span><span class="p">,</span> <span class="n">y_train_final</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Shape despus de SMOTE:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_train:"</span><span class="p">,</span> <span class="n">X_train_v1_smote</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_train:"</span><span class="p">,</span> <span class="n">y_train_smote</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="12.2.-Entrenamiento-de-los-Modelos-con-SMOTE"><strong>12.2. Entrenamiento de los Modelos con SMOTE</strong><a class="anchor-link" href="#12.2.-Entrenamiento-de-los-Modelos-con-SMOTE"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Logistic Regression</span>
<span class="n">modelo_logreg_smote</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">modelo_logreg_smote</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1_smote</span><span class="p">,</span> <span class="n">y_train_smote</span><span class="p">)</span>

<span class="c1"># 2. XGBoost con hiperparmetros ptimos</span>
<span class="n">modelo_xgb_smote</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span>
    <span class="n">colsample_bytree</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">learning_rate</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">max_depth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">n_estimators</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">subsample</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
    <span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
<span class="p">)</span>
<span class="n">modelo_xgb_smote</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1_smote</span><span class="p">,</span> <span class="n">y_train_smote</span><span class="p">)</span>

<span class="c1"># 3. SVC con hiperparmetros ptimos</span>
<span class="n">modelo_svc_smote</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span>
    <span class="n">C</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="s1">'linear'</span><span class="p">,</span>
    <span class="n">gamma</span><span class="o">=</span><span class="s1">'scale'</span><span class="p">,</span>
    <span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
<span class="p">)</span>
<span class="n">modelo_svc_smote</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_v1_smote</span><span class="p">,</span> <span class="n">y_train_smote</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="12.3-Evaluaci%C3%B3n-de-Modelos-con-SMOTE-(Test-Set-Desbalanceado)"><strong>12.3 Evaluacin de Modelos con SMOTE (Test Set Desbalanceado)</strong><a class="anchor-link" href="#12.3-Evaluaci%C3%B3n-de-Modelos-con-SMOTE-(Test-Set-Desbalanceado)"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Evaluar modelos sobre el test set original</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">classification_report</span>

<span class="k">def</span><span class="w"> </span><span class="nf">evaluar_modelo</span><span class="p">(</span><span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">):</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">--- </span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2"> ---"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"ROC-AUC:"</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">evaluar_modelo</span><span class="p">(</span><span class="s2">"Logistic Regression (SMOTE)"</span><span class="p">,</span> <span class="n">modelo_logreg_smote</span><span class="p">,</span> <span class="n">X_test_v1</span><span class="p">,</span> <span class="n">y_test_final</span><span class="p">)</span>
<span class="n">evaluar_modelo</span><span class="p">(</span><span class="s2">"XGBoost (SMOTE)"</span><span class="p">,</span> <span class="n">modelo_xgb_smote</span><span class="p">,</span> <span class="n">X_test_v1</span><span class="p">,</span> <span class="n">y_test_final</span><span class="p">)</span>
<span class="n">evaluar_modelo</span><span class="p">(</span><span class="s2">"SVC (SMOTE)"</span><span class="p">,</span> <span class="n">modelo_svc_smote</span><span class="p">,</span> <span class="n">X_test_v1</span><span class="p">,</span> <span class="n">y_test_final</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="12.4-Guardado-de-Modelos-SMOTE"><strong>12.4 Guardado de Modelos SMOTE</strong><a class="anchor-link" href="#12.4-Guardado-de-Modelos-SMOTE"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_logreg_smote</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"logreg_opt_smote_v1.pkl"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_xgb_smote</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"xgboost_opt_smote_v1.pkl"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_svc_smote</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"svc_opt_smote_v1.pkl"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="12.5-Comparativa-Final-de-Modelos-(Con-y-Sin-SMOTE)"><strong>12.5 Comparativa Final de Modelos (Con y Sin SMOTE)</strong><a class="anchor-link" href="#12.5-Comparativa-Final-de-Modelos-(Con-y-Sin-SMOTE)"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear DataFrame comparativo final</span>
<span class="n">comparativa_modelos_final</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span>
    <span class="p">{</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"Logistic Regression (Opt)"</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="mf">0.714</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="mf">0.778</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="mf">0.656</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="mf">0.767</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"XGBoost (Opt)"</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="mf">0.773</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="mf">0.519</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="mf">0.615</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="mf">0.808</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"SVC (Opt)"</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="mf">0.714</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="mf">0.500</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="mf">0.551</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="mf">0.818</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"Logistic Regression (Opt + SMOTE)"</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="mf">0.722</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="mf">0.648</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="mf">0.620</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="mf">0.792</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"XGBoost (Opt + SMOTE)"</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="mf">0.750</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="mf">0.500</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="mf">0.590</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="mf">0.801</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"SVC (Opt + SMOTE)"</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="mf">0.721</span><span class="p">,</span> <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="mf">0.685</span><span class="p">,</span> <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="mf">0.634</span><span class="p">,</span> <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="mf">0.808</span>
    <span class="p">}</span>
<span class="p">])</span>

<span class="c1"># Reordenar por Recall</span>
<span class="n">comparativa_modelos_final</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Recall (1)"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Detectar columnas numricas para aplicar formato</span>
<span class="n">columnas_numericas</span> <span class="o">=</span> <span class="n">comparativa_modelos_final</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s2">"float"</span><span class="p">,</span> <span class="s2">"int"</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Visualizar</span>
<span class="n">display</span><span class="p">(</span>
    <span class="n">comparativa_modelos_final</span>
    <span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3f}</span><span class="s2">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">columnas_numericas</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">"Comparativa Final de Modelos Optimizados (Con y Sin SMOTE)"</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Guardar CSV</span>
<span class="n">nombre_archivo</span> <span class="o">=</span> <span class="s2">"comparativa_modelos_final_opt_con_y_sin_smote.csv"</span>
<span class="n">ruta_comparativa</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_archivo</span><span class="p">)</span>
<span class="n">comparativa_modelos_final</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_comparativa</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Comparativa guardada en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_comparativa</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="12.6.-Interpretaci%C3%B3n-de-Resultados"><strong>12.6. Interpretacin de Resultados</strong><a class="anchor-link" href="#12.6.-Interpretaci%C3%B3n-de-Resultados"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Interpretacin Clnica</strong></p>
<ul>
<li>SVC (Opt + SMOTE) es el modelo ms equilibrado y robusto:<ul>
<li>Recall (1): 0.685 (mejor sensibilidad con balance)</li>
<li>F1-score (1): 0.634 (equilibrio precisin/recall)</li>
<li>ROC-AUC: 0.808 (alta capacidad discriminativa)</li>
</ul>
</li>
</ul>
<p><strong>Guardado final</strong>:/modelos_optimizados/svc_opt_smote_v1.pkl</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Hasta ahora se ha realizado:</p>
<ul>
<li>Un pipeline profesional.</li>
<li>Anlisis clnico riguroso.</li>
<li>Evaluacin con y sin SMOTE.</li>
<li>Ajuste de umbral.</li>
<li>Comparativa.</li>
</ul>
<p>Sigo teniendo un resultado no ptimo para la prediccin de personas con diabetes frente a las que no lo son, por tanto, voy a explorar nuevas vas de mejorar el rendimiento, especialmente en el recall de la calse 1:</p>
<ol>
<li>Ajustar umbral para los modelos con SMOTE</li>
<li>Crear variables combinadas</li>
<li>Reentrenar</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="13.-Ajuste-de-Umbral-con-SMOTE-y-Comparativa-de-Modelos"><strong>13. Ajuste de Umbral con SMOTE y Comparativa de Modelos</strong><a class="anchor-link" href="#13.-Ajuste-de-Umbral-con-SMOTE-y-Comparativa-de-Modelos"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Objetivo:"><strong>Objetivo:</strong><a class="anchor-link" href="#Objetivo:"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Ajustar el umbral de decisin para mejorar el recall en los modelos ya entrenados con SMOTE, especialmente SVC (Opt + SMOTE) y Logistic Regression (SMOTE).</p>
<p><strong>Pasos</strong>:</p>
<ul>
<li>Calcular mtricas (Precision, Recall, F1-score) para mltiples umbrales.</li>
<li>Visualizar su evolucin.</li>
<li>Seleccionar el umbral ptimo.</li>
<li>Guardar predicciones ajustadas para anlisis clnico.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="13.1.-Ajuste-de-Umbral-de-Decisi%C3%B3n-a-los-modelos-seleccionados"><strong>13.1. Ajuste de Umbral de Decisin a los modelos seleccionados</strong><a class="anchor-link" href="#13.1.-Ajuste-de-Umbral-de-Decisi%C3%B3n-a-los-modelos-seleccionados"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="13.1.1.-Modelo-SVC:-Ajuste-de-Umbral-con-SMOTE"><strong>13.1.1. Modelo SVC: Ajuste de Umbral con SMOTE</strong><a class="anchor-link" href="#13.1.1.-Modelo-SVC:-Ajuste-de-Umbral-con-SMOTE"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Probabilidades del modelo SVC + SMOTE</span>
<span class="n">y_proba_svc_smote</span> <span class="o">=</span> <span class="n">modelo_svc_smote</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># Rango de umbrales</span>
<span class="n">umbrales</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>
<span class="n">resultados_umbral_svc</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">umbral</span> <span class="ow">in</span> <span class="n">umbrales</span><span class="p">:</span>
    <span class="n">y_pred_umbral</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_proba_svc_smote</span> <span class="o">&gt;=</span> <span class="n">umbral</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">resultados_umbral_svc</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Umbral"</span><span class="p">:</span> <span class="n">umbral</span><span class="p">,</span>
        <span class="s2">"Precision"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_umbral</span><span class="p">,</span> <span class="n">zero_division</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="s2">"Recall"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_umbral</span><span class="p">),</span>
        <span class="s2">"F1-score"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_umbral</span><span class="p">)</span>
    <span class="p">})</span>

<span class="c1"># Convertir a DataFrame</span>
<span class="n">df_umbrales_svc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_umbral_svc</span><span class="p">)</span>

<span class="c1"># Visualizacin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales_svc</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales_svc</span><span class="p">[</span><span class="s2">"Precision"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Precision"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales_svc</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales_svc</span><span class="p">[</span><span class="s2">"Recall"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Recall"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales_svc</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales_svc</span><span class="p">[</span><span class="s2">"F1-score"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"F1-score"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Umbral 0.5 (por defecto)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Umbral de Decisin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Valor de Mtrica"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Evolucin de mtricas segn el umbral de decisin - SVC + SMOTE"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n-de-la-curva-(SVC-+-SMOTE)"><strong>Interpretacin de la curva (SVC + SMOTE)</strong><a class="anchor-link" href="#Interpretaci%C3%B3n-de-la-curva-(SVC-+-SMOTE)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>Recall comienza en 1.0 (umbral 0.0) y va descendiendo progresivamente hasta casi 0.</li>
<li>Precision es baja al principio (0.35) y mejora progresivamente con el aumento del umbral, alcanzando su pico hacia 0.9 - 0.95, pero sacrificando recall.</li>
<li>F1-score presenta su mximo entre los umbrales 0.30 y 0.40, con valores aproximados de 0.65.</li>
</ul>
<p><strong>Recomendacin para SVC (Opt + SMOTE)</strong></p>
<ul>
<li>Con un objetivo de mxima sensibilidad clnica (detectar todos los positivos):
Elige umbral = 0.20<ul>
<li>Recall - 1.0, F1-score - 0.64 (segn curva anterior).</li>
<li>Ideal para cribado clnico.</li>
</ul>
</li>
<li>Aunque para mantener ms equilibrio entre Recall y Precisin:
Elijo umbral = 0.35<ul>
<li>F1-score  mximo</li>
<li>Reduce falsos positivos manteniendo buena sensibilidad.</li>
</ul>
</li>
</ul>
<p><strong>Decisin clnica:</strong></p>
<ul>
<li>Umbral = 0.35.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="13.1.2.-Modelo-Logistic-Regression:-Ajuste-de-Umbral-con-Moddelos-con-SMOTE"><strong>13.1.2. Modelo Logistic Regression: Ajuste de Umbral con Moddelos con SMOTE</strong><a class="anchor-link" href="#13.1.2.-Modelo-Logistic-Regression:-Ajuste-de-Umbral-con-Moddelos-con-SMOTE"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Obtener probabilidades del modelo</span>
<span class="n">y_proba_lr_smote</span> <span class="o">=</span> <span class="n">modelo_logreg_smote</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># 2. Evaluar mltiples umbrales</span>
<span class="n">umbrales</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>
<span class="n">metricas_lr</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">umbral</span> <span class="ow">in</span> <span class="n">umbrales</span><span class="p">:</span>
    <span class="n">y_pred_lr_umbral</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_proba_lr_smote</span> <span class="o">&gt;=</span> <span class="n">umbral</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">metricas_lr</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Umbral"</span><span class="p">:</span> <span class="n">umbral</span><span class="p">,</span>
        <span class="s2">"Precision"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_lr_umbral</span><span class="p">,</span> <span class="n">zero_division</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="s2">"Recall"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_lr_umbral</span><span class="p">),</span>
        <span class="s2">"F1-score"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_lr_umbral</span><span class="p">)</span>
    <span class="p">})</span>

<span class="c1"># 3. Convertir a DataFrame</span>
<span class="n">df_umbrales_lr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">metricas_lr</span><span class="p">)</span>

<span class="c1"># 4. Visualizar evolucin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales_lr</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales_lr</span><span class="p">[</span><span class="s2">"Precision"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Precision"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales_lr</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales_lr</span><span class="p">[</span><span class="s2">"Recall"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Recall"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_umbrales_lr</span><span class="p">[</span><span class="s2">"Umbral"</span><span class="p">],</span> <span class="n">df_umbrales_lr</span><span class="p">[</span><span class="s2">"F1-score"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"F1-score"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Umbral 0.5 (por defecto)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Evolucin de mtricas segn el umbral - Logistic Regression + SMOTE"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Umbral de Decisin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Valor de Mtrica"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Interpretaci%C3%B3n-de-la-curva-(Logistic-+-SMOTE)"><strong>Interpretacin de la curva (Logistic + SMOTE)</strong><a class="anchor-link" href="#Interpretaci%C3%B3n-de-la-curva-(Logistic-+-SMOTE)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>Recall permanece cerca de 1.0 hasta aproximadamente umbral 0.25, luego desciende.</li>
<li>F1-score alcanza su pico alrededor de umbral 0.25-0.30, lo que indica el mejor equilibrio entre sensibilidad y precisin.</li>
<li>Precisio mejora a medida que sube el umbral, pero reduce el recall.</li>
</ul>
<p><strong>Recomendacin para Logistic Regression (SMOTE):</strong></p>
<ul>
<li>Umbral ptimo sugerido: 0.25<ul>
<li>Recall alto (0.9)</li>
<li>F1-score tambin alto ~0.65)</li>
<li>Mejor equilibrio clnico</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="13.2.-Aplicar-el-Umbral-seleccionado-a-los-modelos"><strong>13.2. Aplicar el Umbral seleccionado a los modelos</strong><a class="anchor-link" href="#13.2.-Aplicar-el-Umbral-seleccionado-a-los-modelos"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="13.2.1.-Aplicaci%C3%B3n-de-Umbral-Ajustado-(0.35)---SVC-+-SMOTE"><strong>13.2.1. Aplicacin de Umbral Ajustado (0.35) - SVC + SMOTE</strong><a class="anchor-link" href="#13.2.1.-Aplicaci%C3%B3n-de-Umbral-Ajustado-(0.35)---SVC-+-SMOTE"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Ajuste de umbral para SVC + SMOTE</span>

<span class="c1"># 1. Definir el umbral ptimo para SVC</span>
<span class="n">umbral_svc</span> <span class="o">=</span> <span class="mf">0.35</span>

<span class="c1"># 2. Obtener probabilidades del modelo</span>
<span class="n">y_proba_svc</span> <span class="o">=</span> <span class="n">modelo_svc_smote</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># 3. Predicciones ajustadas con umbral</span>
<span class="n">y_pred_svc_umbral</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_proba_svc</span> <span class="o">&gt;=</span> <span class="n">umbral_svc</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># 4. Matriz de confusin enriquecida</span>
<span class="n">cm_svc</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc_umbral</span><span class="p">)</span>
<span class="n">cm_svc_pct</span> <span class="o">=</span> <span class="n">cm_svc</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm_svc</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">labels_svc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm_svc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_svc_pct</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_svc</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_svc</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>

<span class="c1"># 5. Visualizacin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_svc_pct</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels_svc</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Matriz de Confusin - SVC + SMOTE</span><span class="se">\n</span><span class="s2">Umbral ajustado: </span><span class="si">{</span><span class="n">umbral_svc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Clase Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 6. Mtricas ajustadas</span>
<span class="n">precision_svc</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc_umbral</span><span class="p">)</span>
<span class="n">recall_svc</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc_umbral</span><span class="p">)</span>
<span class="n">f1_svc</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc_umbral</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">--- MTRICAS AJUSTADAS (SVC + SMOTE) ---"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Umbral aplicado: </span><span class="si">{</span><span class="n">umbral_svc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Precision: </span><span class="si">{</span><span class="n">precision_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Recall:    </span><span class="si">{</span><span class="n">recall_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"F1-score:  </span><span class="si">{</span><span class="n">f1_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># 7. Guardar predicciones en CSV</span>
<span class="n">df_pred_svc_umbral</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"Real"</span><span class="p">:</span> <span class="n">y_test_final</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="s2">"Prediccin Ajustada"</span><span class="p">:</span> <span class="n">y_pred_svc_umbral</span><span class="p">,</span>
    <span class="s2">"Probabilidad_Diabetes"</span><span class="p">:</span> <span class="n">modelo_svc_smote</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">nombre_csv_svc</span> <span class="o">=</span> <span class="s2">"predicciones_svc_smote_umbral_035.csv"</span>
<span class="n">ruta_csv_svc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_csv_svc</span><span class="p">)</span>
<span class="n">df_pred_svc_umbral</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_csv_svc</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> CSV guardado en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_csv_svc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="13.2.2.-Aplicaci%C3%B3n-de-Umbral-Ajustado-(0.25)---Logistic-Regression-+-SMOTE"><strong>13.2.2. Aplicacin de Umbral Ajustado (0.25) - Logistic Regression + SMOTE</strong><a class="anchor-link" href="#13.2.2.-Aplicaci%C3%B3n-de-Umbral-Ajustado-(0.25)---Logistic-Regression-+-SMOTE"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Ajuste de umbral para Logistic Regression + SMOTE</span>

<span class="c1"># 1. Definir el umbral</span>
<span class="n">umbral_lr</span> <span class="o">=</span> <span class="mf">0.25</span>

<span class="c1"># 2. Predicciones ajustadas</span>
<span class="n">y_pred_lr_umbral</span> <span class="o">=</span> <span class="p">(</span><span class="n">modelo_logreg_smote</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">umbral_lr</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># 3. Matriz de confusin y porcentajes</span>
<span class="n">cm_lr</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_lr_umbral</span><span class="p">)</span>
<span class="n">cm_lr_pct</span> <span class="o">=</span> <span class="n">cm_lr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm_lr</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">labels_lr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm_lr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_lr_pct</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_lr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_lr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>

<span class="c1"># 4. Visualizacin</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_lr_pct</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels_lr</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Matriz de Confusin - Logistic Regression + SMOTE</span><span class="se">\n</span><span class="s2">Umbral ajustado: </span><span class="si">{</span><span class="n">umbral_lr</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Clase Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 5. Mtricas ajustadas</span>
<span class="n">precision_lr</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_lr_umbral</span><span class="p">)</span>
<span class="n">recall_lr</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_lr_umbral</span><span class="p">)</span>
<span class="n">f1_lr</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_lr_umbral</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">--- MTRICAS AJUSTADAS (Logistic Regression + SMOTE) ---"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Umbral aplicado: </span><span class="si">{</span><span class="n">umbral_lr</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Precision: </span><span class="si">{</span><span class="n">precision_lr</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Recall:    </span><span class="si">{</span><span class="n">recall_lr</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"F1-score:  </span><span class="si">{</span><span class="n">f1_lr</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># 6. Guardar CSV de predicciones ajustadas</span>
<span class="n">df_pred_lr_umbral</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"Real"</span><span class="p">:</span> <span class="n">y_test_final</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="s2">"Prediccin Ajustada"</span><span class="p">:</span> <span class="n">y_pred_lr_umbral</span><span class="p">,</span>
    <span class="s2">"Probabilidad_Diabetes"</span><span class="p">:</span> <span class="n">modelo_logreg_smote</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_v1</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">nombre_csv_lr</span> <span class="o">=</span> <span class="s2">"predicciones_logreg_smote_umbral_025.csv"</span>
<span class="n">ruta_csv_lr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_csv_lr</span><span class="p">)</span>
<span class="n">df_pred_lr_umbral</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_csv_lr</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> CSV guardado en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_csv_lr</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="13.2.3.-Interpretaci%C3%B3n-cl%C3%ADnica-de-las-Matrices-de-Confusi%C3%B3n-(Umbral-Aplicado)"><strong>13.2.3. Interpretacin clnica de las Matrices de Confusin (Umbral Aplicado)</strong><a class="anchor-link" href="#13.2.3.-Interpretaci%C3%B3n-cl%C3%ADnica-de-las-Matrices-de-Confusi%C3%B3n-(Umbral-Aplicado)"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Modelo 1: SVC Optimizado + SMOTE + Umbral 0.35</strong></p>
<p><strong>Matriz de Confusin</strong></p>
<ul>
<li>Verdaderos negativos (TN): 62 pacientes sanos correctamente clasificados.</li>
<li>Falsos positivos (FP): 38 sanos clasificados como diabticos: se realizaran pruebas innecesarias.</li>
<li>Falsos negativos (FN): 9 pacientes con diabetes no detectados  riesgo clnico.</li>
<li>Verdaderos positivos (TP): 45 pacientes con diabetes correctamente identificados.</li>
</ul>
<p><strong>Clculo directo:</strong></p>
<ul>
<li>Recall (1) = 45 / (45 + 9) = 83.3%</li>
<li>Precision (1) = 45 / (45 + 38)  54.2%</li>
<li>F1-score (1)  0.65</li>
</ul>
<p><strong>Interpretacin clnica:</strong></p>
<ul>
<li>Idntico recall al modelo de regresin logstica.</li>
<li>Mejor precisin, menos falsos positivos, menor carga clnica innecesaria.</li>
<li><strong>Conclusin</strong>: Este modelo es ms eficiente clnicamente que Logistic Regression en esta configuracin, porque reduce la cantidad de pruebas innecesarias sin perder sensibilidad.</li>
</ul>
<p><strong>Modelo 2: Logistic Regression Optimizada + SMOTE + Umbral 0.25</strong></p>
<p><strong>Matriz de Confusin</strong></p>
<ul>
<li>TN: 57 sanos correctamente identificados.</li>
<li>FP: 43 sanos clasificados como diabticos.</li>
<li>FN: 9 pacientes con diabetes no detectados  mejora significativa.</li>
<li>TP: 45 pacientes con diabetes correctamente identificados.</li>
</ul>
<p><strong>Clculo directo:</strong></p>
<ul>
<li>Recall (1) = 45 / (45 + 9) = 83.3%</li>
<li>Precision (1) = 45 / (45 + 43)  51.1%</li>
<li>F1-score (1)  0.63</li>
</ul>
<p><strong>Interpretacin clnica:</strong></p>
<ul>
<li>Positivo: Detecta 8 de cada 10 casos de diabetes, sensibilidad alta.</li>
<li>Negativo: Casi la mitad de los pacientes sanos se clasifican como positivos, riesgo de sobrediagnstico.</li>
<li>Balance: Este modelo es til si se quiere asegurar que muy pocos pacientes con diabetes escapen al diagnstico, aunque eso implique realizar pruebas adicionales a muchos que no lo son.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="13.2.4-Conclusi%C3%B3n-Cl%C3%ADnicaFinal-del-Ajsute-de-Umbral"><strong>13.2.4 Conclusin ClnicaFinal del Ajsute de Umbral</strong><a class="anchor-link" href="#13.2.4-Conclusi%C3%B3n-Cl%C3%ADnicaFinal-del-Ajsute-de-Umbral"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Conclusin</strong>
Tras el ajuste de umbral en modelos con SMOTE:</p>
<ul>
<li>Ambos modelos (Logistic Regression y SVC) logran mismo recall clnico (83.3%), es decir, logran detectar ms del 83% de los pacientes con diabetes, lo cual es adecuado para contextos de cribado clnico.</li>
<li>Sin embargo, el coste es elevado: entre un 43% y 38% de los pacientes sanos son clasificados como positivos (falsos positivos).</li>
<li>El modelo SVC + SMOTE con umbral 0.35 logra el mejor equilibrio global entre sensibilidad (recall) y precisin clnica.</li>
<li>A pesar de ello, los resultados actuales an no alcanzan el nivel ptimo esperado para una herramienta clnica robusta.configuraciones evaluadas.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="13.2.5.-Guardado-del-modelo-SVC+-SMOTE+-umbral-0.35"><strong>13.2.5. Guardado del modelo SVC+ SMOTE+ umbral 0.35</strong><a class="anchor-link" href="#13.2.5.-Guardado-del-modelo-SVC+-SMOTE+-umbral-0.35"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Ruta del modelo base ya guardado (sin umbral)</span>
<span class="n">ruta_modelo_base</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"svc_opt_smote_v1.pkl"</span><span class="p">)</span>

<span class="c1"># Cargar modelo base</span>
<span class="n">modelo_svc</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ruta_modelo_base</span><span class="p">)</span>

<span class="c1"># Clase contenedora con umbral personalizado</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ModeloConUmbral</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modelo</span><span class="p">,</span> <span class="n">umbral</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modelo</span> <span class="o">=</span> <span class="n">modelo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">umbral</span> <span class="o">=</span> <span class="n">umbral</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">probas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">probas</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">umbral</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">predict_proba</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="c1"># Aplicar el umbral 0.35</span>
<span class="n">modelo_svc_umbral</span> <span class="o">=</span> <span class="n">ModeloConUmbral</span><span class="p">(</span><span class="n">modelo_svc</span><span class="p">,</span> <span class="n">umbral</span><span class="o">=</span><span class="mf">0.35</span><span class="p">)</span>

<span class="c1"># Guardar modelo final con umbral</span>
<span class="n">ruta_modelo_umbral</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"svc_opt_smote_v1_umbral035.pkl"</span><span class="p">)</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_svc_umbral</span><span class="p">,</span> <span class="n">ruta_modelo_umbral</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Modelo guardado con umbral 0.35 en:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ruta_modelo_umbral</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="14.-Exploraci%C3%B3n-de-Mejoras-Avanzadas"><strong>14. Exploracin de Mejoras Avanzadas</strong><a class="anchor-link" href="#14.-Exploraci%C3%B3n-de-Mejoras-Avanzadas"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Con el objetivo de mejorar el rendimiento clnico, especialmente en la deteccin de pacientes con diabetes (recall de la clase 1) sin comprometer excesivamente la precisin,voy a explorar otras estrategias avanzadas que complementen lo ya implementado en los bloques anteriores. Con estas estrategias prtendo:</p>
<ul>
<li>Reducir falsos negativos (aumentar la sensibilidad).</li>
<li>Disminuir falsos positivos (mejorar precisin).</li>
<li>Mantener o mejorar el F1-score.</li>
<li>Aumentar la robustez general del sistema predictivo.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Estrategias-que-se-explorar%C3%A1n"><strong>Estrategias que se explorarn</strong><a class="anchor-link" href="#Estrategias-que-se-explorar%C3%A1n"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ol>
<li><strong>Segmentacin por grupo clnico de riesgo (IMC, Edad)</strong>:	personalizar la prediccin segn perfiles clnicos metablico (ej. pacientes con obesidad vs. no obesidad) y mejorar sensibilidad o especificidad.</li>
<li><strong>SMOTE por subgrupo</strong>, balancear internamente los subgrupos antes de entrenar</li>
<li><strong>Evaluacin por modelo (LR, SVC, XGB)</strong>, comparar rendimientos con y sin SMOTE en cada grupo</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="14.1.-Segmentaci%C3%B3n-por-grupos-de-riesgo:-Variable-Grupo-de-Riesgo_IMC"><strong>14.1. Segmentacin por grupos de riesgo: Variable Grupo de Riesgo_IMC</strong><a class="anchor-link" href="#14.1.-Segmentaci%C3%B3n-por-grupos-de-riesgo:-Variable-Grupo-de-Riesgo_IMC"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Objetivo"><strong>Objetivo</strong><a class="anchor-link" href="#Objetivo"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Evaluar si segmentar a los pacientes segn su nivel de riesgo clnico puede mejorar la precisin y sensibilidad del modelo en diferentes subpoblaciones.</p>
<p>Concretamente, voy a segmentar la poblacin en funcin de su riesgo metablico clnico (ej. IMC) permite:</p>
<ul>
<li>Mejorar el rendimiento, especialmente en recall y F1-score (detectar ms casos de diabetes) en pacientes de alto riesgo.</li>
<li>Reducir falsos positivos en pacientes de bajo riesgo.</li>
<li>Aplicar lgicas de cribado adaptadas al perfil clnico, como se hace en la prctica mdica.</li>
</ul>
<p><strong>Justificacin Clnica</strong></p>
<p>En medicina, el riesgo de diabetes no es homogneo en toda la poblacin, es decir, los factores de riesgo no afectan por igual a toda la poblacin. Factores como IMC, edad o antecedentes familiares influyen significativamente en la probabilidad de desarrollar diabetes. Aplicar un nico modelo a toda la poblacin puede ser subptimo.</p>
<p>En esta seccin se explora una estrategia de <strong>segmentacin clnica, centrada en el IMC</strong> porque les uno de los principales indicadores de riesgo para la diabetes tipo 2. Segn la OMS y la American Diabetes Association (ADA):</p>
<ul>
<li>Un IMC &gt;= 30 se asocia a obesidad y mayor riesgo de diabetes.</li>
<li>Un IMC &lt; 30 se considera riesgo bajo o moderado.</li>
</ul>
<p>Por tanto, crear una nueva variable categrica derivada del IMC para aportar informacin clnica explcita al modelo, ayudando a mejorar su capacidad para detectar casos positivos de diabetes.</p>
<p><strong>Implementacin Propuesta</strong></p>
<ul>
<li>Crear copias seguras de X_train y X_test:(x_train_limpio y x_test) para sacar la columna BMI original y aadir temporalemnte en X_train_final_v1, X_test_fonal_v1</li>
<li>Se crea una nueva variable categrica Grupo_Riesgo_IMC: !Alto" si IMC &gt;= 30, y "Bajo/Moderado" si IMC &lt; 30</li>
<li>Se segmentan los datasets y objetivos:<ul>
<li>X_train_bmi_alto, X_train_bmi_bajo, y_train_bmi_alto, y_train_bmi_bajo</li>
<li>X_test_bmi_alto, X_test_bmi_bajo, y_test_bmi_alto, y_test_bmi_bajo</li>
</ul>
</li>
<li>Se guardan los archivos generados en la carpeta datos_procesados/segmentado.</li>
</ul>
<p><strong>Ventajas</strong></p>
<ul>
<li>Alta interpretabilidad clnica, til para profesionales de salud.</li>
<li>Potencial para aumentar el recall en la clase 1 (diabticos).</li>
<li>Evita que el modelo tenga que aprender umbrales implcitos desde datos continuos.</li>
<li>Aade conocimiento experto sin introducir ruido ni sobreajuste.</li>
</ul>
<p><strong>Conclusin Clnica y Tcnica</strong></p>
<p>Se prioriza el uso del IMC como primer paso de ingeniera de variables clnicas debido a:</p>
<ul>
<li>Su relevancia directa y probada en el desarrollo de diabetes.</li>
<li>La clara segmentacin en el dataset (mayora de positivos con IMC&gt;= 30).</li>
<li>La posibilidad de mejorar la sensibilidad del modelo en poblacin de alto riesgo.</li>
</ul>
<p>Este proceso no sustituye al IMC continuo, sino que lo complementa con un enfoque interpretativo. En prximos pasos se podr extender esta lgica a otras variables clnicas como:</p>
<ul>
<li>Edad avanzada (Age &gt; 50)</li>
<li>Glucosa en ayunas (Glucose  140)</li>
<li>Pedigree function (historial familiar)</li>
</ul>
<p>En la prctica clnica, los tratamientos y cribados se adaptan al perfil de riesgo del paciente. Aplicar esta lgica al modelado puede mejorar la capacidad del sistema para adaptarse a cada subgrupo.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.1.1.-Creaci%C3%B3n-de-datset---Segmentaci%C3%B3npor-grupo-cl%C3%B3nico-de-riesgo:-IMC-(BMI)"><strong>14.1.1. Creacin de datset - Segmentacinpor grupo clnico de riesgo: IMC (BMI)</strong><a class="anchor-link" href="#14.1.1.-Creaci%C3%B3n-de-datset---Segmentaci%C3%B3npor-grupo-cl%C3%B3nico-de-riesgo:-IMC-(BMI)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">glob</span>

<span class="c1"># 1. Definir rutas</span>
<span class="n">base_path</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_limpieza</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="s2">"limpieza"</span><span class="p">)</span>
<span class="n">ruta_original</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="s2">"original"</span><span class="p">)</span>
<span class="n">ruta_final</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="s2">"final"</span><span class="p">)</span>

<span class="c1"># 2. Buscar el archivo ms reciente de X_train_limpio</span>
<span class="n">archivos_train</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_limpieza</span><span class="p">,</span> <span class="s2">"X_train_limpio_*.csv"</span><span class="p">))</span>
<span class="n">archivo_train_limpio</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">archivos_train</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">)</span>

<span class="c1"># 3. Buscar el archivo ms reciente de X_test</span>
<span class="n">archivos_test</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_original</span><span class="p">,</span> <span class="s2">"X_test_*.csv"</span><span class="p">))</span>
<span class="n">archivo_test</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">archivos_test</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">)</span>

<span class="c1"># 4. Cargar X_train_limpio y X_test original</span>
<span class="n">X_train_limpio</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">archivo_train_limpio</span><span class="p">)</span>
<span class="n">X_test_original</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">archivo_test</span><span class="p">)</span>

<span class="c1"># 5. Cargar datasets transformados por el Feature Pipeline V1</span>
<span class="n">X_train_final_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_train_final_v1.csv"</span><span class="p">))</span>
<span class="n">X_test_final_v1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"X_test_final_v1.csv"</span><span class="p">))</span>

<span class="c1"># 6. Aadir columna BMI original</span>
<span class="n">X_train_final_v1</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_train_limpio</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">X_test_final_v1</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_test_original</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># 7. Segmentar por grupo clnico (IMC &gt;= 30)</span>
<span class="n">X_train_bmi_alto</span> <span class="o">=</span> <span class="n">X_train_final_v1</span><span class="p">[</span><span class="n">X_train_final_v1</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X_train_bmi_bajo</span> <span class="o">=</span> <span class="n">X_train_final_v1</span><span class="p">[</span><span class="n">X_train_final_v1</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X_test_bmi_alto</span> <span class="o">=</span> <span class="n">X_test_final_v1</span><span class="p">[</span><span class="n">X_test_final_v1</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X_test_bmi_bajo</span> <span class="o">=</span> <span class="n">X_test_final_v1</span><span class="p">[</span><span class="n">X_test_final_v1</span><span class="p">[</span><span class="s2">"BMI"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># 8. Cargar y_train y y_test</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_train_final.csv"</span><span class="p">))</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_final</span><span class="p">,</span> <span class="s2">"y_test_final.csv"</span><span class="p">))</span>
<span class="n">y_train</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">y_test</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 9. Filtrar objetivos por ndice</span>
<span class="n">y_train_bmi_alto</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_train_bmi_alto</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
<span class="n">y_train_bmi_bajo</span> <span class="o">=</span> <span class="n">y_train</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_train_bmi_bajo</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
<span class="n">y_test_bmi_alto</span> <span class="o">=</span> <span class="n">y_test</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_test_bmi_alto</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
<span class="n">y_test_bmi_bajo</span> <span class="o">=</span> <span class="n">y_test</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">X_test_bmi_bajo</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>

<span class="c1"># 10. # Mostrar nmero de muestras por grupo</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Train:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- X_train_bmi_alto: </span><span class="si">{</span><span class="n">X_train_bmi_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> muestras"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- X_train_bmi_bajo: </span><span class="si">{</span><span class="n">X_train_bmi_bajo</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> muestras"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- y_train_bmi_alto: </span><span class="si">{</span><span class="n">y_train_bmi_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> etiquetas"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- y_train_bmi_bajo: </span><span class="si">{</span><span class="n">y_train_bmi_bajo</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> etiquetas"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Test:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- X_test_bmi_alto: </span><span class="si">{</span><span class="n">X_test_bmi_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> muestras"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- X_test_bmi_bajo: </span><span class="si">{</span><span class="n">X_test_bmi_bajo</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> muestras"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- y_test_bmi_alto: </span><span class="si">{</span><span class="n">y_test_bmi_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> etiquetas"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- y_test_bmi_bajo: </span><span class="si">{</span><span class="n">y_test_bmi_bajo</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> etiquetas"</span><span class="p">)</span>

<span class="c1"># 11. Ver distribucin de clases por grupo y conjunto</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Distribucin en y_train_bmi_alto:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_train_bmi_alto</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Distribucin en y_train_bmi_bajo:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_train_bmi_bajo</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Distribucin en y_test_bmi_alto:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_test_bmi_alto</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Distribucin en y_test_bmi_bajo:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_test_bmi_bajo</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># 12. Guardar datasets segmentados</span>
<span class="n">ruta_segmentado</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="s2">"segmentado"</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">X_train_bmi_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"X_train_bmi_alto.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_train_bmi_bajo</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"X_train_bmi_bajo.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test_bmi_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"X_test_bmi_alto.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test_bmi_bajo</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"X_test_bmi_bajo.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">y_train_bmi_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"y_train_bmi_alto.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">y_train_bmi_bajo</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"y_train_bmi_bajo.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">y_test_bmi_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"y_test_bmi_alto.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">y_test_bmi_bajo</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_segmentado</span><span class="p">,</span> <span class="s2">"y_test_bmi_bajo.csv"</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Segmentacin por IMC realizada correctamente."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.1.2.-Evaluaci%C3%B3n-y-Conclusiomes-tras-la-segmentaci%C3%B3n-de-IMC"><strong>14.1.2. Evaluacin y Conclusiomes tras la segmentacin de IMC</strong><a class="anchor-link" href="#14.1.2.-Evaluaci%C3%B3n-y-Conclusiomes-tras-la-segmentaci%C3%B3n-de-IMC"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Con el objetivo de evaluar si el riesgo metablico asociado a la obesidad influye en la capacidad predictiva del modelo, se ha realizado una segmentacin de los datos por ndice de masa corporal (IMC), separando a los pacientes en dos grupos clnicamente diferenciados:</p>
<ul>
<li><strong>Grupo de Alto Riesgo</strong>: IMC &gt;= 30: asociado a obesidad y mayor probabilidad de diabetes.</li>
<li><strong>Grupo de Riesgo Bajo/Moderado</strong>: IMC &lt; 30</li>
</ul>
<p>Se ha aplicado esta segmentacin tanto al conjunto de entrenamiento (X_train_final_v1, y_train_final) como al conjunto de test (X_test_final_v1, y_test_final), manteniendo la trazabilidad de los datasets mediante nombres como X_train_bmi_alto, X_train_bmi_bajo, etc.</p>
<p><strong>Distribucin de pacientes</strong></p>
<ul>
<li>Entrenamiento:<ul>
<li>Alto: 379: Clase 0: 204  - Clase 1: 175 (%46.2 clase 1)</li>
<li>Bajo/Moderado: 226 Clase 0: 189 - Clase 1: 37 (16.4% clae 1)</li>
</ul>
</li>
<li>Test<ul>
<li>Alto: 93  Clase 0: 49	Clase 1: 44	(Clae 1 47.3%)</li>
<li>Bajo/Moderado: 61  Clase 0: 51	Clae 1: 10	(Clase 1 16.4%)</li>
</ul>
</li>
</ul>
<p><strong>Interpretacin clnica y tcnica</strong></p>
<ul>
<li>El grupo con IMC alto presenta una distribucin de clases equilibrada tanto en train como en test. Esto permite entrenar modelos sin necesidad de tcnicas de rebalanceo. No obstante, se pueden probar alternativas como class_weight='balanced' para verificar mejoras en el recall.</li>
<li>El grupo con IMC bajo muestra una distribucin fuertemente desbalanceada, con solo un 16.4% de casos positivos. Esto puede generar modelos sesgados que no detecten correctamente a los pacientes con diabetes.</li>
</ul>
<p><strong>Decisin de actuacin</strong></p>
<ol>
<li>Grupo IMC alto:</li>
</ol>
<ul>
<li>Entrenamiento sobre los datos originales.</li>
<li>Posibilidad de aplicar class_weight='balanced' como prueba complementaria.</li>
</ul>
<ol start="2">
<li>Grupo IMC bajo:</li>
</ol>
<ul>
<li>Evaluar diferentes estrategias de balanceo para minimizar el riesgo de sobreajuste:<ul>
<li>SMOTE total: sampling_strategy='auto' (1.1) equilibrio perfecto (189 vs 189), riesgo de overfitting.</li>
<li>SMOTE parcial: sampling_strategy=0.8, balance ms moderado (minoritaria 80% de la mayoritaria)</li>
<li>class_weight='balanced': Penaliza ms los errores de la clase minoritaria sin generar datos sintticos</li>
</ul>
</li>
</ul>
<ol start="3">
<li>Guardado de los nuevos datasets como X_train_bmi_bajo_res y y_train_bmi_bajo_res.</li>
<li>Comparacin del rendimiento con modelos entrenados sin SMOTE o con penalizacin asimtrica.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="14.2.Grupo-IMC-bajo:-Comparar-tres-estrategias-de-balanceo"><strong>14.2.Grupo IMC bajo: Comparar tres estrategias de balanceo</strong><a class="anchor-link" href="#14.2.Grupo-IMC-bajo:-Comparar-tres-estrategias-de-balanceo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Comparar tres estrategias de balanceo</p>
<ul>
<li>sin balancear: class_weight='balanced' interno</li>
<li>SMOTE total</li>
<li>SMOTE parcial (sampling_strategy=0.8)</li>
</ul>
<p>Sobre el conjunto de test X_test_bmi_bajo y y_test_bmi_bajo</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.2.1.--BLOQUE-1:-Entrenamiento-con-Class-Weight-Interno-(lr,-svc,-xgb)"><strong>14.2.1.  BLOQUE 1: Entrenamiento con Class Weight Interno (lr, svc, xgb)</strong><a class="anchor-link" href="#14.2.1.--BLOQUE-1:-Entrenamiento-con-Class-Weight-Interno-(lr,-svc,-xgb)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Imports necesarios</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neighbors</span><span class="w"> </span><span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.svm</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.tree</span><span class="w"> </span><span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">f1_score</span><span class="p">,</span> <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">classification_report</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># 2. Dataset segmentado (ej. IMC bajo)</span>
<span class="n">X_train_segment_bajo</span> <span class="o">=</span> <span class="n">X_train_bmi_bajo</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_train_segment_bajo</span> <span class="o">=</span> <span class="n">y_train_bmi_bajo</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">X_test_segment_bajo</span> <span class="o">=</span> <span class="n">X_test_bmi_bajo</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_test_segment_bajo</span> <span class="o">=</span> <span class="n">y_test_bmi_bajo</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="c1"># 3. Modelos a comparar</span>
<span class="n">modelos_segmento_bajo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'lr'</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s1">'balanced'</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s1">'liblinear'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'svc'</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s1">'balanced'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'xgb'</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">scale_pos_weight</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># 4. Lista para almacenar resultados</span>
<span class="n">resultados_modelos_segmento_bajo</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># 5. Evaluacin de cada modelo</span>
<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_segmento_bajo</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Evaluando modelo: </span><span class="si">{</span><span class="n">nombre</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="c1"># Entrenamiento</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_segment_bajo</span><span class="p">,</span> <span class="n">y_train_segment_bajo</span><span class="p">)</span>

    <span class="c1"># Prediccin</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)</span>

    <span class="c1"># Probabilidad (si aplica)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">):</span>
        <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">y_proba</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">auc</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Mtricas principales</span>
    <span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">prec</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">rec</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

    <span class="n">resultados_modelos_segmento_bajo</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span>
        <span class="s2">"AUC-ROC"</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span>
        <span class="s2">"Precision_1"</span><span class="p">:</span> <span class="n">prec</span><span class="p">,</span>
        <span class="s2">"Recall_1"</span><span class="p">:</span> <span class="n">rec</span><span class="p">,</span>
        <span class="s2">"F1-score_1"</span><span class="p">:</span> <span class="n">f1</span><span class="p">,</span>
        <span class="s2">"TN"</span><span class="p">:</span> <span class="n">tn</span><span class="p">,</span> <span class="s2">"FP"</span><span class="p">:</span> <span class="n">fp</span><span class="p">,</span> <span class="s2">"FN"</span><span class="p">:</span> <span class="n">fn</span><span class="p">,</span> <span class="s2">"TP"</span><span class="p">:</span> <span class="n">tp</span>
    <span class="p">})</span>

    <span class="c1"># Informe detallado</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">digits</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de confusin:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>

<span class="c1"># Convertir resultados a DataFrame</span>
<span class="n">df_resultados_modelos_segmento_bajo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_modelos_segmento_bajo</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_resultados_modelos_segmento_bajo</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.2.2.--BLOQUE-2:-Entrenamiento-con-SMOTE-Total-(BMI-Bajo)"><strong>14.2.2.  BLOQUE 2: Entrenamiento con SMOTE Total (BMI Bajo)</strong><a class="anchor-link" href="#14.2.2.--BLOQUE-2:-Entrenamiento-con-SMOTE-Total-(BMI-Bajo)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.svm</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xgboost</span><span class="w"> </span><span class="kn">import</span> <span class="n">XGBClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">,</span> <span class="n">confusion_matrix</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">imblearn.over_sampling</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMOTE</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># 1. Aplicar SMOTE (50/50)</span>
<span class="n">smote</span> <span class="o">=</span> <span class="n">SMOTE</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">X_res_total</span><span class="p">,</span> <span class="n">y_res_total</span> <span class="o">=</span> <span class="n">smote</span><span class="o">.</span><span class="n">fit_resample</span><span class="p">(</span><span class="n">X_train_segment_bajo</span><span class="p">,</span> <span class="n">y_train_segment_bajo</span><span class="p">)</span>

<span class="c1"># 2. Definir modelos</span>
<span class="n">modelos_smote_bajo_total</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"lr_smote_total"</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="s2">"liblinear"</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"svc_smote_total"</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s1">'balanced'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"xgb_smote_total"</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">scale_pos_weight</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># 3. Evaluar</span>
<span class="n">resultados_smote_bajo_total</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre_modelo</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_smote_bajo_total</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Evaluando modelo: </span><span class="si">{</span><span class="n">nombre_modelo</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_res_total</span><span class="p">,</span> <span class="n">y_res_total</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
    <span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Accuracy: </span><span class="si">{</span><span class="n">acc</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> | AUC-ROC: </span><span class="si">{</span><span class="n">auc</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Classification Report:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm</span><span class="p">)</span>

    <span class="n">resultados_smote_bajo_total</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre_modelo</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span>
        <span class="s2">"AUC-ROC"</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span>
        <span class="s2">"Precision_1"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Recall_1"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"F1-score_1"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"TN"</span><span class="p">:</span> <span class="n">tn</span><span class="p">,</span> <span class="s2">"FP"</span><span class="p">:</span> <span class="n">fp</span><span class="p">,</span> <span class="s2">"FN"</span><span class="p">:</span> <span class="n">fn</span><span class="p">,</span> <span class="s2">"TP"</span><span class="p">:</span> <span class="n">tp</span>
    <span class="p">})</span>

<span class="c1"># 4. Mostrar tabla resumen</span>
<span class="n">df_resultados_smote_bajo_total</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_smote_bajo_total</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_resultados_smote_bajo_total</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.2.3.-BLOQUE-3:-Entrenamiento-con-SMOTE-Parcial-(80%25)-(BMI-Bajo)"><strong>14.2.3. BLOQUE 3: Entrenamiento con SMOTE Parcial (80%) (BMI Bajo)</strong><a class="anchor-link" href="#14.2.3.-BLOQUE-3:-Entrenamiento-con-SMOTE-Parcial-(80%25)-(BMI-Bajo)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Aplicar SMOTE parcial (80%)</span>
<span class="n">smote_parcial</span> <span class="o">=</span> <span class="n">SMOTE</span><span class="p">(</span><span class="n">sampling_strategy</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">X_res_parcial</span><span class="p">,</span> <span class="n">y_res_parcial</span> <span class="o">=</span> <span class="n">smote_parcial</span><span class="o">.</span><span class="n">fit_resample</span><span class="p">(</span><span class="n">X_train_segment_bajo</span><span class="p">,</span> <span class="n">y_train_segment_bajo</span><span class="p">)</span>

<span class="c1"># 2. Definir modelos</span>
<span class="n">modelos_smote_bajo_parcial</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"lr_smote_parcial"</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="s2">"liblinear"</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"svc_smote_parcial"</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s1">'balanced'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s2">"xgb_smote_parcial"</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">scale_pos_weight</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># 3. Evaluar</span>
<span class="n">resultados_smote_bajo_parcial</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre_modelo</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_smote_bajo_parcial</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Evaluando modelo: </span><span class="si">{</span><span class="n">nombre_modelo</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_res_parcial</span><span class="p">,</span> <span class="n">y_res_parcial</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
    <span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Accuracy: </span><span class="si">{</span><span class="n">acc</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> | AUC-ROC: </span><span class="si">{</span><span class="n">auc</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Classification Report:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm</span><span class="p">)</span>

    <span class="n">resultados_smote_bajo_parcial</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre_modelo</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span>
        <span class="s2">"AUC-ROC"</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span>
        <span class="s2">"Precision_1"</span><span class="p">:</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"Recall_1"</span><span class="p">:</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"F1-score_1"</span><span class="p">:</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span>
        <span class="s2">"TN"</span><span class="p">:</span> <span class="n">tn</span><span class="p">,</span> <span class="s2">"FP"</span><span class="p">:</span> <span class="n">fp</span><span class="p">,</span> <span class="s2">"FN"</span><span class="p">:</span> <span class="n">fn</span><span class="p">,</span> <span class="s2">"TP"</span><span class="p">:</span> <span class="n">tp</span>
    <span class="p">})</span>

<span class="c1"># 4. Mostrar tabla resumen</span>
<span class="n">df_resultados_smote_bajo_parcial</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_smote_bajo_parcial</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_resultados_smote_bajo_parcial</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.2.4:-Guardado-y-cierre-del-an%C3%A1lisis-de-IMC-bajo"><strong>14.2.4: Guardado y cierre del anlisis de IMC bajo</strong><a class="anchor-link" href="#14.2.4:-Guardado-y-cierre-del-an%C3%A1lisis-de-IMC-bajo"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar resultados de SMOTE Total</span>
<span class="n">df_resultados_smote_bajo_total</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_bajo_smote_total.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Guardar resultados de SMOTE Parcial</span>
<span class="n">df_resultados_smote_bajo_parcial</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_bajo_smote_parcial.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Guardar resultados de Class Weight Interno</span>
<span class="n">df_resultados_modelos_segmento_bajo</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_bajo_classweight.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="c1"># Guardar solo el modelo XGBoost ya entrenado</span>

<span class="n">ruta_guardado_modelos</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/modelos_optimizados"</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ruta_guardado_modelos</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelos_smote_bajo_parcial</span><span class="p">[</span><span class="s2">"xgb_smote_parcial"</span><span class="p">],</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_guardado_modelos</span><span class="p">,</span> <span class="s2">"xgb_opt_smote_parcial_bajo.pkl"</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Modelo XGBoost SMOTE Parcial (IMC Bajo) guardado correctamente."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">" Anlisis finalizado para el grupo IMC BAJO"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Los 3 conjuntos de resultados han sido guardados en la carpeta 'resultados/'"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" SMOTE Total, SMOTE Parcial y Balanceo Interno (class_weight) disponibles para comparacin"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="14.3.Grupo-IMC-alto:-Comparar-tres-estrategias-de-balanceo"><strong>14.3.Grupo IMC alto: Comparar tres estrategias de balanceo</strong><a class="anchor-link" href="#14.3.Grupo-IMC-alto:-Comparar-tres-estrategias-de-balanceo"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.3.1.-BLOQUE-1:-Entrenamiento-con-Class-Weight-Interno-(lr,-svc,-xgb)"><strong>14.3.1. BLOQUE 1: Entrenamiento con Class Weight Interno (lr, svc, xgb)</strong><a class="anchor-link" href="#14.3.1.-BLOQUE-1:-Entrenamiento-con-Class-Weight-Interno-(lr,-svc,-xgb)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">X_train_segment_alto</span> <span class="o">=</span> <span class="n">X_train_bmi_alto</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_train_segment_alto</span> <span class="o">=</span> <span class="n">y_train_bmi_alto</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">X_test_segment_alto</span> <span class="o">=</span> <span class="n">X_test_bmi_alto</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_test_segment_alto</span> <span class="o">=</span> <span class="n">y_test_bmi_alto</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="n">modelos_segmento_alto</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'lr_classweight'</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s1">'balanced'</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s1">'liblinear'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'svc_classweight'</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s1">'balanced'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'xgb_classweight'</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">scale_pos_weight</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">resultados_modelos_segmento_alto</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_segmento_alto</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Evaluando modelo: </span><span class="si">{</span><span class="n">nombre</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_segment_alto</span><span class="p">,</span> <span class="n">y_train_segment_alto</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)</span>

    <span class="c1"># Probabilidades</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">):</span>
        <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">y_proba</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">auc</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Mtricas</span>
    <span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">prec</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">rec</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

    <span class="n">resultados_modelos_segmento_alto</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span>
        <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span>
        <span class="s2">"AUC-ROC"</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span>
        <span class="s2">"Precision_1"</span><span class="p">:</span> <span class="n">prec</span><span class="p">,</span>
        <span class="s2">"Recall_1"</span><span class="p">:</span> <span class="n">rec</span><span class="p">,</span>
        <span class="s2">"F1-score_1"</span><span class="p">:</span> <span class="n">f1</span><span class="p">,</span>
        <span class="s2">"TN"</span><span class="p">:</span> <span class="n">tn</span><span class="p">,</span> <span class="s2">"FP"</span><span class="p">:</span> <span class="n">fp</span><span class="p">,</span> <span class="s2">"FN"</span><span class="p">:</span> <span class="n">fn</span><span class="p">,</span> <span class="s2">"TP"</span><span class="p">:</span> <span class="n">tp</span>
    <span class="p">})</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">digits</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de confusin:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>

<span class="c1"># Convertir resultados a DataFrame</span>
<span class="n">df_resultados_modelos_segmento_alto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_modelos_segmento_alto</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_resultados_modelos_segmento_alto</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.3.2.-BLOQUE-2:-Entrenamiento-con-SMOTE-Total-(BMI-Alto)"><strong>14.3.2. BLOQUE 2: Entrenamiento con SMOTE Total (BMI Alto)</strong><a class="anchor-link" href="#14.3.2.-BLOQUE-2:-Entrenamiento-con-SMOTE-Total-(BMI-Alto)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># SMOTE total (train set)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">imblearn.over_sampling</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMOTE</span>
<span class="n">smote_total</span> <span class="o">=</span> <span class="n">SMOTE</span><span class="p">(</span><span class="n">sampling_strategy</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">X_train_alto_smote</span><span class="p">,</span> <span class="n">y_train_alto_smote</span> <span class="o">=</span> <span class="n">smote_total</span><span class="o">.</span><span class="n">fit_resample</span><span class="p">(</span><span class="n">X_train_segment_alto</span><span class="p">,</span> <span class="n">y_train_segment_alto</span><span class="p">)</span>

<span class="n">modelos_smote_total_alto</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'lr_smote_total'</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s1">'liblinear'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'svc_smote_total'</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'xgb_smote_total'</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">resultados_smote_total_alto</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_smote_total_alto</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Evaluando modelo: </span><span class="si">{</span><span class="n">nombre</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_alto_smote</span><span class="p">,</span> <span class="n">y_train_alto_smote</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_proba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">prec</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">rec</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

    <span class="n">resultados_smote_total_alto</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span> <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span> <span class="s2">"AUC-ROC"</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span> <span class="s2">"Precision_1"</span><span class="p">:</span> <span class="n">prec</span><span class="p">,</span>
        <span class="s2">"Recall_1"</span><span class="p">:</span> <span class="n">rec</span><span class="p">,</span> <span class="s2">"F1-score_1"</span><span class="p">:</span> <span class="n">f1</span><span class="p">,</span> <span class="s2">"TN"</span><span class="p">:</span> <span class="n">tn</span><span class="p">,</span> <span class="s2">"FP"</span><span class="p">:</span> <span class="n">fp</span><span class="p">,</span> <span class="s2">"FN"</span><span class="p">:</span> <span class="n">fn</span><span class="p">,</span> <span class="s2">"TP"</span><span class="p">:</span> <span class="n">tp</span>
    <span class="p">})</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">digits</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de confusin:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>

<span class="c1"># Guardar resultados</span>
<span class="n">df_resultados_smote_total_alto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_smote_total_alto</span><span class="p">)</span>
<span class="n">df_resultados_smote_total_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_smote_total.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="c1"># Convertir resultados a DataFrame</span>
<span class="n">df_resultados_smote_total_alto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_smote_total_alto</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_resultados_smote_total_alto</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.3.3.-BLOQUE-3:-Entrenamiento-con-SMOTE-Parcial-(80%25)-(BMI-Alto)"><strong>14.3.3. BLOQUE 3: Entrenamiento con SMOTE Parcial (80%) (BMI Alto)</strong><a class="anchor-link" href="#14.3.3.-BLOQUE-3:-Entrenamiento-con-SMOTE-Parcial-(80%25)-(BMI-Alto)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># SMOTE parcial</span>
<span class="n">smote_parcial</span> <span class="o">=</span> <span class="n">SMOTE</span><span class="p">(</span><span class="n">sampling_strategy</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">X_train_alto_smote_p</span><span class="p">,</span> <span class="n">y_train_alto_smote_p</span> <span class="o">=</span> <span class="n">smote_parcial</span><span class="o">.</span><span class="n">fit_resample</span><span class="p">(</span><span class="n">X_train_segment_alto</span><span class="p">,</span> <span class="n">y_train_segment_alto</span><span class="p">)</span>

<span class="n">modelos_smote_parcial_alto</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'lr_smote_parcial'</span><span class="p">:</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s1">'liblinear'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'svc_smote_parcial'</span><span class="p">:</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">'xgb_smote_parcial'</span><span class="p">:</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">resultados_smote_parcial_alto</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">modelo</span> <span class="ow">in</span> <span class="n">modelos_smote_parcial_alto</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Evaluando modelo: </span><span class="si">{</span><span class="n">nombre</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">modelo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_alto_smote_p</span><span class="p">,</span> <span class="n">y_train_alto_smote_p</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)</span>
    <span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="s2">"predict_proba"</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_proba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">prec</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">rec</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

    <span class="n">resultados_smote_parcial_alto</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s2">"Modelo"</span><span class="p">:</span> <span class="n">nombre</span><span class="p">,</span> <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span> <span class="s2">"AUC-ROC"</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span> <span class="s2">"Precision_1"</span><span class="p">:</span> <span class="n">prec</span><span class="p">,</span>
        <span class="s2">"Recall_1"</span><span class="p">:</span> <span class="n">rec</span><span class="p">,</span> <span class="s2">"F1-score_1"</span><span class="p">:</span> <span class="n">f1</span><span class="p">,</span> <span class="s2">"TN"</span><span class="p">:</span> <span class="n">tn</span><span class="p">,</span> <span class="s2">"FP"</span><span class="p">:</span> <span class="n">fp</span><span class="p">,</span> <span class="s2">"FN"</span><span class="p">:</span> <span class="n">fn</span><span class="p">,</span> <span class="s2">"TP"</span><span class="p">:</span> <span class="n">tp</span>
    <span class="p">})</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">digits</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de confusin:"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>

<span class="c1"># Guardar resultados</span>
<span class="n">df_resultados_smote_parcial_alto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_smote_parcial_alto</span><span class="p">)</span>
<span class="n">df_resultados_smote_parcial_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_smote_parcial.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="c1"># Convertir resultados a DataFrame</span>
<span class="n">df_resultados_smote_parcial_alto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados_smote_parcial_alto</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_resultados_smote_parcial_alto</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.3.4:-Guardado-y-cierre-del-an%C3%A1lisis-de-IMC-ALTO"><strong>14.3.4: Guardado y cierre del anlisis de IMC ALTO</strong><a class="anchor-link" href="#14.3.4:-Guardado-y-cierre-del-an%C3%A1lisis-de-IMC-ALTO"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar resultados de SMOTE Total</span>
<span class="n">df_resultados_smote_total_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_smote_total.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Guardar resultados de SMOTE Parcial</span>
<span class="n">df_resultados_smote_parcial_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_smote_parcial.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Guardar resultados de Class Weight Interno</span>
<span class="n">df_resultados_modelos_segmento_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_classweight.csv"</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">" Anlisis finalizado para el grupo IMC BAJO"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Los 3 conjuntos de resultados han sido guardados en la carpeta 'resultados/'"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" SMOTE Total, SMOTE Parcial y Balanceo Interno (class_weight) disponibles para comparacin"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="14.4.-Comparativa-Segmentaci%C3%B3n-IMC-(BMI)"><strong>14.4. Comparativa Segmentacin IMC (BMI)</strong><a class="anchor-link" href="#14.4.-Comparativa-Segmentaci%C3%B3n-IMC-(BMI)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.4.1.-Tabla-comparativa"><strong>14.4.1. Tabla comparativa</strong><a class="anchor-link" href="#14.4.1.-Tabla-comparativa"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Cargar resultados segmento BAJO</span>
<span class="n">bajo_total</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_bajo_smote_total.csv"</span><span class="p">)</span>
<span class="n">bajo_parcial</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_bajo_smote_parcial.csv"</span><span class="p">)</span>
<span class="n">bajo_classw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_bajo_classweight.csv"</span><span class="p">)</span>

<span class="c1"># Cargar resultados segmento ALTO</span>
<span class="n">alto_total</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_smote_total.csv"</span><span class="p">)</span>
<span class="n">alto_parcial</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_smote_parcial.csv"</span><span class="p">)</span>
<span class="n">alto_classw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_segmento_alto_classweight.csv"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Aadir columnas de segmento</span>
<span class="n">bajo_total</span><span class="p">[</span><span class="s2">"Segmento"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IMC Bajo"</span>
<span class="n">alto_total</span><span class="p">[</span><span class="s2">"Segmento"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IMC Alto"</span>
<span class="n">bajo_parcial</span><span class="p">[</span><span class="s2">"Segmento"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IMC Bajo"</span>
<span class="n">alto_parcial</span><span class="p">[</span><span class="s2">"Segmento"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IMC Alto"</span>
<span class="n">bajo_classw</span><span class="p">[</span><span class="s2">"Segmento"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IMC Bajo"</span>
<span class="n">alto_classw</span><span class="p">[</span><span class="s2">"Segmento"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IMC Alto"</span>

<span class="c1"># Unir por tcnica</span>
<span class="n">df_total</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">bajo_total</span><span class="p">,</span> <span class="n">alto_total</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_parcial</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">bajo_parcial</span><span class="p">,</span> <span class="n">alto_parcial</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_classw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">bajo_classw</span><span class="p">,</span> <span class="n">alto_classw</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Elegir columnas clave para mostrar</span>
<span class="n">columnas_mostrar</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="s2">"Segmento"</span><span class="p">,</span> <span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Recall_1"</span><span class="p">,</span> <span class="s2">"F1-score_1"</span><span class="p">,</span> <span class="s2">"AUC-ROC"</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Comparativa SMOTE TOTAL:"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_total</span><span class="p">[</span><span class="n">columnas_mostrar</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="s2">"Segmento"</span><span class="p">]))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Comparativa SMOTE PARCIAL:"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_parcial</span><span class="p">[</span><span class="n">columnas_mostrar</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="s2">"Segmento"</span><span class="p">]))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Comparativa CLASS WEIGHT INTERNO:"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_classw</span><span class="p">[</span><span class="n">columnas_mostrar</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">"Modelo"</span><span class="p">,</span> <span class="s2">"Segmento"</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.4.2.-Comparativa-Recall-//-F1-score-//-AUC-ROC"><strong>14.4.2. Comparativa Recall // F1-score // AUC-ROC</strong><a class="anchor-link" href="#14.4.2.-Comparativa-Recall-//-F1-score-//-AUC-ROC"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="k">def</span><span class="w"> </span><span class="nf">plot_recall_comparativo</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">titulo</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'Modelo'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'Recall_1'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Segmento'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Comparativa de Recall por modelo</span><span class="se">\n</span><span class="s2">(</span><span class="si">{</span><span class="n">titulo</span><span class="si">}</span><span class="s2">)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Recall Clase 1"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Segmento"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">'y'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Visualizar comparativa de Recall</span>
<span class="n">plot_recall_comparativo</span><span class="p">(</span><span class="n">df_total</span><span class="p">,</span> <span class="s2">"SMOTE Total"</span><span class="p">)</span>
<span class="n">plot_recall_comparativo</span><span class="p">(</span><span class="n">df_parcial</span><span class="p">,</span> <span class="s2">"SMOTE Parcial"</span><span class="p">)</span>
<span class="n">plot_recall_comparativo</span><span class="p">(</span><span class="n">df_classw</span><span class="p">,</span> <span class="s2">"Class Weight Interno"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">plot_f1_comparativo</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">titulo</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'Modelo'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'F1-score_1'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Segmento'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Comparativa de F1-score por modelo</span><span class="se">\n</span><span class="s2">(</span><span class="si">{</span><span class="n">titulo</span><span class="si">}</span><span class="s2">)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"F1-score Clase 1"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Segmento"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">'y'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_f1_comparativo</span><span class="p">(</span><span class="n">df_total</span><span class="p">,</span> <span class="s2">"SMOTE Total"</span><span class="p">)</span>
<span class="n">plot_f1_comparativo</span><span class="p">(</span><span class="n">df_parcial</span><span class="p">,</span> <span class="s2">"SMOTE Parcial"</span><span class="p">)</span>
<span class="n">plot_f1_comparativo</span><span class="p">(</span><span class="n">df_classw</span><span class="p">,</span> <span class="s2">"Class Weight Interno"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">plot_aucroc_comparativo</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">titulo</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'Modelo'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'AUC-ROC'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Segmento'</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Comparativa de AUC-ROC por modelo</span><span class="se">\n</span><span class="s2">(</span><span class="si">{</span><span class="n">titulo</span><span class="si">}</span><span class="s2">)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"AUC-ROC"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Modelo"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Segmento"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">'y'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_aucroc_comparativo</span><span class="p">(</span><span class="n">df_total</span><span class="p">,</span> <span class="s2">"SMOTE Total"</span><span class="p">)</span>
<span class="n">plot_aucroc_comparativo</span><span class="p">(</span><span class="n">df_parcial</span><span class="p">,</span> <span class="s2">"SMOTE Parcial"</span><span class="p">)</span>
<span class="n">plot_aucroc_comparativo</span><span class="p">(</span><span class="n">df_classw</span><span class="p">,</span> <span class="s2">"Class Weight Interno"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.4.3.-Resumen-Comparativa-por-T%C3%A9cnica-de-Balanceo-y-Semento-IMC"><strong>14.4.3. Resumen Comparativa por Tcnica de Balanceo y Semento IMC</strong><a class="anchor-link" href="#14.4.3.-Resumen-Comparativa-por-T%C3%A9cnica-de-Balanceo-y-Semento-IMC"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ol>
<li>SMOTE TOTAL</li>
</ol>
<ul>
<li><strong>IMC Bajo:</strong> Todos los modelos obtienen mejores resultados que en el segmento alto.</li>
<li>El modelo XGBoost destaca con:<ul>
<li>Recall: 0.70</li>
<li>F1-score: 0.61</li>
<li>AUC-ROC: 0.82</li>
</ul>
</li>
<li>SVC tambin se comporta bien con Recall 0.60 y AUC 0.90.</li>
<li><strong>IMC Alto:</strong>: Rendimiento general ms bajo.<ul>
<li>XGBoost obtiene el mejor Recall (0.34) pero con cada en F1-score (0.45).</li>
<li>El modelo LR mantiene estabilidad con F1 similar al de IMC Bajo (0.67 vs 0.52).</li>
</ul>
</li>
</ul>
<p><strong>Conclusin</strong>: SMOTE TOTAL beneficia ms al grupo de IMC Bajo. IMC Alto necesita ajustes o tcnicas ms especficas para elevar la sensibilidad.</p>
<ol start="2">
<li>SMOTE PARCIAL</li>
</ol>
<ul>
<li><strong>IMC Bajo</strong>: Rendimientos muy similares a SMOTE Total.
-XGBoost y SVC mantienen alto Recall (0.70 y 0.60).<ul>
<li>F1-score mximo: 0.64 (XGBoost).</li>
</ul>
</li>
<li><strong>IMC Alto</strong>: Solo Logistic Regression obtiene resultados aceptables (Recall 0.64, F1-score 0.66).
-XGBoost y SVC bajan significativamente, especialmente SVC (Recall 0.22).</li>
</ul>
<p><strong>Conclusin</strong>: Tcnica til para IMC Bajo. En IMC Alto puede empeorar el rendimiento salvo en modelos muy estables como LR.</p>
<ol start="3">
<li>CLASS WEIGHT INTERNO</li>
</ol>
<ul>
<li><strong>IMC Bajo:</strong> Resultados intermedios, pero XGBoost mantiene buen desempeo (Recall 0.70, F1-score 0.64).<ul>
<li>SVC sorprende con Recall 0.60.</li>
</ul>
</li>
<li><strong>IMC Alto</strong>:<ul>
<li>XGBoost es el nico que logra un Recall superior a 0.43.</li>
<li>Los modelos con class_weight no mejoran sustancialmente respecto a SMOTE en este segmento.</li>
</ul>
</li>
</ul>
<p><strong>Conclusin</strong>: Esta tcnica no compensa adecuadamente el desbalance en IMC Alto, pero puede funcionar como solucin simple para modelos rpidos.</p>
<p><strong>Recomendaciones Clnicas Finales</strong></p>
<ul>
<li>Para pacientes con IMC Bajo, SMOTE Total o Parcial con modelos como XGBoost o SVC ofrece mejor balance entre sensibilidad y precisin.</li>
<li>Para pacientes con IMC Alto, el rendimiento es menor en general, siendo Logistic Regression con SMOTE Parcial o XGBoost con class_weight las opciones ms equilibradas.</li>
</ul>
<p>Se sugiere explorar tcnicas avanzadas como:</p>
<ul>
<li>Oversampling dirigido por clusters (e.g. SMOTEEN).</li>
<li>Modelos calibrados con ajuste de umbral.</li>
<li>Ensamblados por segmento (entrenar un modelo distinto para cada IMC).</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.4.2.-Guardar-las-tablas-comparativas"><strong>14.4.2. Guardar las tablas comparativas</strong><a class="anchor-link" href="#14.4.2.-Guardar-las-tablas-comparativas"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="n">df_total</span><span class="p">[</span><span class="n">columnas_mostrar</span><span class="p">]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/comparativa_imc_smote_total.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df_parcial</span><span class="p">[</span><span class="n">columnas_mostrar</span><span class="p">]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/comparativa_imc_smote_parcial.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df_classw</span><span class="p">[</span><span class="n">columnas_mostrar</span><span class="p">]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/comparativa_imc_classweight.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="14.5.-Optimizaci%C3%B3n-con-Optuna-+-XGBoost-(IMC-bajo)"><strong>14.5. Optimizacin con Optuna + XGBoost (IMC bajo)</strong><a class="anchor-link" href="#14.5.-Optimizaci%C3%B3n-con-Optuna-+-XGBoost-(IMC-bajo)"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">optuna</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.5.1.-Definici%C3%B3n-y-ejecuci%C3%B3n-del-estudio"><strong>14.5.1. Definicin y ejecucin del estudio</strong><a class="anchor-link" href="#14.5.1.-Definici%C3%B3n-y-ejecuci%C3%B3n-del-estudio"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Ignorar los warnings innecesarios,</p>
<p>Importar paquetes y definir parmetros,</p>
<p>Aplicar Optuna para optimizar un modelo XGBoost en el segmento IMC Bajo,</p>
<p>Evaluarlo con validacin cruzada F1-score,</p>
<p>Ajustar el mejor modelo con los parmetros ptimos,</p>
<p>Evaluarlo en el conjunto de test y guardar resultados.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Ignorar warnings generales</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"ignore"</span><span class="p">)</span>

<span class="c1"># Ignorar logs de XGBoost especficos</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">'XGB_DISABLE_STRICT_WARNINGS'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'1'</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">optuna</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">optuna.samplers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TPESampler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xgboost</span><span class="w"> </span><span class="kn">import</span> <span class="n">XGBClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">StratifiedKFold</span><span class="p">,</span> <span class="n">cross_val_score</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">f1_score</span><span class="p">,</span> <span class="n">make_scorer</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">,</span> <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">joblib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Dataset balanceado con SMOTE parcial</span>
<span class="n">X_train_optuna_bajo</span> <span class="o">=</span> <span class="n">X_res_parcial</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Datos SMOTE Parcial</span>
<span class="n">y_train_optuna_bajo</span> <span class="o">=</span> <span class="n">y_res_parcial</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X_test_optuna_bajo</span> <span class="o">=</span> <span class="n">X_test_segment_bajo</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_test_optuna_bajo</span> <span class="o">=</span> <span class="n">y_test_segment_bajo</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>


<span class="c1"># Funcin objetivo para optimizar F1-score</span>
<span class="k">def</span><span class="w"> </span><span class="nf">objective</span><span class="p">(</span><span class="n">trial</span><span class="p">):</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"n_estimators"</span><span class="p">:</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_int</span><span class="p">(</span><span class="s2">"n_estimators"</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>
        <span class="s2">"max_depth"</span><span class="p">:</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_int</span><span class="p">(</span><span class="s2">"max_depth"</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
        <span class="s2">"learning_rate"</span><span class="p">:</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_float</span><span class="p">(</span><span class="s2">"learning_rate"</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
        <span class="s2">"subsample"</span><span class="p">:</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_float</span><span class="p">(</span><span class="s2">"subsample"</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
        <span class="s2">"colsample_bytree"</span><span class="p">:</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_float</span><span class="p">(</span><span class="s2">"colsample_bytree"</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
        <span class="s2">"gamma"</span><span class="p">:</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_float</span><span class="p">(</span><span class="s2">"gamma"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="s2">"min_child_weight"</span><span class="p">:</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_int</span><span class="p">(</span><span class="s2">"min_child_weight"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
        <span class="n">eval_metric</span><span class="o">=</span><span class="s1">'logloss'</span><span class="p">,</span>
        <span class="n">use_label_encoder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
    <span class="p">)</span>

    <span class="n">cv</span> <span class="o">=</span> <span class="n">StratifiedKFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">scores</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X_train_optuna_bajo</span><span class="p">,</span> <span class="n">y_train_optuna_bajo</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">cv</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">make_scorer</span><span class="p">(</span><span class="n">f1_score</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">scores</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Ejecutar estudio de optimizacin Optuna co TPE</span>
<span class="n">study</span> <span class="o">=</span> <span class="n">optuna</span><span class="o">.</span><span class="n">create_study</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s2">"maximize"</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="n">TPESampler</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
<span class="n">study</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">n_trials</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># Mostrar mejores hiperparmetros</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Mejores hiperparmetros encontrados:"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">study</span><span class="o">.</span><span class="n">best_params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.5.2.-Entrenar-modelo-final-con-los-mejores-par%C3%A1metros"><strong>14.5.2. Entrenar modelo final con los mejores parmetros</strong><a class="anchor-link" href="#14.5.2.-Entrenar-modelo-final-con-los-mejores-par%C3%A1metros"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Entrenar modelo final con los mejores parmetros</span>
<span class="n">best_params</span> <span class="o">=</span> <span class="n">study</span><span class="o">.</span><span class="n">best_params</span>
<span class="n">best_params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s2">"random_state"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="s2">"eval_metric"</span><span class="p">:</span> <span class="s2">"logloss"</span><span class="p">,</span>
    <span class="s2">"use_label_encoder"</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">})</span>

<span class="n">modelo_xgb_optuna_bajo</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="o">**</span><span class="n">best_params</span><span class="p">)</span>
<span class="n">modelo_xgb_optuna_bajo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_optuna_bajo</span><span class="p">,</span> <span class="n">y_train_optuna_bajo</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.5.3.-Evaluar-en-test"><strong>14.5.3. Evaluar en test</strong><a class="anchor-link" href="#14.5.3.-Evaluar-en-test"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Evaluacin en test</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo_xgb_optuna_bajo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_optuna_bajo</span><span class="p">)</span>
<span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo_xgb_optuna_bajo</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_optuna_bajo</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># Mtricas</span>
<span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>
<span class="n">rec</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">prec</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="c1"># Mostrar resultados</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">=== Evaluacin en Test (IMC Bajo) ==="</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Accuracy: </span><span class="si">{</span><span class="n">acc</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> | Recall (1): </span><span class="si">{</span><span class="n">rec</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> | F1-score (1): </span><span class="si">{</span><span class="n">f1</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> | AUC-ROC: </span><span class="si">{</span><span class="n">auc</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Classification Report:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.5.4.-Conclusiones-cl%C3%ADnica"><strong>14.5.4. Conclusiones clnica</strong><a class="anchor-link" href="#14.5.4.-Conclusiones-cl%C3%ADnica"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>El modelo entrenado con XGBoost, optimizado mediante Optuna (TPE) y balanceado con SMOTE parcial (80%), ha mostrado un rendimiento robusto en el segmento de pacientes con IMC Bajo. En el conjunto de test obtuvo:</p>
<ul>
<li>Accuracy: 0.8197</li>
<li>Recall clase 1 (diabticos): 0.70</li>
<li>F1-score clase 1: 0.56</li>
<li>AUC-ROC: 0.8510</li>
</ul>
<p>Esto indica una <strong>alta capacidad discriminativa,</strong> especialmente en la deteccin de casos positivos (<strong>recall = 70%</strong>), lo cual es clnicamente relevante para evitar falsos negativos en esta poblacin ms delgada. La matriz de confusin muestra solo 3 falsos negativos y 8 falsos positivos, lo cual representa un equilibrio aceptable entre sensibilidad y especificidad.</p>
<p>Este modelo se considera el ms eficaz para el subgrupo con IMC &lt; 30, y se recomienda su integracin en una estrategia segmentada basada en el perfil de IMC.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.5.5.-Guardado-de-restultados-y-modelo"><strong>14.5.5. Guardado de restultados y modelo</strong><a class="anchor-link" href="#14.5.5.-Guardado-de-restultados-y-modelo"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar modelo</span>
<span class="n">ruta_modelo</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/modelos_optimizados/xgb_opt_optuna_smote_parcial_bajo.pkl"</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_xgb_optuna_bajo</span><span class="p">,</span> <span class="n">ruta_modelo</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Modelo guardado correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_modelo</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Asegurarse de que todos los vectores sean 1D</span>
<span class="n">y_true</span> <span class="o">=</span> <span class="n">y_test_optuna_bajo</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">y_test_optuna_bajo</span><span class="p">,</span> <span class="s2">"ravel"</span><span class="p">)</span> <span class="k">else</span> <span class="n">y_test_optuna_bajo</span> <span class="c1">#ravel convieerte arrray de 2D en 1D</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">y_pred</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="s2">"ravel"</span><span class="p">)</span> <span class="k">else</span> <span class="n">y_pred</span> <span class="c1">#hasattr(..., "ravel") asegura que no falle si es una Series de Pandas en vez de un np.array</span>
<span class="n">y_proba</span> <span class="o">=</span> <span class="n">y_proba</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">y_proba</span><span class="p">,</span> <span class="s2">"ravel"</span><span class="p">)</span> <span class="k">else</span> <span class="n">y_proba</span>

<span class="c1"># Crear DataFrame limpio</span>
<span class="n">df_resultado</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"y_true"</span><span class="p">:</span> <span class="n">y_true</span><span class="p">,</span>
    <span class="s2">"y_pred"</span><span class="p">:</span> <span class="n">y_pred</span><span class="p">,</span>
    <span class="s2">"y_proba"</span><span class="p">:</span> <span class="n">y_proba</span>
<span class="p">})</span>

<span class="c1"># Guardar en CSV</span>
<span class="n">ruta_resultado_individual</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_xgb_optuna_smote_parcial_bajo.csv"</span>
<span class="n">df_resultado</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_resultado_individual</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Resultados individuales guardados correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_resultado_individual</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear DataFrame con predicciones</span>
<span class="n">df_preds_optuna_bajo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"y_true"</span><span class="p">:</span> <span class="n">y_test_optuna_bajo</span><span class="p">,</span>
    <span class="s2">"y_pred"</span><span class="p">:</span> <span class="n">y_pred</span><span class="p">,</span>
    <span class="s2">"y_proba"</span><span class="p">:</span> <span class="n">y_proba</span>
<span class="p">})</span>

<span class="c1"># Guardar como CSV</span>
<span class="n">ruta_preds</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/predicciones_xgb_optuna_smote_parcial_bajo.csv"</span>
<span class="n">df_preds_optuna_bajo</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_preds</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Predicciones guardadas correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_preds</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear el nuevo resultado como DataFrame</span>
<span class="n">nuevo_resultado_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span>
    <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"XGBoost Optuna + SMOTE Parcial (IMC Bajo)"</span><span class="p">,</span>
    <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span>
    <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="n">rec</span><span class="p">,</span>
    <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="n">f1</span><span class="p">,</span>
    <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="n">auc</span>
<span class="p">}])</span>

<span class="c1"># Cargar la comparativa existente o crear una nueva si no existe</span>
<span class="n">ruta_comparativa</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/comparativa_modelos_final_opt_con_y_sin_smote.csv"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">df_comparativa</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ruta_comparativa</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="n">df_comparativa</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="c1"># Concatenar el nuevo resultado</span>
<span class="n">df_comparativa_actualizada</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_comparativa</span><span class="p">,</span> <span class="n">nuevo_resultado_df</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Guardar la comparativa actualizada</span>
<span class="n">df_comparativa_actualizada</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_comparativa</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Comparativa actualizada guardada en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_comparativa</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="14.6.-Optimizaci%C3%B3n-con-Optuna-+-XGBoost-(IMC-alto)"><strong>14.6. Optimizacin con Optuna + XGBoost (IMC alto)</strong><a class="anchor-link" href="#14.6.-Optimizaci%C3%B3n-con-Optuna-+-XGBoost-(IMC-alto)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.6.1.-Definici%C3%B3n-y-ejecuci%C3%B3n-del-estudio"><strong>14.6.1. Definicin y ejecucin del estudio</strong><a class="anchor-link" href="#14.6.1.-Definici%C3%B3n-y-ejecuci%C3%B3n-del-estudio"></a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Logistic Regression + SMOTE TOTAL: (Mayor recall y AUC-ROC entre todas las configuraciones en ese segmento)</p>
<ul>
<li>Realizar bsqueda de hiperparmetros para LogisticRegression.</li>
<li>Usar el dataset balanceado con SMOTE TOTAL para IMC ALTO:<ul>
<li>X_train_alto_smote</li>
<li>y_train_alto_smote</li>
</ul>
</li>
<li>Validar con cross_val_score y AUC-ROC como mtrica objetivo.</li>
<li>Guardar el mejor modelo y sus prediccione</li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Copia de los datos balanceados con SMOTE TOTAL para IMC ALTO</span>
<span class="n">X_train_optuna_alto</span> <span class="o">=</span> <span class="n">X_train_alto_smote</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_train_optuna_alto</span> <span class="o">=</span> <span class="n">y_train_alto_smote</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Datos reales de test del segmento ALTO (sin rebalanceo)</span>
<span class="n">X_test_optuna_alto</span> <span class="o">=</span> <span class="n">X_test_segment_alto</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_test_optuna_alto</span> <span class="o">=</span> <span class="n">y_test_segment_alto</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Funcin objetivo para Optuna</span>
<span class="k">def</span><span class="w"> </span><span class="nf">objective_lr_alto</span><span class="p">(</span><span class="n">trial</span><span class="p">):</span>
    <span class="c1"># Espacio de bsqueda</span>
    <span class="n">penalty</span> <span class="o">=</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_categorical</span><span class="p">(</span><span class="s1">'penalty'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'l1'</span><span class="p">,</span> <span class="s1">'l2'</span><span class="p">])</span>
    <span class="n">C</span> <span class="o">=</span> <span class="n">trial</span><span class="o">.</span><span class="n">suggest_loguniform</span><span class="p">(</span><span class="s1">'C'</span><span class="p">,</span> <span class="mf">1e-3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">solver</span> <span class="o">=</span> <span class="s1">'liblinear'</span>  <span class="c1"># compatible con l1 y l2</span>

    <span class="c1"># Modelo</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">penalty</span><span class="o">=</span><span class="n">penalty</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">C</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="n">solver</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

    <span class="c1"># Validacin cruzada</span>
    <span class="n">scores</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X_train_optuna_alto</span><span class="p">,</span> <span class="n">y_train_optuna_alto</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">'roc_auc'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">scores</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Ejecutar el estudio Optuna</span>
<span class="n">study_lr_alto</span> <span class="o">=</span> <span class="n">optuna</span><span class="o">.</span><span class="n">create_study</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s1">'maximize'</span><span class="p">)</span>
<span class="n">study_lr_alto</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">objective_lr_alto</span><span class="p">,</span> <span class="n">n_trials</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># Mostrar mejores hiperparmetros</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Mejores hiperparmetros:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">study_lr_alto</span><span class="o">.</span><span class="n">best_params</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Datos preparados para Optuna con SMOTE TOTAL (IMC ALTO):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_train_optuna:"</span><span class="p">,</span> <span class="n">X_train_optuna_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_train_optuna:"</span><span class="p">,</span> <span class="n">y_train_optuna_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_test_optuna:"</span><span class="p">,</span> <span class="n">X_test_optuna_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_test_optuna:"</span><span class="p">,</span> <span class="n">y_test_optuna_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.6.2.-Entrenar-modelo-final-con-los-mejores-par%C3%A1metros"><strong>14.6.2. Entrenar modelo final con los mejores parmetros</strong><a class="anchor-link" href="#14.6.2.-Entrenar-modelo-final-con-los-mejores-par%C3%A1metros"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Entrenar modelo con mejores hiperparmetros</span>
<span class="c1"># Modelo final</span>
<span class="n">modelo_lr_optuna_alto</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span>
    <span class="n">penalty</span><span class="o">=</span><span class="s1">'l1'</span><span class="p">,</span>
    <span class="n">C</span><span class="o">=</span><span class="mf">0.2206314700385149</span><span class="p">,</span>
    <span class="n">solver</span><span class="o">=</span><span class="s1">'liblinear'</span><span class="p">,</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
<span class="p">)</span>

<span class="n">modelo_lr_optuna_alto</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_optuna_alto</span><span class="p">,</span> <span class="n">y_train_optuna_alto</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.6.3.-Evaluar-en-test"><strong>14.6.3. Evaluar en test</strong><a class="anchor-link" href="#14.6.3.-Evaluar-en-test"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Predicciones</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">modelo_lr_optuna_alto</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_optuna_alto</span><span class="p">)</span>
<span class="n">y_proba</span> <span class="o">=</span> <span class="n">modelo_lr_optuna_alto</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_optuna_alto</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># Mtricas</span>
<span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_optuna_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">prec</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_optuna_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">rec</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_optuna_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_optuna_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">auc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_optuna_alto</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">)</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_optuna_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">tn</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">--- MTRICAS EN TEST (IMC ALTO, SMOTE TOTAL, LR Optuna) ---"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Accuracy:  </span><span class="si">{</span><span class="n">acc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Precision: </span><span class="si">{</span><span class="n">prec</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Recall:    </span><span class="si">{</span><span class="n">rec</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"F1-score:  </span><span class="si">{</span><span class="n">f1</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"ROC-AUC:   </span><span class="si">{</span><span class="n">auc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Matriz de Confusin:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Classification Report:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_optuna_alto</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras comparar mltiples modelos (Logistic Regression, SVC y XGBoost) aplicando diferentes estrategias de balanceo (SMOTE total, SMOTE parcial y class_weight), se concluye que:</p>
<p>El mejor rendimiento clnico en el grupo IMC ALTO se alcanza con Logistic Regression, que se ha optimizado con Optuna y datos balanceados con SMOTE Total.</p>
<p>Este modelo logra un Recall del 68% y un F1-score del 68%, mejorando significativamente la capacidad de deteccin de pacientes con diabetes en esta subpoblacin de alto riesgo.</p>
<p>Adems, mantiene una AUC de 0.764, lo cual refleja una discriminacin adecuada, una Precisin (0.682) y F1 (0.682), Accuracy (0.699) equilibradas sin sobreajuste evidente.</p>
<p>Esta solucin combina buen rendimiento, robustez y facilidad de interpretacin clnica, por lo que se selecciona como modelo final para el grupo IMC ALTO.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.6.5.-Guardado-de-restultados-y-modelo"><strong>14.6.5. Guardado de restultados y modelo</strong><a class="anchor-link" href="#14.6.5.-Guardado-de-restultados-y-modelo"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar modelo</span>
<span class="n">ruta_modelo</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/modelos_optimizados/lr_opt_optuna_smote_total_alto.pkl"</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">modelo_lr_optuna_alto</span><span class="p">,</span> <span class="n">ruta_modelo</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Modelo guardado correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_modelo</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Asegurar formato 1D</span>
<span class="n">y_true</span> <span class="o">=</span> <span class="n">y_test_optuna_alto</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">y_pred</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">y_proba</span> <span class="o">=</span> <span class="n">y_proba</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="c1"># Crear DataFrame con resultados individuales</span>
<span class="n">df_preds_optuna_alto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"y_true"</span><span class="p">:</span> <span class="n">y_test_optuna_alto</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span>
    <span class="s2">"y_pred"</span><span class="p">:</span> <span class="n">y_pred</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span>
    <span class="s2">"y_proba"</span><span class="p">:</span> <span class="n">y_proba</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="p">})</span>

<span class="c1">#  Guardar predicciones</span>
<span class="n">ruta_preds_alto</span> <span class="o">=</span><span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados/resultados_lr_optuna_smote_total_alto.csv"</span>
<span class="n">df_preds_optuna_alto</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_preds_alto</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Predicciones guardadas correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_preds_alto</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="14.6.6.-Comparativa-final"><strong>14.6.6. Comparativa final</strong><a class="anchor-link" href="#14.6.6.-Comparativa-final"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#  Crear el nuevo resultado como DataFrame</span>
<span class="n">nuevo_resultado_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span>
    <span class="s2">"Modelo"</span><span class="p">:</span> <span class="s2">"LogisticRegression Optuna + SMOTE Total (IMC Alto)"</span><span class="p">,</span>
    <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="n">acc</span><span class="p">,</span>
    <span class="s2">"Recall (1)"</span><span class="p">:</span> <span class="n">rec</span><span class="p">,</span>
    <span class="s2">"F1-score (1)"</span><span class="p">:</span> <span class="n">f1</span><span class="p">,</span>
    <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="n">auc</span>
<span class="p">}])</span>

<span class="c1"># Ruta del CSV comparativo</span>
<span class="n">ruta_comparativa</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="s2">"comparativa_modelos_lr_final_opt_con_y_sin_smote.csv"</span><span class="p">)</span>

<span class="c1"># Verificar si el archivo existe y concatenar o crear</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">ruta_comparativa</span><span class="p">):</span>
    <span class="n">df_comparativa</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ruta_comparativa</span><span class="p">)</span>
    <span class="n">df_comparativa</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_comparativa</span><span class="p">,</span> <span class="n">nuevo_resultado_df</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">df_comparativa</span> <span class="o">=</span> <span class="n">nuevo_resultado_df</span>

<span class="c1"># Guardar archivo actualizado</span>
<span class="n">df_comparativa</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_comparativa</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Comparativa actualizada guardada en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_comparativa</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="BLOQUE-FINAL-CIERRE-DEL-PROYECTO-DE-PREDICCI%C3%93N-DE-DIABETES"><strong>BLOQUE FINAL CIERRE DEL PROYECTO DE PREDICCIN DE DIABETES</strong><a class="anchor-link" href="#BLOQUE-FINAL-CIERRE-DEL-PROYECTO-DE-PREDICCI%C3%93N-DE-DIABETES"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="15.-Comparativa-Final-de-Modelos-Cl%C3%ADnicos-Optimizados"><strong>15. Comparativa Final de Modelos Clnicos Optimizados</strong><a class="anchor-link" href="#15.-Comparativa-Final-de-Modelos-Cl%C3%ADnicos-Optimizados"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Tras aplicar tcnicas de balanceo (SMOTE), aplicacin de umbral,  segmentacin por grupos de riesgo (IMC) y optimizacin de hiperparmetros (Optuna), he seleccionado tres modelos clnicamente relevantes para la fase final del anlisis. Cada uno representa una estrategia distinta y ha demostrado buenos resultados en mtricas como Recall y F1-score durante la validacin.</p>
<p>A continuacin, comparar de forma estandarizada el rendimiento de estos modelos aplicados sobre el <strong>conjunto de test final</strong> (X_test_final_v1 y_test_final).</p>
<p><strong>Modelos incluidos</strong>:</p>
<ul>
<li>LogisticRegression optimizado con Optuna (SMOTE total, grupo IMC ALTO)</li>
<li>SVC optimizado con umbral ajustado a 0.35 (SMOTE total, sin segmentacin)</li>
<li>XGBoost optimizado con Optuna (SMOTE parcial, grupo IMC BAJO)</li>
</ul>
<p>Evaluar precisin, recall, F1-score y AUC-ROC, adems de la matriz de confusin y la curva ROC de cada modelo.</p>
<ul>
<li>15.1 Carga de modelos y conjunto de test</li>
<li>13.2 Evaluacin de cada modelo (predicciones y mtricas)</li>
<li>13.3 Comparativa tabular de mtricas</li>
<li>13.4 Visualizacin de curvas ROC</li>
<li>13.5 Conclusin clnica preliminar</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="15.1.-Carga-de-modelos"><strong>15.1. Carga de modelos</strong><a class="anchor-link" href="#15.1.-Carga-de-modelos"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Definir rutas base</span>
<span class="n">base_path</span><span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes"</span>
<span class="n">ruta_modelos_opt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"modelos_optimizados"</span><span class="p">)</span>
<span class="n">ruta_datos</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">"datos_procesados"</span><span class="p">,</span> <span class="s2">"final"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Cargar los modelos</span>
<span class="n">modelo_lr</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"lr_opt_optuna_smote_total_alto.pkl"</span><span class="p">))</span>
<span class="n">modelo_svc</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"svc_opt_smote_v1_umbral035.pkl"</span><span class="p">))</span>
<span class="n">modelo_xgb</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"xgb_opt_optuna_smote_parcial_bajo.pkl"</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">" Modelos cargados correctamente"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="15.2.-Evaluaci%C3%B3n-de-cada-modelo-(predicciones-y-m%C3%A9tricas)"><strong>15.2. Evaluacin de cada modelo (predicciones y mtricas)</strong><a class="anchor-link" href="#15.2.-Evaluaci%C3%B3n-de-cada-modelo-(predicciones-y-m%C3%A9tricas)"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Evaluar de forma indicidual los modelos seleccionados como candidatos finales para su implementacin.</p>
<p>En este bloque se analizan las mtricas de rendicmiento, la matriz de confusin y las predicciones de cada modelo sobre el conjunto de test real.</p>
<p><strong>Se incluirn</strong></p>
<ul>
<li>Mtricas Accuracy, Precission, Recall, F1-score, ROC-AUC</li>
<li>Matriz de confusin visual</li>
<li>Predicciones guardadas en csv.</li>
<li>Confirmacin de que se ha utilizado el conjunto de test correcto</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="15.2.1.-Evaluaci%C3%B3n-sobre-Logistic-Regression-(Optuna-+-SMOTE-TOTAL---IMC-Alto)"><strong>15.2.1. Evaluacin sobre Logistic Regression (Optuna + SMOTE TOTAL - IMC Alto)</strong><a class="anchor-link" href="#15.2.1.-Evaluaci%C3%B3n-sobre-Logistic-Regression-(Optuna-+-SMOTE-TOTAL---IMC-Alto)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># 1. Cargar modelo guardado</span>
<span class="n">ruta_modelo</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/modelos_optimizados/lr_opt_optuna_smote_total_alto.pkl"</span>
<span class="n">modelo_lr</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ruta_modelo</span><span class="p">)</span>

<span class="c1"># 2. Verificar datos de test segmentado IMC ALTO</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"X_test_segment_alto:"</span><span class="p">,</span> <span class="n">X_test_segment_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"y_test_segment_alto:"</span><span class="p">,</span> <span class="n">y_test_segment_alto</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># 3. Predecir y calcular mtricas</span>
<span class="n">y_pred_lr</span> <span class="o">=</span> <span class="n">modelo_lr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)</span>
<span class="n">y_proba_lr</span> <span class="o">=</span> <span class="n">modelo_lr</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_alto</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1">#4. Mtricas de evaluacin</span>
<span class="n">accuracy_lr</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">)</span>
<span class="n">precision_lr</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">)</span>
<span class="n">recall_lr</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">)</span>
<span class="n">f1_lr</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">)</span>
<span class="n">roc_auc_lr</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_proba_lr</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> MTRICAS REVISADAS del modelo LogisticRegression Optuna (IMC ALTO):"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Accuracy:  </span><span class="si">{</span><span class="n">acc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Precision: </span><span class="si">{</span><span class="n">prec</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Recall:    </span><span class="si">{</span><span class="n">rec</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"F1-score:  </span><span class="si">{</span><span class="n">f1</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"ROC-AUC:   </span><span class="si">{</span><span class="n">auc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Matriz de confusin visual</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">)</span>
<span class="n">cm_pct</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_pct</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_pct</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Matriz de Confusin - LogisticRegression</span><span class="se">\n</span><span class="s2">Optuna + SMOTE TOTAL (IMC ALTO)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Clase Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Guardar predicciones con CSV</span>
<span class="n">df_pred_lr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"Real"</span><span class="p">:</span> <span class="n">y_test_segment_alto</span><span class="p">,</span>
    <span class="s2">"Prediccin"</span><span class="p">:</span><span class="n">y_pred_lr</span><span class="p">,</span>
    <span class="s2">"Probabilidad_Diabetes"</span><span class="p">:</span> <span class="n">y_proba_lr</span>
<span class="p">})</span>

<span class="n">nombre_csv_lr</span> <span class="o">=</span> <span class="s2">"predicciones_lr_optuna_smote_total_alto.csv"</span>
<span class="n">ruta_csv_lr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_csv_lr</span><span class="p">)</span>
<span class="n">df_pred_lr</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_csv_lr</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> CSV de predicciones guardado en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_csv_lr</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="15.2.2.-Evaluaci%C3%B3n-sobre-XGBoost-(Optuna-+-SMOTE-PARCIAL---IMC-Bajo)"><strong>15.2.2. Evaluacin sobre XGBoost (Optuna + SMOTE PARCIAL - IMC Bajo)</strong><a class="anchor-link" href="#15.2.2.-Evaluaci%C3%B3n-sobre-XGBoost-(Optuna-+-SMOTE-PARCIAL---IMC-Bajo)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Cargar el modelo</span>
<span class="n">ruta_modelo_xgb</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/modelos_optimizados/xgb_opt_optuna_smote_parcial_bajo.pkl"</span> <span class="c1">#Ruta donde esta guardado el modelo</span>

<span class="n">modelo_xgb</span><span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ruta_modelo_xgb</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Predicciones</span>
<span class="n">y_pred_xgb</span> <span class="o">=</span> <span class="n">modelo_xgb</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)</span>
<span class="n">y_proba_xgb</span> <span class="o">=</span> <span class="n">modelo_xgb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_segment_bajo</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Mtricas de evaluacin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">f1_score</span><span class="p">,</span> <span class="n">roc_auc_score</span>

<span class="n">accuracy_xgb</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>
<span class="n">precision_xgb</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>
<span class="n">recall_xgb</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>
<span class="n">f1_xgb</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>
<span class="n">roc_auc_xgb</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_proba_xgb</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">--- MTRICAS EN TEST (IMC BAJO, XGBOOST Optuna + SMOTE PARCIAL) ---"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Accuracy:  </span><span class="si">{</span><span class="n">accuracy_xgb</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Precision: </span><span class="si">{</span><span class="n">precision_xgb</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Recall:    </span><span class="si">{</span><span class="n">recall_xgb</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"F1-score:  </span><span class="si">{</span><span class="n">f1_xgb</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"ROC-AUC:   </span><span class="si">{</span><span class="n">roc_auc_xgb</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Matriz de confusin visual</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>
<span class="n">cm_pct</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_pct</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_pct</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Matriz de Confusin - XGBoost</span><span class="se">\n</span><span class="s2">Optuna + SMOTE PARCIAL (IMC BAJO)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Clase Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="15.2.3.-Evaluaci%C3%B3n-sobre-svc-Optimizado-+-SMOTE-(umbral-0.35)"><strong>15.2.3. Evaluacin sobre svc Optimizado + SMOTE (umbral 0.35)</strong><a class="anchor-link" href="#15.2.3.-Evaluaci%C3%B3n-sobre-svc-Optimizado-+-SMOTE-(umbral-0.35)"></a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Cargar dataset de test final (transformado con Feature Pipeline V1) 8 variables para svc</span>
<span class="n">x_test_final</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos</span><span class="p">,</span> <span class="s2">"X_test_final_v1.csv"</span><span class="p">))</span>
<span class="n">y_test_final</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos</span><span class="p">,</span> <span class="s2">"y_test_final.csv"</span><span class="p">))</span>

<span class="c1">#Asegurarse que y_tst_final est en formato plano</span>
<span class="n">y_test_final</span><span class="o">=</span> <span class="n">y_test_final</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Cargar modelo SVC optimizado con umbral ajustado</span>
<span class="n">ruta_modelo_svc_umbral</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_modelos_opt</span><span class="p">,</span> <span class="s2">"svc_opt_smote_v1_umbral035.pkl"</span><span class="p">)</span>
<span class="n">modelo_svc_umbral</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ruta_modelo_svc_umbral</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Cargar el conjunto de test final (ya transformado con Feature Pipeline V1)</span>
<span class="n">X_test_svc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos</span><span class="p">,</span> <span class="s2">"X_test_final_v1.csv"</span><span class="p">))</span>
<span class="n">y_test_svc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_datos</span><span class="p">,</span> <span class="s2">"y_test_final.csv"</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#  Realizar predicciones con umbral personalizado</span>
<span class="n">y_pred_svc</span> <span class="o">=</span> <span class="n">modelo_svc_umbral</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_svc</span><span class="p">)</span>
<span class="n">y_proba_svc</span> <span class="o">=</span> <span class="n">modelo_svc_umbral</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_svc</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#Calcular mtricas</span>
<span class="n">accuracy_svc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_svc</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="n">precision_svc</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test_svc</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="n">recall_svc</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test_svc</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="n">f1_svc</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test_svc</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="n">roc_auc_svc</span> <span class="o">=</span> <span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test_svc</span><span class="p">,</span> <span class="n">y_proba_svc</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">--- MTRICAS EN TEST (SVC Optuna + SMOTE TOTAL + Umbral 0.35) ---"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Accuracy:  </span><span class="si">{</span><span class="n">accuracy_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Precision: </span><span class="si">{</span><span class="n">precision_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Recall:    </span><span class="si">{</span><span class="n">recall_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"F1-score:  </span><span class="si">{</span><span class="n">f1_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"ROC-AUC:   </span><span class="si">{</span><span class="n">roc_auc_svc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Matriz de confusin enriquecida</span>
<span class="n">cm_svc</span> <span class="o">=</span><span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_svc</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="n">cm_pct</span> <span class="o">=</span> <span class="n">cm_svc</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm_svc</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">labels_svc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm_svc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_pct</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_svc</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm_svc</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_pct</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels_svc</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
            <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
            <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Matriz de Confusin - SVC + SMOTE + Umbral 0.35"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Clase Real"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1">#  Guardar predicciones en CSV</span>
<span class="n">df_pred_svc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"Real"</span><span class="p">:</span> <span class="n">y_test_svc</span><span class="p">,</span>
    <span class="s2">"Prediccin Ajustada"</span><span class="p">:</span> <span class="n">y_pred_svc</span><span class="p">,</span>
    <span class="s2">"Probabilidad_Diabetes"</span><span class="p">:</span> <span class="n">y_proba_svc</span>
<span class="p">})</span>

<span class="n">nombre_csv_svc</span> <span class="o">=</span> <span class="s2">"predicciones_svc_smote_umbral_035.csv"</span>
<span class="n">ruta_csv_svc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_csv_svc</span><span class="p">)</span>
<span class="n">df_pred_svc</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_csv_svc</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> CSV guardado correctamente en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_csv_svc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="15.3.-Comparativa-tabular-de-m%C3%A9tricas"><strong>15.3. Comparativa tabular de mtricas</strong><a class="anchor-link" href="#15.3.-Comparativa-tabular-de-m%C3%A9tricas"></a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Resumen en forma de tabla de las mtricas clave</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Crear DataFrame resumen de mtricas</span>
<span class="n">df_comparativa_modelos</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">"Modelo"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"LogisticRegression Optuna (IMC ALTO)"</span><span class="p">,</span>
        <span class="s2">"XGBoost Optuna (IMC BAJO)"</span><span class="p">,</span>
        <span class="s2">"SVC Umbral 0.35 (sin segmentar)"</span>
    <span class="p">],</span>
    <span class="s2">"Accuracy"</span><span class="p">:</span> <span class="p">[</span><span class="n">accuracy_lr</span><span class="p">,</span> <span class="n">accuracy_xgb</span><span class="p">,</span> <span class="n">accuracy_svc</span><span class="p">],</span>
    <span class="s2">"Precision"</span><span class="p">:</span> <span class="p">[</span><span class="n">precision_lr</span><span class="p">,</span> <span class="n">precision_xgb</span><span class="p">,</span> <span class="n">precision_svc</span><span class="p">],</span>
    <span class="s2">"Recall"</span><span class="p">:</span> <span class="p">[</span><span class="n">recall_lr</span><span class="p">,</span> <span class="n">recall_xgb</span><span class="p">,</span> <span class="n">recall_svc</span><span class="p">],</span>
    <span class="s2">"F1-score"</span><span class="p">:</span> <span class="p">[</span><span class="n">f1_lr</span><span class="p">,</span> <span class="n">f1_xgb</span><span class="p">,</span> <span class="n">f1_svc</span><span class="p">],</span>
    <span class="s2">"ROC-AUC"</span><span class="p">:</span> <span class="p">[</span><span class="n">roc_auc_lr</span><span class="p">,</span> <span class="n">roc_auc_xgb</span><span class="p">,</span> <span class="n">roc_auc_svc</span><span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Mostrar tabla</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_comparativa_modelos</span><span class="p">)</span>

<span class="c1"># Matriz de confusin</span>

<span class="c1"># LogisticRegression (IMC ALTO)</span>
<span class="n">cm_lr</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">" Matriz de Confusin - LogisticRegression (IMC ALTO):</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm_lr</span><span class="p">)</span>

<span class="c1"># XGBoost (IMC BAJO)</span>
<span class="n">cm_xgb</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Matriz de Confusin - XGBoost (IMC BAJO):</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm_xgb</span><span class="p">)</span>

<span class="c1"># SVC (sin segmentar)</span>
<span class="n">cm_svc</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Matriz de Confusin - SVC (sin segmentar):</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">cm_svc</span><span class="p">)</span>

<span class="c1"># Listado de datos</span>
<span class="n">modelos_mc</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"LogReg (IMC ALTO)"</span><span class="p">,</span> <span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"XGBoost (IMC BAJO)"</span><span class="p">,</span> <span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"SVC (General)"</span><span class="p">,</span> <span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="p">]</span>

<span class="c1"># Grfica</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="p">(</span><span class="n">nombre</span><span class="p">,</span> <span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">modelos_mc</span><span class="p">):</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">cm_pct</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float'</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cm</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">cm_pct</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span>

    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm_pct</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
                <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
                <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Real"</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Matriz de Confusin  Modelos Clnicos Optimizados"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="15.4-Visualizaci%C3%B3n-de-curvas-ROC"><strong>15.4 Visualizacin de curvas ROC</strong><a class="anchor-link" href="#15.4-Visualizaci%C3%B3n-de-curvas-ROC"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="c1"># Obtener curvas ROC</span>
<span class="n">fpr_lr</span><span class="p">,</span> <span class="n">tpr_lr</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_proba_lr</span><span class="p">)</span>
<span class="n">fpr_xgb</span><span class="p">,</span> <span class="n">tpr_xgb</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_proba_xgb</span><span class="p">)</span>
<span class="n">fpr_svc</span><span class="p">,</span> <span class="n">tpr_svc</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_proba_svc</span><span class="p">)</span>

<span class="c1"># AUC ya calculadas como: roc_auc_lr, roc_auc_xgb, roc_auc_svc</span>

<span class="c1"># Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr_lr</span><span class="p">,</span> <span class="n">tpr_lr</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"LogReg (AUC = </span><span class="si">{</span><span class="n">roc_auc_lr</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr_xgb</span><span class="p">,</span> <span class="n">tpr_xgb</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"XGBoost (AUC = </span><span class="si">{</span><span class="n">roc_auc_xgb</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr_svc</span><span class="p">,</span> <span class="n">tpr_svc</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"SVC (AUC = </span><span class="si">{</span><span class="n">roc_auc_svc</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>

<span class="c1"># Lnea aleatoria</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">'k--'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Aleatorio"</span><span class="p">)</span>

<span class="c1"># Esttica general</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Tasa de Falsos Positivos (FPR)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Tasa de Verdaderos Positivos (TPR)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curvas ROC  Modelos Clnicos Optimizados"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"lower right"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="15.5.-Guardado-de-las-m%C3%A9tricas,-curvas-y-matrices-de-confusi%C3%B3n"><strong>15.5. Guardado de las mtricas, curvas y matrices de confusin</strong><a class="anchor-link" href="#15.5.-Guardado-de-las-m%C3%A9tricas,-curvas-y-matrices-de-confusi%C3%B3n"></a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In[]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-python"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Fecha actual para versionado</span>
<span class="n">fecha_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y%m</span><span class="si">%d</span><span class="s1">'</span><span class="p">)</span>

<span class="c1"># Ruta base de resultados</span>
<span class="n">ruta_resultados</span> <span class="o">=</span> <span class="s2">"/content/drive/MyDrive/FORMACIONES/R2DS Cristian Donaire/proyecto_diabetes/resultados"</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 1. Guardar tabla comparativa de mtricas</span>
<span class="n">nombre_csv</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"comparativa_metricas_modelos_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.csv"</span>
<span class="n">nombre_txt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"comparativa_metricas_modelos_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.txt"</span>

<span class="n">ruta_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_csv</span><span class="p">)</span>
<span class="n">ruta_txt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="n">nombre_txt</span><span class="p">)</span>

<span class="c1"># Guardar como CSV</span>
<span class="n">df_comparativa_modelos</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">ruta_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Guardar tambin como TXT</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">ruta_txt</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"Comparativa de mtricas de modelos optimizados (punto 15.3)</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">df_comparativa_modelos</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Guardada comparativa en:</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_csv</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">ruta_txt</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># 2. Guardar imagen de la curva ROC (15.4)</span>
<span class="n">ruta_roc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"roc_modelos_optim_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.png"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr_lr</span><span class="p">,</span> <span class="n">tpr_lr</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"LogReg (AUC = </span><span class="si">{</span><span class="n">roc_auc_lr</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr_xgb</span><span class="p">,</span> <span class="n">tpr_xgb</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"XGBoost (AUC = </span><span class="si">{</span><span class="n">roc_auc_xgb</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr_svc</span><span class="p">,</span> <span class="n">tpr_svc</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"SVC (AUC = </span><span class="si">{</span><span class="n">roc_auc_svc</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">"k--"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Aleatorio"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Tasa de Falsos Positivos (FPR)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Tasa de Verdaderos Positivos (TPR)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Curvas ROC  Modelos Clnicos Optimizados"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"lower right"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">ruta_roc</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Guardada curva ROC en: </span><span class="si">{</span><span class="n">ruta_roc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># 3. Guardar matrices de confusin como imgenes (15.3.1)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="n">modelos_mc</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"logreg"</span><span class="p">,</span> <span class="n">y_test_segment_alto</span><span class="p">,</span> <span class="n">y_pred_lr</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"xgb"</span><span class="p">,</span> <span class="n">y_test_segment_bajo</span><span class="p">,</span> <span class="n">y_pred_xgb</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"svc"</span><span class="p">,</span> <span class="n">y_test_final</span><span class="p">,</span> <span class="n">y_pred_svc</span><span class="p">)</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">y_real</span><span class="p">,</span> <span class="n">y_pred</span> <span class="ow">in</span> <span class="n">modelos_mc</span><span class="p">:</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_real</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">"d"</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">,</span>
                <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">],</span>
                <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s2">"No Diabetes"</span><span class="p">,</span> <span class="s2">"Diabetes"</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Matriz de Confusin - </span><span class="si">{</span><span class="n">nombre</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">"Prediccin"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Real"</span><span class="p">)</span>
    <span class="n">ruta_img</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ruta_resultados</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"matriz_confusion_</span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">fecha_actual</span><span class="si">}</span><span class="s2">.png"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">ruta_img</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">" Guardada matriz de confusin </span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2"> en: </span><span class="si">{</span><span class="n">ruta_img</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="16.-Guardado-final-de-resultados:-modelos,-objetos-y-trazabilidad"><strong>16. Guardado final de resultados: modelos, objetos y trazabilidad</strong><a class="anchor-link" href="#16.-Guardado-final-de-resultados:-modelos,-objetos-y-trazabilidad"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Para cerrar correctamente el proyecto, se han guardado los archivos clave en su estructura final. Esto permite reproducir, desplegar y reutilizar el modelo fcilmente.</p>
<p><strong>Rutas de los objetos guardados</strong></p>
<ul>
<li><p><strong>Modelos optimizados (<code>.pkl</code>)</strong>  Carpeta: /modelos_optimizados/</p>
<ol>
<li>modelo_lr (Logistic Regression) lr_opt_optuna_smote_total_alto.pkl IMC ALTO</li>
<li>modelo_xgb (XGBoost) xgb_opt_optuna_smote_parcial_bajo.pkl IMC BAJO</li>
<li>modelo_svc (SVC) svc_opt_smote_v1_umbral035.pkl No segmentado (umbral)</li>
</ol>
</li>
<li><p><strong>Pipeline de transformacin (<code>.pkl</code>)</strong>  Carpeta: /pipelines/</p>
</li>
<li><p>Archivo: pipeline_v1.pkl</p>
</li>
<li><p>Contiene:</p>
<ul>
<li>Imputacin (SimpleImputer)</li>
<li>Transformacin (PowerTransformer)</li>
<li>Escalado (StandardScaler)</li>
</ul>
</li>
<li><p><strong>Resultados finales</strong>  Carpeta: /resultados/</p>
</li>
<li><p>Comparativa de mtricas en <code>.csv</code> y <code>.txt</code></p>
</li>
<li><p>Curvas ROC de los modelos</p>
</li>
<li><p>Matrices de confusin por modelo</p>
</li>
<li><p>CSV con predicciones</p>
</li>
</ul>
<p><strong>Trazabilidad para prediccin con nuevos datos</strong></p>
<p>Cualquier dato nuevo debe pasar <strong>exactamente por el mismo proceso de transformacin</strong> antes de entrar al modelo.</p>
<ul>
<li><strong>Pasos obligatorios:</strong><ol>
<li><strong>Cargar el pipeline_v1.pkl con joblib.load()</strong></li>
<li>Aplicar .transform() sobre los datos nuevos:</li>
</ol>
<ul>
<li>nuevo_dato_transformado = pipeline_v1.transform(df_nuevo)</li>
</ul>
</li>
</ul>
<ol start="3">
<li>Cargar el modelo:<ul>
<li>modelo = joblib.load("modelos_optimizados/modelo_svc.pkl")</li>
</ul>
</li>
<li>Realizar la prediccin:<ul>
<li>modelo.predict(nuevo_dato_transformado)</li>
<li>modelo.predict_proba(nuevo_dato_transformado) # si se quiere la probabilidad</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="17-Conclusi%C3%B3n-cl%C3%ADnica-y-cierre"><strong>17 Conclusin clnica y cierre</strong><a class="anchor-link" href="#17-Conclusi%C3%B3n-cl%C3%ADnica-y-cierre"></a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><strong>Conclusin clnica preliminar y recomendacin final</strong></p>
<p>Tras comparar los tres modelos optimizados, aplicando distintas estrategias (segmentacin por IMC, ajuste de umbral, y tcnicas de balanceo como SMOTE), se identifican diferencias clave en su rendimiento:</p>
<ul>
<li><p><strong>LogisticRegression (Optuna + SMOTE TOTAL, IMC ALTO)</strong>, destaca por su <strong>recall muy alto</strong>, lo que lo convierte en una herramienta especialmente til para <strong>detectar positivos sin fallar</strong> (muy adecuado para poblaciones con riesgo elevado). Su uso es ideal para <strong>grupos de alto riesgo (IMC  30)</strong>.</p>
</li>
<li><p><strong>XGBoost (Optuna + SMOTE PARCIAL, IMC BAJO)</strong>, logra un <strong>buen equilibrio entre precisin y F1-score</strong>, ayudando a reducir falsos positivos sin perder sensibilidad. Se adapta mejor a pacientes con <strong>menor IMC</strong>.</p>
</li>
<li><p><strong>SVC (ajuste de umbral a 0.35, sin segmentacin)</strong>, obtiene un rendimiento <strong>estable y generalizado</strong>, sin necesidad de segmentar poblaciones, por lo que es ms fcil de implementar en entornos clnicos donde se busque una solucin <strong>nica, sencilla y operativa</strong> para todos los pacientes.</p>
</li>
</ul>
<p><strong>Recomendacin final</strong></p>
<p>Dado el contexto de implementacin clnica y la necesidad de una herramienta accesible:</p>
<ul>
<li>Se recomienda el uso del modelo <strong>SVC con ajuste de umbral (0.35)</strong> como primera opcin, <strong>por su equilibrio y facilidad de uso sin segmentacin</strong>.</li>
<li>No obstante, se sugiere mantener como opcin complementaria la <strong>LogisticRegression para IMC ALTO</strong> si se busca mayor sensibilidad en ese subgrupo.</li>
<li><strong>Siguiente paso clnico:</strong> Validacin externa en cohortes reales, idealmente prospectivas, para confirmar la utilidad del modelo antes de su despliegue clnico.</li>
</ul>
<p>Este punto marca la <strong>finalizacin del anlisis clnico del proyecto</strong>, con todos los modelos, objetos y resultados correctamente guardados y trazados.</p>
</div>
</div>
</div>
</div>
</main>
</body>
<script type="application/vnd.jupyter.widget-state+json">
{"0e9af4953d95413893b1858fb35d2d72": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_2200cd333f174f1780ac09042ad8736d", "max": 1, "min": 0, "orientation": "horizontal", "style": "IPY_MODEL_843252193f9c4e3d90939e4726cf7311", "value": 1}}, "1031cefeca654a98a2ecad5af5d35515": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "2200cd333f174f1780ac09042ad8736d": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "22f00140fb08412095e4782f0244b668": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "2edd61279d2a4900b017315640979dba": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3a643cd2a607499db6223277da8d7c19": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3d76dc2593cd47d8af8f9f971614a13d": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "417bbef98e984c1c847215dfdc6504c3": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "41f5278720b749f9b657a5514e15694f": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "421334efe5ab4f0bb8a19b76766fb4dc": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "42aba868123042fcbab1889d8a989fbf": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "469f6d134aa94808b8291f0d9f2f6485": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_c0c1b9bd31f2419e9ed0e73b88a1a14c", "placeholder": "\u200b", "style": "IPY_MODEL_583c4a40c1cd4826a3befc70619b84bd", "value": "\u20071\/1\u2007[00:00&lt;00:00,\u2007\u20078.18it\/s]"}}, "483d5a28db89479fa633250bc102366b": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_a155d1efd5164a97a764e83af8bd3a14", "placeholder": "\u200b", "style": "IPY_MODEL_42aba868123042fcbab1889d8a989fbf", "value": "Summarize\u2007dataset:\u2007100%"}}, "513b4f80cd0040279c6fdcb0d9f7a907": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_9d0469724db6409895a4ca0de883c106", "IPY_MODEL_c4cd1acce11546acb0587e444d9e918e", "IPY_MODEL_6ba53d9b5d934156a22e22de688410f9"], "layout": "IPY_MODEL_3a643cd2a607499db6223277da8d7c19"}}, "583c4a40c1cd4826a3befc70619b84bd": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "63cb4dfa017542c6879cee454a276162": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "68a9d01330a44cc39a907b52961b1474": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6997c7343a4b413781120f8fffd7120b": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "69c5c524b0464dfb9502146eb334d29e": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_eec5c442193a4de1b16809cc51e55744", "IPY_MODEL_0e9af4953d95413893b1858fb35d2d72", "IPY_MODEL_8c7a7e2f943746f0ac145ee09360a948"], "layout": "IPY_MODEL_63cb4dfa017542c6879cee454a276162"}}, "6ba53d9b5d934156a22e22de688410f9": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_1031cefeca654a98a2ecad5af5d35515", "placeholder": "\u200b", "style": "IPY_MODEL_b11fc5e6f93a42ffb022739bef45f8ca", "value": "\u20071\/1\u2007[00:05&lt;00:00,\u2007\u20075.02s\/it]"}}, "739ad6fab3e54be496e801d95e1fb43f": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "755288dfab7840f4bf6b065d395d9b89": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_c4187fa50edb4e279ecca6233a6ee6ea", "placeholder": "\u200b", "style": "IPY_MODEL_739ad6fab3e54be496e801d95e1fb43f", "value": "Export\u2007report\u2007to\u2007file:\u2007100%"}}, "797e67cb4013443086f745e028a50096": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_483d5a28db89479fa633250bc102366b", "IPY_MODEL_f8e13529fabb41968565290c9ffbc985", "IPY_MODEL_d1da35e300a84797aedfcab5853d7583"], "layout": "IPY_MODEL_417bbef98e984c1c847215dfdc6504c3"}}, "7df8b5a126cb47a8b0e2d83b2bf2bfcc": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "843252193f9c4e3d90939e4726cf7311": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "8c7a7e2f943746f0ac145ee09360a948": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_41f5278720b749f9b657a5514e15694f", "placeholder": "\u200b", "style": "IPY_MODEL_22f00140fb08412095e4782f0244b668", "value": "\u20071\/1\u2007[00:07&lt;00:00,\u2007\u20077.78s\/it]"}}, "91ef7803859e4d669d5653c45dc7763a": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "9d0469724db6409895a4ca0de883c106": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_d40f92fa3c454a8187942da8212e5e2c", "placeholder": "\u200b", "style": "IPY_MODEL_7df8b5a126cb47a8b0e2d83b2bf2bfcc", "value": "Render\u2007HTML:\u2007100%"}}, "a155d1efd5164a97a764e83af8bd3a14": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b11fc5e6f93a42ffb022739bef45f8ca": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "c0c1b9bd31f2419e9ed0e73b88a1a14c": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c4187fa50edb4e279ecca6233a6ee6ea": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c4cd1acce11546acb0587e444d9e918e": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_421334efe5ab4f0bb8a19b76766fb4dc", "max": 1, "min": 0, "orientation": "horizontal", "style": "IPY_MODEL_cf9c8079ed6e4fb8a10d56465e339513", "value": 1}}, "cf802d7081814dc2b5ad1f851fcebe7a": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "cf9c8079ed6e4fb8a10d56465e339513": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "d1da35e300a84797aedfcab5853d7583": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_dbc9d7f21bde493290a12f817200c9ce", "placeholder": "\u200b", "style": "IPY_MODEL_f2b619bf969a49c8b172c39bb73a7442", "value": "\u200782\/82\u2007[00:21&lt;00:00,\u2007\u20073.46it\/s,\u2007Completed]"}}, "d40f92fa3c454a8187942da8212e5e2c": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "dbc9d7f21bde493290a12f817200c9ce": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e589e7514fb046edb71938fdc9f153c2": {"model_module": "@jupyter-widgets\/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets\/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "eec5c442193a4de1b16809cc51e55744": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_68a9d01330a44cc39a907b52961b1474", "placeholder": "\u200b", "style": "IPY_MODEL_91ef7803859e4d669d5653c45dc7763a", "value": "Generate\u2007report\u2007structure:\u2007100%"}}, "f2b619bf969a49c8b172c39bb73a7442": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets\/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "f7e67f6cb23d4c2b9419bb5fbea01960": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_e589e7514fb046edb71938fdc9f153c2", "max": 1, "min": 0, "orientation": "horizontal", "style": "IPY_MODEL_6997c7343a4b413781120f8fffd7120b", "value": 1}}, "f8e13529fabb41968565290c9ffbc985": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_3d76dc2593cd47d8af8f9f971614a13d", "max": 5, "min": 0, "orientation": "horizontal", "style": "IPY_MODEL_cf802d7081814dc2b5ad1f851fcebe7a", "value": 5}}, "ff5440b32fc9419f9938245c7d6bb542": {"model_module": "@jupyter-widgets\/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets\/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets\/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_755288dfab7840f4bf6b065d395d9b89", "IPY_MODEL_f7e67f6cb23d4c2b9419bb5fbea01960", "IPY_MODEL_469f6d134aa94808b8291f0d9f2f6485"], "layout": "IPY_MODEL_2edd61279d2a4900b017315640979dba"}}}
</script>
</html>
